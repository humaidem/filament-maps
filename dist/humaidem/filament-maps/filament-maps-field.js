var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __esm=(fn,res)=>function(){return fn&&(res=(0,fn[__getOwnPropNames(fn)[0]])(fn=0)),res};var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var require_leaflet_src=__commonJS({"node_modules/leaflet/dist/leaflet-src.js"(exports,module){(function(global,factory){typeof exports=="object"&&typeof module<"u"?factory(exports):typeof define=="function"&&define.amd?define(["exports"],factory):(global=typeof globalThis<"u"?globalThis:global||self,factory(global.leaflet={}))})(exports,function(exports2){"use strict";var version="1.9.4";function extend4(dest){var i,j,len,src;for(j=1,len=arguments.length;j<len;j++){src=arguments[j];for(i in src)dest[i]=src[i]}return dest}var create$2=Object.create||function(){function F(){}return function(proto){return F.prototype=proto,new F}}();function bind(fn,obj){var slice2=Array.prototype.slice;if(fn.bind)return fn.bind.apply(fn,slice2.call(arguments,1));var args=slice2.call(arguments,2);return function(){return fn.apply(obj,args.length?args.concat(slice2.call(arguments)):arguments)}}var lastId=0;function stamp(obj){return"_leaflet_id"in obj||(obj._leaflet_id=++lastId),obj._leaflet_id}function throttle(fn,time,context){var lock,args,wrapperFn,later;return later=function(){lock=!1,args&&(wrapperFn.apply(context,args),args=!1)},wrapperFn=function(){lock?args=arguments:(fn.apply(context,arguments),setTimeout(later,time),lock=!0)},wrapperFn}function wrapNum(x2,range,includeMax){var max3=range[1],min4=range[0],d=max3-min4;return x2===max3&&includeMax?x2:((x2-min4)%d+d)%d+min4}function falseFn(){return!1}function formatNum(num,precision){if(precision===!1)return num;var pow3=Math.pow(10,precision===void 0?6:precision);return Math.round(num*pow3)/pow3}function trim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function splitWords(str){return trim(str).split(/\s+/)}function setOptions(obj,options){Object.prototype.hasOwnProperty.call(obj,"options")||(obj.options=obj.options?create$2(obj.options):{});for(var i in options)obj.options[i]=options[i];return obj.options}function getParamString(obj,existingUrl,uppercase){var params=[];for(var i in obj)params.push(encodeURIComponent(uppercase?i.toUpperCase():i)+"="+encodeURIComponent(obj[i]));return(!existingUrl||existingUrl.indexOf("?")===-1?"?":"&")+params.join("&")}var templateRe=/\{ *([\w_ -]+) *\}/g;function template(str,data){return str.replace(templateRe,function(str2,key){var value=data[key];if(value===void 0)throw new Error("No value provided for variable "+str2);return typeof value=="function"&&(value=value(data)),value})}var isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};function indexOf2(array2,el){for(var i=0;i<array2.length;i++)if(array2[i]===el)return i;return-1}var emptyImageUrl="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function getPrefixed(name){return window["webkit"+name]||window["moz"+name]||window["ms"+name]}var lastTime=0;function timeoutDefer(fn){var time=+new Date,timeToCall=Math.max(0,16-(time-lastTime));return lastTime=time+timeToCall,window.setTimeout(fn,timeToCall)}var requestFn=window.requestAnimationFrame||getPrefixed("RequestAnimationFrame")||timeoutDefer,cancelFn=window.cancelAnimationFrame||getPrefixed("CancelAnimationFrame")||getPrefixed("CancelRequestAnimationFrame")||function(id){window.clearTimeout(id)};function requestAnimFrame(fn,context,immediate){if(immediate&&requestFn===timeoutDefer)fn.call(context);else return requestFn.call(window,bind(fn,context))}function cancelAnimFrame(id){id&&cancelFn.call(window,id)}var Util={__proto__:null,extend:extend4,create:create$2,bind,get lastId(){return lastId},stamp,throttle,wrapNum,falseFn,formatNum,trim,splitWords,setOptions,getParamString,template,isArray,indexOf:indexOf2,emptyImageUrl,requestFn,cancelFn,requestAnimFrame,cancelAnimFrame};function Class(){}Class.extend=function(props){var NewClass=function(){setOptions(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},parentProto=NewClass.__super__=this.prototype,proto=create$2(parentProto);proto.constructor=NewClass,NewClass.prototype=proto;for(var i in this)Object.prototype.hasOwnProperty.call(this,i)&&i!=="prototype"&&i!=="__super__"&&(NewClass[i]=this[i]);return props.statics&&extend4(NewClass,props.statics),props.includes&&(checkDeprecatedMixinEvents(props.includes),extend4.apply(null,[proto].concat(props.includes))),extend4(proto,props),delete proto.statics,delete proto.includes,proto.options&&(proto.options=parentProto.options?create$2(parentProto.options):{},extend4(proto.options,props.options)),proto._initHooks=[],proto.callInitHooks=function(){if(!this._initHooksCalled){parentProto.callInitHooks&&parentProto.callInitHooks.call(this),this._initHooksCalled=!0;for(var i2=0,len=proto._initHooks.length;i2<len;i2++)proto._initHooks[i2].call(this)}},NewClass},Class.include=function(props){var parentOptions=this.prototype.options;return extend4(this.prototype,props),props.options&&(this.prototype.options=parentOptions,this.mergeOptions(props.options)),this},Class.mergeOptions=function(options){return extend4(this.prototype.options,options),this},Class.addInitHook=function(fn){var args=Array.prototype.slice.call(arguments,1),init8=typeof fn=="function"?fn:function(){this[fn].apply(this,args)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(init8),this};function checkDeprecatedMixinEvents(includes){if(!(typeof L>"u"||!L||!L.Mixin)){includes=isArray(includes)?includes:[includes];for(var i=0;i<includes.length;i++)includes[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Events={on:function(types,fn,context){if(typeof types=="object")for(var type2 in types)this._on(type2,types[type2],fn);else{types=splitWords(types);for(var i=0,len=types.length;i<len;i++)this._on(types[i],fn,context)}return this},off:function(types,fn,context){if(!arguments.length)delete this._events;else if(typeof types=="object")for(var type2 in types)this._off(type2,types[type2],fn);else{types=splitWords(types);for(var removeAll=arguments.length===1,i=0,len=types.length;i<len;i++)removeAll?this._off(types[i]):this._off(types[i],fn,context)}return this},_on:function(type2,fn,context,_once){if(typeof fn!="function"){console.warn("wrong listener type: "+typeof fn);return}if(this._listens(type2,fn,context)===!1){context===this&&(context=void 0);var newListener={fn,ctx:context};_once&&(newListener.once=!0),this._events=this._events||{},this._events[type2]=this._events[type2]||[],this._events[type2].push(newListener)}},_off:function(type2,fn,context){var listeners,i,len;if(this._events&&(listeners=this._events[type2],!!listeners)){if(arguments.length===1){if(this._firingCount)for(i=0,len=listeners.length;i<len;i++)listeners[i].fn=falseFn;delete this._events[type2];return}if(typeof fn!="function"){console.warn("wrong listener type: "+typeof fn);return}var index2=this._listens(type2,fn,context);if(index2!==!1){var listener=listeners[index2];this._firingCount&&(listener.fn=falseFn,this._events[type2]=listeners=listeners.slice()),listeners.splice(index2,1)}}},fire:function(type2,data,propagate){if(!this.listens(type2,propagate))return this;var event=extend4({},data,{type:type2,target:this,sourceTarget:data&&data.sourceTarget||this});if(this._events){var listeners=this._events[type2];if(listeners){this._firingCount=this._firingCount+1||1;for(var i=0,len=listeners.length;i<len;i++){var l=listeners[i],fn=l.fn;l.once&&this.off(type2,fn,l.ctx),fn.call(l.ctx||this,event)}this._firingCount--}}return propagate&&this._propagateEvent(event),this},listens:function(type2,fn,context,propagate){typeof type2!="string"&&console.warn('"string" type argument expected');var _fn=fn;typeof fn!="function"&&(propagate=!!fn,_fn=void 0,context=void 0);var listeners=this._events&&this._events[type2];if(listeners&&listeners.length&&this._listens(type2,_fn,context)!==!1)return!0;if(propagate){for(var id in this._eventParents)if(this._eventParents[id].listens(type2,fn,context,propagate))return!0}return!1},_listens:function(type2,fn,context){if(!this._events)return!1;var listeners=this._events[type2]||[];if(!fn)return!!listeners.length;context===this&&(context=void 0);for(var i=0,len=listeners.length;i<len;i++)if(listeners[i].fn===fn&&listeners[i].ctx===context)return i;return!1},once:function(types,fn,context){if(typeof types=="object")for(var type2 in types)this._on(type2,types[type2],fn,!0);else{types=splitWords(types);for(var i=0,len=types.length;i<len;i++)this._on(types[i],fn,context,!0)}return this},addEventParent:function(obj){return this._eventParents=this._eventParents||{},this._eventParents[stamp(obj)]=obj,this},removeEventParent:function(obj){return this._eventParents&&delete this._eventParents[stamp(obj)],this},_propagateEvent:function(e){for(var id in this._eventParents)this._eventParents[id].fire(e.type,extend4({layer:e.target,propagatedFrom:e.target},e),!0)}};Events.addEventListener=Events.on,Events.removeEventListener=Events.clearAllEventListeners=Events.off,Events.addOneTimeEventListener=Events.once,Events.fireEvent=Events.fire,Events.hasEventListeners=Events.listens;var Evented=Class.extend(Events);function Point2(x2,y2,round){this.x=round?Math.round(x2):x2,this.y=round?Math.round(y2):y2}var trunc2=Math.trunc||function(v){return v>0?Math.floor(v):Math.ceil(v)};Point2.prototype={clone:function(){return new Point2(this.x,this.y)},add:function(point4){return this.clone()._add(toPoint(point4))},_add:function(point4){return this.x+=point4.x,this.y+=point4.y,this},subtract:function(point4){return this.clone()._subtract(toPoint(point4))},_subtract:function(point4){return this.x-=point4.x,this.y-=point4.y,this},divideBy:function(num){return this.clone()._divideBy(num)},_divideBy:function(num){return this.x/=num,this.y/=num,this},multiplyBy:function(num){return this.clone()._multiplyBy(num)},_multiplyBy:function(num){return this.x*=num,this.y*=num,this},scaleBy:function(point4){return new Point2(this.x*point4.x,this.y*point4.y)},unscaleBy:function(point4){return new Point2(this.x/point4.x,this.y/point4.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=trunc2(this.x),this.y=trunc2(this.y),this},distanceTo:function(point4){point4=toPoint(point4);var x2=point4.x-this.x,y2=point4.y-this.y;return Math.sqrt(x2*x2+y2*y2)},equals:function(point4){return point4=toPoint(point4),point4.x===this.x&&point4.y===this.y},contains:function(point4){return point4=toPoint(point4),Math.abs(point4.x)<=Math.abs(this.x)&&Math.abs(point4.y)<=Math.abs(this.y)},toString:function(){return"Point("+formatNum(this.x)+", "+formatNum(this.y)+")"}};function toPoint(x2,y2,round){return x2 instanceof Point2?x2:isArray(x2)?new Point2(x2[0],x2[1]):x2==null?x2:typeof x2=="object"&&"x"in x2&&"y"in x2?new Point2(x2.x,x2.y):new Point2(x2,y2,round)}function Bounds(a,b){if(a)for(var points=b?[a,b]:a,i=0,len=points.length;i<len;i++)this.extend(points[i])}Bounds.prototype={extend:function(obj){var min22,max22;if(!obj)return this;if(obj instanceof Point2||typeof obj[0]=="number"||"x"in obj)min22=max22=toPoint(obj);else if(obj=toBounds(obj),min22=obj.min,max22=obj.max,!min22||!max22)return this;return!this.min&&!this.max?(this.min=min22.clone(),this.max=max22.clone()):(this.min.x=Math.min(min22.x,this.min.x),this.max.x=Math.max(max22.x,this.max.x),this.min.y=Math.min(min22.y,this.min.y),this.max.y=Math.max(max22.y,this.max.y)),this},getCenter:function(round){return toPoint((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,round)},getBottomLeft:function(){return toPoint(this.min.x,this.max.y)},getTopRight:function(){return toPoint(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(obj){var min4,max3;return typeof obj[0]=="number"||obj instanceof Point2?obj=toPoint(obj):obj=toBounds(obj),obj instanceof Bounds?(min4=obj.min,max3=obj.max):min4=max3=obj,min4.x>=this.min.x&&max3.x<=this.max.x&&min4.y>=this.min.y&&max3.y<=this.max.y},intersects:function(bounds){bounds=toBounds(bounds);var min4=this.min,max3=this.max,min22=bounds.min,max22=bounds.max,xIntersects=max22.x>=min4.x&&min22.x<=max3.x,yIntersects=max22.y>=min4.y&&min22.y<=max3.y;return xIntersects&&yIntersects},overlaps:function(bounds){bounds=toBounds(bounds);var min4=this.min,max3=this.max,min22=bounds.min,max22=bounds.max,xOverlaps=max22.x>min4.x&&min22.x<max3.x,yOverlaps=max22.y>min4.y&&min22.y<max3.y;return xOverlaps&&yOverlaps},isValid:function(){return!!(this.min&&this.max)},pad:function(bufferRatio){var min4=this.min,max3=this.max,heightBuffer=Math.abs(min4.x-max3.x)*bufferRatio,widthBuffer=Math.abs(min4.y-max3.y)*bufferRatio;return toBounds(toPoint(min4.x-heightBuffer,min4.y-widthBuffer),toPoint(max3.x+heightBuffer,max3.y+widthBuffer))},equals:function(bounds){return bounds?(bounds=toBounds(bounds),this.min.equals(bounds.getTopLeft())&&this.max.equals(bounds.getBottomRight())):!1}};function toBounds(a,b){return!a||a instanceof Bounds?a:new Bounds(a,b)}function LatLngBounds(corner1,corner2){if(corner1)for(var latlngs=corner2?[corner1,corner2]:corner1,i=0,len=latlngs.length;i<len;i++)this.extend(latlngs[i])}LatLngBounds.prototype={extend:function(obj){var sw=this._southWest,ne=this._northEast,sw2,ne2;if(obj instanceof LatLng)sw2=obj,ne2=obj;else if(obj instanceof LatLngBounds){if(sw2=obj._southWest,ne2=obj._northEast,!sw2||!ne2)return this}else return obj?this.extend(toLatLng(obj)||toLatLngBounds(obj)):this;return!sw&&!ne?(this._southWest=new LatLng(sw2.lat,sw2.lng),this._northEast=new LatLng(ne2.lat,ne2.lng)):(sw.lat=Math.min(sw2.lat,sw.lat),sw.lng=Math.min(sw2.lng,sw.lng),ne.lat=Math.max(ne2.lat,ne.lat),ne.lng=Math.max(ne2.lng,ne.lng)),this},pad:function(bufferRatio){var sw=this._southWest,ne=this._northEast,heightBuffer=Math.abs(sw.lat-ne.lat)*bufferRatio,widthBuffer=Math.abs(sw.lng-ne.lng)*bufferRatio;return new LatLngBounds(new LatLng(sw.lat-heightBuffer,sw.lng-widthBuffer),new LatLng(ne.lat+heightBuffer,ne.lng+widthBuffer))},getCenter:function(){return new LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(obj){typeof obj[0]=="number"||obj instanceof LatLng||"lat"in obj?obj=toLatLng(obj):obj=toLatLngBounds(obj);var sw=this._southWest,ne=this._northEast,sw2,ne2;return obj instanceof LatLngBounds?(sw2=obj.getSouthWest(),ne2=obj.getNorthEast()):sw2=ne2=obj,sw2.lat>=sw.lat&&ne2.lat<=ne.lat&&sw2.lng>=sw.lng&&ne2.lng<=ne.lng},intersects:function(bounds){bounds=toLatLngBounds(bounds);var sw=this._southWest,ne=this._northEast,sw2=bounds.getSouthWest(),ne2=bounds.getNorthEast(),latIntersects=ne2.lat>=sw.lat&&sw2.lat<=ne.lat,lngIntersects=ne2.lng>=sw.lng&&sw2.lng<=ne.lng;return latIntersects&&lngIntersects},overlaps:function(bounds){bounds=toLatLngBounds(bounds);var sw=this._southWest,ne=this._northEast,sw2=bounds.getSouthWest(),ne2=bounds.getNorthEast(),latOverlaps=ne2.lat>sw.lat&&sw2.lat<ne.lat,lngOverlaps=ne2.lng>sw.lng&&sw2.lng<ne.lng;return latOverlaps&&lngOverlaps},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(bounds,maxMargin){return bounds?(bounds=toLatLngBounds(bounds),this._southWest.equals(bounds.getSouthWest(),maxMargin)&&this._northEast.equals(bounds.getNorthEast(),maxMargin)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function toLatLngBounds(a,b){return a instanceof LatLngBounds?a:new LatLngBounds(a,b)}function LatLng(lat,lng,alt){if(isNaN(lat)||isNaN(lng))throw new Error("Invalid LatLng object: ("+lat+", "+lng+")");this.lat=+lat,this.lng=+lng,alt!==void 0&&(this.alt=+alt)}LatLng.prototype={equals:function(obj,maxMargin){if(!obj)return!1;obj=toLatLng(obj);var margin=Math.max(Math.abs(this.lat-obj.lat),Math.abs(this.lng-obj.lng));return margin<=(maxMargin===void 0?1e-9:maxMargin)},toString:function(precision){return"LatLng("+formatNum(this.lat,precision)+", "+formatNum(this.lng,precision)+")"},distanceTo:function(other){return Earth.distance(this,toLatLng(other))},wrap:function(){return Earth.wrapLatLng(this)},toBounds:function(sizeInMeters){var latAccuracy=180*sizeInMeters/40075017,lngAccuracy=latAccuracy/Math.cos(Math.PI/180*this.lat);return toLatLngBounds([this.lat-latAccuracy,this.lng-lngAccuracy],[this.lat+latAccuracy,this.lng+lngAccuracy])},clone:function(){return new LatLng(this.lat,this.lng,this.alt)}};function toLatLng(a,b,c){return a instanceof LatLng?a:isArray(a)&&typeof a[0]!="object"?a.length===3?new LatLng(a[0],a[1],a[2]):a.length===2?new LatLng(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):b===void 0?null:new LatLng(a,b,c)}var CRS={latLngToPoint:function(latlng,zoom2){var projectedPoint=this.projection.project(latlng),scale4=this.scale(zoom2);return this.transformation._transform(projectedPoint,scale4)},pointToLatLng:function(point4,zoom2){var scale4=this.scale(zoom2),untransformedPoint=this.transformation.untransform(point4,scale4);return this.projection.unproject(untransformedPoint)},project:function(latlng){return this.projection.project(latlng)},unproject:function(point4){return this.projection.unproject(point4)},scale:function(zoom2){return 256*Math.pow(2,zoom2)},zoom:function(scale4){return Math.log(scale4/256)/Math.LN2},getProjectedBounds:function(zoom2){if(this.infinite)return null;var b=this.projection.bounds,s=this.scale(zoom2),min4=this.transformation.transform(b.min,s),max3=this.transformation.transform(b.max,s);return new Bounds(min4,max3)},infinite:!1,wrapLatLng:function(latlng){var lng=this.wrapLng?wrapNum(latlng.lng,this.wrapLng,!0):latlng.lng,lat=this.wrapLat?wrapNum(latlng.lat,this.wrapLat,!0):latlng.lat,alt=latlng.alt;return new LatLng(lat,lng,alt)},wrapLatLngBounds:function(bounds){var center2=bounds.getCenter(),newCenter=this.wrapLatLng(center2),latShift=center2.lat-newCenter.lat,lngShift=center2.lng-newCenter.lng;if(latShift===0&&lngShift===0)return bounds;var sw=bounds.getSouthWest(),ne=bounds.getNorthEast(),newSw=new LatLng(sw.lat-latShift,sw.lng-lngShift),newNe=new LatLng(ne.lat-latShift,ne.lng-lngShift);return new LatLngBounds(newSw,newNe)}},Earth=extend4({},CRS,{wrapLng:[-180,180],R:6371e3,distance:function(latlng1,latlng2){var rad2=Math.PI/180,lat1=latlng1.lat*rad2,lat2=latlng2.lat*rad2,sinDLat=Math.sin((latlng2.lat-latlng1.lat)*rad2/2),sinDLon=Math.sin((latlng2.lng-latlng1.lng)*rad2/2),a=sinDLat*sinDLat+Math.cos(lat1)*Math.cos(lat2)*sinDLon*sinDLon,c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*c}}),earthRadius2=6378137,SphericalMercator={R:earthRadius2,MAX_LATITUDE:85.0511287798,project:function(latlng){var d=Math.PI/180,max3=this.MAX_LATITUDE,lat=Math.max(Math.min(max3,latlng.lat),-max3),sin2=Math.sin(lat*d);return new Point2(this.R*latlng.lng*d,this.R*Math.log((1+sin2)/(1-sin2))/2)},unproject:function(point4){var d=180/Math.PI;return new LatLng((2*Math.atan(Math.exp(point4.y/this.R))-Math.PI/2)*d,point4.x*d/this.R)},bounds:function(){var d=earthRadius2*Math.PI;return new Bounds([-d,-d],[d,d])}()};function Transformation(a,b,c,d){if(isArray(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=b,this._c=c,this._d=d}Transformation.prototype={transform:function(point4,scale4){return this._transform(point4.clone(),scale4)},_transform:function(point4,scale4){return scale4=scale4||1,point4.x=scale4*(this._a*point4.x+this._b),point4.y=scale4*(this._c*point4.y+this._d),point4},untransform:function(point4,scale4){return scale4=scale4||1,new Point2((point4.x/scale4-this._b)/this._a,(point4.y/scale4-this._d)/this._c)}};function toTransformation(a,b,c,d){return new Transformation(a,b,c,d)}var EPSG3857=extend4({},Earth,{code:"EPSG:3857",projection:SphericalMercator,transformation:function(){var scale4=.5/(Math.PI*SphericalMercator.R);return toTransformation(scale4,.5,-scale4,.5)}()}),EPSG900913=extend4({},EPSG3857,{code:"EPSG:900913"});function svgCreate(name){return document.createElementNS("http://www.w3.org/2000/svg",name)}function pointsToPath(rings,closed){var str="",i,j,len,len2,points,p;for(i=0,len=rings.length;i<len;i++){for(points=rings[i],j=0,len2=points.length;j<len2;j++)p=points[j],str+=(j?"L":"M")+p.x+" "+p.y;str+=closed?Browser.svg?"z":"x":""}return str||"M0 0"}var style=document.documentElement.style,ie="ActiveXObject"in window,ielt9=ie&&!document.addEventListener,edge="msLaunchUri"in navigator&&!("documentMode"in document),webkit=userAgentContains("webkit"),android=userAgentContains("android"),android23=userAgentContains("android 2")||userAgentContains("android 3"),webkitVer=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),androidStock=android&&userAgentContains("Google")&&webkitVer<537&&!("AudioNode"in window),opera=!!window.opera,chrome=!edge&&userAgentContains("chrome"),gecko=userAgentContains("gecko")&&!webkit&&!opera&&!ie,safari=!chrome&&userAgentContains("safari"),phantom=userAgentContains("phantom"),opera12="OTransition"in style,win=navigator.platform.indexOf("Win")===0,ie3d=ie&&"transition"in style,webkit3d="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!android23,gecko3d="MozPerspective"in style,any3d=!window.L_DISABLE_3D&&(ie3d||webkit3d||gecko3d)&&!opera12&&!phantom,mobile=typeof orientation<"u"||userAgentContains("mobile"),mobileWebkit=mobile&&webkit,mobileWebkit3d=mobile&&webkit3d,msPointer=!window.PointerEvent&&window.MSPointerEvent,pointer=!!(window.PointerEvent||msPointer),touchNative="ontouchstart"in window||!!window.TouchEvent,touch=!window.L_NO_TOUCH&&(touchNative||pointer),mobileOpera=mobile&&opera,mobileGecko=mobile&&gecko,retina=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,passiveEvents=function(){var supportsPassiveOption=!1;try{var opts=Object.defineProperty({},"passive",{get:function(){supportsPassiveOption=!0}});window.addEventListener("testPassiveEventSupport",falseFn,opts),window.removeEventListener("testPassiveEventSupport",falseFn,opts)}catch{}return supportsPassiveOption}(),canvas$1=function(){return!!document.createElement("canvas").getContext}(),svg$1=!!(document.createElementNS&&svgCreate("svg").createSVGRect),inlineSvg=!!svg$1&&function(){var div=document.createElement("div");return div.innerHTML="<svg/>",(div.firstChild&&div.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vml=!svg$1&&function(){try{var div=document.createElement("div");div.innerHTML='<v:shape adj="1"/>';var shape=div.firstChild;return shape.style.behavior="url(#default#VML)",shape&&typeof shape.adj=="object"}catch{return!1}}(),mac=navigator.platform.indexOf("Mac")===0,linux=navigator.platform.indexOf("Linux")===0;function userAgentContains(str){return navigator.userAgent.toLowerCase().indexOf(str)>=0}var Browser={ie,ielt9,edge,webkit,android,android23,androidStock,opera,chrome,gecko,safari,phantom,opera12,win,ie3d,webkit3d,gecko3d,any3d,mobile,mobileWebkit,mobileWebkit3d,msPointer,pointer,touch,touchNative,mobileOpera,mobileGecko,retina,passiveEvents,canvas:canvas$1,svg:svg$1,vml,inlineSvg,mac,linux},POINTER_DOWN=Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE=Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP=Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL=Browser.msPointer?"MSPointerCancel":"pointercancel",pEvent={touchstart:POINTER_DOWN,touchmove:POINTER_MOVE,touchend:POINTER_UP,touchcancel:POINTER_CANCEL},handle={touchstart:_onPointerStart,touchmove:_handlePointer,touchend:_handlePointer,touchcancel:_handlePointer},_pointers={},_pointerDocListener=!1;function addPointerListener(obj,type2,handler){return type2==="touchstart"&&_addPointerDocListener(),handle[type2]?(handler=handle[type2].bind(this,handler),obj.addEventListener(pEvent[type2],handler,!1),handler):(console.warn("wrong event specified:",type2),falseFn)}function removePointerListener(obj,type2,handler){if(!pEvent[type2]){console.warn("wrong event specified:",type2);return}obj.removeEventListener(pEvent[type2],handler,!1)}function _globalPointerDown(e){_pointers[e.pointerId]=e}function _globalPointerMove(e){_pointers[e.pointerId]&&(_pointers[e.pointerId]=e)}function _globalPointerUp(e){delete _pointers[e.pointerId]}function _addPointerDocListener(){_pointerDocListener||(document.addEventListener(POINTER_DOWN,_globalPointerDown,!0),document.addEventListener(POINTER_MOVE,_globalPointerMove,!0),document.addEventListener(POINTER_UP,_globalPointerUp,!0),document.addEventListener(POINTER_CANCEL,_globalPointerUp,!0),_pointerDocListener=!0)}function _handlePointer(handler,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in _pointers)e.touches.push(_pointers[i]);e.changedTouches=[e],handler(e)}}function _onPointerStart(handler,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&preventDefault(e),_handlePointer(handler,e)}function makeDblclick(event){var newEvent={},prop,i;for(i in event)prop=event[i],newEvent[i]=prop&&prop.bind?prop.bind(event):prop;return event=newEvent,newEvent.type="dblclick",newEvent.detail=2,newEvent.isTrusted=!1,newEvent._simulated=!0,newEvent}var delay=200;function addDoubleTapListener(obj,handler){obj.addEventListener("dblclick",handler);var last=0,detail;function simDblclick(e){if(e.detail!==1){detail=e.detail;return}if(!(e.pointerType==="mouse"||e.sourceCapabilities&&!e.sourceCapabilities.firesTouchEvents)){var path=getPropagationPath(e);if(!(path.some(function(el){return el instanceof HTMLLabelElement&&el.attributes.for})&&!path.some(function(el){return el instanceof HTMLInputElement||el instanceof HTMLSelectElement}))){var now=Date.now();now-last<=delay?(detail++,detail===2&&handler(makeDblclick(e))):detail=1,last=now}}}return obj.addEventListener("click",simDblclick),{dblclick:handler,simDblclick}}function removeDoubleTapListener(obj,handlers){obj.removeEventListener("dblclick",handlers.dblclick),obj.removeEventListener("click",handlers.simDblclick)}var TRANSFORM=testProp(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION=testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),TRANSITION_END=TRANSITION==="webkitTransition"||TRANSITION==="OTransition"?TRANSITION+"End":"transitionend";function get4(id){return typeof id=="string"?document.getElementById(id):id}function getStyle(el,style2){var value=el.style[style2]||el.currentStyle&&el.currentStyle[style2];if((!value||value==="auto")&&document.defaultView){var css=document.defaultView.getComputedStyle(el,null);value=css?css[style2]:null}return value==="auto"?null:value}function create$1(tagName,className,container){var el=document.createElement(tagName);return el.className=className||"",container&&container.appendChild(el),el}function remove6(el){var parent=el.parentNode;parent&&parent.removeChild(el)}function empty(el){for(;el.firstChild;)el.removeChild(el.firstChild)}function toFront(el){var parent=el.parentNode;parent&&parent.lastChild!==el&&parent.appendChild(el)}function toBack(el){var parent=el.parentNode;parent&&parent.firstChild!==el&&parent.insertBefore(el,parent.firstChild)}function hasClass(el,name){if(el.classList!==void 0)return el.classList.contains(name);var className=getClass169(el);return className.length>0&&new RegExp("(^|\\s)"+name+"(\\s|$)").test(className)}function addClass(el,name){if(el.classList!==void 0)for(var classes=splitWords(name),i=0,len=classes.length;i<len;i++)el.classList.add(classes[i]);else if(!hasClass(el,name)){var className=getClass169(el);setClass(el,(className?className+" ":"")+name)}}function removeClass(el,name){el.classList!==void 0?el.classList.remove(name):setClass(el,trim((" "+getClass169(el)+" ").replace(" "+name+" "," ")))}function setClass(el,name){el.className.baseVal===void 0?el.className=name:el.className.baseVal=name}function getClass169(el){return el.correspondingElement&&(el=el.correspondingElement),el.className.baseVal===void 0?el.className:el.className.baseVal}function setOpacity(el,value){"opacity"in el.style?el.style.opacity=value:"filter"in el.style&&_setOpacityIE(el,value)}function _setOpacityIE(el,value){var filter17=!1,filterName="DXImageTransform.Microsoft.Alpha";try{filter17=el.filters.item(filterName)}catch{if(value===1)return}value=Math.round(value*100),filter17?(filter17.Enabled=value!==100,filter17.Opacity=value):el.style.filter+=" progid:"+filterName+"(opacity="+value+")"}function testProp(props){for(var style2=document.documentElement.style,i=0;i<props.length;i++)if(props[i]in style2)return props[i];return!1}function setTransform(el,offset,scale4){var pos=offset||new Point2(0,0);el.style[TRANSFORM]=(Browser.ie3d?"translate("+pos.x+"px,"+pos.y+"px)":"translate3d("+pos.x+"px,"+pos.y+"px,0)")+(scale4?" scale("+scale4+")":"")}function setPosition(el,point4){el._leaflet_pos=point4,Browser.any3d?setTransform(el,point4):(el.style.left=point4.x+"px",el.style.top=point4.y+"px")}function getPosition(el){return el._leaflet_pos||new Point2(0,0)}var disableTextSelection,enableTextSelection,_userSelect;if("onselectstart"in document)disableTextSelection=function(){on(window,"selectstart",preventDefault)},enableTextSelection=function(){off(window,"selectstart",preventDefault)};else{var userSelectProperty=testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);disableTextSelection=function(){if(userSelectProperty){var style2=document.documentElement.style;_userSelect=style2[userSelectProperty],style2[userSelectProperty]="none"}},enableTextSelection=function(){userSelectProperty&&(document.documentElement.style[userSelectProperty]=_userSelect,_userSelect=void 0)}}function disableImageDrag(){on(window,"dragstart",preventDefault)}function enableImageDrag(){off(window,"dragstart",preventDefault)}var _outlineElement,_outlineStyle;function preventOutline(element){for(;element.tabIndex===-1;)element=element.parentNode;element.style&&(restoreOutline(),_outlineElement=element,_outlineStyle=element.style.outlineStyle,element.style.outlineStyle="none",on(window,"keydown",restoreOutline))}function restoreOutline(){_outlineElement&&(_outlineElement.style.outlineStyle=_outlineStyle,_outlineElement=void 0,_outlineStyle=void 0,off(window,"keydown",restoreOutline))}function getSizedParentNode(element){do element=element.parentNode;while((!element.offsetWidth||!element.offsetHeight)&&element!==document.body);return element}function getScale2(element){var rect=element.getBoundingClientRect();return{x:rect.width/element.offsetWidth||1,y:rect.height/element.offsetHeight||1,boundingClientRect:rect}}var DomUtil={__proto__:null,TRANSFORM,TRANSITION,TRANSITION_END,get:get4,getStyle,create:create$1,remove:remove6,empty,toFront,toBack,hasClass,addClass,removeClass,setClass,getClass:getClass169,setOpacity,testProp,setTransform,setPosition,getPosition,get disableTextSelection(){return disableTextSelection},get enableTextSelection(){return enableTextSelection},disableImageDrag,enableImageDrag,preventOutline,restoreOutline,getSizedParentNode,getScale:getScale2};function on(obj,types,fn,context){if(types&&typeof types=="object")for(var type2 in types)addOne(obj,type2,types[type2],fn);else{types=splitWords(types);for(var i=0,len=types.length;i<len;i++)addOne(obj,types[i],fn,context)}return this}var eventsKey="_leaflet_events";function off(obj,types,fn,context){if(arguments.length===1)batchRemove(obj),delete obj[eventsKey];else if(types&&typeof types=="object")for(var type2 in types)removeOne(obj,type2,types[type2],fn);else if(types=splitWords(types),arguments.length===2)batchRemove(obj,function(type3){return indexOf2(types,type3)!==-1});else for(var i=0,len=types.length;i<len;i++)removeOne(obj,types[i],fn,context);return this}function batchRemove(obj,filterFn){for(var id in obj[eventsKey]){var type2=id.split(/\d/)[0];(!filterFn||filterFn(type2))&&removeOne(obj,type2,null,null,id)}}var mouseSubst={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function addOne(obj,type2,fn,context){var id=type2+stamp(fn)+(context?"_"+stamp(context):"");if(obj[eventsKey]&&obj[eventsKey][id])return this;var handler=function(e){return fn.call(context||obj,e||window.event)},originalHandler=handler;!Browser.touchNative&&Browser.pointer&&type2.indexOf("touch")===0?handler=addPointerListener(obj,type2,handler):Browser.touch&&type2==="dblclick"?handler=addDoubleTapListener(obj,handler):"addEventListener"in obj?type2==="touchstart"||type2==="touchmove"||type2==="wheel"||type2==="mousewheel"?obj.addEventListener(mouseSubst[type2]||type2,handler,Browser.passiveEvents?{passive:!1}:!1):type2==="mouseenter"||type2==="mouseleave"?(handler=function(e){e=e||window.event,isExternalTarget(obj,e)&&originalHandler(e)},obj.addEventListener(mouseSubst[type2],handler,!1)):obj.addEventListener(type2,originalHandler,!1):obj.attachEvent("on"+type2,handler),obj[eventsKey]=obj[eventsKey]||{},obj[eventsKey][id]=handler}function removeOne(obj,type2,fn,context,id){id=id||type2+stamp(fn)+(context?"_"+stamp(context):"");var handler=obj[eventsKey]&&obj[eventsKey][id];if(!handler)return this;!Browser.touchNative&&Browser.pointer&&type2.indexOf("touch")===0?removePointerListener(obj,type2,handler):Browser.touch&&type2==="dblclick"?removeDoubleTapListener(obj,handler):"removeEventListener"in obj?obj.removeEventListener(mouseSubst[type2]||type2,handler,!1):obj.detachEvent("on"+type2,handler),obj[eventsKey][id]=null}function stopPropagation(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function disableScrollPropagation(el){return addOne(el,"wheel",stopPropagation),this}function disableClickPropagation(el){return on(el,"mousedown touchstart dblclick contextmenu",stopPropagation),el._leaflet_disable_click=!0,this}function preventDefault(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function stop(e){return preventDefault(e),stopPropagation(e),this}function getPropagationPath(ev){if(ev.composedPath)return ev.composedPath();for(var path=[],el=ev.target;el;)path.push(el),el=el.parentNode;return path}function getMousePosition(e,container){if(!container)return new Point2(e.clientX,e.clientY);var scale4=getScale2(container),offset=scale4.boundingClientRect;return new Point2((e.clientX-offset.left)/scale4.x-container.clientLeft,(e.clientY-offset.top)/scale4.y-container.clientTop)}var wheelPxFactor=Browser.linux&&Browser.chrome?window.devicePixelRatio:Browser.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function getWheelDelta(e){return Browser.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/wheelPxFactor:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function isExternalTarget(el,e){var related=e.relatedTarget;if(!related)return!0;try{for(;related&&related!==el;)related=related.parentNode}catch{return!1}return related!==el}var DomEvent={__proto__:null,on,off,stopPropagation,disableScrollPropagation,disableClickPropagation,preventDefault,stop,getPropagationPath,getMousePosition,getWheelDelta,isExternalTarget,addListener:on,removeListener:off},PosAnimation=Evented.extend({run:function(el,newPos,duration,easeLinearity){this.stop(),this._el=el,this._inProgress=!0,this._duration=duration||.25,this._easeOutPower=1/Math.max(easeLinearity||.5,.2),this._startPos=getPosition(el),this._offset=newPos.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=requestAnimFrame(this._animate,this),this._step()},_step:function(round){var elapsed=+new Date-this._startTime,duration=this._duration*1e3;elapsed<duration?this._runFrame(this._easeOut(elapsed/duration),round):(this._runFrame(1),this._complete())},_runFrame:function(progress,round){var pos=this._startPos.add(this._offset.multiplyBy(progress));round&&pos._round(),setPosition(this._el,pos),this.fire("step")},_complete:function(){cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Map3=Evented.extend({options:{crs:EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(id,options){options=setOptions(this,options),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(id),this._initLayout(),this._onResize=bind(this._onResize,this),this._initEvents(),options.maxBounds&&this.setMaxBounds(options.maxBounds),options.zoom!==void 0&&(this._zoom=this._limitZoom(options.zoom)),options.center&&options.zoom!==void 0&&this.setView(toLatLng(options.center),options.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=TRANSITION&&Browser.any3d&&!Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),on(this._proxy,TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(center2,zoom2,options){if(zoom2=zoom2===void 0?this._zoom:this._limitZoom(zoom2),center2=this._limitCenter(toLatLng(center2),zoom2,this.options.maxBounds),options=options||{},this._stop(),this._loaded&&!options.reset&&options!==!0){options.animate!==void 0&&(options.zoom=extend4({animate:options.animate},options.zoom),options.pan=extend4({animate:options.animate,duration:options.duration},options.pan));var moved=this._zoom!==zoom2?this._tryAnimatedZoom&&this._tryAnimatedZoom(center2,zoom2,options.zoom):this._tryAnimatedPan(center2,options.pan);if(moved)return clearTimeout(this._sizeTimer),this}return this._resetView(center2,zoom2,options.pan&&options.pan.noMoveStart),this},setZoom:function(zoom2,options){return this._loaded?this.setView(this.getCenter(),zoom2,{zoom:options}):(this._zoom=zoom2,this)},zoomIn:function(delta,options){return delta=delta||(Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+delta,options)},zoomOut:function(delta,options){return delta=delta||(Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-delta,options)},setZoomAround:function(latlng,zoom2,options){var scale4=this.getZoomScale(zoom2),viewHalf=this.getSize().divideBy(2),containerPoint=latlng instanceof Point2?latlng:this.latLngToContainerPoint(latlng),centerOffset=containerPoint.subtract(viewHalf).multiplyBy(1-1/scale4),newCenter=this.containerPointToLatLng(viewHalf.add(centerOffset));return this.setView(newCenter,zoom2,{zoom:options})},_getBoundsCenterZoom:function(bounds,options){options=options||{},bounds=bounds.getBounds?bounds.getBounds():toLatLngBounds(bounds);var paddingTL=toPoint(options.paddingTopLeft||options.padding||[0,0]),paddingBR=toPoint(options.paddingBottomRight||options.padding||[0,0]),zoom2=this.getBoundsZoom(bounds,!1,paddingTL.add(paddingBR));if(zoom2=typeof options.maxZoom=="number"?Math.min(options.maxZoom,zoom2):zoom2,zoom2===1/0)return{center:bounds.getCenter(),zoom:zoom2};var paddingOffset=paddingBR.subtract(paddingTL).divideBy(2),swPoint=this.project(bounds.getSouthWest(),zoom2),nePoint=this.project(bounds.getNorthEast(),zoom2),center2=this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset),zoom2);return{center:center2,zoom:zoom2}},fitBounds:function(bounds,options){if(bounds=toLatLngBounds(bounds),!bounds.isValid())throw new Error("Bounds are not valid.");var target=this._getBoundsCenterZoom(bounds,options);return this.setView(target.center,target.zoom,options)},fitWorld:function(options){return this.fitBounds([[-90,-180],[90,180]],options)},panTo:function(center2,options){return this.setView(center2,this._zoom,{pan:options})},panBy:function(offset,options){if(offset=toPoint(offset).round(),options=options||{},!offset.x&&!offset.y)return this.fire("moveend");if(options.animate!==!0&&!this.getSize().contains(offset))return this._resetView(this.unproject(this.project(this.getCenter()).add(offset)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),options.noMoveStart||this.fire("movestart"),options.animate!==!1){addClass(this._mapPane,"leaflet-pan-anim");var newPos=this._getMapPanePos().subtract(offset).round();this._panAnim.run(this._mapPane,newPos,options.duration||.25,options.easeLinearity)}else this._rawPanBy(offset),this.fire("move").fire("moveend");return this},flyTo:function(targetCenter,targetZoom,options){if(options=options||{},options.animate===!1||!Browser.any3d)return this.setView(targetCenter,targetZoom,options);this._stop();var from=this.project(this.getCenter()),to=this.project(targetCenter),size11=this.getSize(),startZoom=this._zoom;targetCenter=toLatLng(targetCenter),targetZoom=targetZoom===void 0?startZoom:targetZoom;var w0=Math.max(size11.x,size11.y),w1=w0*this.getZoomScale(startZoom,targetZoom),u1=to.distanceTo(from)||1,rho=1.42,rho2=rho*rho;function r(i){var s1=i?-1:1,s2=i?w1:w0,t1=w1*w1-w0*w0+s1*rho2*rho2*u1*u1,b1=2*s2*rho2*u1,b=t1/b1,sq=Math.sqrt(b*b+1)-b,log2=sq<1e-9?-18:Math.log(sq);return log2}function sinh(n){return(Math.exp(n)-Math.exp(-n))/2}function cosh(n){return(Math.exp(n)+Math.exp(-n))/2}function tanh(n){return sinh(n)/cosh(n)}var r0=r(0);function w(s){return w0*(cosh(r0)/cosh(r0+rho*s))}function u(s){return w0*(cosh(r0)*tanh(r0+rho*s)-sinh(r0))/rho2}function easeOut(t){return 1-Math.pow(1-t,1.5)}var start=Date.now(),S=(r(1)-r0)/rho,duration=options.duration?1e3*options.duration:1e3*S*.8;function frame(){var t=(Date.now()-start)/duration,s=easeOut(t)*S;t<=1?(this._flyToFrame=requestAnimFrame(frame,this),this._move(this.unproject(from.add(to.subtract(from).multiplyBy(u(s)/u1)),startZoom),this.getScaleZoom(w0/w(s),startZoom),{flyTo:!0})):this._move(targetCenter,targetZoom)._moveEnd(!0)}return this._moveStart(!0,options.noMoveStart),frame.call(this),this},flyToBounds:function(bounds,options){var target=this._getBoundsCenterZoom(bounds,options);return this.flyTo(target.center,target.zoom,options)},setMaxBounds:function(bounds){return bounds=toLatLngBounds(bounds),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),bounds.isValid()?(this.options.maxBounds=bounds,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(zoom2){var oldZoom=this.options.minZoom;return this.options.minZoom=zoom2,this._loaded&&oldZoom!==zoom2&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(zoom2):this},setMaxZoom:function(zoom2){var oldZoom=this.options.maxZoom;return this.options.maxZoom=zoom2,this._loaded&&oldZoom!==zoom2&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(zoom2):this},panInsideBounds:function(bounds,options){this._enforcingBounds=!0;var center2=this.getCenter(),newCenter=this._limitCenter(center2,this._zoom,toLatLngBounds(bounds));return center2.equals(newCenter)||this.panTo(newCenter,options),this._enforcingBounds=!1,this},panInside:function(latlng,options){options=options||{};var paddingTL=toPoint(options.paddingTopLeft||options.padding||[0,0]),paddingBR=toPoint(options.paddingBottomRight||options.padding||[0,0]),pixelCenter=this.project(this.getCenter()),pixelPoint=this.project(latlng),pixelBounds=this.getPixelBounds(),paddedBounds=toBounds([pixelBounds.min.add(paddingTL),pixelBounds.max.subtract(paddingBR)]),paddedSize=paddedBounds.getSize();if(!paddedBounds.contains(pixelPoint)){this._enforcingBounds=!0;var centerOffset=pixelPoint.subtract(paddedBounds.getCenter()),offset=paddedBounds.extend(pixelPoint).getSize().subtract(paddedSize);pixelCenter.x+=centerOffset.x<0?-offset.x:offset.x,pixelCenter.y+=centerOffset.y<0?-offset.y:offset.y,this.panTo(this.unproject(pixelCenter),options),this._enforcingBounds=!1}return this},invalidateSize:function(options){if(!this._loaded)return this;options=extend4({animate:!1,pan:!0},options===!0?{animate:!0}:options);var oldSize=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var newSize=this.getSize(),oldCenter=oldSize.divideBy(2).round(),newCenter=newSize.divideBy(2).round(),offset=oldCenter.subtract(newCenter);return!offset.x&&!offset.y?this:(options.animate&&options.pan?this.panBy(offset):(options.pan&&this._rawPanBy(offset),this.fire("move"),options.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize,newSize}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(options){if(options=this._locateOptions=extend4({timeout:1e4,watch:!1},options),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var onResponse=bind(this._handleGeolocationResponse,this),onError=bind(this._handleGeolocationError,this);return options.watch?this._locationWatchId=navigator.geolocation.watchPosition(onResponse,onError,options):navigator.geolocation.getCurrentPosition(onResponse,onError,options),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(error){if(this._container._leaflet_id){var c=error.code,message=error.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+message+"."})}},_handleGeolocationResponse:function(pos){if(this._container._leaflet_id){var lat=pos.coords.latitude,lng=pos.coords.longitude,latlng=new LatLng(lat,lng),bounds=latlng.toBounds(pos.coords.accuracy*2),options=this._locateOptions;if(options.setView){var zoom2=this.getBoundsZoom(bounds);this.setView(latlng,options.maxZoom?Math.min(zoom2,options.maxZoom):zoom2)}var data={latlng,bounds,timestamp:pos.timestamp};for(var i in pos.coords)typeof pos.coords[i]=="number"&&(data[i]=pos.coords[i]);this.fire("locationfound",data)}},addHandler:function(name,HandlerClass){if(!HandlerClass)return this;var handler=this[name]=new HandlerClass(this);return this._handlers.push(handler),this.options[name]&&handler.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),remove6(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(cancelAnimFrame(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)remove6(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(name,container){var className="leaflet-pane"+(name?" leaflet-"+name.replace("Pane","")+"-pane":""),pane=create$1("div",className,container||this._mapPane);return name&&(this._panes[name]=pane),pane},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var bounds=this.getPixelBounds(),sw=this.unproject(bounds.getBottomLeft()),ne=this.unproject(bounds.getTopRight());return new LatLngBounds(sw,ne)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(bounds,inside,padding){bounds=toLatLngBounds(bounds),padding=toPoint(padding||[0,0]);var zoom2=this.getZoom()||0,min4=this.getMinZoom(),max3=this.getMaxZoom(),nw=bounds.getNorthWest(),se=bounds.getSouthEast(),size11=this.getSize().subtract(padding),boundsSize=toBounds(this.project(se,zoom2),this.project(nw,zoom2)).getSize(),snap4=Browser.any3d?this.options.zoomSnap:1,scalex=size11.x/boundsSize.x,scaley=size11.y/boundsSize.y,scale4=inside?Math.max(scalex,scaley):Math.min(scalex,scaley);return zoom2=this.getScaleZoom(scale4,zoom2),snap4&&(zoom2=Math.round(zoom2/(snap4/100))*(snap4/100),zoom2=inside?Math.ceil(zoom2/snap4)*snap4:Math.floor(zoom2/snap4)*snap4),Math.max(min4,Math.min(max3,zoom2))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Point2(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(center2,zoom2){var topLeftPoint=this._getTopLeftPoint(center2,zoom2);return new Bounds(topLeftPoint,topLeftPoint.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(zoom2){return this.options.crs.getProjectedBounds(zoom2===void 0?this.getZoom():zoom2)},getPane:function(pane){return typeof pane=="string"?this._panes[pane]:pane},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(toZoom,fromZoom){var crs=this.options.crs;return fromZoom=fromZoom===void 0?this._zoom:fromZoom,crs.scale(toZoom)/crs.scale(fromZoom)},getScaleZoom:function(scale4,fromZoom){var crs=this.options.crs;fromZoom=fromZoom===void 0?this._zoom:fromZoom;var zoom2=crs.zoom(scale4*crs.scale(fromZoom));return isNaN(zoom2)?1/0:zoom2},project:function(latlng,zoom2){return zoom2=zoom2===void 0?this._zoom:zoom2,this.options.crs.latLngToPoint(toLatLng(latlng),zoom2)},unproject:function(point4,zoom2){return zoom2=zoom2===void 0?this._zoom:zoom2,this.options.crs.pointToLatLng(toPoint(point4),zoom2)},layerPointToLatLng:function(point4){var projectedPoint=toPoint(point4).add(this.getPixelOrigin());return this.unproject(projectedPoint)},latLngToLayerPoint:function(latlng){var projectedPoint=this.project(toLatLng(latlng))._round();return projectedPoint._subtract(this.getPixelOrigin())},wrapLatLng:function(latlng){return this.options.crs.wrapLatLng(toLatLng(latlng))},wrapLatLngBounds:function(latlng){return this.options.crs.wrapLatLngBounds(toLatLngBounds(latlng))},distance:function(latlng1,latlng2){return this.options.crs.distance(toLatLng(latlng1),toLatLng(latlng2))},containerPointToLayerPoint:function(point4){return toPoint(point4).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(point4){return toPoint(point4).add(this._getMapPanePos())},containerPointToLatLng:function(point4){var layerPoint=this.containerPointToLayerPoint(toPoint(point4));return this.layerPointToLatLng(layerPoint)},latLngToContainerPoint:function(latlng){return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(latlng)))},mouseEventToContainerPoint:function(e){return getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(id){var container=this._container=get4(id);if(container){if(container._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");on(container,"scroll",this._onScroll,this),this._containerId=stamp(container)},_initLayout:function(){var container=this._container;this._fadeAnimated=this.options.fadeAnimation&&Browser.any3d,addClass(container,"leaflet-container"+(Browser.touch?" leaflet-touch":"")+(Browser.retina?" leaflet-retina":"")+(Browser.ielt9?" leaflet-oldie":"")+(Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var position=getStyle(container,"position");position!=="absolute"&&position!=="relative"&&position!=="fixed"&&position!=="sticky"&&(container.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var panes=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),setPosition(this._mapPane,new Point2(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(addClass(panes.markerPane,"leaflet-zoom-hide"),addClass(panes.shadowPane,"leaflet-zoom-hide"))},_resetView:function(center2,zoom2,noMoveStart){setPosition(this._mapPane,new Point2(0,0));var loading=!this._loaded;this._loaded=!0,zoom2=this._limitZoom(zoom2),this.fire("viewprereset");var zoomChanged=this._zoom!==zoom2;this._moveStart(zoomChanged,noMoveStart)._move(center2,zoom2)._moveEnd(zoomChanged),this.fire("viewreset"),loading&&this.fire("load")},_moveStart:function(zoomChanged,noMoveStart){return zoomChanged&&this.fire("zoomstart"),noMoveStart||this.fire("movestart"),this},_move:function(center2,zoom2,data,supressEvent){zoom2===void 0&&(zoom2=this._zoom);var zoomChanged=this._zoom!==zoom2;return this._zoom=zoom2,this._lastCenter=center2,this._pixelOrigin=this._getNewPixelOrigin(center2),supressEvent?data&&data.pinch&&this.fire("zoom",data):((zoomChanged||data&&data.pinch)&&this.fire("zoom",data),this.fire("move",data)),this},_moveEnd:function(zoomChanged){return zoomChanged&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(offset){setPosition(this._mapPane,this._getMapPanePos().subtract(offset))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(remove7){this._targets={},this._targets[stamp(this._container)]=this;var onOff=remove7?off:on;onOff(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&onOff(window,"resize",this._onResize,this),Browser.any3d&&this.options.transform3DLimit&&(remove7?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){cancelAnimFrame(this._resizeRequest),this._resizeRequest=requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var pos=this._getMapPanePos();Math.max(Math.abs(pos.x),Math.abs(pos.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,type2){for(var targets=[],target,isHover=type2==="mouseout"||type2==="mouseover",src=e.target||e.srcElement,dragging=!1;src;){if(target=this._targets[stamp(src)],target&&(type2==="click"||type2==="preclick")&&this._draggableMoved(target)){dragging=!0;break}if(target&&target.listens(type2,!0)&&(isHover&&!isExternalTarget(src,e)||(targets.push(target),isHover))||src===this._container)break;src=src.parentNode}return!targets.length&&!dragging&&!isHover&&this.listens(type2,!0)&&(targets=[this]),targets},_isClickDisabled:function(el){for(;el&&el!==this._container;){if(el._leaflet_disable_click)return!0;el=el.parentNode}},_handleDOMEvent:function(e){var el=e.target||e.srcElement;if(!(!this._loaded||el._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(el))){var type2=e.type;type2==="mousedown"&&preventOutline(el),this._fireDOMEvent(e,type2)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,type2,canvasTargets){if(e.type==="click"){var synth=extend4({},e);synth.type="preclick",this._fireDOMEvent(synth,synth.type,canvasTargets)}var targets=this._findEventTargets(e,type2);if(canvasTargets){for(var filtered=[],i=0;i<canvasTargets.length;i++)canvasTargets[i].listens(type2,!0)&&filtered.push(canvasTargets[i]);targets=filtered.concat(targets)}if(targets.length){type2==="contextmenu"&&preventDefault(e);var target=targets[0],data={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var isMarker=target.getLatLng&&(!target._radius||target._radius<=10);data.containerPoint=isMarker?this.latLngToContainerPoint(target.getLatLng()):this.mouseEventToContainerPoint(e),data.layerPoint=this.containerPointToLayerPoint(data.containerPoint),data.latlng=isMarker?target.getLatLng():this.layerPointToLatLng(data.layerPoint)}for(i=0;i<targets.length;i++)if(targets[i].fire(type2,data,!0),data.originalEvent._stopped||targets[i].options.bubblingMouseEvents===!1&&indexOf2(this._mouseEvents,type2)!==-1)return}},_draggableMoved:function(obj){return obj=obj.dragging&&obj.dragging.enabled()?obj:this,obj.dragging&&obj.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,len=this._handlers.length;i<len;i++)this._handlers[i].disable()},whenReady:function(callback,context){return this._loaded?callback.call(context||this,{target:this}):this.on("load",callback,context),this},_getMapPanePos:function(){return getPosition(this._mapPane)||new Point2(0,0)},_moved:function(){var pos=this._getMapPanePos();return pos&&!pos.equals([0,0])},_getTopLeftPoint:function(center2,zoom2){var pixelOrigin=center2&&zoom2!==void 0?this._getNewPixelOrigin(center2,zoom2):this.getPixelOrigin();return pixelOrigin.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(center2,zoom2){var viewHalf=this.getSize()._divideBy(2);return this.project(center2,zoom2)._subtract(viewHalf)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(latlng,zoom2,center2){var topLeft=this._getNewPixelOrigin(center2,zoom2);return this.project(latlng,zoom2)._subtract(topLeft)},_latLngBoundsToNewLayerBounds:function(latLngBounds,zoom2,center2){var topLeft=this._getNewPixelOrigin(center2,zoom2);return toBounds([this.project(latLngBounds.getSouthWest(),zoom2)._subtract(topLeft),this.project(latLngBounds.getNorthWest(),zoom2)._subtract(topLeft),this.project(latLngBounds.getSouthEast(),zoom2)._subtract(topLeft),this.project(latLngBounds.getNorthEast(),zoom2)._subtract(topLeft)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(latlng){return this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint())},_limitCenter:function(center2,zoom2,bounds){if(!bounds)return center2;var centerPoint=this.project(center2,zoom2),viewHalf=this.getSize().divideBy(2),viewBounds=new Bounds(centerPoint.subtract(viewHalf),centerPoint.add(viewHalf)),offset=this._getBoundsOffset(viewBounds,bounds,zoom2);return Math.abs(offset.x)<=1&&Math.abs(offset.y)<=1?center2:this.unproject(centerPoint.add(offset),zoom2)},_limitOffset:function(offset,bounds){if(!bounds)return offset;var viewBounds=this.getPixelBounds(),newBounds=new Bounds(viewBounds.min.add(offset),viewBounds.max.add(offset));return offset.add(this._getBoundsOffset(newBounds,bounds))},_getBoundsOffset:function(pxBounds,maxBounds,zoom2){var projectedMaxBounds=toBounds(this.project(maxBounds.getNorthEast(),zoom2),this.project(maxBounds.getSouthWest(),zoom2)),minOffset=projectedMaxBounds.min.subtract(pxBounds.min),maxOffset=projectedMaxBounds.max.subtract(pxBounds.max),dx=this._rebound(minOffset.x,-maxOffset.x),dy=this._rebound(minOffset.y,-maxOffset.y);return new Point2(dx,dy)},_rebound:function(left,right){return left+right>0?Math.round(left-right)/2:Math.max(0,Math.ceil(left))-Math.max(0,Math.floor(right))},_limitZoom:function(zoom2){var min4=this.getMinZoom(),max3=this.getMaxZoom(),snap4=Browser.any3d?this.options.zoomSnap:1;return snap4&&(zoom2=Math.round(zoom2/snap4)*snap4),Math.max(min4,Math.min(max3,zoom2))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(center2,options){var offset=this._getCenterOffset(center2)._trunc();return(options&&options.animate)!==!0&&!this.getSize().contains(offset)?!1:(this.panBy(offset,options),!0)},_createAnimProxy:function(){var proxy=this._proxy=create$1("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(proxy),this.on("zoomanim",function(e){var prop=TRANSFORM,transform2=this._proxy.style[prop];setTransform(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),transform2===this._proxy.style[prop]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){remove6(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),z=this.getZoom();setTransform(this._proxy,this.project(c,z),this.getZoomScale(z,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(center2,zoom2,options){if(this._animatingZoom)return!0;if(options=options||{},!this._zoomAnimated||options.animate===!1||this._nothingToAnimate()||Math.abs(zoom2-this._zoom)>this.options.zoomAnimationThreshold)return!1;var scale4=this.getZoomScale(zoom2),offset=this._getCenterOffset(center2)._divideBy(1-1/scale4);return options.animate!==!0&&!this.getSize().contains(offset)?!1:(requestAnimFrame(function(){this._moveStart(!0,options.noMoveStart||!1)._animateZoom(center2,zoom2,!0)},this),!0)},_animateZoom:function(center2,zoom2,startAnim,noUpdate){this._mapPane&&(startAnim&&(this._animatingZoom=!0,this._animateToCenter=center2,this._animateToZoom=zoom2,addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:center2,zoom:zoom2,noUpdate}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(bind(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function createMap(id,options){return new Map3(id,options)}var Control=Class.extend({options:{position:"topright"},initialize:function(options){setOptions(this,options)},getPosition:function(){return this.options.position},setPosition:function(position){var map5=this._map;return map5&&map5.removeControl(this),this.options.position=position,map5&&map5.addControl(this),this},getContainer:function(){return this._container},addTo:function(map5){this.remove(),this._map=map5;var container=this._container=this.onAdd(map5),pos=this.getPosition(),corner=map5._controlCorners[pos];return addClass(container,"leaflet-control"),pos.indexOf("bottom")!==-1?corner.insertBefore(container,corner.firstChild):corner.appendChild(container),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(remove6(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),control=function(options){return new Control(options)};Map3.include({addControl:function(control2){return control2.addTo(this),this},removeControl:function(control2){return control2.remove(),this},_initControlPos:function(){var corners=this._controlCorners={},l="leaflet-",container=this._controlContainer=create$1("div",l+"control-container",this._container);function createCorner(vSide,hSide){var className=l+vSide+" "+l+hSide;corners[vSide+hSide]=create$1("div",className,container)}createCorner("top","left"),createCorner("top","right"),createCorner("bottom","left"),createCorner("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)remove6(this._controlCorners[i]);remove6(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Layers=Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(layerA,layerB,nameA,nameB){return nameA<nameB?-1:nameB<nameA?1:0}},initialize:function(baseLayers,overlays,options){setOptions(this,options),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var i in baseLayers)this._addLayer(baseLayers[i],i);for(i in overlays)this._addLayer(overlays[i],i,!0)},onAdd:function(map5){this._initLayout(),this._update(),this._map=map5,map5.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(map5){return Control.prototype.addTo.call(this,map5),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(layer,name){return this._addLayer(layer,name),this._map?this._update():this},addOverlay:function(layer,name){return this._addLayer(layer,name,!0),this._map?this._update():this},removeLayer:function(layer){layer.off("add remove",this._onLayerChange,this);var obj=this._getLayer(stamp(layer));return obj&&this._layers.splice(this._layers.indexOf(obj),1),this._map?this._update():this},expand:function(){addClass(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var acceptableHeight=this._map.getSize().y-(this._container.offsetTop+50);return acceptableHeight<this._section.clientHeight?(addClass(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=acceptableHeight+"px"):removeClass(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var className="leaflet-control-layers",container=this._container=create$1("div",className),collapsed=this.options.collapsed;container.setAttribute("aria-haspopup",!0),disableClickPropagation(container),disableScrollPropagation(container);var section=this._section=create$1("section",className+"-list");collapsed&&(this._map.on("click",this.collapse,this),on(container,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var link2=this._layersLink=create$1("a",className+"-toggle",container);link2.href="#",link2.title="Layers",link2.setAttribute("role","button"),on(link2,{keydown:function(e){e.keyCode===13&&this._expandSafely()},click:function(e){preventDefault(e),this._expandSafely()}},this),collapsed||this.expand(),this._baseLayersList=create$1("div",className+"-base",section),this._separator=create$1("div",className+"-separator",section),this._overlaysList=create$1("div",className+"-overlays",section),container.appendChild(section)},_getLayer:function(id){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&stamp(this._layers[i].layer)===id)return this._layers[i]},_addLayer:function(layer,name,overlay){this._map&&layer.on("add remove",this._onLayerChange,this),this._layers.push({layer,name,overlay}),this.options.sortLayers&&this._layers.sort(bind(function(a,b){return this.options.sortFunction(a.layer,b.layer,a.name,b.name)},this)),this.options.autoZIndex&&layer.setZIndex&&(this._lastZIndex++,layer.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;empty(this._baseLayersList),empty(this._overlaysList),this._layerControlInputs=[];var baseLayersPresent,overlaysPresent,i,obj,baseLayersCount=0;for(i=0;i<this._layers.length;i++)obj=this._layers[i],this._addItem(obj),overlaysPresent=overlaysPresent||obj.overlay,baseLayersPresent=baseLayersPresent||!obj.overlay,baseLayersCount+=obj.overlay?0:1;return this.options.hideSingleBase&&(baseLayersPresent=baseLayersPresent&&baseLayersCount>1,this._baseLayersList.style.display=baseLayersPresent?"":"none"),this._separator.style.display=overlaysPresent&&baseLayersPresent?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var obj=this._getLayer(stamp(e.target)),type2=obj.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;type2&&this._map.fire(type2,obj)},_createRadioElement:function(name,checked){var radioHtml='<input type="radio" class="leaflet-control-layers-selector" name="'+name+'"'+(checked?' checked="checked"':"")+"/>",radioFragment=document.createElement("div");return radioFragment.innerHTML=radioHtml,radioFragment.firstChild},_addItem:function(obj){var label=document.createElement("label"),checked=this._map.hasLayer(obj.layer),input;obj.overlay?(input=document.createElement("input"),input.type="checkbox",input.className="leaflet-control-layers-selector",input.defaultChecked=checked):input=this._createRadioElement("leaflet-base-layers_"+stamp(this),checked),this._layerControlInputs.push(input),input.layerId=stamp(obj.layer),on(input,"click",this._onInputClick,this);var name=document.createElement("span");name.innerHTML=" "+obj.name;var holder=document.createElement("span");label.appendChild(holder),holder.appendChild(input),holder.appendChild(name);var container=obj.overlay?this._overlaysList:this._baseLayersList;return container.appendChild(label),this._checkDisabledLayers(),label},_onInputClick:function(){if(!this._preventClick){var inputs=this._layerControlInputs,input,layer,addedLayers=[],removedLayers=[];this._handlingClick=!0;for(var i=inputs.length-1;i>=0;i--)input=inputs[i],layer=this._getLayer(input.layerId).layer,input.checked?addedLayers.push(layer):input.checked||removedLayers.push(layer);for(i=0;i<removedLayers.length;i++)this._map.hasLayer(removedLayers[i])&&this._map.removeLayer(removedLayers[i]);for(i=0;i<addedLayers.length;i++)this._map.hasLayer(addedLayers[i])||this._map.addLayer(addedLayers[i]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var inputs=this._layerControlInputs,input,layer,zoom2=this._map.getZoom(),i=inputs.length-1;i>=0;i--)input=inputs[i],layer=this._getLayer(input.layerId).layer,input.disabled=layer.options.minZoom!==void 0&&zoom2<layer.options.minZoom||layer.options.maxZoom!==void 0&&zoom2>layer.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var section=this._section;this._preventClick=!0,on(section,"click",preventDefault),this.expand();var that=this;setTimeout(function(){off(section,"click",preventDefault),that._preventClick=!1})}}),layers=function(baseLayers,overlays,options){return new Layers(baseLayers,overlays,options)},Zoom=Control.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(map5){var zoomName="leaflet-control-zoom",container=create$1("div",zoomName+" leaflet-bar"),options=this.options;return this._zoomInButton=this._createButton(options.zoomInText,options.zoomInTitle,zoomName+"-in",container,this._zoomIn),this._zoomOutButton=this._createButton(options.zoomOutText,options.zoomOutTitle,zoomName+"-out",container,this._zoomOut),this._updateDisabled(),map5.on("zoomend zoomlevelschange",this._updateDisabled,this),container},onRemove:function(map5){map5.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(html,title,className,container,fn){var link2=create$1("a",className,container);return link2.innerHTML=html,link2.href="#",link2.title=title,link2.setAttribute("role","button"),link2.setAttribute("aria-label",title),disableClickPropagation(link2),on(link2,"click",stop),on(link2,"click",fn,this),on(link2,"click",this._refocusOnMap,this),link2},_updateDisabled:function(){var map5=this._map,className="leaflet-disabled";removeClass(this._zoomInButton,className),removeClass(this._zoomOutButton,className),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||map5._zoom===map5.getMinZoom())&&(addClass(this._zoomOutButton,className),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||map5._zoom===map5.getMaxZoom())&&(addClass(this._zoomInButton,className),this._zoomInButton.setAttribute("aria-disabled","true"))}});Map3.mergeOptions({zoomControl:!0}),Map3.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zoom,this.addControl(this.zoomControl))});var zoom=function(options){return new Zoom(options)},Scale=Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(map5){var className="leaflet-control-scale",container=create$1("div",className),options=this.options;return this._addScales(options,className+"-line",container),map5.on(options.updateWhenIdle?"moveend":"move",this._update,this),map5.whenReady(this._update,this),container},onRemove:function(map5){map5.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(options,className,container){options.metric&&(this._mScale=create$1("div",className,container)),options.imperial&&(this._iScale=create$1("div",className,container))},_update:function(){var map5=this._map,y2=map5.getSize().y/2,maxMeters=map5.distance(map5.containerPointToLatLng([0,y2]),map5.containerPointToLatLng([this.options.maxWidth,y2]));this._updateScales(maxMeters)},_updateScales:function(maxMeters){this.options.metric&&maxMeters&&this._updateMetric(maxMeters),this.options.imperial&&maxMeters&&this._updateImperial(maxMeters)},_updateMetric:function(maxMeters){var meters=this._getRoundNum(maxMeters),label=meters<1e3?meters+" m":meters/1e3+" km";this._updateScale(this._mScale,label,meters/maxMeters)},_updateImperial:function(maxMeters){var maxFeet=maxMeters*3.2808399,maxMiles,miles,feet;maxFeet>5280?(maxMiles=maxFeet/5280,miles=this._getRoundNum(maxMiles),this._updateScale(this._iScale,miles+" mi",miles/maxMiles)):(feet=this._getRoundNum(maxFeet),this._updateScale(this._iScale,feet+" ft",feet/maxFeet))},_updateScale:function(scale4,text,ratio){scale4.style.width=Math.round(this.options.maxWidth*ratio)+"px",scale4.innerHTML=text},_getRoundNum:function(num){var pow10=Math.pow(10,(Math.floor(num)+"").length-1),d=num/pow10;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,pow10*d}}),scale3=function(options){return new Scale(options)},ukrainianFlag='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Attribution=Control.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Browser.inlineSvg?ukrainianFlag+" ":"")+"Leaflet</a>"},initialize:function(options){setOptions(this,options),this._attributions={}},onAdd:function(map5){map5.attributionControl=this,this._container=create$1("div","leaflet-control-attribution"),disableClickPropagation(this._container);for(var i in map5._layers)map5._layers[i].getAttribution&&this.addAttribution(map5._layers[i].getAttribution());return this._update(),map5.on("layeradd",this._addAttribution,this),this._container},onRemove:function(map5){map5.off("layeradd",this._addAttribution,this)},_addAttribution:function(ev){ev.layer.getAttribution&&(this.addAttribution(ev.layer.getAttribution()),ev.layer.once("remove",function(){this.removeAttribution(ev.layer.getAttribution())},this))},setPrefix:function(prefix){return this.options.prefix=prefix,this._update(),this},addAttribution:function(text){return text?(this._attributions[text]||(this._attributions[text]=0),this._attributions[text]++,this._update(),this):this},removeAttribution:function(text){return text?(this._attributions[text]&&(this._attributions[text]--,this._update()),this):this},_update:function(){if(this._map){var attribs=[];for(var i in this._attributions)this._attributions[i]&&attribs.push(i);var prefixAndAttribs=[];this.options.prefix&&prefixAndAttribs.push(this.options.prefix),attribs.length&&prefixAndAttribs.push(attribs.join(", ")),this._container.innerHTML=prefixAndAttribs.join(' <span aria-hidden="true">|</span> ')}}});Map3.mergeOptions({attributionControl:!0}),Map3.addInitHook(function(){this.options.attributionControl&&new Attribution().addTo(this)});var attribution=function(options){return new Attribution(options)};Control.Layers=Layers,Control.Zoom=Zoom,Control.Scale=Scale,Control.Attribution=Attribution,control.layers=layers,control.zoom=zoom,control.scale=scale3,control.attribution=attribution;var Handler=Class.extend({initialize:function(map5){this._map=map5},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Handler.addTo=function(map5,name){return map5.addHandler(name,this),this};var Mixin={Events},START=Browser.touch?"touchstart mousedown":"mousedown",Draggable=Evented.extend({options:{clickTolerance:3},initialize:function(element,dragStartTarget,preventOutline2,options){setOptions(this,options),this._element=element,this._dragStartTarget=dragStartTarget||element,this._preventOutline=preventOutline2},enable:function(){this._enabled||(on(this._dragStartTarget,START,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Draggable._dragging===this&&this.finishDrag(!0),off(this._dragStartTarget,START,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!hasClass(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Draggable._dragging===this&&this.finishDrag();return}if(!(Draggable._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Draggable._dragging=this,this._preventOutline&&preventOutline(this._element),disableImageDrag(),disableTextSelection(),!this._moving)){this.fire("down");var first=e.touches?e.touches[0]:e,sizedParent=getSizedParentNode(this._element);this._startPoint=new Point2(first.clientX,first.clientY),this._startPos=getPosition(this._element),this._parentScale=getScale2(sizedParent);var mouseevent=e.type==="mousedown";on(document,mouseevent?"mousemove":"touchmove",this._onMove,this),on(document,mouseevent?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var first=e.touches&&e.touches.length===1?e.touches[0]:e,offset=new Point2(first.clientX,first.clientY)._subtract(this._startPoint);!offset.x&&!offset.y||Math.abs(offset.x)+Math.abs(offset.y)<this.options.clickTolerance||(offset.x/=this._parentScale.x,offset.y/=this._parentScale.y,preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,addClass(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(offset),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),setPosition(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(noInertia){removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),off(document,"mousemove touchmove",this._onMove,this),off(document,"mouseup touchend touchcancel",this._onUp,this),enableImageDrag(),enableTextSelection();var fireDragend=this._moved&&this._moving;this._moving=!1,Draggable._dragging=!1,fireDragend&&this.fire("dragend",{noInertia,distance:this._newPos.distanceTo(this._startPos)})}});function clipPolygon(points,bounds,round){var clippedPoints,edges2=[1,4,2,8],i,j,k,a,b,len,edge2,p;for(i=0,len=points.length;i<len;i++)points[i]._code=_getBitCode(points[i],bounds);for(k=0;k<4;k++){for(edge2=edges2[k],clippedPoints=[],i=0,len=points.length,j=len-1;i<len;j=i++)a=points[i],b=points[j],a._code&edge2?b._code&edge2||(p=_getEdgeIntersection(b,a,edge2,bounds,round),p._code=_getBitCode(p,bounds),clippedPoints.push(p)):(b._code&edge2&&(p=_getEdgeIntersection(b,a,edge2,bounds,round),p._code=_getBitCode(p,bounds),clippedPoints.push(p)),clippedPoints.push(a));points=clippedPoints}return points}function polygonCenter(latlngs,crs){var i,j,p1,p2,f,area5,x2,y2,center2;if(!latlngs||latlngs.length===0)throw new Error("latlngs not passed");isFlat(latlngs)||(console.warn("latlngs are not flat! Only the first ring will be used"),latlngs=latlngs[0]);var centroidLatLng=toLatLng([0,0]),bounds=toLatLngBounds(latlngs),areaBounds=bounds.getNorthWest().distanceTo(bounds.getSouthWest())*bounds.getNorthEast().distanceTo(bounds.getNorthWest());areaBounds<1700&&(centroidLatLng=centroid3(latlngs));var len=latlngs.length,points=[];for(i=0;i<len;i++){var latlng=toLatLng(latlngs[i]);points.push(crs.project(toLatLng([latlng.lat-centroidLatLng.lat,latlng.lng-centroidLatLng.lng])))}for(area5=x2=y2=0,i=0,j=len-1;i<len;j=i++)p1=points[i],p2=points[j],f=p1.y*p2.x-p2.y*p1.x,x2+=(p1.x+p2.x)*f,y2+=(p1.y+p2.y)*f,area5+=f*3;area5===0?center2=points[0]:center2=[x2/area5,y2/area5];var latlngCenter=crs.unproject(toPoint(center2));return toLatLng([latlngCenter.lat+centroidLatLng.lat,latlngCenter.lng+centroidLatLng.lng])}function centroid3(coords){for(var latSum=0,lngSum=0,len=0,i=0;i<coords.length;i++){var latlng=toLatLng(coords[i]);latSum+=latlng.lat,lngSum+=latlng.lng,len++}return toLatLng([latSum/len,lngSum/len])}var PolyUtil={__proto__:null,clipPolygon,polygonCenter,centroid:centroid3};function simplify3(points,tolerance){if(!tolerance||!points.length)return points.slice();var sqTolerance=tolerance*tolerance;return points=_reducePoints(points,sqTolerance),points=_simplifyDP(points,sqTolerance),points}function pointToSegmentDistance(p,p1,p2){return Math.sqrt(_sqClosestPointOnSegment(p,p1,p2,!0))}function closestPointOnSegment(p,p1,p2){return _sqClosestPointOnSegment(p,p1,p2)}function _simplifyDP(points,sqTolerance){var len=points.length,ArrayConstructor=typeof Uint8Array!=void 0+""?Uint8Array:Array,markers=new ArrayConstructor(len);markers[0]=markers[len-1]=1,_simplifyDPStep(points,markers,sqTolerance,0,len-1);var i,newPoints=[];for(i=0;i<len;i++)markers[i]&&newPoints.push(points[i]);return newPoints}function _simplifyDPStep(points,markers,sqTolerance,first,last){var maxSqDist=0,index2,i,sqDist;for(i=first+1;i<=last-1;i++)sqDist=_sqClosestPointOnSegment(points[i],points[first],points[last],!0),sqDist>maxSqDist&&(index2=i,maxSqDist=sqDist);maxSqDist>sqTolerance&&(markers[index2]=1,_simplifyDPStep(points,markers,sqTolerance,first,index2),_simplifyDPStep(points,markers,sqTolerance,index2,last))}function _reducePoints(points,sqTolerance){for(var reducedPoints=[points[0]],i=1,prev=0,len=points.length;i<len;i++)_sqDist(points[i],points[prev])>sqTolerance&&(reducedPoints.push(points[i]),prev=i);return prev<len-1&&reducedPoints.push(points[len-1]),reducedPoints}var _lastCode;function clipSegment(a,b,bounds,useLastCode,round){var codeA=useLastCode?_lastCode:_getBitCode(a,bounds),codeB=_getBitCode(b,bounds),codeOut,p,newCode;for(_lastCode=codeB;;){if(!(codeA|codeB))return[a,b];if(codeA&codeB)return!1;codeOut=codeA||codeB,p=_getEdgeIntersection(a,b,codeOut,bounds,round),newCode=_getBitCode(p,bounds),codeOut===codeA?(a=p,codeA=newCode):(b=p,codeB=newCode)}}function _getEdgeIntersection(a,b,code,bounds,round){var dx=b.x-a.x,dy=b.y-a.y,min4=bounds.min,max3=bounds.max,x2,y2;return code&8?(x2=a.x+dx*(max3.y-a.y)/dy,y2=max3.y):code&4?(x2=a.x+dx*(min4.y-a.y)/dy,y2=min4.y):code&2?(x2=max3.x,y2=a.y+dy*(max3.x-a.x)/dx):code&1&&(x2=min4.x,y2=a.y+dy*(min4.x-a.x)/dx),new Point2(x2,y2,round)}function _getBitCode(p,bounds){var code=0;return p.x<bounds.min.x?code|=1:p.x>bounds.max.x&&(code|=2),p.y<bounds.min.y?code|=4:p.y>bounds.max.y&&(code|=8),code}function _sqDist(p1,p2){var dx=p2.x-p1.x,dy=p2.y-p1.y;return dx*dx+dy*dy}function _sqClosestPointOnSegment(p,p1,p2,sqDist){var x2=p1.x,y2=p1.y,dx=p2.x-x2,dy=p2.y-y2,dot=dx*dx+dy*dy,t;return dot>0&&(t=((p.x-x2)*dx+(p.y-y2)*dy)/dot,t>1?(x2=p2.x,y2=p2.y):t>0&&(x2+=dx*t,y2+=dy*t)),dx=p.x-x2,dy=p.y-y2,sqDist?dx*dx+dy*dy:new Point2(x2,y2)}function isFlat(latlngs){return!isArray(latlngs[0])||typeof latlngs[0][0]!="object"&&typeof latlngs[0][0]<"u"}function _flat(latlngs){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),isFlat(latlngs)}function polylineCenter(latlngs,crs){var i,halfDist,segDist,dist,p1,p2,ratio,center2;if(!latlngs||latlngs.length===0)throw new Error("latlngs not passed");isFlat(latlngs)||(console.warn("latlngs are not flat! Only the first ring will be used"),latlngs=latlngs[0]);var centroidLatLng=toLatLng([0,0]),bounds=toLatLngBounds(latlngs),areaBounds=bounds.getNorthWest().distanceTo(bounds.getSouthWest())*bounds.getNorthEast().distanceTo(bounds.getNorthWest());areaBounds<1700&&(centroidLatLng=centroid3(latlngs));var len=latlngs.length,points=[];for(i=0;i<len;i++){var latlng=toLatLng(latlngs[i]);points.push(crs.project(toLatLng([latlng.lat-centroidLatLng.lat,latlng.lng-centroidLatLng.lng])))}for(i=0,halfDist=0;i<len-1;i++)halfDist+=points[i].distanceTo(points[i+1])/2;if(halfDist===0)center2=points[0];else for(i=0,dist=0;i<len-1;i++)if(p1=points[i],p2=points[i+1],segDist=p1.distanceTo(p2),dist+=segDist,dist>halfDist){ratio=(dist-halfDist)/segDist,center2=[p2.x-ratio*(p2.x-p1.x),p2.y-ratio*(p2.y-p1.y)];break}var latlngCenter=crs.unproject(toPoint(center2));return toLatLng([latlngCenter.lat+centroidLatLng.lat,latlngCenter.lng+centroidLatLng.lng])}var LineUtil={__proto__:null,simplify:simplify3,pointToSegmentDistance,closestPointOnSegment,clipSegment,_getEdgeIntersection,_getBitCode,_sqClosestPointOnSegment,isFlat,_flat,polylineCenter},LonLat={project:function(latlng){return new Point2(latlng.lng,latlng.lat)},unproject:function(point4){return new LatLng(point4.y,point4.x)},bounds:new Bounds([-180,-90],[180,90])},Mercator={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Bounds([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(latlng){var d=Math.PI/180,r=this.R,y2=latlng.lat*d,tmp=this.R_MINOR/r,e=Math.sqrt(1-tmp*tmp),con=e*Math.sin(y2),ts=Math.tan(Math.PI/4-y2/2)/Math.pow((1-con)/(1+con),e/2);return y2=-r*Math.log(Math.max(ts,1e-10)),new Point2(latlng.lng*d*r,y2)},unproject:function(point4){for(var d=180/Math.PI,r=this.R,tmp=this.R_MINOR/r,e=Math.sqrt(1-tmp*tmp),ts=Math.exp(-point4.y/r),phi=Math.PI/2-2*Math.atan(ts),i=0,dphi=.1,con;i<15&&Math.abs(dphi)>1e-7;i++)con=e*Math.sin(phi),con=Math.pow((1-con)/(1+con),e/2),dphi=Math.PI/2-2*Math.atan(ts*con)-phi,phi+=dphi;return new LatLng(phi*d,point4.x*d/r)}},index={__proto__:null,LonLat,Mercator,SphericalMercator},EPSG3395=extend4({},Earth,{code:"EPSG:3395",projection:Mercator,transformation:function(){var scale4=.5/(Math.PI*Mercator.R);return toTransformation(scale4,.5,-scale4,.5)}()}),EPSG4326=extend4({},Earth,{code:"EPSG:4326",projection:LonLat,transformation:toTransformation(1/180,1,-1/180,.5)}),Simple=extend4({},CRS,{projection:LonLat,transformation:toTransformation(1,0,-1,0),scale:function(zoom2){return Math.pow(2,zoom2)},zoom:function(scale4){return Math.log(scale4)/Math.LN2},distance:function(latlng1,latlng2){var dx=latlng2.lng-latlng1.lng,dy=latlng2.lat-latlng1.lat;return Math.sqrt(dx*dx+dy*dy)},infinite:!0});CRS.Earth=Earth,CRS.EPSG3395=EPSG3395,CRS.EPSG3857=EPSG3857,CRS.EPSG900913=EPSG900913,CRS.EPSG4326=EPSG4326,CRS.Simple=Simple;var Layer=Evented.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(map5){return map5.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(obj){return obj&&obj.removeLayer(this),this},getPane:function(name){return this._map.getPane(name?this.options[name]||name:this.options.pane)},addInteractiveTarget:function(targetEl){return this._map._targets[stamp(targetEl)]=this,this},removeInteractiveTarget:function(targetEl){return delete this._map._targets[stamp(targetEl)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var map5=e.target;if(map5.hasLayer(this)){if(this._map=map5,this._zoomAnimated=map5._zoomAnimated,this.getEvents){var events=this.getEvents();map5.on(events,this),this.once("remove",function(){map5.off(events,this)},this)}this.onAdd(map5),this.fire("add"),map5.fire("layeradd",{layer:this})}}});Map3.include({addLayer:function(layer){if(!layer._layerAdd)throw new Error("The provided object is not a Layer.");var id=stamp(layer);return this._layers[id]?this:(this._layers[id]=layer,layer._mapToAdd=this,layer.beforeAdd&&layer.beforeAdd(this),this.whenReady(layer._layerAdd,layer),this)},removeLayer:function(layer){var id=stamp(layer);return this._layers[id]?(this._loaded&&layer.onRemove(this),delete this._layers[id],this._loaded&&(this.fire("layerremove",{layer}),layer.fire("remove")),layer._map=layer._mapToAdd=null,this):this},hasLayer:function(layer){return stamp(layer)in this._layers},eachLayer:function(method,context){for(var i in this._layers)method.call(context,this._layers[i]);return this},_addLayers:function(layers2){layers2=layers2?isArray(layers2)?layers2:[layers2]:[];for(var i=0,len=layers2.length;i<len;i++)this.addLayer(layers2[i])},_addZoomLimit:function(layer){(!isNaN(layer.options.maxZoom)||!isNaN(layer.options.minZoom))&&(this._zoomBoundLayers[stamp(layer)]=layer,this._updateZoomLevels())},_removeZoomLimit:function(layer){var id=stamp(layer);this._zoomBoundLayers[id]&&(delete this._zoomBoundLayers[id],this._updateZoomLevels())},_updateZoomLevels:function(){var minZoom=1/0,maxZoom=-1/0,oldZoomSpan=this._getZoomSpan();for(var i in this._zoomBoundLayers){var options=this._zoomBoundLayers[i].options;minZoom=options.minZoom===void 0?minZoom:Math.min(minZoom,options.minZoom),maxZoom=options.maxZoom===void 0?maxZoom:Math.max(maxZoom,options.maxZoom)}this._layersMaxZoom=maxZoom===-1/0?void 0:maxZoom,this._layersMinZoom=minZoom===1/0?void 0:minZoom,oldZoomSpan!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var LayerGroup=Layer.extend({initialize:function(layers2,options){setOptions(this,options),this._layers={};var i,len;if(layers2)for(i=0,len=layers2.length;i<len;i++)this.addLayer(layers2[i])},addLayer:function(layer){var id=this.getLayerId(layer);return this._layers[id]=layer,this._map&&this._map.addLayer(layer),this},removeLayer:function(layer){var id=layer in this._layers?layer:this.getLayerId(layer);return this._map&&this._layers[id]&&this._map.removeLayer(this._layers[id]),delete this._layers[id],this},hasLayer:function(layer){var layerId=typeof layer=="number"?layer:this.getLayerId(layer);return layerId in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(methodName){var args=Array.prototype.slice.call(arguments,1),i,layer;for(i in this._layers)layer=this._layers[i],layer[methodName]&&layer[methodName].apply(layer,args);return this},onAdd:function(map5){this.eachLayer(map5.addLayer,map5)},onRemove:function(map5){this.eachLayer(map5.removeLayer,map5)},eachLayer:function(method,context){for(var i in this._layers)method.call(context,this._layers[i]);return this},getLayer:function(id){return this._layers[id]},getLayers:function(){var layers2=[];return this.eachLayer(layers2.push,layers2),layers2},setZIndex:function(zIndex){return this.invoke("setZIndex",zIndex)},getLayerId:function(layer){return stamp(layer)}}),layerGroup=function(layers2,options){return new LayerGroup(layers2,options)},FeatureGroup=LayerGroup.extend({addLayer:function(layer){return this.hasLayer(layer)?this:(layer.addEventParent(this),LayerGroup.prototype.addLayer.call(this,layer),this.fire("layeradd",{layer}))},removeLayer:function(layer){return this.hasLayer(layer)?(layer in this._layers&&(layer=this._layers[layer]),layer.removeEventParent(this),LayerGroup.prototype.removeLayer.call(this,layer),this.fire("layerremove",{layer})):this},setStyle:function(style2){return this.invoke("setStyle",style2)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var bounds=new LatLngBounds;for(var id in this._layers){var layer=this._layers[id];bounds.extend(layer.getBounds?layer.getBounds():layer.getLatLng())}return bounds}}),featureGroup=function(layers2,options){return new FeatureGroup(layers2,options)},Icon=Class.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(options){setOptions(this,options)},createIcon:function(oldIcon){return this._createIcon("icon",oldIcon)},createShadow:function(oldIcon){return this._createIcon("shadow",oldIcon)},_createIcon:function(name,oldIcon){var src=this._getIconUrl(name);if(!src){if(name==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var img=this._createImg(src,oldIcon&&oldIcon.tagName==="IMG"?oldIcon:null);return this._setIconStyles(img,name),(this.options.crossOrigin||this.options.crossOrigin==="")&&(img.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),img},_setIconStyles:function(img,name){var options=this.options,sizeOption=options[name+"Size"];typeof sizeOption=="number"&&(sizeOption=[sizeOption,sizeOption]);var size11=toPoint(sizeOption),anchor=toPoint(name==="shadow"&&options.shadowAnchor||options.iconAnchor||size11&&size11.divideBy(2,!0));img.className="leaflet-marker-"+name+" "+(options.className||""),anchor&&(img.style.marginLeft=-anchor.x+"px",img.style.marginTop=-anchor.y+"px"),size11&&(img.style.width=size11.x+"px",img.style.height=size11.y+"px")},_createImg:function(src,el){return el=el||document.createElement("img"),el.src=src,el},_getIconUrl:function(name){return Browser.retina&&this.options[name+"RetinaUrl"]||this.options[name+"Url"]}});function icon(options){return new Icon(options)}var IconDefault=Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(name){return typeof IconDefault.imagePath!="string"&&(IconDefault.imagePath=this._detectIconPath()),(this.options.imagePath||IconDefault.imagePath)+Icon.prototype._getIconUrl.call(this,name)},_stripUrl:function(path){var strip=function(str,re,idx){var match=re.exec(str);return match&&match[idx]};return path=strip(path,/^url\((['"])?(.+)\1\)$/,2),path&&strip(path,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var el=create$1("div","leaflet-default-icon-path",document.body),path=getStyle(el,"background-image")||getStyle(el,"backgroundImage");if(document.body.removeChild(el),path=this._stripUrl(path),path)return path;var link2=document.querySelector('link[href$="leaflet.css"]');return link2?link2.href.substring(0,link2.href.length-11-1):""}}),MarkerDrag=Handler.extend({initialize:function(marker2){this._marker=marker2},addHooks:function(){var icon2=this._marker._icon;this._draggable||(this._draggable=new Draggable(icon2,icon2,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),addClass(icon2,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var marker2=this._marker,map5=marker2._map,speed=this._marker.options.autoPanSpeed,padding=this._marker.options.autoPanPadding,iconPos=getPosition(marker2._icon),bounds=map5.getPixelBounds(),origin=map5.getPixelOrigin(),panBounds=toBounds(bounds.min._subtract(origin).add(padding),bounds.max._subtract(origin).subtract(padding));if(!panBounds.contains(iconPos)){var movement=toPoint((Math.max(panBounds.max.x,iconPos.x)-panBounds.max.x)/(bounds.max.x-panBounds.max.x)-(Math.min(panBounds.min.x,iconPos.x)-panBounds.min.x)/(bounds.min.x-panBounds.min.x),(Math.max(panBounds.max.y,iconPos.y)-panBounds.max.y)/(bounds.max.y-panBounds.max.y)-(Math.min(panBounds.min.y,iconPos.y)-panBounds.min.y)/(bounds.min.y-panBounds.min.y)).multiplyBy(speed);map5.panBy(movement,{animate:!1}),this._draggable._newPos._add(movement),this._draggable._startPos._add(movement),setPosition(marker2._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(cancelAnimFrame(this._panRequest),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,e)))},_onDrag:function(e){var marker2=this._marker,shadow=marker2._shadow,iconPos=getPosition(marker2._icon),latlng=marker2._map.layerPointToLatLng(iconPos);shadow&&setPosition(shadow,iconPos),marker2._latlng=latlng,e.latlng=latlng,e.oldLatLng=this._oldLatLng,marker2.fire("move",e).fire("drag",e)},_onDragEnd:function(e){cancelAnimFrame(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Marker=Layer.extend({options:{icon:new IconDefault,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(latlng,options){setOptions(this,options),this._latlng=toLatLng(latlng)},onAdd:function(map5){this._zoomAnimated=this._zoomAnimated&&map5.options.markerZoomAnimation,this._zoomAnimated&&map5.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(map5){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&map5.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(latlng){var oldLatLng=this._latlng;return this._latlng=toLatLng(latlng),this.update(),this.fire("move",{oldLatLng,latlng:this._latlng})},setZIndexOffset:function(offset){return this.options.zIndexOffset=offset,this.update()},getIcon:function(){return this.options.icon},setIcon:function(icon2){return this.options.icon=icon2,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var pos=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(pos)}return this},_initIcon:function(){var options=this.options,classToAdd="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),icon2=options.icon.createIcon(this._icon),addIcon=!1;icon2!==this._icon&&(this._icon&&this._removeIcon(),addIcon=!0,options.title&&(icon2.title=options.title),icon2.tagName==="IMG"&&(icon2.alt=options.alt||"")),addClass(icon2,classToAdd),options.keyboard&&(icon2.tabIndex="0",icon2.setAttribute("role","button")),this._icon=icon2,options.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&on(icon2,"focus",this._panOnFocus,this);var newShadow=options.icon.createShadow(this._shadow),addShadow=!1;newShadow!==this._shadow&&(this._removeShadow(),addShadow=!0),newShadow&&(addClass(newShadow,classToAdd),newShadow.alt=""),this._shadow=newShadow,options.opacity<1&&this._updateOpacity(),addIcon&&this.getPane().appendChild(this._icon),this._initInteraction(),newShadow&&addShadow&&this.getPane(options.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&off(this._icon,"focus",this._panOnFocus,this),remove6(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&remove6(this._shadow),this._shadow=null},_setPos:function(pos){this._icon&&setPosition(this._icon,pos),this._shadow&&setPosition(this._shadow,pos),this._zIndex=pos.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(offset){this._icon&&(this._icon.style.zIndex=this._zIndex+offset)},_animateZoom:function(opt){var pos=this._map._latLngToNewLayerPoint(this._latlng,opt.zoom,opt.center).round();this._setPos(pos)},_initInteraction:function(){if(this.options.interactive&&(addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),MarkerDrag)){var draggable=this.options.draggable;this.dragging&&(draggable=this.dragging.enabled(),this.dragging.disable()),this.dragging=new MarkerDrag(this),draggable&&this.dragging.enable()}},setOpacity:function(opacity){return this.options.opacity=opacity,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var opacity=this.options.opacity;this._icon&&setOpacity(this._icon,opacity),this._shadow&&setOpacity(this._shadow,opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var map5=this._map;if(map5){var iconOpts=this.options.icon.options,size11=iconOpts.iconSize?toPoint(iconOpts.iconSize):toPoint(0,0),anchor=iconOpts.iconAnchor?toPoint(iconOpts.iconAnchor):toPoint(0,0);map5.panInside(this._latlng,{paddingTopLeft:anchor,paddingBottomRight:size11.subtract(anchor)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function marker(latlng,options){return new Marker(latlng,options)}var Path=Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(map5){this._renderer=map5.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(style2){return setOptions(this,style2),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&style2&&Object.prototype.hasOwnProperty.call(style2,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),CircleMarker=Path.extend({options:{fill:!0,radius:10},initialize:function(latlng,options){setOptions(this,options),this._latlng=toLatLng(latlng),this._radius=this.options.radius},setLatLng:function(latlng){var oldLatLng=this._latlng;return this._latlng=toLatLng(latlng),this.redraw(),this.fire("move",{oldLatLng,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(radius2){return this.options.radius=this._radius=radius2,this.redraw()},getRadius:function(){return this._radius},setStyle:function(options){var radius2=options&&options.radius||this._radius;return Path.prototype.setStyle.call(this,options),this.setRadius(radius2),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,r2=this._radiusY||r,w=this._clickTolerance(),p=[r+w,r2+w];this._pxBounds=new Bounds(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(p){return p.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function circleMarker(latlng,options){return new CircleMarker(latlng,options)}var Circle2=CircleMarker.extend({initialize:function(latlng,options,legacyOptions){if(typeof options=="number"&&(options=extend4({},legacyOptions,{radius:options})),setOptions(this,options),this._latlng=toLatLng(latlng),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(radius2){return this._mRadius=radius2,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var half=[this._radius,this._radiusY||this._radius];return new LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(half)),this._map.layerPointToLatLng(this._point.add(half)))},setStyle:Path.prototype.setStyle,_project:function(){var lng=this._latlng.lng,lat=this._latlng.lat,map5=this._map,crs=map5.options.crs;if(crs.distance===Earth.distance){var d=Math.PI/180,latR=this._mRadius/Earth.R/d,top=map5.project([lat+latR,lng]),bottom=map5.project([lat-latR,lng]),p=top.add(bottom).divideBy(2),lat2=map5.unproject(p).lat,lngR=Math.acos((Math.cos(latR*d)-Math.sin(lat*d)*Math.sin(lat2*d))/(Math.cos(lat*d)*Math.cos(lat2*d)))/d;(isNaN(lngR)||lngR===0)&&(lngR=latR/Math.cos(Math.PI/180*lat)),this._point=p.subtract(map5.getPixelOrigin()),this._radius=isNaN(lngR)?0:p.x-map5.project([lat2,lng-lngR]).x,this._radiusY=p.y-top.y}else{var latlng2=crs.unproject(crs.project(this._latlng).subtract([this._mRadius,0]));this._point=map5.latLngToLayerPoint(this._latlng),this._radius=this._point.x-map5.latLngToLayerPoint(latlng2).x}this._updateBounds()}});function circle2(latlng,options,legacyOptions){return new Circle2(latlng,options,legacyOptions)}var Polyline=Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(latlngs,options){setOptions(this,options),this._setLatLngs(latlngs)},getLatLngs:function(){return this._latlngs},setLatLngs:function(latlngs){return this._setLatLngs(latlngs),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(p){for(var minDistance=1/0,minPoint=null,closest=_sqClosestPointOnSegment,p1,p2,j=0,jLen=this._parts.length;j<jLen;j++)for(var points=this._parts[j],i=1,len=points.length;i<len;i++){p1=points[i-1],p2=points[i];var sqDist=closest(p,p1,p2,!0);sqDist<minDistance&&(minDistance=sqDist,minPoint=closest(p,p1,p2))}return minPoint&&(minPoint.distance=Math.sqrt(minDistance)),minPoint},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return polylineCenter(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(latlng,latlngs){return latlngs=latlngs||this._defaultShape(),latlng=toLatLng(latlng),latlngs.push(latlng),this._bounds.extend(latlng),this.redraw()},_setLatLngs:function(latlngs){this._bounds=new LatLngBounds,this._latlngs=this._convertLatLngs(latlngs)},_defaultShape:function(){return isFlat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(latlngs){for(var result=[],flat=isFlat(latlngs),i=0,len=latlngs.length;i<len;i++)flat?(result[i]=toLatLng(latlngs[i]),this._bounds.extend(result[i])):result[i]=this._convertLatLngs(latlngs[i]);return result},_project:function(){var pxBounds=new Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,pxBounds),this._bounds.isValid()&&pxBounds.isValid()&&(this._rawPxBounds=pxBounds,this._updateBounds())},_updateBounds:function(){var w=this._clickTolerance(),p=new Point2(w,w);this._rawPxBounds&&(this._pxBounds=new Bounds([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(latlngs,result,projectedBounds){var flat=latlngs[0]instanceof LatLng,len=latlngs.length,i,ring;if(flat){for(ring=[],i=0;i<len;i++)ring[i]=this._map.latLngToLayerPoint(latlngs[i]),projectedBounds.extend(ring[i]);result.push(ring)}else for(i=0;i<len;i++)this._projectLatlngs(latlngs[i],result,projectedBounds)},_clipPoints:function(){var bounds=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(bounds))){if(this.options.noClip){this._parts=this._rings;return}var parts=this._parts,i,j,k,len,len2,segment,points;for(i=0,k=0,len=this._rings.length;i<len;i++)for(points=this._rings[i],j=0,len2=points.length;j<len2-1;j++)segment=clipSegment(points[j],points[j+1],bounds,j,!0),segment&&(parts[k]=parts[k]||[],parts[k].push(segment[0]),(segment[1]!==points[j+1]||j===len2-2)&&(parts[k].push(segment[1]),k++))}},_simplifyPoints:function(){for(var parts=this._parts,tolerance=this.options.smoothFactor,i=0,len=parts.length;i<len;i++)parts[i]=simplify3(parts[i],tolerance)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(p,closed){var i,j,k,len,len2,part,w=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(i=0,len=this._parts.length;i<len;i++)for(part=this._parts[i],j=0,len2=part.length,k=len2-1;j<len2;k=j++)if(!(!closed&&j===0)&&pointToSegmentDistance(p,part[k],part[j])<=w)return!0;return!1}});function polyline(latlngs,options){return new Polyline(latlngs,options)}Polyline._flat=_flat;var Polygon2=Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return polygonCenter(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(latlngs){var result=Polyline.prototype._convertLatLngs.call(this,latlngs),len=result.length;return len>=2&&result[0]instanceof LatLng&&result[0].equals(result[len-1])&&result.pop(),result},_setLatLngs:function(latlngs){Polyline.prototype._setLatLngs.call(this,latlngs),isFlat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return isFlat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var bounds=this._renderer._bounds,w=this.options.weight,p=new Point2(w,w);if(bounds=new Bounds(bounds.min.subtract(p),bounds.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(bounds))){if(this.options.noClip){this._parts=this._rings;return}for(var i=0,len=this._rings.length,clipped;i<len;i++)clipped=clipPolygon(this._rings[i],bounds,!0),clipped.length&&this._parts.push(clipped)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(p){var inside=!1,part,p1,p2,i,j,k,len,len2;if(!this._pxBounds||!this._pxBounds.contains(p))return!1;for(i=0,len=this._parts.length;i<len;i++)for(part=this._parts[i],j=0,len2=part.length,k=len2-1;j<len2;k=j++)p1=part[j],p2=part[k],p1.y>p.y!=p2.y>p.y&&p.x<(p2.x-p1.x)*(p.y-p1.y)/(p2.y-p1.y)+p1.x&&(inside=!inside);return inside||Polyline.prototype._containsPoint.call(this,p,!0)}});function polygon4(latlngs,options){return new Polygon2(latlngs,options)}var GeoJSON=FeatureGroup.extend({initialize:function(geojson,options){setOptions(this,options),this._layers={},geojson&&this.addData(geojson)},addData:function(geojson){var features=isArray(geojson)?geojson:geojson.features,i,len,feature2;if(features){for(i=0,len=features.length;i<len;i++)feature2=features[i],(feature2.geometries||feature2.geometry||feature2.features||feature2.coordinates)&&this.addData(feature2);return this}var options=this.options;if(options.filter&&!options.filter(geojson))return this;var layer=geometryToLayer(geojson,options);return layer?(layer.feature=asFeature(geojson),layer.defaultOptions=layer.options,this.resetStyle(layer),options.onEachFeature&&options.onEachFeature(geojson,layer),this.addLayer(layer)):this},resetStyle:function(layer){return layer===void 0?this.eachLayer(this.resetStyle,this):(layer.options=extend4({},layer.defaultOptions),this._setLayerStyle(layer,this.options.style),this)},setStyle:function(style2){return this.eachLayer(function(layer){this._setLayerStyle(layer,style2)},this)},_setLayerStyle:function(layer,style2){layer.setStyle&&(typeof style2=="function"&&(style2=style2(layer.feature)),layer.setStyle(style2))}});function geometryToLayer(geojson,options){var geometry=geojson.type==="Feature"?geojson.geometry:geojson,coords=geometry?geometry.coordinates:null,layers2=[],pointToLayer=options&&options.pointToLayer,_coordsToLatLng=options&&options.coordsToLatLng||coordsToLatLng,latlng,latlngs,i,len;if(!coords&&!geometry)return null;switch(geometry.type){case"Point":return latlng=_coordsToLatLng(coords),_pointToLayer(pointToLayer,geojson,latlng,options);case"MultiPoint":for(i=0,len=coords.length;i<len;i++)latlng=_coordsToLatLng(coords[i]),layers2.push(_pointToLayer(pointToLayer,geojson,latlng,options));return new FeatureGroup(layers2);case"LineString":case"MultiLineString":return latlngs=coordsToLatLngs(coords,geometry.type==="LineString"?0:1,_coordsToLatLng),new Polyline(latlngs,options);case"Polygon":case"MultiPolygon":return latlngs=coordsToLatLngs(coords,geometry.type==="Polygon"?1:2,_coordsToLatLng),new Polygon2(latlngs,options);case"GeometryCollection":for(i=0,len=geometry.geometries.length;i<len;i++){var geoLayer=geometryToLayer({geometry:geometry.geometries[i],type:"Feature",properties:geojson.properties},options);geoLayer&&layers2.push(geoLayer)}return new FeatureGroup(layers2);case"FeatureCollection":for(i=0,len=geometry.features.length;i<len;i++){var featureLayer=geometryToLayer(geometry.features[i],options);featureLayer&&layers2.push(featureLayer)}return new FeatureGroup(layers2);default:throw new Error("Invalid GeoJSON object.")}}function _pointToLayer(pointToLayerFn,geojson,latlng,options){return pointToLayerFn?pointToLayerFn(geojson,latlng):new Marker(latlng,options&&options.markersInheritOptions&&options)}function coordsToLatLng(coords){return new LatLng(coords[1],coords[0],coords[2])}function coordsToLatLngs(coords,levelsDeep,_coordsToLatLng){for(var latlngs=[],i=0,len=coords.length,latlng;i<len;i++)latlng=levelsDeep?coordsToLatLngs(coords[i],levelsDeep-1,_coordsToLatLng):(_coordsToLatLng||coordsToLatLng)(coords[i]),latlngs.push(latlng);return latlngs}function latLngToCoords(latlng,precision){return latlng=toLatLng(latlng),latlng.alt!==void 0?[formatNum(latlng.lng,precision),formatNum(latlng.lat,precision),formatNum(latlng.alt,precision)]:[formatNum(latlng.lng,precision),formatNum(latlng.lat,precision)]}function latLngsToCoords(latlngs,levelsDeep,closed,precision){for(var coords=[],i=0,len=latlngs.length;i<len;i++)coords.push(levelsDeep?latLngsToCoords(latlngs[i],isFlat(latlngs[i])?0:levelsDeep-1,closed,precision):latLngToCoords(latlngs[i],precision));return!levelsDeep&&closed&&coords.length>0&&coords.push(coords[0].slice()),coords}function getFeature(layer,newGeometry){return layer.feature?extend4({},layer.feature,{geometry:newGeometry}):asFeature(newGeometry)}function asFeature(geojson){return geojson.type==="Feature"||geojson.type==="FeatureCollection"?geojson:{type:"Feature",properties:{},geometry:geojson}}var PointToGeoJSON={toGeoJSON:function(precision){return getFeature(this,{type:"Point",coordinates:latLngToCoords(this.getLatLng(),precision)})}};Marker.include(PointToGeoJSON),Circle2.include(PointToGeoJSON),CircleMarker.include(PointToGeoJSON),Polyline.include({toGeoJSON:function(precision){var multi=!isFlat(this._latlngs),coords=latLngsToCoords(this._latlngs,multi?1:0,!1,precision);return getFeature(this,{type:(multi?"Multi":"")+"LineString",coordinates:coords})}}),Polygon2.include({toGeoJSON:function(precision){var holes=!isFlat(this._latlngs),multi=holes&&!isFlat(this._latlngs[0]),coords=latLngsToCoords(this._latlngs,multi?2:holes?1:0,!0,precision);return holes||(coords=[coords]),getFeature(this,{type:(multi?"Multi":"")+"Polygon",coordinates:coords})}}),LayerGroup.include({toMultiPoint:function(precision){var coords=[];return this.eachLayer(function(layer){coords.push(layer.toGeoJSON(precision).geometry.coordinates)}),getFeature(this,{type:"MultiPoint",coordinates:coords})},toGeoJSON:function(precision){var type2=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(type2==="MultiPoint")return this.toMultiPoint(precision);var isGeometryCollection2=type2==="GeometryCollection",jsons=[];return this.eachLayer(function(layer){if(layer.toGeoJSON){var json=layer.toGeoJSON(precision);if(isGeometryCollection2)jsons.push(json.geometry);else{var feature2=asFeature(json);feature2.type==="FeatureCollection"?jsons.push.apply(jsons,feature2.features):jsons.push(feature2)}}}),isGeometryCollection2?getFeature(this,{geometries:jsons,type:"GeometryCollection"}):{type:"FeatureCollection",features:jsons}}});function geoJSON(geojson,options){return new GeoJSON(geojson,options)}var geoJson=geoJSON,ImageOverlay=Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(url,bounds,options){this._url=url,this._bounds=toLatLngBounds(bounds),setOptions(this,options)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){remove6(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(opacity){return this.options.opacity=opacity,this._image&&this._updateOpacity(),this},setStyle:function(styleOpts){return styleOpts.opacity&&this.setOpacity(styleOpts.opacity),this},bringToFront:function(){return this._map&&toFront(this._image),this},bringToBack:function(){return this._map&&toBack(this._image),this},setUrl:function(url){return this._url=url,this._image&&(this._image.src=url),this},setBounds:function(bounds){return this._bounds=toLatLngBounds(bounds),this._map&&this._reset(),this},getEvents:function(){var events={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(events.zoomanim=this._animateZoom),events},setZIndex:function(value){return this.options.zIndex=value,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var wasElementSupplied=this._url.tagName==="IMG",img=this._image=wasElementSupplied?this._url:create$1("img");if(addClass(img,"leaflet-image-layer"),this._zoomAnimated&&addClass(img,"leaflet-zoom-animated"),this.options.className&&addClass(img,this.options.className),img.onselectstart=falseFn,img.onmousemove=falseFn,img.onload=bind(this.fire,this,"load"),img.onerror=bind(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(img.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),wasElementSupplied){this._url=img.src;return}img.src=this._url,img.alt=this.options.alt},_animateZoom:function(e){var scale4=this._map.getZoomScale(e.zoom),offset=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;setTransform(this._image,offset,scale4)},_reset:function(){var image=this._image,bounds=new Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),size11=bounds.getSize();setPosition(image,bounds.min),image.style.width=size11.x+"px",image.style.height=size11.y+"px"},_updateOpacity:function(){setOpacity(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var errorUrl=this.options.errorOverlayUrl;errorUrl&&this._url!==errorUrl&&(this._url=errorUrl,this._image.src=errorUrl)},getCenter:function(){return this._bounds.getCenter()}}),imageOverlay=function(url,bounds,options){return new ImageOverlay(url,bounds,options)},VideoOverlay=ImageOverlay.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var wasElementSupplied=this._url.tagName==="VIDEO",vid=this._image=wasElementSupplied?this._url:create$1("video");if(addClass(vid,"leaflet-image-layer"),this._zoomAnimated&&addClass(vid,"leaflet-zoom-animated"),this.options.className&&addClass(vid,this.options.className),vid.onselectstart=falseFn,vid.onmousemove=falseFn,vid.onloadeddata=bind(this.fire,this,"load"),wasElementSupplied){for(var sourceElements=vid.getElementsByTagName("source"),sources=[],j=0;j<sourceElements.length;j++)sources.push(sourceElements[j].src);this._url=sourceElements.length>0?sources:[vid.src];return}isArray(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(vid.style,"objectFit")&&(vid.style.objectFit="fill"),vid.autoplay=!!this.options.autoplay,vid.loop=!!this.options.loop,vid.muted=!!this.options.muted,vid.playsInline=!!this.options.playsInline;for(var i=0;i<this._url.length;i++){var source=create$1("source");source.src=this._url[i],vid.appendChild(source)}}});function videoOverlay(video,bounds,options){return new VideoOverlay(video,bounds,options)}var SVGOverlay=ImageOverlay.extend({_initImage:function(){var el=this._image=this._url;addClass(el,"leaflet-image-layer"),this._zoomAnimated&&addClass(el,"leaflet-zoom-animated"),this.options.className&&addClass(el,this.options.className),el.onselectstart=falseFn,el.onmousemove=falseFn}});function svgOverlay(el,bounds,options){return new SVGOverlay(el,bounds,options)}var DivOverlay=Layer.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(options,source){options&&(options instanceof LatLng||isArray(options))?(this._latlng=toLatLng(options),setOptions(this,source)):(setOptions(this,options),this._source=source),this.options.content&&(this._content=this.options.content)},openOn:function(map5){return map5=arguments.length?map5:this._source._map,map5.hasLayer(this)||map5.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(layer){return this._map?this.close():(arguments.length?this._source=layer:layer=this._source,this._prepareOpen(),this.openOn(layer._map)),this},onAdd:function(map5){this._zoomAnimated=map5._zoomAnimated,this._container||this._initLayout(),map5._fadeAnimated&&setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),map5._fadeAnimated&&setOpacity(this._container,1),this.bringToFront(),this.options.interactive&&(addClass(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(map5){map5._fadeAnimated?(setOpacity(this._container,0),this._removeTimeout=setTimeout(bind(remove6,void 0,this._container),200)):remove6(this._container),this.options.interactive&&(removeClass(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(latlng){return this._latlng=toLatLng(latlng),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(content){return this._content=content,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var events={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(events.zoomanim=this._animateZoom),events},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&toFront(this._container),this},bringToBack:function(){return this._map&&toBack(this._container),this},_prepareOpen:function(latlng){var source=this._source;if(!source._map)return!1;if(source instanceof FeatureGroup){source=null;var layers2=this._source._layers;for(var id in layers2)if(layers2[id]._map){source=layers2[id];break}if(!source)return!1;this._source=source}if(!latlng)if(source.getCenter)latlng=source.getCenter();else if(source.getLatLng)latlng=source.getLatLng();else if(source.getBounds)latlng=source.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(latlng),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var node=this._contentNode,content=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof content=="string")node.innerHTML=content;else{for(;node.hasChildNodes();)node.removeChild(node.firstChild);node.appendChild(content)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var pos=this._map.latLngToLayerPoint(this._latlng),offset=toPoint(this.options.offset),anchor=this._getAnchor();this._zoomAnimated?setPosition(this._container,pos.add(anchor)):offset=offset.add(pos).add(anchor);var bottom=this._containerBottom=-offset.y,left=this._containerLeft=-Math.round(this._containerWidth/2)+offset.x;this._container.style.bottom=bottom+"px",this._container.style.left=left+"px"}},_getAnchor:function(){return[0,0]}});Map3.include({_initOverlay:function(OverlayClass,content,latlng,options){var overlay=content;return overlay instanceof OverlayClass||(overlay=new OverlayClass(options).setContent(content)),latlng&&overlay.setLatLng(latlng),overlay}}),Layer.include({_initOverlay:function(OverlayClass,old,content,options){var overlay=content;return overlay instanceof OverlayClass?(setOptions(overlay,options),overlay._source=this):(overlay=old&&!options?old:new OverlayClass(options,this),overlay.setContent(content)),overlay}});var Popup=DivOverlay.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(map5){return map5=arguments.length?map5:this._source._map,!map5.hasLayer(this)&&map5._popup&&map5._popup.options.autoClose&&map5.removeLayer(map5._popup),map5._popup=this,DivOverlay.prototype.openOn.call(this,map5)},onAdd:function(map5){DivOverlay.prototype.onAdd.call(this,map5),map5.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Path||this._source.on("preclick",stopPropagation))},onRemove:function(map5){DivOverlay.prototype.onRemove.call(this,map5),map5.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Path||this._source.off("preclick",stopPropagation))},getEvents:function(){var events=DivOverlay.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(events.preclick=this.close),this.options.keepInView&&(events.moveend=this._adjustPan),events},_initLayout:function(){var prefix="leaflet-popup",container=this._container=create$1("div",prefix+" "+(this.options.className||"")+" leaflet-zoom-animated"),wrapper=this._wrapper=create$1("div",prefix+"-content-wrapper",container);if(this._contentNode=create$1("div",prefix+"-content",wrapper),disableClickPropagation(container),disableScrollPropagation(this._contentNode),on(container,"contextmenu",stopPropagation),this._tipContainer=create$1("div",prefix+"-tip-container",container),this._tip=create$1("div",prefix+"-tip",this._tipContainer),this.options.closeButton){var closeButton=this._closeButton=create$1("a",prefix+"-close-button",container);closeButton.setAttribute("role","button"),closeButton.setAttribute("aria-label","Close popup"),closeButton.href="#close",closeButton.innerHTML='<span aria-hidden="true">&#215;</span>',on(closeButton,"click",function(ev){preventDefault(ev),this.close()},this)}},_updateLayout:function(){var container=this._contentNode,style2=container.style;style2.width="",style2.whiteSpace="nowrap";var width=container.offsetWidth;width=Math.min(width,this.options.maxWidth),width=Math.max(width,this.options.minWidth),style2.width=width+1+"px",style2.whiteSpace="",style2.height="";var height=container.offsetHeight,maxHeight=this.options.maxHeight,scrolledClass="leaflet-popup-scrolled";maxHeight&&height>maxHeight?(style2.height=maxHeight+"px",addClass(container,scrolledClass)):removeClass(container,scrolledClass),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var pos=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),anchor=this._getAnchor();setPosition(this._container,pos.add(anchor))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var map5=this._map,marginBottom=parseInt(getStyle(this._container,"marginBottom"),10)||0,containerHeight=this._container.offsetHeight+marginBottom,containerWidth=this._containerWidth,layerPos=new Point2(this._containerLeft,-containerHeight-this._containerBottom);layerPos._add(getPosition(this._container));var containerPos=map5.layerPointToContainerPoint(layerPos),padding=toPoint(this.options.autoPanPadding),paddingTL=toPoint(this.options.autoPanPaddingTopLeft||padding),paddingBR=toPoint(this.options.autoPanPaddingBottomRight||padding),size11=map5.getSize(),dx=0,dy=0;containerPos.x+containerWidth+paddingBR.x>size11.x&&(dx=containerPos.x+containerWidth-size11.x+paddingBR.x),containerPos.x-dx-paddingTL.x<0&&(dx=containerPos.x-paddingTL.x),containerPos.y+containerHeight+paddingBR.y>size11.y&&(dy=containerPos.y+containerHeight-size11.y+paddingBR.y),containerPos.y-dy-paddingTL.y<0&&(dy=containerPos.y-paddingTL.y),(dx||dy)&&(this.options.keepInView&&(this._autopanning=!0),map5.fire("autopanstart").panBy([dx,dy]))}},_getAnchor:function(){return toPoint(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),popup=function(options,source){return new Popup(options,source)};Map3.mergeOptions({closePopupOnClick:!0}),Map3.include({openPopup:function(popup2,latlng,options){return this._initOverlay(Popup,popup2,latlng,options).openOn(this),this},closePopup:function(popup2){return popup2=arguments.length?popup2:this._popup,popup2&&popup2.close(),this}}),Layer.include({bindPopup:function(content,options){return this._popup=this._initOverlay(Popup,this._popup,content,options),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(latlng){return this._popup&&(this instanceof FeatureGroup||(this._popup._source=this),this._popup._prepareOpen(latlng||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(content){return this._popup&&this._popup.setContent(content),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){stop(e);var target=e.layer||e.target;if(this._popup._source===target&&!(target instanceof Path)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=target,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Tooltip=DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(map5){DivOverlay.prototype.onAdd.call(this,map5),this.setOpacity(this.options.opacity),map5.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(map5){DivOverlay.prototype.onRemove.call(this,map5),map5.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var events=DivOverlay.prototype.getEvents.call(this);return this.options.permanent||(events.preclick=this.close),events},_initLayout:function(){var prefix="leaflet-tooltip",className=prefix+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=create$1("div",className),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+stamp(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(pos){var subX,subY,map5=this._map,container=this._container,centerPoint=map5.latLngToContainerPoint(map5.getCenter()),tooltipPoint=map5.layerPointToContainerPoint(pos),direction=this.options.direction,tooltipWidth=container.offsetWidth,tooltipHeight=container.offsetHeight,offset=toPoint(this.options.offset),anchor=this._getAnchor();direction==="top"?(subX=tooltipWidth/2,subY=tooltipHeight):direction==="bottom"?(subX=tooltipWidth/2,subY=0):direction==="center"?(subX=tooltipWidth/2,subY=tooltipHeight/2):direction==="right"?(subX=0,subY=tooltipHeight/2):direction==="left"?(subX=tooltipWidth,subY=tooltipHeight/2):tooltipPoint.x<centerPoint.x?(direction="right",subX=0,subY=tooltipHeight/2):(direction="left",subX=tooltipWidth+(offset.x+anchor.x)*2,subY=tooltipHeight/2),pos=pos.subtract(toPoint(subX,subY,!0)).add(offset).add(anchor),removeClass(container,"leaflet-tooltip-right"),removeClass(container,"leaflet-tooltip-left"),removeClass(container,"leaflet-tooltip-top"),removeClass(container,"leaflet-tooltip-bottom"),addClass(container,"leaflet-tooltip-"+direction),setPosition(container,pos)},_updatePosition:function(){var pos=this._map.latLngToLayerPoint(this._latlng);this._setPosition(pos)},setOpacity:function(opacity){this.options.opacity=opacity,this._container&&setOpacity(this._container,opacity)},_animateZoom:function(e){var pos=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(pos)},_getAnchor:function(){return toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),tooltip=function(options,source){return new Tooltip(options,source)};Map3.include({openTooltip:function(tooltip2,latlng,options){return this._initOverlay(Tooltip,tooltip2,latlng,options).openOn(this),this},closeTooltip:function(tooltip2){return tooltip2.close(),this}}),Layer.include({bindTooltip:function(content,options){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Tooltip,this._tooltip,content,options),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(remove7){if(!(!remove7&&this._tooltipHandlersAdded)){var onOff=remove7?"off":"on",events={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?events.add=this._openTooltip:(events.mouseover=this._openTooltip,events.mouseout=this.closeTooltip,events.click=this._openTooltip,this._map?this._addFocusListeners():events.add=this._addFocusListeners),this._tooltip.options.sticky&&(events.mousemove=this._moveTooltip),this[onOff](events),this._tooltipHandlersAdded=!remove7}},openTooltip:function(latlng){return this._tooltip&&(this instanceof FeatureGroup||(this._tooltip._source=this),this._tooltip._prepareOpen(latlng)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(content){return this._tooltip&&this._tooltip.setContent(content),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(layer){var el=typeof layer.getElement=="function"&&layer.getElement();el&&(on(el,"focus",function(){this._tooltip._source=layer,this.openTooltip()},this),on(el,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(layer){var el=typeof layer.getElement=="function"&&layer.getElement();el&&el.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var that=this;this._map.once("moveend",function(){that._openOnceFlag=!1,that._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var latlng=e.latlng,containerPoint,layerPoint;this._tooltip.options.sticky&&e.originalEvent&&(containerPoint=this._map.mouseEventToContainerPoint(e.originalEvent),layerPoint=this._map.containerPointToLayerPoint(containerPoint),latlng=this._map.layerPointToLatLng(layerPoint)),this._tooltip.setLatLng(latlng)}});var DivIcon=Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(oldIcon){var div=oldIcon&&oldIcon.tagName==="DIV"?oldIcon:document.createElement("div"),options=this.options;if(options.html instanceof Element?(empty(div),div.appendChild(options.html)):div.innerHTML=options.html!==!1?options.html:"",options.bgPos){var bgPos=toPoint(options.bgPos);div.style.backgroundPosition=-bgPos.x+"px "+-bgPos.y+"px"}return this._setIconStyles(div,"icon"),div},createShadow:function(){return null}});function divIcon(options){return new DivIcon(options)}Icon.Default=IconDefault;var GridLayer=Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(options){setOptions(this,options)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(map5){map5._addZoomLimit(this)},onRemove:function(map5){this._removeAllTiles(),remove6(this._container),map5._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(opacity){return this.options.opacity=opacity,this._updateOpacity(),this},setZIndex:function(zIndex){return this.options.zIndex=zIndex,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var tileZoom=this._clampZoom(this._map.getZoom());tileZoom!==this._tileZoom&&(this._tileZoom=tileZoom,this._updateLevels()),this._update()}return this},getEvents:function(){var events={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=throttle(this._onMoveEnd,this.options.updateInterval,this)),events.move=this._onMove),this._zoomAnimated&&(events.zoomanim=this._animateZoom),events},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Point2?s:new Point2(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(compare10){for(var layers2=this.getPane().children,edgeZIndex=-compare10(-1/0,1/0),i=0,len=layers2.length,zIndex;i<len;i++)zIndex=layers2[i].style.zIndex,layers2[i]!==this._container&&zIndex&&(edgeZIndex=compare10(edgeZIndex,+zIndex));isFinite(edgeZIndex)&&(this.options.zIndex=edgeZIndex+compare10(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Browser.ielt9){setOpacity(this._container,this.options.opacity);var now=+new Date,nextFrame=!1,willPrune=!1;for(var key in this._tiles){var tile=this._tiles[key];if(!(!tile.current||!tile.loaded)){var fade=Math.min(1,(now-tile.loaded)/200);setOpacity(tile.el,fade),fade<1?nextFrame=!0:(tile.active?willPrune=!0:this._onOpaqueTile(tile),tile.active=!0)}}willPrune&&!this._noPrune&&this._pruneTiles(),nextFrame&&(cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this))}},_onOpaqueTile:falseFn,_initContainer:function(){this._container||(this._container=create$1("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var zoom2=this._tileZoom,maxZoom=this.options.maxZoom;if(zoom2!==void 0){for(var z in this._levels)z=Number(z),this._levels[z].el.children.length||z===zoom2?(this._levels[z].el.style.zIndex=maxZoom-Math.abs(zoom2-z),this._onUpdateLevel(z)):(remove6(this._levels[z].el),this._removeTilesAtZoom(z),this._onRemoveLevel(z),delete this._levels[z]);var level=this._levels[zoom2],map5=this._map;return level||(level=this._levels[zoom2]={},level.el=create$1("div","leaflet-tile-container leaflet-zoom-animated",this._container),level.el.style.zIndex=maxZoom,level.origin=map5.project(map5.unproject(map5.getPixelOrigin()),zoom2).round(),level.zoom=zoom2,this._setZoomTransform(level,map5.getCenter(),map5.getZoom()),falseFn(level.el.offsetWidth),this._onCreateLevel(level)),this._level=level,level}},_onUpdateLevel:falseFn,_onRemoveLevel:falseFn,_onCreateLevel:falseFn,_pruneTiles:function(){if(this._map){var key,tile,zoom2=this._map.getZoom();if(zoom2>this.options.maxZoom||zoom2<this.options.minZoom){this._removeAllTiles();return}for(key in this._tiles)tile=this._tiles[key],tile.retain=tile.current;for(key in this._tiles)if(tile=this._tiles[key],tile.current&&!tile.active){var coords=tile.coords;this._retainParent(coords.x,coords.y,coords.z,coords.z-5)||this._retainChildren(coords.x,coords.y,coords.z,coords.z+2)}for(key in this._tiles)this._tiles[key].retain||this._removeTile(key)}},_removeTilesAtZoom:function(zoom2){for(var key in this._tiles)this._tiles[key].coords.z===zoom2&&this._removeTile(key)},_removeAllTiles:function(){for(var key in this._tiles)this._removeTile(key)},_invalidateAll:function(){for(var z in this._levels)remove6(this._levels[z].el),this._onRemoveLevel(Number(z)),delete this._levels[z];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(x2,y2,z,minZoom){var x22=Math.floor(x2/2),y22=Math.floor(y2/2),z2=z-1,coords2=new Point2(+x22,+y22);coords2.z=+z2;var key=this._tileCoordsToKey(coords2),tile=this._tiles[key];return tile&&tile.active?(tile.retain=!0,!0):(tile&&tile.loaded&&(tile.retain=!0),z2>minZoom?this._retainParent(x22,y22,z2,minZoom):!1)},_retainChildren:function(x2,y2,z,maxZoom){for(var i=2*x2;i<2*x2+2;i++)for(var j=2*y2;j<2*y2+2;j++){var coords=new Point2(i,j);coords.z=z+1;var key=this._tileCoordsToKey(coords),tile=this._tiles[key];if(tile&&tile.active){tile.retain=!0;continue}else tile&&tile.loaded&&(tile.retain=!0);z+1<maxZoom&&this._retainChildren(i,j,z+1,maxZoom)}},_resetView:function(e){var animating=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),animating,animating)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(zoom2){var options=this.options;return options.minNativeZoom!==void 0&&zoom2<options.minNativeZoom?options.minNativeZoom:options.maxNativeZoom!==void 0&&options.maxNativeZoom<zoom2?options.maxNativeZoom:zoom2},_setView:function(center2,zoom2,noPrune,noUpdate){var tileZoom=Math.round(zoom2);this.options.maxZoom!==void 0&&tileZoom>this.options.maxZoom||this.options.minZoom!==void 0&&tileZoom<this.options.minZoom?tileZoom=void 0:tileZoom=this._clampZoom(tileZoom);var tileZoomChanged=this.options.updateWhenZooming&&tileZoom!==this._tileZoom;(!noUpdate||tileZoomChanged)&&(this._tileZoom=tileZoom,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),tileZoom!==void 0&&this._update(center2),noPrune||this._pruneTiles(),this._noPrune=!!noPrune),this._setZoomTransforms(center2,zoom2)},_setZoomTransforms:function(center2,zoom2){for(var i in this._levels)this._setZoomTransform(this._levels[i],center2,zoom2)},_setZoomTransform:function(level,center2,zoom2){var scale4=this._map.getZoomScale(zoom2,level.zoom),translate2=level.origin.multiplyBy(scale4).subtract(this._map._getNewPixelOrigin(center2,zoom2)).round();Browser.any3d?setTransform(level.el,translate2,scale4):setPosition(level.el,translate2)},_resetGrid:function(){var map5=this._map,crs=map5.options.crs,tileSize=this._tileSize=this.getTileSize(),tileZoom=this._tileZoom,bounds=this._map.getPixelWorldBounds(this._tileZoom);bounds&&(this._globalTileRange=this._pxBoundsToTileRange(bounds)),this._wrapX=crs.wrapLng&&!this.options.noWrap&&[Math.floor(map5.project([0,crs.wrapLng[0]],tileZoom).x/tileSize.x),Math.ceil(map5.project([0,crs.wrapLng[1]],tileZoom).x/tileSize.y)],this._wrapY=crs.wrapLat&&!this.options.noWrap&&[Math.floor(map5.project([crs.wrapLat[0],0],tileZoom).y/tileSize.x),Math.ceil(map5.project([crs.wrapLat[1],0],tileZoom).y/tileSize.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(center2){var map5=this._map,mapZoom=map5._animatingZoom?Math.max(map5._animateToZoom,map5.getZoom()):map5.getZoom(),scale4=map5.getZoomScale(mapZoom,this._tileZoom),pixelCenter=map5.project(center2,this._tileZoom).floor(),halfSize=map5.getSize().divideBy(scale4*2);return new Bounds(pixelCenter.subtract(halfSize),pixelCenter.add(halfSize))},_update:function(center2){var map5=this._map;if(map5){var zoom2=this._clampZoom(map5.getZoom());if(center2===void 0&&(center2=map5.getCenter()),this._tileZoom!==void 0){var pixelBounds=this._getTiledPixelBounds(center2),tileRange=this._pxBoundsToTileRange(pixelBounds),tileCenter=tileRange.getCenter(),queue=[],margin=this.options.keepBuffer,noPruneRange=new Bounds(tileRange.getBottomLeft().subtract([margin,-margin]),tileRange.getTopRight().add([margin,-margin]));if(!(isFinite(tileRange.min.x)&&isFinite(tileRange.min.y)&&isFinite(tileRange.max.x)&&isFinite(tileRange.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var key in this._tiles){var c=this._tiles[key].coords;(c.z!==this._tileZoom||!noPruneRange.contains(new Point2(c.x,c.y)))&&(this._tiles[key].current=!1)}if(Math.abs(zoom2-this._tileZoom)>1){this._setView(center2,zoom2);return}for(var j=tileRange.min.y;j<=tileRange.max.y;j++)for(var i=tileRange.min.x;i<=tileRange.max.x;i++){var coords=new Point2(i,j);if(coords.z=this._tileZoom,!!this._isValidTile(coords)){var tile=this._tiles[this._tileCoordsToKey(coords)];tile?tile.current=!0:queue.push(coords)}}if(queue.sort(function(a,b){return a.distanceTo(tileCenter)-b.distanceTo(tileCenter)}),queue.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var fragment=document.createDocumentFragment();for(i=0;i<queue.length;i++)this._addTile(queue[i],fragment);this._level.el.appendChild(fragment)}}}},_isValidTile:function(coords){var crs=this._map.options.crs;if(!crs.infinite){var bounds=this._globalTileRange;if(!crs.wrapLng&&(coords.x<bounds.min.x||coords.x>bounds.max.x)||!crs.wrapLat&&(coords.y<bounds.min.y||coords.y>bounds.max.y))return!1}if(!this.options.bounds)return!0;var tileBounds=this._tileCoordsToBounds(coords);return toLatLngBounds(this.options.bounds).overlaps(tileBounds)},_keyToBounds:function(key){return this._tileCoordsToBounds(this._keyToTileCoords(key))},_tileCoordsToNwSe:function(coords){var map5=this._map,tileSize=this.getTileSize(),nwPoint=coords.scaleBy(tileSize),sePoint=nwPoint.add(tileSize),nw=map5.unproject(nwPoint,coords.z),se=map5.unproject(sePoint,coords.z);return[nw,se]},_tileCoordsToBounds:function(coords){var bp=this._tileCoordsToNwSe(coords),bounds=new LatLngBounds(bp[0],bp[1]);return this.options.noWrap||(bounds=this._map.wrapLatLngBounds(bounds)),bounds},_tileCoordsToKey:function(coords){return coords.x+":"+coords.y+":"+coords.z},_keyToTileCoords:function(key){var k=key.split(":"),coords=new Point2(+k[0],+k[1]);return coords.z=+k[2],coords},_removeTile:function(key){var tile=this._tiles[key];tile&&(remove6(tile.el),delete this._tiles[key],this.fire("tileunload",{tile:tile.el,coords:this._keyToTileCoords(key)}))},_initTile:function(tile){addClass(tile,"leaflet-tile");var tileSize=this.getTileSize();tile.style.width=tileSize.x+"px",tile.style.height=tileSize.y+"px",tile.onselectstart=falseFn,tile.onmousemove=falseFn,Browser.ielt9&&this.options.opacity<1&&setOpacity(tile,this.options.opacity)},_addTile:function(coords,container){var tilePos=this._getTilePos(coords),key=this._tileCoordsToKey(coords),tile=this.createTile(this._wrapCoords(coords),bind(this._tileReady,this,coords));this._initTile(tile),this.createTile.length<2&&requestAnimFrame(bind(this._tileReady,this,coords,null,tile)),setPosition(tile,tilePos),this._tiles[key]={el:tile,coords,current:!0},container.appendChild(tile),this.fire("tileloadstart",{tile,coords})},_tileReady:function(coords,err,tile){err&&this.fire("tileerror",{error:err,tile,coords});var key=this._tileCoordsToKey(coords);tile=this._tiles[key],tile&&(tile.loaded=+new Date,this._map._fadeAnimated?(setOpacity(tile.el,0),cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this)):(tile.active=!0,this._pruneTiles()),err||(addClass(tile.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:tile.el,coords})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Browser.ielt9||!this._map._fadeAnimated?requestAnimFrame(this._pruneTiles,this):setTimeout(bind(this._pruneTiles,this),250)))},_getTilePos:function(coords){return coords.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(coords){var newCoords=new Point2(this._wrapX?wrapNum(coords.x,this._wrapX):coords.x,this._wrapY?wrapNum(coords.y,this._wrapY):coords.y);return newCoords.z=coords.z,newCoords},_pxBoundsToTileRange:function(bounds){var tileSize=this.getTileSize();return new Bounds(bounds.min.unscaleBy(tileSize).floor(),bounds.max.unscaleBy(tileSize).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var key in this._tiles)if(!this._tiles[key].loaded)return!1;return!0}});function gridLayer(options){return new GridLayer(options)}var TileLayer=GridLayer.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(url,options){this._url=url,options=setOptions(this,options),options.detectRetina&&Browser.retina&&options.maxZoom>0?(options.tileSize=Math.floor(options.tileSize/2),options.zoomReverse?(options.zoomOffset--,options.minZoom=Math.min(options.maxZoom,options.minZoom+1)):(options.zoomOffset++,options.maxZoom=Math.max(options.minZoom,options.maxZoom-1)),options.minZoom=Math.max(0,options.minZoom)):options.zoomReverse?options.minZoom=Math.min(options.maxZoom,options.minZoom):options.maxZoom=Math.max(options.minZoom,options.maxZoom),typeof options.subdomains=="string"&&(options.subdomains=options.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(url,noRedraw){return this._url===url&&noRedraw===void 0&&(noRedraw=!0),this._url=url,noRedraw||this.redraw(),this},createTile:function(coords,done){var tile=document.createElement("img");return on(tile,"load",bind(this._tileOnLoad,this,done,tile)),on(tile,"error",bind(this._tileOnError,this,done,tile)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(tile.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(tile.referrerPolicy=this.options.referrerPolicy),tile.alt="",tile.src=this.getTileUrl(coords),tile},getTileUrl:function(coords){var data={r:Browser.retina?"@2x":"",s:this._getSubdomain(coords),x:coords.x,y:coords.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var invertedY=this._globalTileRange.max.y-coords.y;this.options.tms&&(data.y=invertedY),data["-y"]=invertedY}return template(this._url,extend4(data,this.options))},_tileOnLoad:function(done,tile){Browser.ielt9?setTimeout(bind(done,this,null,tile),0):done(null,tile)},_tileOnError:function(done,tile,e){var errorUrl=this.options.errorTileUrl;errorUrl&&tile.getAttribute("src")!==errorUrl&&(tile.src=errorUrl),done(e,tile)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var zoom2=this._tileZoom,maxZoom=this.options.maxZoom,zoomReverse=this.options.zoomReverse,zoomOffset=this.options.zoomOffset;return zoomReverse&&(zoom2=maxZoom-zoom2),zoom2+zoomOffset},_getSubdomain:function(tilePoint){var index2=Math.abs(tilePoint.x+tilePoint.y)%this.options.subdomains.length;return this.options.subdomains[index2]},_abortLoading:function(){var i,tile;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(tile=this._tiles[i].el,tile.onload=falseFn,tile.onerror=falseFn,!tile.complete)){tile.src=emptyImageUrl;var coords=this._tiles[i].coords;remove6(tile),delete this._tiles[i],this.fire("tileabort",{tile,coords})}},_removeTile:function(key){var tile=this._tiles[key];if(tile)return tile.el.setAttribute("src",emptyImageUrl),GridLayer.prototype._removeTile.call(this,key)},_tileReady:function(coords,err,tile){if(!(!this._map||tile&&tile.getAttribute("src")===emptyImageUrl))return GridLayer.prototype._tileReady.call(this,coords,err,tile)}});function tileLayer(url,options){return new TileLayer(url,options)}var TileLayerWMS=TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(url,options){this._url=url;var wmsParams=extend4({},this.defaultWmsParams);for(var i in options)i in this.options||(wmsParams[i]=options[i]);options=setOptions(this,options);var realRetina=options.detectRetina&&Browser.retina?2:1,tileSize=this.getTileSize();wmsParams.width=tileSize.x*realRetina,wmsParams.height=tileSize.y*realRetina,this.wmsParams=wmsParams},onAdd:function(map5){this._crs=this.options.crs||map5.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var projectionKey=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[projectionKey]=this._crs.code,TileLayer.prototype.onAdd.call(this,map5)},getTileUrl:function(coords){var tileBounds=this._tileCoordsToNwSe(coords),crs=this._crs,bounds=toBounds(crs.project(tileBounds[0]),crs.project(tileBounds[1])),min4=bounds.min,max3=bounds.max,bbox2=(this._wmsVersion>=1.3&&this._crs===EPSG4326?[min4.y,min4.x,max3.y,max3.x]:[min4.x,min4.y,max3.x,max3.y]).join(","),url=TileLayer.prototype.getTileUrl.call(this,coords);return url+getParamString(this.wmsParams,url,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+bbox2},setParams:function(params,noRedraw){return extend4(this.wmsParams,params),noRedraw||this.redraw(),this}});function tileLayerWMS(url,options){return new TileLayerWMS(url,options)}TileLayer.WMS=TileLayerWMS,tileLayer.wms=tileLayerWMS;var Renderer=Layer.extend({options:{padding:.1},initialize:function(options){setOptions(this,options),stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var events={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(events.zoomanim=this._onAnimZoom),events},_onAnimZoom:function(ev){this._updateTransform(ev.center,ev.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(center2,zoom2){var scale4=this._map.getZoomScale(zoom2,this._zoom),viewHalf=this._map.getSize().multiplyBy(.5+this.options.padding),currentCenterPoint=this._map.project(this._center,zoom2),topLeftOffset=viewHalf.multiplyBy(-scale4).add(currentCenterPoint).subtract(this._map._getNewPixelOrigin(center2,zoom2));Browser.any3d?setTransform(this._container,topLeftOffset,scale4):setPosition(this._container,topLeftOffset)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var id in this._layers)this._layers[id]._reset()},_onZoomEnd:function(){for(var id in this._layers)this._layers[id]._project()},_updatePaths:function(){for(var id in this._layers)this._layers[id]._update()},_update:function(){var p=this.options.padding,size11=this._map.getSize(),min4=this._map.containerPointToLayerPoint(size11.multiplyBy(-p)).round();this._bounds=new Bounds(min4,min4.add(size11.multiplyBy(1+p*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Canvas=Renderer.extend({options:{tolerance:0},getEvents:function(){var events=Renderer.prototype.getEvents.call(this);return events.viewprereset=this._onViewPreReset,events},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var container=this._container=document.createElement("canvas");on(container,"mousemove",this._onMouseMove,this),on(container,"click dblclick mousedown mouseup contextmenu",this._onClick,this),on(container,"mouseout",this._handleMouseOut,this),container._leaflet_disable_events=!0,this._ctx=container.getContext("2d")},_destroyContainer:function(){cancelAnimFrame(this._redrawRequest),delete this._ctx,remove6(this._container),off(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var layer;this._redrawBounds=null;for(var id in this._layers)layer=this._layers[id],layer._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Renderer.prototype._update.call(this);var b=this._bounds,container=this._container,size11=b.getSize(),m=Browser.retina?2:1;setPosition(container,b.min),container.width=m*size11.x,container.height=m*size11.y,container.style.width=size11.x+"px",container.style.height=size11.y+"px",Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-b.min.x,-b.min.y),this.fire("update")}},_reset:function(){Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(layer){this._updateDashArray(layer),this._layers[stamp(layer)]=layer;var order=layer._order={layer,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=order),this._drawLast=order,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(layer){this._requestRedraw(layer)},_removePath:function(layer){var order=layer._order,next3=order.next,prev=order.prev;next3?next3.prev=prev:this._drawLast=prev,prev?prev.next=next3:this._drawFirst=next3,delete layer._order,delete this._layers[stamp(layer)],this._requestRedraw(layer)},_updatePath:function(layer){this._extendRedrawBounds(layer),layer._project(),layer._update(),this._requestRedraw(layer)},_updateStyle:function(layer){this._updateDashArray(layer),this._requestRedraw(layer)},_updateDashArray:function(layer){if(typeof layer.options.dashArray=="string"){var parts=layer.options.dashArray.split(/[, ]+/),dashArray=[],dashValue,i;for(i=0;i<parts.length;i++){if(dashValue=Number(parts[i]),isNaN(dashValue))return;dashArray.push(dashValue)}layer.options._dashArray=dashArray}else layer.options._dashArray=layer.options.dashArray},_requestRedraw:function(layer){this._map&&(this._extendRedrawBounds(layer),this._redrawRequest=this._redrawRequest||requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(layer){if(layer._pxBounds){var padding=(layer.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Bounds,this._redrawBounds.extend(layer._pxBounds.min.subtract([padding,padding])),this._redrawBounds.extend(layer._pxBounds.max.add([padding,padding]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var bounds=this._redrawBounds;if(bounds){var size11=bounds.getSize();this._ctx.clearRect(bounds.min.x,bounds.min.y,size11.x,size11.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var layer,bounds=this._redrawBounds;if(this._ctx.save(),bounds){var size11=bounds.getSize();this._ctx.beginPath(),this._ctx.rect(bounds.min.x,bounds.min.y,size11.x,size11.y),this._ctx.clip()}this._drawing=!0;for(var order=this._drawFirst;order;order=order.next)layer=order.layer,(!bounds||layer._pxBounds&&layer._pxBounds.intersects(bounds))&&layer._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(layer,closed){if(this._drawing){var i,j,len2,p,parts=layer._parts,len=parts.length,ctx=this._ctx;if(len){for(ctx.beginPath(),i=0;i<len;i++){for(j=0,len2=parts[i].length;j<len2;j++)p=parts[i][j],ctx[j?"lineTo":"moveTo"](p.x,p.y);closed&&ctx.closePath()}this._fillStroke(ctx,layer)}}},_updateCircle:function(layer){if(!(!this._drawing||layer._empty())){var p=layer._point,ctx=this._ctx,r=Math.max(Math.round(layer._radius),1),s=(Math.max(Math.round(layer._radiusY),1)||r)/r;s!==1&&(ctx.save(),ctx.scale(1,s)),ctx.beginPath(),ctx.arc(p.x,p.y/s,r,0,Math.PI*2,!1),s!==1&&ctx.restore(),this._fillStroke(ctx,layer)}},_fillStroke:function(ctx,layer){var options=layer.options;options.fill&&(ctx.globalAlpha=options.fillOpacity,ctx.fillStyle=options.fillColor||options.color,ctx.fill(options.fillRule||"evenodd")),options.stroke&&options.weight!==0&&(ctx.setLineDash&&ctx.setLineDash(layer.options&&layer.options._dashArray||[]),ctx.globalAlpha=options.opacity,ctx.lineWidth=options.weight,ctx.strokeStyle=options.color,ctx.lineCap=options.lineCap,ctx.lineJoin=options.lineJoin,ctx.stroke())},_onClick:function(e){for(var point4=this._map.mouseEventToLayerPoint(e),layer,clickedLayer,order=this._drawFirst;order;order=order.next)layer=order.layer,layer.options.interactive&&layer._containsPoint(point4)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(layer))&&(clickedLayer=layer);this._fireEvent(clickedLayer?[clickedLayer]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var point4=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,point4)}},_handleMouseOut:function(e){var layer=this._hoveredLayer;layer&&(removeClass(this._container,"leaflet-interactive"),this._fireEvent([layer],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,point4){if(!this._mouseHoverThrottled){for(var layer,candidateHoveredLayer,order=this._drawFirst;order;order=order.next)layer=order.layer,layer.options.interactive&&layer._containsPoint(point4)&&(candidateHoveredLayer=layer);candidateHoveredLayer!==this._hoveredLayer&&(this._handleMouseOut(e),candidateHoveredLayer&&(addClass(this._container,"leaflet-interactive"),this._fireEvent([candidateHoveredLayer],e,"mouseover"),this._hoveredLayer=candidateHoveredLayer)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(layers2,e,type2){this._map._fireDOMEvent(e,type2||e.type,layers2)},_bringToFront:function(layer){var order=layer._order;if(order){var next3=order.next,prev=order.prev;if(next3)next3.prev=prev;else return;prev?prev.next=next3:next3&&(this._drawFirst=next3),order.prev=this._drawLast,this._drawLast.next=order,order.next=null,this._drawLast=order,this._requestRedraw(layer)}},_bringToBack:function(layer){var order=layer._order;if(order){var next3=order.next,prev=order.prev;if(prev)prev.next=next3;else return;next3?next3.prev=prev:prev&&(this._drawLast=prev),order.prev=null,order.next=this._drawFirst,this._drawFirst.prev=order,this._drawFirst=order,this._requestRedraw(layer)}}});function canvas(options){return Browser.canvas?new Canvas(options):null}var vmlCreate=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(name){return document.createElement("<lvml:"+name+' class="lvml">')}}catch{}return function(name){return document.createElement("<"+name+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vmlMixin={_initContainer:function(){this._container=create$1("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(layer){var container=layer._container=vmlCreate("shape");addClass(container,"leaflet-vml-shape "+(this.options.className||"")),container.coordsize="1 1",layer._path=vmlCreate("path"),container.appendChild(layer._path),this._updateStyle(layer),this._layers[stamp(layer)]=layer},_addPath:function(layer){var container=layer._container;this._container.appendChild(container),layer.options.interactive&&layer.addInteractiveTarget(container)},_removePath:function(layer){var container=layer._container;remove6(container),layer.removeInteractiveTarget(container),delete this._layers[stamp(layer)]},_updateStyle:function(layer){var stroke=layer._stroke,fill=layer._fill,options=layer.options,container=layer._container;container.stroked=!!options.stroke,container.filled=!!options.fill,options.stroke?(stroke||(stroke=layer._stroke=vmlCreate("stroke")),container.appendChild(stroke),stroke.weight=options.weight+"px",stroke.color=options.color,stroke.opacity=options.opacity,options.dashArray?stroke.dashStyle=isArray(options.dashArray)?options.dashArray.join(" "):options.dashArray.replace(/( *, *)/g," "):stroke.dashStyle="",stroke.endcap=options.lineCap.replace("butt","flat"),stroke.joinstyle=options.lineJoin):stroke&&(container.removeChild(stroke),layer._stroke=null),options.fill?(fill||(fill=layer._fill=vmlCreate("fill")),container.appendChild(fill),fill.color=options.fillColor||options.color,fill.opacity=options.fillOpacity):fill&&(container.removeChild(fill),layer._fill=null)},_updateCircle:function(layer){var p=layer._point.round(),r=Math.round(layer._radius),r2=Math.round(layer._radiusY||r);this._setPath(layer,layer._empty()?"M0 0":"AL "+p.x+","+p.y+" "+r+","+r2+" 0,"+65535*360)},_setPath:function(layer,path){layer._path.v=path},_bringToFront:function(layer){toFront(layer._container)},_bringToBack:function(layer){toBack(layer._container)}},create4=Browser.vml?vmlCreate:svgCreate,SVG=Renderer.extend({_initContainer:function(){this._container=create4("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=create4("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){remove6(this._container),off(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Renderer.prototype._update.call(this);var b=this._bounds,size11=b.getSize(),container=this._container;(!this._svgSize||!this._svgSize.equals(size11))&&(this._svgSize=size11,container.setAttribute("width",size11.x),container.setAttribute("height",size11.y)),setPosition(container,b.min),container.setAttribute("viewBox",[b.min.x,b.min.y,size11.x,size11.y].join(" ")),this.fire("update")}},_initPath:function(layer){var path=layer._path=create4("path");layer.options.className&&addClass(path,layer.options.className),layer.options.interactive&&addClass(path,"leaflet-interactive"),this._updateStyle(layer),this._layers[stamp(layer)]=layer},_addPath:function(layer){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(layer._path),layer.addInteractiveTarget(layer._path)},_removePath:function(layer){remove6(layer._path),layer.removeInteractiveTarget(layer._path),delete this._layers[stamp(layer)]},_updatePath:function(layer){layer._project(),layer._update()},_updateStyle:function(layer){var path=layer._path,options=layer.options;path&&(options.stroke?(path.setAttribute("stroke",options.color),path.setAttribute("stroke-opacity",options.opacity),path.setAttribute("stroke-width",options.weight),path.setAttribute("stroke-linecap",options.lineCap),path.setAttribute("stroke-linejoin",options.lineJoin),options.dashArray?path.setAttribute("stroke-dasharray",options.dashArray):path.removeAttribute("stroke-dasharray"),options.dashOffset?path.setAttribute("stroke-dashoffset",options.dashOffset):path.removeAttribute("stroke-dashoffset")):path.setAttribute("stroke","none"),options.fill?(path.setAttribute("fill",options.fillColor||options.color),path.setAttribute("fill-opacity",options.fillOpacity),path.setAttribute("fill-rule",options.fillRule||"evenodd")):path.setAttribute("fill","none"))},_updatePoly:function(layer,closed){this._setPath(layer,pointsToPath(layer._parts,closed))},_updateCircle:function(layer){var p=layer._point,r=Math.max(Math.round(layer._radius),1),r2=Math.max(Math.round(layer._radiusY),1)||r,arc="a"+r+","+r2+" 0 1,0 ",d=layer._empty()?"M0 0":"M"+(p.x-r)+","+p.y+arc+r*2+",0 "+arc+-r*2+",0 ";this._setPath(layer,d)},_setPath:function(layer,path){layer._path.setAttribute("d",path)},_bringToFront:function(layer){toFront(layer._path)},_bringToBack:function(layer){toBack(layer._path)}});Browser.vml&&SVG.include(vmlMixin);function svg(options){return Browser.svg||Browser.vml?new SVG(options):null}Map3.include({getRenderer:function(layer){var renderer=layer.options.renderer||this._getPaneRenderer(layer.options.pane)||this.options.renderer||this._renderer;return renderer||(renderer=this._renderer=this._createRenderer()),this.hasLayer(renderer)||this.addLayer(renderer),renderer},_getPaneRenderer:function(name){if(name==="overlayPane"||name===void 0)return!1;var renderer=this._paneRenderers[name];return renderer===void 0&&(renderer=this._createRenderer({pane:name}),this._paneRenderers[name]=renderer),renderer},_createRenderer:function(options){return this.options.preferCanvas&&canvas(options)||svg(options)}});var Rectangle=Polygon2.extend({initialize:function(latLngBounds,options){Polygon2.prototype.initialize.call(this,this._boundsToLatLngs(latLngBounds),options)},setBounds:function(latLngBounds){return this.setLatLngs(this._boundsToLatLngs(latLngBounds))},_boundsToLatLngs:function(latLngBounds){return latLngBounds=toLatLngBounds(latLngBounds),[latLngBounds.getSouthWest(),latLngBounds.getNorthWest(),latLngBounds.getNorthEast(),latLngBounds.getSouthEast()]}});function rectangle(latLngBounds,options){return new Rectangle(latLngBounds,options)}SVG.create=create4,SVG.pointsToPath=pointsToPath,GeoJSON.geometryToLayer=geometryToLayer,GeoJSON.coordsToLatLng=coordsToLatLng,GeoJSON.coordsToLatLngs=coordsToLatLngs,GeoJSON.latLngToCoords=latLngToCoords,GeoJSON.latLngsToCoords=latLngsToCoords,GeoJSON.getFeature=getFeature,GeoJSON.asFeature=asFeature,Map3.mergeOptions({boxZoom:!0});var BoxZoom=Handler.extend({initialize:function(map5){this._map=map5,this._container=map5._container,this._pane=map5._panes.overlayPane,this._resetStateTimeout=0,map5.on("unload",this._destroy,this)},addHooks:function(){on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){remove6(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),disableTextSelection(),disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(e),on(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=create$1("div","leaflet-zoom-box",this._container),addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var bounds=new Bounds(this._point,this._startPoint),size11=bounds.getSize();setPosition(this._box,bounds.min),this._box.style.width=size11.x+"px",this._box.style.height=size11.y+"px"},_finish:function(){this._moved&&(remove6(this._box),removeClass(this._container,"leaflet-crosshair")),enableTextSelection(),enableImageDrag(),off(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(bind(this._resetState,this),0);var bounds=new LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(bounds).fire("boxzoomend",{boxZoomBounds:bounds})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Map3.addInitHook("addHandler","boxZoom",BoxZoom),Map3.mergeOptions({doubleClickZoom:!0});var DoubleClickZoom=Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var map5=this._map,oldZoom=map5.getZoom(),delta=map5.options.zoomDelta,zoom2=e.originalEvent.shiftKey?oldZoom-delta:oldZoom+delta;map5.options.doubleClickZoom==="center"?map5.setZoom(zoom2):map5.setZoomAround(e.containerPoint,zoom2)}});Map3.addInitHook("addHandler","doubleClickZoom",DoubleClickZoom),Map3.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Drag=Handler.extend({addHooks:function(){if(!this._draggable){var map5=this._map;this._draggable=new Draggable(map5._mapPane,map5._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),map5.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),map5.on("zoomend",this._onZoomEnd,this),map5.whenReady(this._onZoomEnd,this))}addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){removeClass(this._map._container,"leaflet-grab"),removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var map5=this._map;if(map5._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var bounds=toLatLngBounds(this._map.options.maxBounds);this._offsetLimit=toBounds(this._map.latLngToContainerPoint(bounds.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(bounds.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;map5.fire("movestart").fire("dragstart"),map5.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var time=this._lastTime=+new Date,pos=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(pos),this._times.push(time),this._prunePositions(time)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(time){for(;this._positions.length>1&&time-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var pxCenter=this._map.getSize().divideBy(2),pxWorldCenter=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=pxWorldCenter.subtract(pxCenter).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(value,threshold){return value-(value-threshold)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var offset=this._draggable._newPos.subtract(this._draggable._startPos),limit=this._offsetLimit;offset.x<limit.min.x&&(offset.x=this._viscousLimit(offset.x,limit.min.x)),offset.y<limit.min.y&&(offset.y=this._viscousLimit(offset.y,limit.min.y)),offset.x>limit.max.x&&(offset.x=this._viscousLimit(offset.x,limit.max.x)),offset.y>limit.max.y&&(offset.y=this._viscousLimit(offset.y,limit.max.y)),this._draggable._newPos=this._draggable._startPos.add(offset)}},_onPreDragWrap:function(){var worldWidth=this._worldWidth,halfWidth=Math.round(worldWidth/2),dx=this._initialWorldOffset,x2=this._draggable._newPos.x,newX1=(x2-halfWidth+dx)%worldWidth+halfWidth-dx,newX2=(x2+halfWidth+dx)%worldWidth-halfWidth-dx,newX=Math.abs(newX1+dx)<Math.abs(newX2+dx)?newX1:newX2;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=newX},_onDragEnd:function(e){var map5=this._map,options=map5.options,noInertia=!options.inertia||e.noInertia||this._times.length<2;if(map5.fire("dragend",e),noInertia)map5.fire("moveend");else{this._prunePositions(+new Date);var direction=this._lastPos.subtract(this._positions[0]),duration=(this._lastTime-this._times[0])/1e3,ease=options.easeLinearity,speedVector=direction.multiplyBy(ease/duration),speed=speedVector.distanceTo([0,0]),limitedSpeed=Math.min(options.inertiaMaxSpeed,speed),limitedSpeedVector=speedVector.multiplyBy(limitedSpeed/speed),decelerationDuration=limitedSpeed/(options.inertiaDeceleration*ease),offset=limitedSpeedVector.multiplyBy(-decelerationDuration/2).round();!offset.x&&!offset.y?map5.fire("moveend"):(offset=map5._limitOffset(offset,map5.options.maxBounds),requestAnimFrame(function(){map5.panBy(offset,{duration:decelerationDuration,easeLinearity:ease,noMoveStart:!0,animate:!0})}))}}});Map3.addInitHook("addHandler","dragging",Drag),Map3.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Keyboard=Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(map5){this._map=map5,this._setPanDelta(map5.options.keyboardPanDelta),this._setZoomDelta(map5.options.zoomDelta)},addHooks:function(){var container=this._map._container;container.tabIndex<=0&&(container.tabIndex="0"),on(container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var body=document.body,docEl=document.documentElement,top=body.scrollTop||docEl.scrollTop,left=body.scrollLeft||docEl.scrollLeft;this._map._container.focus(),window.scrollTo(left,top)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(panDelta){var keys=this._panKeys={},codes=this.keyCodes,i,len;for(i=0,len=codes.left.length;i<len;i++)keys[codes.left[i]]=[-1*panDelta,0];for(i=0,len=codes.right.length;i<len;i++)keys[codes.right[i]]=[panDelta,0];for(i=0,len=codes.down.length;i<len;i++)keys[codes.down[i]]=[0,panDelta];for(i=0,len=codes.up.length;i<len;i++)keys[codes.up[i]]=[0,-1*panDelta]},_setZoomDelta:function(zoomDelta){var keys=this._zoomKeys={},codes=this.keyCodes,i,len;for(i=0,len=codes.zoomIn.length;i<len;i++)keys[codes.zoomIn[i]]=zoomDelta;for(i=0,len=codes.zoomOut.length;i<len;i++)keys[codes.zoomOut[i]]=-zoomDelta},_addHooks:function(){on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var key=e.keyCode,map5=this._map,offset;if(key in this._panKeys){if(!map5._panAnim||!map5._panAnim._inProgress)if(offset=this._panKeys[key],e.shiftKey&&(offset=toPoint(offset).multiplyBy(3)),map5.options.maxBounds&&(offset=map5._limitOffset(toPoint(offset),map5.options.maxBounds)),map5.options.worldCopyJump){var newLatLng=map5.wrapLatLng(map5.unproject(map5.project(map5.getCenter()).add(offset)));map5.panTo(newLatLng)}else map5.panBy(offset)}else if(key in this._zoomKeys)map5.setZoom(map5.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[key]);else if(key===27&&map5._popup&&map5._popup.options.closeOnEscapeKey)map5.closePopup();else return;stop(e)}}});Map3.addInitHook("addHandler","keyboard",Keyboard),Map3.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ScrollWheelZoom=Handler.extend({addHooks:function(){on(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){off(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var delta=getWheelDelta(e),debounce=this._map.options.wheelDebounceTime;this._delta+=delta,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var left=Math.max(debounce-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(bind(this._performZoom,this),left),stop(e)},_performZoom:function(){var map5=this._map,zoom2=map5.getZoom(),snap4=this._map.options.zoomSnap||0;map5._stop();var d2=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d3=4*Math.log(2/(1+Math.exp(-Math.abs(d2))))/Math.LN2,d4=snap4?Math.ceil(d3/snap4)*snap4:d3,delta=map5._limitZoom(zoom2+(this._delta>0?d4:-d4))-zoom2;this._delta=0,this._startTime=null,delta&&(map5.options.scrollWheelZoom==="center"?map5.setZoom(zoom2+delta):map5.setZoomAround(this._lastMousePos,zoom2+delta))}});Map3.addInitHook("addHandler","scrollWheelZoom",ScrollWheelZoom);var tapHoldDelay=600;Map3.mergeOptions({tapHold:Browser.touchNative&&Browser.safari&&Browser.mobile,tapTolerance:15});var TapHold=Handler.extend({addHooks:function(){on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var first=e.touches[0];this._startPos=this._newPos=new Point2(first.clientX,first.clientY),this._holdTimeout=setTimeout(bind(function(){this._cancel(),this._isTapValid()&&(on(document,"touchend",preventDefault),on(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",first))},this),tapHoldDelay),on(document,"touchend touchcancel contextmenu",this._cancel,this),on(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function cancelClickPrevent(){off(document,"touchend",preventDefault),off(document,"touchend touchcancel",cancelClickPrevent)},_cancel:function(){clearTimeout(this._holdTimeout),off(document,"touchend touchcancel contextmenu",this._cancel,this),off(document,"touchmove",this._onMove,this)},_onMove:function(e){var first=e.touches[0];this._newPos=new Point2(first.clientX,first.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(type2,e){var simulatedEvent=new MouseEvent(type2,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});simulatedEvent._simulated=!0,e.target.dispatchEvent(simulatedEvent)}});Map3.addInitHook("addHandler","tapHold",TapHold),Map3.mergeOptions({touchZoom:Browser.touch,bounceAtZoomLimits:!0});var TouchZoom=Handler.extend({addHooks:function(){addClass(this._map._container,"leaflet-touch-zoom"),on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){removeClass(this._map._container,"leaflet-touch-zoom"),off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var map5=this._map;if(!(!e.touches||e.touches.length!==2||map5._animatingZoom||this._zooming)){var p1=map5.mouseEventToContainerPoint(e.touches[0]),p2=map5.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=map5.getSize()._divideBy(2),this._startLatLng=map5.containerPointToLatLng(this._centerPoint),map5.options.touchZoom!=="center"&&(this._pinchStartLatLng=map5.containerPointToLatLng(p1.add(p2)._divideBy(2))),this._startDist=p1.distanceTo(p2),this._startZoom=map5.getZoom(),this._moved=!1,this._zooming=!0,map5._stop(),on(document,"touchmove",this._onTouchMove,this),on(document,"touchend touchcancel",this._onTouchEnd,this),preventDefault(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var map5=this._map,p1=map5.mouseEventToContainerPoint(e.touches[0]),p2=map5.mouseEventToContainerPoint(e.touches[1]),scale4=p1.distanceTo(p2)/this._startDist;if(this._zoom=map5.getScaleZoom(scale4,this._startZoom),!map5.options.bounceAtZoomLimits&&(this._zoom<map5.getMinZoom()&&scale4<1||this._zoom>map5.getMaxZoom()&&scale4>1)&&(this._zoom=map5._limitZoom(this._zoom)),map5.options.touchZoom==="center"){if(this._center=this._startLatLng,scale4===1)return}else{var delta=p1._add(p2)._divideBy(2)._subtract(this._centerPoint);if(scale4===1&&delta.x===0&&delta.y===0)return;this._center=map5.unproject(map5.project(this._pinchStartLatLng,this._zoom).subtract(delta),this._zoom)}this._moved||(map5._moveStart(!0,!1),this._moved=!0),cancelAnimFrame(this._animRequest);var moveFn=bind(map5._move,map5,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=requestAnimFrame(moveFn,this,!0),preventDefault(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,cancelAnimFrame(this._animRequest),off(document,"touchmove",this._onTouchMove,this),off(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Map3.addInitHook("addHandler","touchZoom",TouchZoom),Map3.BoxZoom=BoxZoom,Map3.DoubleClickZoom=DoubleClickZoom,Map3.Drag=Drag,Map3.Keyboard=Keyboard,Map3.ScrollWheelZoom=ScrollWheelZoom,Map3.TapHold=TapHold,Map3.TouchZoom=TouchZoom,exports2.Bounds=Bounds,exports2.Browser=Browser,exports2.CRS=CRS,exports2.Canvas=Canvas,exports2.Circle=Circle2,exports2.CircleMarker=CircleMarker,exports2.Class=Class,exports2.Control=Control,exports2.DivIcon=DivIcon,exports2.DivOverlay=DivOverlay,exports2.DomEvent=DomEvent,exports2.DomUtil=DomUtil,exports2.Draggable=Draggable,exports2.Evented=Evented,exports2.FeatureGroup=FeatureGroup,exports2.GeoJSON=GeoJSON,exports2.GridLayer=GridLayer,exports2.Handler=Handler,exports2.Icon=Icon,exports2.ImageOverlay=ImageOverlay,exports2.LatLng=LatLng,exports2.LatLngBounds=LatLngBounds,exports2.Layer=Layer,exports2.LayerGroup=LayerGroup,exports2.LineUtil=LineUtil,exports2.Map=Map3,exports2.Marker=Marker,exports2.Mixin=Mixin,exports2.Path=Path,exports2.Point=Point2,exports2.PolyUtil=PolyUtil,exports2.Polygon=Polygon2,exports2.Polyline=Polyline,exports2.Popup=Popup,exports2.PosAnimation=PosAnimation,exports2.Projection=index,exports2.Rectangle=Rectangle,exports2.Renderer=Renderer,exports2.SVG=SVG,exports2.SVGOverlay=SVGOverlay,exports2.TileLayer=TileLayer,exports2.Tooltip=Tooltip,exports2.Transformation=Transformation,exports2.Util=Util,exports2.VideoOverlay=VideoOverlay,exports2.bind=bind,exports2.bounds=toBounds,exports2.canvas=canvas,exports2.circle=circle2,exports2.circleMarker=circleMarker,exports2.control=control,exports2.divIcon=divIcon,exports2.extend=extend4,exports2.featureGroup=featureGroup,exports2.geoJSON=geoJSON,exports2.geoJson=geoJson,exports2.gridLayer=gridLayer,exports2.icon=icon,exports2.imageOverlay=imageOverlay,exports2.latLng=toLatLng,exports2.latLngBounds=toLatLngBounds,exports2.layerGroup=layerGroup,exports2.map=createMap,exports2.marker=marker,exports2.point=toPoint,exports2.polygon=polygon4,exports2.polyline=polyline,exports2.popup=popup,exports2.rectangle=rectangle,exports2.setOptions=setOptions,exports2.stamp=stamp,exports2.svg=svg,exports2.svgOverlay=svgOverlay,exports2.tileLayer=tileLayer,exports2.tooltip=tooltip,exports2.transformation=toTransformation,exports2.version=version,exports2.videoOverlay=videoOverlay;var oldL=window.L;exports2.noConflict=function(){return window.L=oldL,this},window.L=exports2})}});var require_object_assign=__commonJS({"../../../node_modules/object-assign/index.js"(exports,module){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty2=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de",Object.getOwnPropertyNames(test1)[0]==="5")return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789")return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter}),Object.keys(Object.assign({},test3)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}module.exports=shouldUseNative()?Object.assign:function(target,source){for(var from,to=toObject(target),symbols,s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty2.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}}});function quickselect(arr,k,left,right,compare10){quickselectStep(arr,k,left||0,right||arr.length-1,compare10||defaultCompare)}function quickselectStep(arr,k,left,right,compare10){for(;right>left;){if(right-left>600){var n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep(arr,k,newLeft,newRight,compare10)}var t=arr[k],i=left,j=right;for(swap(arr,left,k),compare10(arr[right],t)>0&&swap(arr,left,right);i<j;){for(swap(arr,i,j),i++,j--;compare10(arr[i],t)<0;)i++;for(;compare10(arr[j],t)>0;)j--}compare10(arr[left],t)===0?swap(arr,left,j):(j++,swap(arr,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}var init_quickselect=__esm({"../../../node_modules/concaveman/node_modules/quickselect/index.js"(){}});var rbush_exports={};__export(rbush_exports,{default:()=>RBush});function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(let i=0;i<items.length;i++)if(equalsFn(item,items[i]))return i;return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){destNode||(destNode=createNode(null)),destNode.minX=1/0,destNode.minY=1/0,destNode.maxX=-1/0,destNode.maxY=-1/0;for(let i=k;i<p;i++){let child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){return a.minX=Math.min(a.minX,b.minX),a.minY=Math.min(a.minY,b.minY),a.maxX=Math.max(a.maxX,b.maxX),a.maxY=Math.max(a.maxY,b.maxY),a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){let minX2=Math.max(a.minX,b.minX),minY2=Math.max(a.minY,b.minY),maxX2=Math.min(a.maxX,b.maxX),maxY2=Math.min(a.maxY,b.maxY);return Math.max(0,maxX2-minX2)*Math.max(0,maxY2-minY2)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(arr,left,right,n,compare10){let stack=[left,right];for(;stack.length;){if(right=stack.pop(),left=stack.pop(),right-left<=n)continue;let mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare10),stack.push(left,mid,mid,right)}}var RBush,init_rbush=__esm({"../../../node_modules/concaveman/node_modules/rbush/index.js"(){init_quickselect();RBush=class{constructor(maxEntries=9){this._maxEntries=Math.max(4,maxEntries),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(bbox2){let node=this.data,result=[];if(!intersects(bbox2,node))return result;let toBBox=this.toBBox,nodesToSearch=[];for(;node;){for(let i=0;i<node.children.length;i++){let child=node.children[i],childBBox=node.leaf?toBBox(child):child;intersects(bbox2,childBBox)&&(node.leaf?result.push(child):contains(bbox2,childBBox)?this._all(child,result):nodesToSearch.push(child))}node=nodesToSearch.pop()}return result}collides(bbox2){let node=this.data;if(!intersects(bbox2,node))return!1;let nodesToSearch=[];for(;node;){for(let i=0;i<node.children.length;i++){let child=node.children[i],childBBox=node.leaf?this.toBBox(child):child;if(intersects(bbox2,childBBox)){if(node.leaf||contains(bbox2,childBBox))return!0;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return!1}load(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(let i=0;i<data.length;i++)this.insert(data[i]);return this}let node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length)this.data=node;else if(this.data.height===node.height)this._splitRoot(this.data,node);else{if(this.data.height<node.height){let tmpNode=this.data;this.data=node,node=tmpNode}this._insert(node,this.data.height-node.height-1,!0)}return this}insert(item){return item&&this._insert(item,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(item,equalsFn){if(!item)return this;let node=this.data,bbox2=this.toBBox(item),path=[],indexes=[],i,parent,goingUp;for(;node||path.length;){if(node||(node=path.pop(),parent=path[path.length-1],i=indexes.pop(),goingUp=!0),node.leaf){let index=findItem(item,node.children,equalsFn);if(index!==-1)return node.children.splice(index,1),path.push(node),this._condense(path),this}!goingUp&&!node.leaf&&contains(node,bbox2)?(path.push(node),indexes.push(i),i=0,parent=node,node=node.children[0]):parent?(i++,node=parent.children[i],goingUp=!1):node=null}return this}toBBox(item){return item}compareMinX(a,b){return a.minX-b.minX}compareMinY(a,b){return a.minY-b.minY}toJSON(){return this.data}fromJSON(data){return this.data=data,this}_all(node,result){let nodesToSearch=[];for(;node;)node.leaf?result.push(...node.children):nodesToSearch.push(...node.children),node=nodesToSearch.pop();return result}_build(items,left,right,height){let N=right-left+1,M=this._maxEntries,node;if(N<=M)return node=createNode(items.slice(left,right+1)),calcBBox(node,this.toBBox),node;height||(height=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/Math.pow(M,height-1))),node=createNode([]),node.leaf=!1,node.height=height;let N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M));multiSelect(items,left,right,N1,this.compareMinX);for(let i=left;i<=right;i+=N1){let right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(let j=i;j<=right2;j+=N2){let right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}return calcBBox(node,this.toBBox),node}_chooseSubtree(bbox2,node,level,path){for(;path.push(node),!(node.leaf||path.length-1===level);){let minArea=1/0,minEnlargement=1/0,targetNode;for(let i=0;i<node.children.length;i++){let child=node.children[i],area5=bboxArea(child),enlargement=enlargedArea(bbox2,child)-area5;enlargement<minEnlargement?(minEnlargement=enlargement,minArea=area5<minArea?area5:minArea,targetNode=child):enlargement===minEnlargement&&area5<minArea&&(minArea=area5,targetNode=child)}node=targetNode||node.children[0]}return node}_insert(item,level,isNode){let bbox2=isNode?item:this.toBBox(item),insertPath=[],node=this._chooseSubtree(bbox2,this.data,level,insertPath);for(node.children.push(item),extend(node,bbox2);level>=0&&insertPath[level].children.length>this._maxEntries;)this._split(insertPath,level),level--;this._adjustParentBBoxes(bbox2,insertPath,level)}_split(insertPath,level){let node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);let splitIndex=this._chooseSplitIndex(node,m,M),newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height,newNode.leaf=node.leaf,calcBBox(node,this.toBBox),calcBBox(newNode,this.toBBox),level?insertPath[level-1].children.push(newNode):this._splitRoot(node,newNode)}_splitRoot(node,newNode){this.data=createNode([node,newNode]),this.data.height=node.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(node,m,M){let index,minOverlap=1/0,minArea=1/0;for(let i=m;i<=M-m;i++){let bbox1=distBBox(node,0,i,this.toBBox),bbox2=distBBox(node,i,M,this.toBBox),overlap2=intersectionArea(bbox1,bbox2),area5=bboxArea(bbox1)+bboxArea(bbox2);overlap2<minOverlap?(minOverlap=overlap2,index=i,minArea=area5<minArea?area5:minArea):overlap2===minOverlap&&area5<minArea&&(minArea=area5,index=i)}return index||M-m}_chooseSplitAxis(node,m,M){let compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);xMargin<yMargin&&node.children.sort(compareMinX)}_allDistMargin(node,m,M,compare10){node.children.sort(compare10);let toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox);for(let i=m;i<M-m;i++){let child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child),margin+=bboxMargin(leftBBox)}for(let i=M-m-1;i>=m;i--){let child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child),margin+=bboxMargin(rightBBox)}return margin}_adjustParentBBoxes(bbox2,path,level){for(let i=level;i>=0;i--)extend(path[i],bbox2)}_condense(path){for(let i=path.length-1,siblings;i>=0;i--)path[i].children.length===0?i>0?(siblings=path[i-1].children,siblings.splice(siblings.indexOf(path[i]),1)):this.clear():calcBBox(path[i],this.toBBox)}}}});var tinyqueue_exports={};__export(tinyqueue_exports,{default:()=>TinyQueue});function defaultCompare2(a,b){return a<b?-1:a>b?1:0}var TinyQueue,init_tinyqueue=__esm({"../../../node_modules/tinyqueue/index.js"(){TinyQueue=class{constructor(data=[],compare10=defaultCompare2){if(this.data=data,this.length=this.data.length,this.compare=compare10,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(item){this.data.push(item),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;let top=this.data[0],bottom=this.data.pop();return this.length--,this.length>0&&(this.data[0]=bottom,this._down(0)),top}peek(){return this.data[0]}_up(pos){let{data,compare:compare10}=this,item=data[pos];for(;pos>0;){let parent=pos-1>>1,current=data[parent];if(compare10(item,current)>=0)break;data[pos]=current,pos=parent}data[pos]=item}_down(pos){let{data,compare:compare10}=this,halfLength=this.length>>1,item=data[pos];for(;pos<halfLength;){let left=(pos<<1)+1,best=data[left],right=left+1;if(right<this.length&&compare10(data[right],best)<0&&(left=right,best=data[right]),compare10(best,item)>=0)break;data[pos]=best,pos=left}data[pos]=item}}}});var require_flat=__commonJS({"../../../node_modules/point-in-polygon/flat.js"(exports,module){module.exports=function(point4,vs,start,end){var x2=point4[0],y2=point4[1],inside=!1;start===void 0&&(start=0),end===void 0&&(end=vs.length);for(var len=(end-start)/2,i=0,j=len-1;i<len;j=i++){var xi=vs[start+i*2+0],yi=vs[start+i*2+1],xj=vs[start+j*2+0],yj=vs[start+j*2+1],intersect2=yi>y2!=yj>y2&&x2<(xj-xi)*(y2-yi)/(yj-yi)+xi;intersect2&&(inside=!inside)}return inside}}});var require_nested=__commonJS({"../../../node_modules/point-in-polygon/nested.js"(exports,module){module.exports=function(point4,vs,start,end){var x2=point4[0],y2=point4[1],inside=!1;start===void 0&&(start=0),end===void 0&&(end=vs.length);for(var len=end-start,i=0,j=len-1;i<len;j=i++){var xi=vs[i+start][0],yi=vs[i+start][1],xj=vs[j+start][0],yj=vs[j+start][1],intersect2=yi>y2!=yj>y2&&x2<(xj-xi)*(y2-yi)/(yj-yi)+xi;intersect2&&(inside=!inside)}return inside}}});var require_point_in_polygon=__commonJS({"../../../node_modules/point-in-polygon/index.js"(exports,module){var pointInPolygonFlat=require_flat(),pointInPolygonNested=require_nested();module.exports=function(point4,vs,start,end){return vs.length>0&&Array.isArray(vs[0])?pointInPolygonNested(point4,vs,start,end):pointInPolygonFlat(point4,vs,start,end)};module.exports.nested=pointInPolygonNested;module.exports.flat=pointInPolygonFlat}});var require_orient2d_min=__commonJS({"../../../node_modules/robust-predicates/umd/orient2d.min.js"(exports,module){(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):e((t=t||self).predicates={})})(exports,function(t){"use strict";let n=33306690738754706e-32;function r(t2,e3,n2,r2,o2){let f2,i2,u2,c2,s2=e3[0],a2=r2[0],d2=0,l2=0;a2>s2==a2>-s2?(f2=s2,s2=e3[++d2]):(f2=a2,a2=r2[++l2]);let p=0;if(d2<t2&&l2<n2)for(a2>s2==a2>-s2?(u2=f2-((i2=s2+f2)-s2),s2=e3[++d2]):(u2=f2-((i2=a2+f2)-a2),a2=r2[++l2]),f2=i2,u2!==0&&(o2[p++]=u2);d2<t2&&l2<n2;)a2>s2==a2>-s2?(u2=f2-((i2=f2+s2)-(c2=i2-f2))+(s2-c2),s2=e3[++d2]):(u2=f2-((i2=f2+a2)-(c2=i2-f2))+(a2-c2),a2=r2[++l2]),f2=i2,u2!==0&&(o2[p++]=u2);for(;d2<t2;)u2=f2-((i2=f2+s2)-(c2=i2-f2))+(s2-c2),s2=e3[++d2],f2=i2,u2!==0&&(o2[p++]=u2);for(;l2<n2;)u2=f2-((i2=f2+a2)-(c2=i2-f2))+(a2-c2),a2=r2[++l2],f2=i2,u2!==0&&(o2[p++]=u2);return f2===0&&p!==0||(o2[p++]=f2),p}function o(t2){return new Float64Array(t2)}let f=33306690738754716e-32,i=22204460492503146e-32,u=11093356479670487e-47,c=o(4),s=o(8),a=o(12),d=o(16),l=o(4);t.orient2d=function(t2,o2,p,b,y2,h){let M=(o2-h)*(p-y2),x2=(t2-y2)*(b-h),j=M-x2;if(M===0||x2===0||M>0!=x2>0)return j;let m=Math.abs(M+x2);return Math.abs(j)>=f*m?j:-function(t3,o3,f2,p2,b2,y3,h2){let M2,x3,j2,m2,_,v,w,A,F,O,P,g,k,q,z,B2,C,D,E=t3-b2,G=f2-b2,H=o3-y3,I=p2-y3;_=(z=(A=E-(w=(v=134217729*E)-(v-E)))*(O=I-(F=(v=134217729*I)-(v-I)))-((q=E*I)-w*F-A*F-w*O))-(P=z-(C=(A=H-(w=(v=134217729*H)-(v-H)))*(O=G-(F=(v=134217729*G)-(v-G)))-((B2=H*G)-w*F-A*F-w*O))),c[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B2),c[1]=k-(P+_)+(_-B2),_=(D=g+P)-g,c[2]=g-(D-_)+(P-_),c[3]=D;let J=function(t4,e3){let n2=e3[0];for(let r2=1;r2<t4;r2++)n2+=e3[r2];return n2}(4,c),K=i*h2;if(J>=K||-J>=K||(M2=t3-(E+(_=t3-E))+(_-b2),j2=f2-(G+(_=f2-G))+(_-b2),x3=o3-(H+(_=o3-H))+(_-y3),m2=p2-(I+(_=p2-I))+(_-y3),M2===0&&x3===0&&j2===0&&m2===0)||(K=u*h2+n*Math.abs(J),(J+=E*m2+I*M2-(H*j2+G*x3))>=K||-J>=K))return J;_=(z=(A=M2-(w=(v=134217729*M2)-(v-M2)))*(O=I-(F=(v=134217729*I)-(v-I)))-((q=M2*I)-w*F-A*F-w*O))-(P=z-(C=(A=x3-(w=(v=134217729*x3)-(v-x3)))*(O=G-(F=(v=134217729*G)-(v-G)))-((B2=x3*G)-w*F-A*F-w*O))),l[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B2),l[1]=k-(P+_)+(_-B2),_=(D=g+P)-g,l[2]=g-(D-_)+(P-_),l[3]=D;let L3=r(4,c,4,l,s);_=(z=(A=E-(w=(v=134217729*E)-(v-E)))*(O=m2-(F=(v=134217729*m2)-(v-m2)))-((q=E*m2)-w*F-A*F-w*O))-(P=z-(C=(A=H-(w=(v=134217729*H)-(v-H)))*(O=j2-(F=(v=134217729*j2)-(v-j2)))-((B2=H*j2)-w*F-A*F-w*O))),l[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B2),l[1]=k-(P+_)+(_-B2),_=(D=g+P)-g,l[2]=g-(D-_)+(P-_),l[3]=D;let N=r(L3,s,4,l,a);_=(z=(A=M2-(w=(v=134217729*M2)-(v-M2)))*(O=m2-(F=(v=134217729*m2)-(v-m2)))-((q=M2*m2)-w*F-A*F-w*O))-(P=z-(C=(A=x3-(w=(v=134217729*x3)-(v-x3)))*(O=j2-(F=(v=134217729*j2)-(v-j2)))-((B2=x3*j2)-w*F-A*F-w*O))),l[0]=z-(P+_)+(_-C),_=(k=q-((g=q+P)-(_=g-q))+(P-_))-(P=k-B2),l[1]=k-(P+_)+(_-B2),_=(D=g+P)-g,l[2]=g-(D-_)+(P-_),l[3]=D;let Q=r(N,a,4,l,d);return d[Q-1]}(t2,o2,p,b,y2,h,m)},t.orient2dfast=function(t2,e3,n2,r2,o2,f2){return(e3-f2)*(n2-o2)-(t2-o2)*(r2-f2)},Object.defineProperty(t,"__esModule",{value:!0})})}});var require_concaveman=__commonJS({"../../../node_modules/concaveman/index.js"(exports,module){"use strict";var RBush3=(init_rbush(),__toCommonJS(rbush_exports)),Queue=(init_tinyqueue(),__toCommonJS(tinyqueue_exports)),pointInPolygon=require_point_in_polygon(),orient=require_orient2d_min().orient2d;Queue.default&&(Queue=Queue.default);module.exports=concaveman2;module.exports.default=concaveman2;function concaveman2(points,concavity,lengthThreshold){concavity=Math.max(0,concavity===void 0?2:concavity),lengthThreshold=lengthThreshold||0;var hull=fastConvexHull(points),tree=new RBush3(16);tree.toBBox=function(a2){return{minX:a2[0],minY:a2[1],maxX:a2[0],maxY:a2[1]}},tree.compareMinX=function(a2,b2){return a2[0]-b2[0]},tree.compareMinY=function(a2,b2){return a2[1]-b2[1]},tree.load(points);for(var queue=[],i=0,last;i<hull.length;i++){var p=hull[i];tree.remove(p),last=insertNode(p,last),queue.push(last)}var segTree=new RBush3(16);for(i=0;i<queue.length;i++)segTree.insert(updateBBox(queue[i]));for(var sqConcavity=concavity*concavity,sqLenThreshold=lengthThreshold*lengthThreshold;queue.length;){var node=queue.shift(),a=node.p,b=node.next.p,sqLen=getSqDist(a,b);if(!(sqLen<sqLenThreshold)){var maxSqLen=sqLen/sqConcavity;p=findCandidate(tree,node.prev.p,a,b,node.next.next.p,maxSqLen,segTree),p&&Math.min(getSqDist(p,a),getSqDist(p,b))<=maxSqLen&&(queue.push(node),queue.push(insertNode(p,node)),tree.remove(p),segTree.remove(node),segTree.insert(updateBBox(node)),segTree.insert(updateBBox(node.next)))}}node=last;var concave=[];do concave.push(node.p),node=node.next;while(node!==last);return concave.push(node.p),concave}function findCandidate(tree,a,b,c,d,maxDist,segTree){for(var queue=new Queue([],compareDist),node=tree.data;node;){for(var i=0;i<node.children.length;i++){var child=node.children[i],dist=node.leaf?sqSegDist(child,b,c):sqSegBoxDist(b,c,child);dist>maxDist||queue.push({node:child,dist})}for(;queue.length&&!queue.peek().node.children;){var item=queue.pop(),p=item.node,d0=sqSegDist(p,a,b),d1=sqSegDist(p,c,d);if(item.dist<d0&&item.dist<d1&&noIntersections(b,p,segTree)&&noIntersections(c,p,segTree))return p}node=queue.pop(),node&&(node=node.node)}return null}function compareDist(a,b){return a.dist-b.dist}function sqSegBoxDist(a,b,bbox2){if(inside(a,bbox2)||inside(b,bbox2))return 0;var d1=sqSegSegDist(a[0],a[1],b[0],b[1],bbox2.minX,bbox2.minY,bbox2.maxX,bbox2.minY);if(d1===0)return 0;var d2=sqSegSegDist(a[0],a[1],b[0],b[1],bbox2.minX,bbox2.minY,bbox2.minX,bbox2.maxY);if(d2===0)return 0;var d3=sqSegSegDist(a[0],a[1],b[0],b[1],bbox2.maxX,bbox2.minY,bbox2.maxX,bbox2.maxY);if(d3===0)return 0;var d4=sqSegSegDist(a[0],a[1],b[0],b[1],bbox2.minX,bbox2.maxY,bbox2.maxX,bbox2.maxY);return d4===0?0:Math.min(d1,d2,d3,d4)}function inside(a,bbox2){return a[0]>=bbox2.minX&&a[0]<=bbox2.maxX&&a[1]>=bbox2.minY&&a[1]<=bbox2.maxY}function noIntersections(a,b,segTree){for(var minX2=Math.min(a[0],b[0]),minY2=Math.min(a[1],b[1]),maxX2=Math.max(a[0],b[0]),maxY2=Math.max(a[1],b[1]),edges2=segTree.search({minX:minX2,minY:minY2,maxX:maxX2,maxY:maxY2}),i=0;i<edges2.length;i++)if(intersects8(edges2[i].p,edges2[i].next.p,a,b))return!1;return!0}function cross(p1,p2,p3){return orient(p1[0],p1[1],p2[0],p2[1],p3[0],p3[1])}function intersects8(p1,q1,p2,q2){return p1!==q2&&q1!==p2&&cross(p1,q1,p2)>0!=cross(p1,q1,q2)>0&&cross(p2,q2,p1)>0!=cross(p2,q2,q1)>0}function updateBBox(node){var p1=node.p,p2=node.next.p;return node.minX=Math.min(p1[0],p2[0]),node.minY=Math.min(p1[1],p2[1]),node.maxX=Math.max(p1[0],p2[0]),node.maxY=Math.max(p1[1],p2[1]),node}function fastConvexHull(points){for(var left=points[0],top=points[0],right=points[0],bottom=points[0],i=0;i<points.length;i++){var p=points[i];p[0]<left[0]&&(left=p),p[0]>right[0]&&(right=p),p[1]<top[1]&&(top=p),p[1]>bottom[1]&&(bottom=p)}var cull=[left,top,right,bottom],filtered=cull.slice();for(i=0;i<points.length;i++)pointInPolygon(points[i],cull)||filtered.push(points[i]);return convexHull(filtered)}function insertNode(p,prev){var node={p,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return prev?(node.next=prev.next,node.prev=prev,prev.next.prev=node,prev.next=node):(node.prev=node,node.next=node),node}function getSqDist(p1,p2){var dx=p1[0]-p2[0],dy=p1[1]-p2[1];return dx*dx+dy*dy}function sqSegDist(p,p1,p2){var x2=p1[0],y2=p1[1],dx=p2[0]-x2,dy=p2[1]-y2;if(dx!==0||dy!==0){var t=((p[0]-x2)*dx+(p[1]-y2)*dy)/(dx*dx+dy*dy);t>1?(x2=p2[0],y2=p2[1]):t>0&&(x2+=dx*t,y2+=dy*t)}return dx=p[0]-x2,dy=p[1]-y2,dx*dx+dy*dy}function sqSegSegDist(x02,y0,x12,y1,x2,y2,x3,y3){var ux=x12-x02,uy=y1-y0,vx=x3-x2,vy=y3-y2,wx=x02-x2,wy=y0-y2,a=ux*ux+uy*uy,b=ux*vx+uy*vy,c=vx*vx+vy*vy,d=ux*wx+uy*wy,e=vx*wx+vy*wy,D=a*c-b*b,sc,sN,tc,tN,sD=D,tD=D;D===0?(sN=0,sD=1,tN=e,tD=c):(sN=b*e-c*d,tN=a*e-b*d,sN<0?(sN=0,tN=e,tD=c):sN>sD&&(sN=sD,tN=e+b,tD=c)),tN<0?(tN=0,-d<0?sN=0:-d>a?sN=sD:(sN=-d,sD=a)):tN>tD&&(tN=tD,-d+b<0?sN=0:-d+b>a?sN=sD:(sN=-d+b,sD=a)),sc=sN===0?0:sN/sD,tc=tN===0?0:tN/tD;var cx=(1-sc)*x02+sc*x12,cy=(1-sc)*y0+sc*y1,cx2=(1-tc)*x2+tc*x3,cy2=(1-tc)*y2+tc*y3,dx=cx2-cx,dy=cy2-cy;return dx*dx+dy*dy}function compareByX(a,b){return a[0]===b[0]?a[1]-b[1]:a[0]-b[0]}function convexHull(points){points.sort(compareByX);for(var lower=[],i=0;i<points.length;i++){for(;lower.length>=2&&cross(lower[lower.length-2],lower[lower.length-1],points[i])<=0;)lower.pop();lower.push(points[i])}for(var upper=[],ii=points.length-1;ii>=0;ii--){for(;upper.length>=2&&cross(upper[upper.length-2],upper[upper.length-1],points[ii])<=0;)upper.pop();upper.push(points[ii])}return upper.pop(),lower.pop(),lower.concat(upper)}}});var require_quickselect=__commonJS({"../../../node_modules/quickselect/quickselect.js"(exports,module){(function(global,factory){typeof exports=="object"&&typeof module<"u"?module.exports=factory():typeof define=="function"&&define.amd?define(factory):global.quickselect=factory()})(exports,function(){"use strict";function quickselect3(arr,k,left,right,compare10){quickselectStep3(arr,k,left||0,right||arr.length-1,compare10||defaultCompare4)}function quickselectStep3(arr,k,left,right,compare10){for(;right>left;){if(right-left>600){var n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep3(arr,k,newLeft,newRight,compare10)}var t=arr[k],i=left,j=right;for(swap4(arr,left,k),compare10(arr[right],t)>0&&swap4(arr,left,right);i<j;){for(swap4(arr,i,j),i++,j--;compare10(arr[i],t)<0;)i++;for(;compare10(arr[j],t)>0;)j--}compare10(arr[left],t)===0?swap4(arr,left,j):(j++,swap4(arr,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}}function swap4(arr,i,j){var tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultCompare4(a,b){return a<b?-1:a>b?1:0}return quickselect3})}});var require_rbush=__commonJS({"../../../node_modules/rbush/index.js"(exports,module){"use strict";module.exports=rbush6;module.exports.default=rbush6;var quickselect3=require_quickselect();function rbush6(maxEntries,format){if(!(this instanceof rbush6))return new rbush6(maxEntries,format);this._maxEntries=Math.max(4,maxEntries||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),format&&this._initFormat(format),this.clear()}rbush6.prototype={all:function(){return this._all(this.data,[])},search:function(bbox2){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects8(bbox2,node))return result;for(var nodesToSearch=[],i,len,child,childBBox;node;){for(i=0,len=node.children.length;i<len;i++)child=node.children[i],childBBox=node.leaf?toBBox(child):child,intersects8(bbox2,childBBox)&&(node.leaf?result.push(child):contains4(bbox2,childBBox)?this._all(child,result):nodesToSearch.push(child));node=nodesToSearch.pop()}return result},collides:function(bbox2){var node=this.data,toBBox=this.toBBox;if(!intersects8(bbox2,node))return!1;for(var nodesToSearch=[],i,len,child,childBBox;node;){for(i=0,len=node.children.length;i<len;i++)if(child=node.children[i],childBBox=node.leaf?toBBox(child):child,intersects8(bbox2,childBBox)){if(node.leaf||contains4(bbox2,childBBox))return!0;nodesToSearch.push(child)}node=nodesToSearch.pop()}return!1},load:function(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++)this.insert(data[i]);return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length)this.data=node;else if(this.data.height===node.height)this._splitRoot(this.data,node);else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node,node=tmpNode}this._insert(node,this.data.height-node.height-1,!0)}return this},insert:function(item){return item&&this._insert(item,this.data.height-1),this},clear:function(){return this.data=createNode4([]),this},remove:function(item,equalsFn){if(!item)return this;for(var node=this.data,bbox2=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;node||path.length;){if(node||(node=path.pop(),parent=path[path.length-1],i=indexes.pop(),goingUp=!0),node.leaf&&(index=findItem3(item,node.children,equalsFn),index!==-1))return node.children.splice(index,1),path.push(node),this._condense(path),this;!goingUp&&!node.leaf&&contains4(node,bbox2)?(path.push(node),indexes.push(i),i=0,parent=node,node=node.children[0]):parent?(i++,node=parent.children[i],goingUp=!1):node=null}return this},toBBox:function(item){return item},compareMinX:compareNodeMinX3,compareMinY:compareNodeMinY3,toJSON:function(){return this.data},fromJSON:function(data){return this.data=data,this},_all:function(node,result){for(var nodesToSearch=[];node;)node.leaf?result.push.apply(result,node.children):nodesToSearch.push.apply(nodesToSearch,node.children),node=nodesToSearch.pop();return result},_build:function(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M)return node=createNode4(items.slice(left,right+1)),calcBBox3(node,this.toBBox),node;height||(height=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/Math.pow(M,height-1))),node=createNode4([]),node.leaf=!1,node.height=height;var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;for(multiSelect3(items,left,right,N1,this.compareMinX),i=left;i<=right;i+=N1)for(right2=Math.min(i+N1-1,right),multiSelect3(items,i,right2,N2,this.compareMinY),j=i;j<=right2;j+=N2)right3=Math.min(j+N2-1,right2),node.children.push(this._build(items,j,right3,height-1));return calcBBox3(node,this.toBBox),node},_chooseSubtree:function(bbox2,node,level,path){for(var i,len,child,targetNode,area5,enlargement,minArea,minEnlargement;path.push(node),!(node.leaf||path.length-1===level);){for(minArea=minEnlargement=1/0,i=0,len=node.children.length;i<len;i++)child=node.children[i],area5=bboxArea3(child),enlargement=enlargedArea3(bbox2,child)-area5,enlargement<minEnlargement?(minEnlargement=enlargement,minArea=area5<minArea?area5:minArea,targetNode=child):enlargement===minEnlargement&&area5<minArea&&(minArea=area5,targetNode=child);node=targetNode||node.children[0]}return node},_insert:function(item,level,isNode){var toBBox=this.toBBox,bbox2=isNode?item:toBBox(item),insertPath=[],node=this._chooseSubtree(bbox2,this.data,level,insertPath);for(node.children.push(item),extend4(node,bbox2);level>=0&&insertPath[level].children.length>this._maxEntries;)this._split(insertPath,level),level--;this._adjustParentBBoxes(bbox2,insertPath,level)},_split:function(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M),newNode=createNode4(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height,newNode.leaf=node.leaf,calcBBox3(node,this.toBBox),calcBBox3(newNode,this.toBBox),level?insertPath[level-1].children.push(newNode):this._splitRoot(node,newNode)},_splitRoot:function(node,newNode){this.data=createNode4([node,newNode]),this.data.height=node.height+1,this.data.leaf=!1,calcBBox3(this.data,this.toBBox)},_chooseSplitIndex:function(node,m,M){var i,bbox1,bbox2,overlap2,area5,minOverlap,minArea,index;for(minOverlap=minArea=1/0,i=m;i<=M-m;i++)bbox1=distBBox3(node,0,i,this.toBBox),bbox2=distBBox3(node,i,M,this.toBBox),overlap2=intersectionArea3(bbox1,bbox2),area5=bboxArea3(bbox1)+bboxArea3(bbox2),overlap2<minOverlap?(minOverlap=overlap2,index=i,minArea=area5<minArea?area5:minArea):overlap2===minOverlap&&area5<minArea&&(minArea=area5,index=i);return index},_chooseSplitAxis:function(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX3,compareMinY=node.leaf?this.compareMinY:compareNodeMinY3,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);xMargin<yMargin&&node.children.sort(compareMinX)},_allDistMargin:function(node,m,M,compare10){node.children.sort(compare10);var toBBox=this.toBBox,leftBBox=distBBox3(node,0,m,toBBox),rightBBox=distBBox3(node,M-m,M,toBBox),margin=bboxMargin3(leftBBox)+bboxMargin3(rightBBox),i,child;for(i=m;i<M-m;i++)child=node.children[i],extend4(leftBBox,node.leaf?toBBox(child):child),margin+=bboxMargin3(leftBBox);for(i=M-m-1;i>=m;i--)child=node.children[i],extend4(rightBBox,node.leaf?toBBox(child):child),margin+=bboxMargin3(rightBBox);return margin},_adjustParentBBoxes:function(bbox2,path,level){for(var i=level;i>=0;i--)extend4(path[i],bbox2)},_condense:function(path){for(var i=path.length-1,siblings;i>=0;i--)path[i].children.length===0?i>0?(siblings=path[i-1].children,siblings.splice(siblings.indexOf(path[i]),1)):this.clear():calcBBox3(path[i],this.toBBox)},_initFormat:function(format){var compareArr=["return a"," - b",";"];this.compareMinX=new Function("a","b",compareArr.join(format[0])),this.compareMinY=new Function("a","b",compareArr.join(format[1])),this.toBBox=new Function("a","return {minX: a"+format[0]+", minY: a"+format[1]+", maxX: a"+format[2]+", maxY: a"+format[3]+"};")}};function findItem3(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++)if(equalsFn(item,items[i]))return i;return-1}function calcBBox3(node,toBBox){distBBox3(node,0,node.children.length,toBBox,node)}function distBBox3(node,k,p,toBBox,destNode){destNode||(destNode=createNode4(null)),destNode.minX=1/0,destNode.minY=1/0,destNode.maxX=-1/0,destNode.maxY=-1/0;for(var i=k,child;i<p;i++)child=node.children[i],extend4(destNode,node.leaf?toBBox(child):child);return destNode}function extend4(a,b){return a.minX=Math.min(a.minX,b.minX),a.minY=Math.min(a.minY,b.minY),a.maxX=Math.max(a.maxX,b.maxX),a.maxY=Math.max(a.maxY,b.maxY),a}function compareNodeMinX3(a,b){return a.minX-b.minX}function compareNodeMinY3(a,b){return a.minY-b.minY}function bboxArea3(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin3(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea3(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea3(a,b){var minX2=Math.max(a.minX,b.minX),minY2=Math.max(a.minY,b.minY),maxX2=Math.min(a.maxX,b.maxX),maxY2=Math.min(a.maxY,b.maxY);return Math.max(0,maxX2-minX2)*Math.max(0,maxY2-minY2)}function contains4(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects8(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode4(children){return{children,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect3(arr,left,right,n,compare10){for(var stack=[left,right],mid;stack.length;)right=stack.pop(),left=stack.pop(),!(right-left<=n)&&(mid=left+Math.ceil((right-left)/n/2)*n,quickselect3(arr,mid,left,right,compare10),stack.push(left,mid,mid,right))}}});var require_earcut=__commonJS({"../../../node_modules/earcut/src/earcut.js"(exports,module){"use strict";module.exports=earcut2;module.exports.default=earcut2;function earcut2(data,holeIndices,dim){dim=dim||2;var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,!0),triangles=[];if(!outerNode||outerNode.next===outerNode.prev)return triangles;var minX2,minY2,maxX2,maxY2,x2,y2,invSize;if(hasHoles&&(outerNode=eliminateHoles(data,holeIndices,outerNode,dim)),data.length>80*dim){minX2=maxX2=data[0],minY2=maxY2=data[1];for(var i=dim;i<outerLen;i+=dim)x2=data[i],y2=data[i+1],x2<minX2&&(minX2=x2),y2<minY2&&(minY2=y2),x2>maxX2&&(maxX2=x2),y2>maxY2&&(maxY2=y2);invSize=Math.max(maxX2-minX2,maxY2-minY2),invSize=invSize!==0?32767/invSize:0}return earcutLinked(outerNode,triangles,dim,minX2,minY2,invSize,0),triangles}function linkedList(data,start,end,dim,clockwise){var i,last;if(clockwise===signedArea4(data,start,end,dim)>0)for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last);else for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last);return last&&equals9(last,last.next)&&(removeNode(last),last=last.next),last}function filterPoints(start,end){if(!start)return start;end||(end=start);var p=start,again;do if(again=!1,!p.steiner&&(equals9(p,p.next)||area5(p.prev,p,p.next)===0)){if(removeNode(p),p=end=p.prev,p===p.next)break;again=!0}else p=p.next;while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX2,minY2,invSize,pass){if(ear){!pass&&invSize&&indexCurve(ear,minX2,minY2,invSize);for(var stop=ear,prev,next3;ear.prev!==ear.next;){if(prev=ear.prev,next3=ear.next,invSize?isEarHashed(ear,minX2,minY2,invSize):isEar(ear)){triangles.push(prev.i/dim|0),triangles.push(ear.i/dim|0),triangles.push(next3.i/dim|0),removeNode(ear),ear=next3.next,stop=next3.next;continue}if(ear=next3,ear===stop){pass?pass===1?(ear=cureLocalIntersections(filterPoints(ear),triangles,dim),earcutLinked(ear,triangles,dim,minX2,minY2,invSize,2)):pass===2&&splitEarcut(ear,triangles,dim,minX2,minY2,invSize):earcutLinked(filterPoints(ear),triangles,dim,minX2,minY2,invSize,1);break}}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area5(a,b,c)>=0)return!1;for(var ax=a.x,bx=b.x,cx=c.x,ay=a.y,by=b.y,cy=c.y,x02=ax<bx?ax<cx?ax:cx:bx<cx?bx:cx,y0=ay<by?ay<cy?ay:cy:by<cy?by:cy,x12=ax>bx?ax>cx?ax:cx:bx>cx?bx:cx,y1=ay>by?ay>cy?ay:cy:by>cy?by:cy,p=c.next;p!==a;){if(p.x>=x02&&p.x<=x12&&p.y>=y0&&p.y<=y1&&pointInTriangle(ax,ay,bx,by,cx,cy,p.x,p.y)&&area5(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function isEarHashed(ear,minX2,minY2,invSize){var a=ear.prev,b=ear,c=ear.next;if(area5(a,b,c)>=0)return!1;for(var ax=a.x,bx=b.x,cx=c.x,ay=a.y,by=b.y,cy=c.y,x02=ax<bx?ax<cx?ax:cx:bx<cx?bx:cx,y0=ay<by?ay<cy?ay:cy:by<cy?by:cy,x12=ax>bx?ax>cx?ax:cx:bx>cx?bx:cx,y1=ay>by?ay>cy?ay:cy:by>cy?by:cy,minZ=zOrder(x02,y0,minX2,minY2,invSize),maxZ=zOrder(x12,y1,minX2,minY2,invSize),p=ear.prevZ,n=ear.nextZ;p&&p.z>=minZ&&n&&n.z<=maxZ;){if(p.x>=x02&&p.x<=x12&&p.y>=y0&&p.y<=y1&&p!==a&&p!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,p.x,p.y)&&area5(p.prev,p,p.next)>=0||(p=p.prevZ,n.x>=x02&&n.x<=x12&&n.y>=y0&&n.y<=y1&&n!==a&&n!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,n.x,n.y)&&area5(n.prev,n,n.next)>=0))return!1;n=n.nextZ}for(;p&&p.z>=minZ;){if(p.x>=x02&&p.x<=x12&&p.y>=y0&&p.y<=y1&&p!==a&&p!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,p.x,p.y)&&area5(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;n&&n.z<=maxZ;){if(n.x>=x02&&n.x<=x12&&n.y>=y0&&n.y<=y1&&n!==a&&n!==c&&pointInTriangle(ax,ay,bx,by,cx,cy,n.x,n.y)&&area5(n.prev,n,n.next)>=0)return!1;n=n.nextZ}return!0}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;!equals9(a,b)&&intersects8(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)&&(triangles.push(a.i/dim|0),triangles.push(p.i/dim|0),triangles.push(b.i/dim|0),removeNode(p),removeNode(p.next),p=start=b),p=p.next}while(p!==start);return filterPoints(p)}function splitEarcut(start,triangles,dim,minX2,minY2,invSize){var a=start;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);a=filterPoints(a,a.next),c=filterPoints(c,c.next),earcutLinked(a,triangles,dim,minX2,minY2,invSize,0),earcutLinked(c,triangles,dim,minX2,minY2,invSize,0);return}b=b.next}a=a.next}while(a!==start)}function eliminateHoles(data,holeIndices,outerNode,dim){var queue=[],i,len,start,end,list;for(i=0,len=holeIndices.length;i<len;i++)start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length,list=linkedList(data,start,end,dim,!1),list===list.next&&(list.steiner=!0),queue.push(getLeftmost(list));for(queue.sort(compareX2),i=0;i<queue.length;i++)outerNode=eliminateHole(queue[i],outerNode);return outerNode}function compareX2(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){var bridge=findHoleBridge(hole,outerNode);if(!bridge)return outerNode;var bridgeReverse=splitPolygon(bridge,hole);return filterPoints(bridgeReverse,bridgeReverse.next),filterPoints(bridge,bridge.next)}function findHoleBridge(hole,outerNode){var p=outerNode,hx=hole.x,hy=hole.y,qx=-1/0,m;do{if(hy<=p.y&&hy>=p.next.y&&p.next.y!==p.y){var x2=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x2<=hx&&x2>qx&&(qx=x2,m=p.x<p.next.x?p:p.next,x2===hx))return m}p=p.next}while(p!==outerNode);if(!m)return null;var stop=m,mx=m.x,my=m.y,tanMin=1/0,tan2;p=m;do hx>=p.x&&p.x>=mx&&hx!==p.x&&pointInTriangle(hy<my?hx:qx,hy,mx,my,hy<my?qx:hx,hy,p.x,p.y)&&(tan2=Math.abs(hy-p.y)/(hx-p.x),locallyInside(p,hole)&&(tan2<tanMin||tan2===tanMin&&(p.x>m.x||p.x===m.x&&sectorContainsSector(m,p)))&&(m=p,tanMin=tan2)),p=p.next;while(p!==stop);return m}function sectorContainsSector(m,p){return area5(m.prev,m,p.prev)<0&&area5(p.next,m,m.next)<0}function indexCurve(start,minX2,minY2,invSize){var p=start;do p.z===0&&(p.z=zOrder(p.x,p.y,minX2,minY2,invSize)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next;while(p!==start);p.prevZ.nextZ=null,p.prevZ=null,sortLinked(p)}function sortLinked(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{for(p=list,list=null,tail=null,numMerges=0;p;){for(numMerges++,q=p,pSize=0,i=0;i<inSize&&(pSize++,q=q.nextZ,!!q);i++);for(qSize=inSize;pSize>0||qSize>0&&q;)pSize!==0&&(qSize===0||!q||p.z<=q.z)?(e=p,p=p.nextZ,pSize--):(e=q,q=q.nextZ,qSize--),tail?tail.nextZ=e:list=e,e.prevZ=tail,tail=e;p=q}tail.nextZ=null,inSize*=2}while(numMerges>1);return list}function zOrder(x2,y2,minX2,minY2,invSize){return x2=(x2-minX2)*invSize|0,y2=(y2-minY2)*invSize|0,x2=(x2|x2<<8)&16711935,x2=(x2|x2<<4)&252645135,x2=(x2|x2<<2)&858993459,x2=(x2|x2<<1)&1431655765,y2=(y2|y2<<8)&16711935,y2=(y2|y2<<4)&252645135,y2=(y2|y2<<2)&858993459,y2=(y2|y2<<1)&1431655765,x2|y2<<1}function getLeftmost(start){var p=start,leftmost=start;do(p.x<leftmost.x||p.x===leftmost.x&&p.y<leftmost.y)&&(leftmost=p),p=p.next;while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)>=(ax-px)*(cy-py)&&(ax-px)*(by-py)>=(bx-px)*(ay-py)&&(bx-px)*(cy-py)>=(cx-px)*(by-py)}function isValidDiagonal(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!intersectsPolygon(a,b)&&(locallyInside(a,b)&&locallyInside(b,a)&&middleInside(a,b)&&(area5(a.prev,a,b.prev)||area5(a,b.prev,b))||equals9(a,b)&&area5(a.prev,a,a.next)>0&&area5(b.prev,b,b.next)>0)}function area5(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals9(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects8(p1,q1,p2,q2){var o1=sign2(area5(p1,q1,p2)),o2=sign2(area5(p1,q1,q2)),o3=sign2(area5(p2,q2,p1)),o4=sign2(area5(p2,q2,q1));return!!(o1!==o2&&o3!==o4||o1===0&&onSegment(p1,p2,q1)||o2===0&&onSegment(p1,q2,q1)||o3===0&&onSegment(p2,p1,q2)||o4===0&&onSegment(p2,q1,q2))}function onSegment(p,q,r){return q.x<=Math.max(p.x,r.x)&&q.x>=Math.min(p.x,r.x)&&q.y<=Math.max(p.y,r.y)&&q.y>=Math.min(p.y,r.y)}function sign2(num){return num>0?1:num<0?-1:0}function intersectsPolygon(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects8(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}function locallyInside(a,b){return area5(a.prev,a,a.next)<0?area5(a,b,a.next)>=0&&area5(a,a.prev,b)>=0:area5(a,b,a.prev)<0||area5(a,a.next,b)<0}function middleInside(a,b){var p=a,inside=!1,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do p.y>py!=p.next.y>py&&p.next.y!==p.y&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x&&(inside=!inside),p=p.next;while(p!==a);return inside}function splitPolygon(a,b){var a2=new Node4(a.i,a.x,a.y),b2=new Node4(b.i,b.x,b.y),an=a.next,bp=b.prev;return a.next=b,b.prev=a,a2.next=an,an.prev=a2,b2.next=a2,a2.prev=b2,bp.next=b2,b2.prev=bp,b2}function insertNode(i,x2,y2,last){var p=new Node4(i,x2,y2);return last?(p.next=last.next,p.prev=last,last.next.prev=p,last.next=p):(p.prev=p,p.next=p),p}function removeNode(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Node4(i,x2,y2){this.i=i,this.x=x2,this.y=y2,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut2.deviation=function(data,holeIndices,dim,triangles){var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,polygonArea2=Math.abs(signedArea4(data,0,outerLen,dim));if(hasHoles)for(var i=0,len=holeIndices.length;i<len;i++){var start=holeIndices[i]*dim,end=i<len-1?holeIndices[i+1]*dim:data.length;polygonArea2-=Math.abs(signedArea4(data,start,end,dim))}var trianglesArea=0;for(i=0;i<triangles.length;i+=3){var a=triangles[i]*dim,b=triangles[i+1]*dim,c=triangles[i+2]*dim;trianglesArea+=Math.abs((data[a]-data[c])*(data[b+1]-data[a+1])-(data[a]-data[b])*(data[c+1]-data[a+1]))}return polygonArea2===0&&trianglesArea===0?0:Math.abs((trianglesArea-polygonArea2)/polygonArea2)};function signedArea4(data,start,end,dim){for(var sum2=0,i=start,j=end-dim;i<end;i+=dim)sum2+=(data[j]-data[i])*(data[i+1]+data[j+1]),j=i;return sum2}earcut2.flatten=function(data){for(var dim=data[0][0].length,result={vertices:[],holes:[],dimensions:dim},holeIndex=0,i=0;i<data.length;i++){for(var j=0;j<data[i].length;j++)for(var d=0;d<dim;d++)result.vertices.push(data[i][j][d]);i>0&&(holeIndex+=data[i-1].length,result.holes.push(holeIndex))}return result}}});function quickselect2(arr,k,left,right,compare10){quickselectStep2(arr,k,left||0,right||arr.length-1,compare10||defaultCompare3)}function quickselectStep2(arr,k,left,right,compare10){for(;right>left;){if(right-left>600){var n=right-left+1,m=k-left+1,z=Math.log(n),s=.5*Math.exp(2*z/3),sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1),newLeft=Math.max(left,Math.floor(k-m*s/n+sd)),newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep2(arr,k,newLeft,newRight,compare10)}var t=arr[k],i=left,j=right;for(swap2(arr,left,k),compare10(arr[right],t)>0&&swap2(arr,left,right);i<j;){for(swap2(arr,i,j),i++,j--;compare10(arr[i],t)<0;)i++;for(;compare10(arr[j],t)>0;)j--}compare10(arr[left],t)===0?swap2(arr,left,j):(j++,swap2(arr,j,right)),j<=k&&(left=j+1),k<=j&&(right=j-1)}}function swap2(arr,i,j){var tmp=arr[i];arr[i]=arr[j],arr[j]=tmp}function defaultCompare3(a,b){return a<b?-1:a>b?1:0}var init_quickselect2=__esm({"../../../node_modules/geojson-rbush/node_modules/quickselect/index.js"(){}});var rbush_exports2={};__export(rbush_exports2,{default:()=>RBush2});function findItem2(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(let i=0;i<items.length;i++)if(equalsFn(item,items[i]))return i;return-1}function calcBBox2(node,toBBox){distBBox2(node,0,node.children.length,toBBox,node)}function distBBox2(node,k,p,toBBox,destNode){destNode||(destNode=createNode2(null)),destNode.minX=1/0,destNode.minY=1/0,destNode.maxX=-1/0,destNode.maxY=-1/0;for(let i=k;i<p;i++){let child=node.children[i];extend2(destNode,node.leaf?toBBox(child):child)}return destNode}function extend2(a,b){return a.minX=Math.min(a.minX,b.minX),a.minY=Math.min(a.minY,b.minY),a.maxX=Math.max(a.maxX,b.maxX),a.maxY=Math.max(a.maxY,b.maxY),a}function compareNodeMinX2(a,b){return a.minX-b.minX}function compareNodeMinY2(a,b){return a.minY-b.minY}function bboxArea2(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin2(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea2(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea2(a,b){let minX2=Math.max(a.minX,b.minX),minY2=Math.max(a.minY,b.minY),maxX2=Math.min(a.maxX,b.maxX),maxY2=Math.min(a.maxY,b.maxY);return Math.max(0,maxX2-minX2)*Math.max(0,maxY2-minY2)}function contains2(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects2(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode2(children){return{children,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect2(arr,left,right,n,compare10){let stack=[left,right];for(;stack.length;){if(right=stack.pop(),left=stack.pop(),right-left<=n)continue;let mid=left+Math.ceil((right-left)/n/2)*n;quickselect2(arr,mid,left,right,compare10),stack.push(left,mid,mid,right)}}var RBush2,init_rbush2=__esm({"../../../node_modules/geojson-rbush/node_modules/rbush/index.js"(){init_quickselect2();RBush2=class{constructor(maxEntries=9){this._maxEntries=Math.max(4,maxEntries),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(bbox2){let node=this.data,result=[];if(!intersects2(bbox2,node))return result;let toBBox=this.toBBox,nodesToSearch=[];for(;node;){for(let i=0;i<node.children.length;i++){let child=node.children[i],childBBox=node.leaf?toBBox(child):child;intersects2(bbox2,childBBox)&&(node.leaf?result.push(child):contains2(bbox2,childBBox)?this._all(child,result):nodesToSearch.push(child))}node=nodesToSearch.pop()}return result}collides(bbox2){let node=this.data;if(!intersects2(bbox2,node))return!1;let nodesToSearch=[];for(;node;){for(let i=0;i<node.children.length;i++){let child=node.children[i],childBBox=node.leaf?this.toBBox(child):child;if(intersects2(bbox2,childBBox)){if(node.leaf||contains2(bbox2,childBBox))return!0;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return!1}load(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(let i=0;i<data.length;i++)this.insert(data[i]);return this}let node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length)this.data=node;else if(this.data.height===node.height)this._splitRoot(this.data,node);else{if(this.data.height<node.height){let tmpNode=this.data;this.data=node,node=tmpNode}this._insert(node,this.data.height-node.height-1,!0)}return this}insert(item){return item&&this._insert(item,this.data.height-1),this}clear(){return this.data=createNode2([]),this}remove(item,equalsFn){if(!item)return this;let node=this.data,bbox2=this.toBBox(item),path=[],indexes=[],i,parent,goingUp;for(;node||path.length;){if(node||(node=path.pop(),parent=path[path.length-1],i=indexes.pop(),goingUp=!0),node.leaf){let index=findItem2(item,node.children,equalsFn);if(index!==-1)return node.children.splice(index,1),path.push(node),this._condense(path),this}!goingUp&&!node.leaf&&contains2(node,bbox2)?(path.push(node),indexes.push(i),i=0,parent=node,node=node.children[0]):parent?(i++,node=parent.children[i],goingUp=!1):node=null}return this}toBBox(item){return item}compareMinX(a,b){return a.minX-b.minX}compareMinY(a,b){return a.minY-b.minY}toJSON(){return this.data}fromJSON(data){return this.data=data,this}_all(node,result){let nodesToSearch=[];for(;node;)node.leaf?result.push(...node.children):nodesToSearch.push(...node.children),node=nodesToSearch.pop();return result}_build(items,left,right,height){let N=right-left+1,M=this._maxEntries,node;if(N<=M)return node=createNode2(items.slice(left,right+1)),calcBBox2(node,this.toBBox),node;height||(height=Math.ceil(Math.log(N)/Math.log(M)),M=Math.ceil(N/Math.pow(M,height-1))),node=createNode2([]),node.leaf=!1,node.height=height;let N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M));multiSelect2(items,left,right,N1,this.compareMinX);for(let i=left;i<=right;i+=N1){let right2=Math.min(i+N1-1,right);multiSelect2(items,i,right2,N2,this.compareMinY);for(let j=i;j<=right2;j+=N2){let right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}return calcBBox2(node,this.toBBox),node}_chooseSubtree(bbox2,node,level,path){for(;path.push(node),!(node.leaf||path.length-1===level);){let minArea=1/0,minEnlargement=1/0,targetNode;for(let i=0;i<node.children.length;i++){let child=node.children[i],area5=bboxArea2(child),enlargement=enlargedArea2(bbox2,child)-area5;enlargement<minEnlargement?(minEnlargement=enlargement,minArea=area5<minArea?area5:minArea,targetNode=child):enlargement===minEnlargement&&area5<minArea&&(minArea=area5,targetNode=child)}node=targetNode||node.children[0]}return node}_insert(item,level,isNode){let bbox2=isNode?item:this.toBBox(item),insertPath=[],node=this._chooseSubtree(bbox2,this.data,level,insertPath);for(node.children.push(item),extend2(node,bbox2);level>=0&&insertPath[level].children.length>this._maxEntries;)this._split(insertPath,level),level--;this._adjustParentBBoxes(bbox2,insertPath,level)}_split(insertPath,level){let node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);let splitIndex=this._chooseSplitIndex(node,m,M),newNode=createNode2(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height,newNode.leaf=node.leaf,calcBBox2(node,this.toBBox),calcBBox2(newNode,this.toBBox),level?insertPath[level-1].children.push(newNode):this._splitRoot(node,newNode)}_splitRoot(node,newNode){this.data=createNode2([node,newNode]),this.data.height=node.height+1,this.data.leaf=!1,calcBBox2(this.data,this.toBBox)}_chooseSplitIndex(node,m,M){let index,minOverlap=1/0,minArea=1/0;for(let i=m;i<=M-m;i++){let bbox1=distBBox2(node,0,i,this.toBBox),bbox2=distBBox2(node,i,M,this.toBBox),overlap2=intersectionArea2(bbox1,bbox2),area5=bboxArea2(bbox1)+bboxArea2(bbox2);overlap2<minOverlap?(minOverlap=overlap2,index=i,minArea=area5<minArea?area5:minArea):overlap2===minOverlap&&area5<minArea&&(minArea=area5,index=i)}return index||M-m}_chooseSplitAxis(node,m,M){let compareMinX=node.leaf?this.compareMinX:compareNodeMinX2,compareMinY=node.leaf?this.compareMinY:compareNodeMinY2,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);xMargin<yMargin&&node.children.sort(compareMinX)}_allDistMargin(node,m,M,compare10){node.children.sort(compare10);let toBBox=this.toBBox,leftBBox=distBBox2(node,0,m,toBBox),rightBBox=distBBox2(node,M-m,M,toBBox),margin=bboxMargin2(leftBBox)+bboxMargin2(rightBBox);for(let i=m;i<M-m;i++){let child=node.children[i];extend2(leftBBox,node.leaf?toBBox(child):child),margin+=bboxMargin2(leftBBox)}for(let i=M-m-1;i>=m;i--){let child=node.children[i];extend2(rightBBox,node.leaf?toBBox(child):child),margin+=bboxMargin2(rightBBox)}return margin}_adjustParentBBoxes(bbox2,path,level){for(let i=level;i>=0;i--)extend2(path[i],bbox2)}_condense(path){for(let i=path.length-1,siblings;i>=0;i--)path[i].children.length===0?i>0?(siblings=path[i-1].children,siblings.splice(siblings.indexOf(path[i]),1)):this.clear():calcBBox2(path[i],this.toBBox)}}}});var require_js=__commonJS({"../../../node_modules/@turf/helpers/dist/js/index.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.earthRadius=63710088e-1;exports.factors={centimeters:exports.earthRadius*100,centimetres:exports.earthRadius*100,degrees:exports.earthRadius/111325,feet:exports.earthRadius*3.28084,inches:exports.earthRadius*39.37,kilometers:exports.earthRadius/1e3,kilometres:exports.earthRadius/1e3,meters:exports.earthRadius,metres:exports.earthRadius,miles:exports.earthRadius/1609.344,millimeters:exports.earthRadius*1e3,millimetres:exports.earthRadius*1e3,nauticalmiles:exports.earthRadius/1852,radians:1,yards:exports.earthRadius*1.0936};exports.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/exports.earthRadius,yards:1.0936133};exports.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function feature2(geom,properties,options){options===void 0&&(options={});var feat={type:"Feature"};return(options.id===0||options.id)&&(feat.id=options.id),options.bbox&&(feat.bbox=options.bbox),feat.properties=properties||{},feat.geometry=geom,feat}exports.feature=feature2;function geometry(type2,coordinates,_options){switch(_options===void 0&&(_options={}),type2){case"Point":return point4(coordinates).geometry;case"LineString":return lineString2(coordinates).geometry;case"Polygon":return polygon4(coordinates).geometry;case"MultiPoint":return multiPoint2(coordinates).geometry;case"MultiLineString":return multiLineString2(coordinates).geometry;case"MultiPolygon":return multiPolygon2(coordinates).geometry;default:throw new Error(type2+" is invalid")}}exports.geometry=geometry;function point4(coordinates,properties,options){if(options===void 0&&(options={}),!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");if(coordinates.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber2(coordinates[0])||!isNumber2(coordinates[1]))throw new Error("coordinates must contain numbers");var geom={type:"Point",coordinates};return feature2(geom,properties,options)}exports.point=point4;function points(coordinates,properties,options){return options===void 0&&(options={}),featureCollection2(coordinates.map(function(coords){return point4(coords,properties)}),options)}exports.points=points;function polygon4(coordinates,properties,options){options===void 0&&(options={});for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var ring=coordinates_1[_i];if(ring.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var j=0;j<ring[ring.length-1].length;j++)if(ring[ring.length-1][j]!==ring[0][j])throw new Error("First and last Position are not equivalent.")}var geom={type:"Polygon",coordinates};return feature2(geom,properties,options)}exports.polygon=polygon4;function polygons(coordinates,properties,options){return options===void 0&&(options={}),featureCollection2(coordinates.map(function(coords){return polygon4(coords,properties)}),options)}exports.polygons=polygons;function lineString2(coordinates,properties,options){if(options===void 0&&(options={}),coordinates.length<2)throw new Error("coordinates must be an array of two or more positions");var geom={type:"LineString",coordinates};return feature2(geom,properties,options)}exports.lineString=lineString2;function lineStrings(coordinates,properties,options){return options===void 0&&(options={}),featureCollection2(coordinates.map(function(coords){return lineString2(coords,properties)}),options)}exports.lineStrings=lineStrings;function featureCollection2(features,options){options===void 0&&(options={});var fc={type:"FeatureCollection"};return options.id&&(fc.id=options.id),options.bbox&&(fc.bbox=options.bbox),fc.features=features,fc}exports.featureCollection=featureCollection2;function multiLineString2(coordinates,properties,options){options===void 0&&(options={});var geom={type:"MultiLineString",coordinates};return feature2(geom,properties,options)}exports.multiLineString=multiLineString2;function multiPoint2(coordinates,properties,options){options===void 0&&(options={});var geom={type:"MultiPoint",coordinates};return feature2(geom,properties,options)}exports.multiPoint=multiPoint2;function multiPolygon2(coordinates,properties,options){options===void 0&&(options={});var geom={type:"MultiPolygon",coordinates};return feature2(geom,properties,options)}exports.multiPolygon=multiPolygon2;function geometryCollection2(geometries,properties,options){options===void 0&&(options={});var geom={type:"GeometryCollection",geometries};return feature2(geom,properties,options)}exports.geometryCollection=geometryCollection2;function round(num,precision){if(precision===void 0&&(precision=0),precision&&!(precision>=0))throw new Error("precision must be a positive number");var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier}exports.round=round;function radiansToLength2(radians2,units){units===void 0&&(units="kilometers");var factor=exports.factors[units];if(!factor)throw new Error(units+" units is invalid");return radians2*factor}exports.radiansToLength=radiansToLength2;function lengthToRadians2(distance10,units){units===void 0&&(units="kilometers");var factor=exports.factors[units];if(!factor)throw new Error(units+" units is invalid");return distance10/factor}exports.lengthToRadians=lengthToRadians2;function lengthToDegrees2(distance10,units){return radiansToDegrees2(lengthToRadians2(distance10,units))}exports.lengthToDegrees=lengthToDegrees2;function bearingToAzimuth2(bearing2){var angle3=bearing2%360;return angle3<0&&(angle3+=360),angle3}exports.bearingToAzimuth=bearingToAzimuth2;function radiansToDegrees2(radians2){var degrees2=radians2%(2*Math.PI);return degrees2*180/Math.PI}exports.radiansToDegrees=radiansToDegrees2;function degreesToRadians2(degrees2){var radians2=degrees2%360;return radians2*Math.PI/180}exports.degreesToRadians=degreesToRadians2;function convertLength2(length4,originalUnit,finalUnit){if(originalUnit===void 0&&(originalUnit="kilometers"),finalUnit===void 0&&(finalUnit="kilometers"),!(length4>=0))throw new Error("length must be a positive number");return radiansToLength2(lengthToRadians2(length4,originalUnit),finalUnit)}exports.convertLength=convertLength2;function convertArea(area5,originalUnit,finalUnit){if(originalUnit===void 0&&(originalUnit="meters"),finalUnit===void 0&&(finalUnit="kilometers"),!(area5>=0))throw new Error("area must be a positive number");var startFactor=exports.areaFactors[originalUnit];if(!startFactor)throw new Error("invalid original units");var finalFactor=exports.areaFactors[finalUnit];if(!finalFactor)throw new Error("invalid final units");return area5/startFactor*finalFactor}exports.convertArea=convertArea;function isNumber2(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)}exports.isNumber=isNumber2;function isObject2(input){return!!input&&input.constructor===Object}exports.isObject=isObject2;function validateBBox(bbox2){if(!bbox2)throw new Error("bbox is required");if(!Array.isArray(bbox2))throw new Error("bbox must be an Array");if(bbox2.length!==4&&bbox2.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");bbox2.forEach(function(num){if(!isNumber2(num))throw new Error("bbox must only contain numbers")})}exports.validateBBox=validateBBox;function validateId(id){if(!id)throw new Error("id is required");if(["string","number"].indexOf(typeof id)===-1)throw new Error("id must be a number or a string")}exports.validateId=validateId}});var require_js2=__commonJS({"../../../node_modules/@turf/meta/dist/js/index.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var helpers=require_js();function coordEach2(geojson,callback,excludeWrapCoord){if(geojson!==null)for(var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection2,type2=geojson.type,isFeatureCollection=type2==="FeatureCollection",isFeature=type2==="Feature",stop=isFeatureCollection?geojson.features.length:1,featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson,isGeometryCollection2=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":!1,stopG=isGeometryCollection2?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0,geometryIndex=0;if(geometry=isGeometryCollection2?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection,geometry!==null){coords=geometry.coordinates;var geomType=geometry.type;switch(wrapShrink=excludeWrapCoord&&(geomType==="Polygon"||geomType==="MultiPolygon")?1:0,geomType){case null:break;case"Point":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++,multiFeatureIndex++;break;case"LineString":case"MultiPoint":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++,geomType==="MultiPoint"&&multiFeatureIndex++}geomType==="LineString"&&multiFeatureIndex++;break;case"Polygon":case"MultiLineString":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++}geomType==="MultiLineString"&&multiFeatureIndex++,geomType==="Polygon"&&geometryIndex++}geomType==="Polygon"&&multiFeatureIndex++;break;case"MultiPolygon":for(j=0;j<coords.length;j++){for(geometryIndex=0,k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++)if(coordEach2(geometry.geometries[j],callback,excludeWrapCoord)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function coordReduce2(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;return coordEach2(geojson,function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){coordIndex===0&&initialValue===void 0?previousValue=currentCoord:previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)},excludeWrapCoord),previousValue}function propEach(geojson,callback){var i;switch(geojson.type){case"FeatureCollection":for(i=0;i<geojson.features.length&&callback(geojson.features[i].properties,i)!==!1;i++);break;case"Feature":callback(geojson.properties,0);break}}function propReduce(geojson,callback,initialValue){var previousValue=initialValue;return propEach(geojson,function(currentProperties,featureIndex){featureIndex===0&&initialValue===void 0?previousValue=currentProperties:previousValue=callback(previousValue,currentProperties,featureIndex)}),previousValue}function featureEach2(geojson,callback){if(geojson.type==="Feature")callback(geojson,0);else if(geojson.type==="FeatureCollection")for(var i=0;i<geojson.features.length&&callback(geojson.features[i],i)!==!1;i++);}function featureReduce2(geojson,callback,initialValue){var previousValue=initialValue;return featureEach2(geojson,function(currentFeature,featureIndex){featureIndex===0&&initialValue===void 0?previousValue=currentFeature:previousValue=callback(previousValue,currentFeature,featureIndex)}),previousValue}function coordAll2(geojson){var coords=[];return coordEach2(geojson,function(coord){coords.push(coord)}),coords}function geomEach2(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection2,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type==="FeatureCollection",isFeature=geojson.type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){for(geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson,featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{},featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:void 0,featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:void 0,isGeometryCollection2=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":!1,stopG=isGeometryCollection2?geometryMaybeCollection.geometries.length:1,g=0;g<stopG;g++){if(geometry=isGeometryCollection2?geometryMaybeCollection.geometries[g]:geometryMaybeCollection,geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===!1)return!1;continue}switch(geometry.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===!1)return!1;break}case"GeometryCollection":{for(j=0;j<geometry.geometries.length;j++)if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}featureIndex++}}function geomReduce2(geojson,callback,initialValue){var previousValue=initialValue;return geomEach2(geojson,function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){featureIndex===0&&initialValue===void 0?previousValue=currentGeometry:previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)}),previousValue}function flattenEach2(geojson,callback){geomEach2(geojson,function(geometry,featureIndex,properties,bbox2,id){var type2=geometry===null?null:geometry.type;switch(type2){case null:case"Point":case"LineString":case"Polygon":return callback(helpers.feature(geometry,properties,{bbox:bbox2,id}),featureIndex,0)===!1?!1:void 0}var geomType;switch(type2){case"MultiPoint":geomType="Point";break;case"MultiLineString":geomType="LineString";break;case"MultiPolygon":geomType="Polygon";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate2=geometry.coordinates[multiFeatureIndex],geom={type:geomType,coordinates:coordinate2};if(callback(helpers.feature(geom,properties),featureIndex,multiFeatureIndex)===!1)return!1}})}function flattenReduce(geojson,callback,initialValue){var previousValue=initialValue;return flattenEach2(geojson,function(currentFeature,featureIndex,multiFeatureIndex){featureIndex===0&&multiFeatureIndex===0&&initialValue===void 0?previousValue=currentFeature:previousValue=callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)}),previousValue}function segmentEach2(geojson,callback){flattenEach2(geojson,function(feature2,featureIndex,multiFeatureIndex){var segmentIndex=0;if(feature2.geometry){var type2=feature2.geometry.type;if(!(type2==="Point"||type2==="MultiPoint")){var previousCoords,previousFeatureIndex=0,previousMultiIndex=0,prevGeomIndex=0;if(coordEach2(feature2,function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(previousCoords===void 0||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex){previousCoords=currentCoord,previousFeatureIndex=featureIndex,previousMultiIndex=multiPartIndexCoord,prevGeomIndex=geometryIndex,segmentIndex=0;return}var currentSegment=helpers.lineString([previousCoords,currentCoord],feature2.properties);if(callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex)===!1)return!1;segmentIndex++,previousCoords=currentCoord})===!1)return!1}}})}function segmentReduce2(geojson,callback,initialValue){var previousValue=initialValue,started=!1;return segmentEach2(geojson,function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){started===!1&&initialValue===void 0?previousValue=currentSegment:previousValue=callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex),started=!0}),previousValue}function lineEach(geojson,callback){if(!geojson)throw new Error("geojson is required");flattenEach2(geojson,function(feature2,featureIndex,multiFeatureIndex){if(feature2.geometry!==null){var type2=feature2.geometry.type,coords=feature2.geometry.coordinates;switch(type2){case"LineString":if(callback(feature2,featureIndex,multiFeatureIndex,0,0)===!1)return!1;break;case"Polygon":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++)if(callback(helpers.lineString(coords[geometryIndex],feature2.properties),featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;break}}})}function lineReduce2(geojson,callback,initialValue){var previousValue=initialValue;return lineEach(geojson,function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){featureIndex===0&&initialValue===void 0?previousValue=currentLine:previousValue=callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)}),previousValue}function findSegment(geojson,options){if(options=options||{},!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0,multiFeatureIndex=options.multiFeatureIndex||0,geometryIndex=options.geometryIndex||0,segmentIndex=options.segmentIndex||0,properties=options.properties,geometry;switch(geojson.type){case"FeatureCollection":featureIndex<0&&(featureIndex=geojson.features.length+featureIndex),properties=properties||geojson.features[featureIndex].properties,geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties,geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":case"MultiPoint":return null;case"LineString":return segmentIndex<0&&(segmentIndex=coords.length+segmentIndex-1),helpers.lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case"Polygon":return geometryIndex<0&&(geometryIndex=coords.length+geometryIndex),segmentIndex<0&&(segmentIndex=coords[geometryIndex].length+segmentIndex-1),helpers.lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case"MultiLineString":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),segmentIndex<0&&(segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1),helpers.lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case"MultiPolygon":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),geometryIndex<0&&(geometryIndex=coords[multiFeatureIndex].length+geometryIndex),segmentIndex<0&&(segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1),helpers.lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error("geojson is invalid")}function findPoint(geojson,options){if(options=options||{},!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0,multiFeatureIndex=options.multiFeatureIndex||0,geometryIndex=options.geometryIndex||0,coordIndex=options.coordIndex||0,properties=options.properties,geometry;switch(geojson.type){case"FeatureCollection":featureIndex<0&&(featureIndex=geojson.features.length+featureIndex),properties=properties||geojson.features[featureIndex].properties,geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties,geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":return helpers.point(coords,properties,options);case"MultiPoint":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),helpers.point(coords[multiFeatureIndex],properties,options);case"LineString":return coordIndex<0&&(coordIndex=coords.length+coordIndex),helpers.point(coords[coordIndex],properties,options);case"Polygon":return geometryIndex<0&&(geometryIndex=coords.length+geometryIndex),coordIndex<0&&(coordIndex=coords[geometryIndex].length+coordIndex),helpers.point(coords[geometryIndex][coordIndex],properties,options);case"MultiLineString":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),coordIndex<0&&(coordIndex=coords[multiFeatureIndex].length+coordIndex),helpers.point(coords[multiFeatureIndex][coordIndex],properties,options);case"MultiPolygon":return multiFeatureIndex<0&&(multiFeatureIndex=coords.length+multiFeatureIndex),geometryIndex<0&&(geometryIndex=coords[multiFeatureIndex].length+geometryIndex),coordIndex<0&&(coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex),helpers.point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error("geojson is invalid")}exports.coordAll=coordAll2;exports.coordEach=coordEach2;exports.coordReduce=coordReduce2;exports.featureEach=featureEach2;exports.featureReduce=featureReduce2;exports.findPoint=findPoint;exports.findSegment=findSegment;exports.flattenEach=flattenEach2;exports.flattenReduce=flattenReduce;exports.geomEach=geomEach2;exports.geomReduce=geomReduce2;exports.lineEach=lineEach;exports.lineReduce=lineReduce2;exports.propEach=propEach;exports.propReduce=propReduce;exports.segmentEach=segmentEach2;exports.segmentReduce=segmentReduce2}});var require_js3=__commonJS({"../../../node_modules/@turf/bbox/dist/js/index.js"(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var meta_1=require_js2();function bbox2(geojson){var result=[1/0,1/0,-1/0,-1/0];return meta_1.coordEach(geojson,function(coord){result[0]>coord[0]&&(result[0]=coord[0]),result[1]>coord[1]&&(result[1]=coord[1]),result[2]<coord[0]&&(result[2]=coord[0]),result[3]<coord[1]&&(result[3]=coord[1])}),result}bbox2.default=bbox2;exports.default=bbox2}});var require_geojson_rbush=__commonJS({"../../../node_modules/geojson-rbush/index.js"(exports,module){var rbush6=(init_rbush2(),__toCommonJS(rbush_exports2)),helpers=require_js(),meta=require_js2(),turfBBox=require_js3().default,featureEach2=meta.featureEach,coordEach2=meta.coordEach,polygon4=helpers.polygon,featureCollection2=helpers.featureCollection;function geojsonRbush(maxEntries){var tree=new rbush6(maxEntries);return tree.insert=function(feature2){if(feature2.type!=="Feature")throw new Error("invalid feature");return feature2.bbox=feature2.bbox?feature2.bbox:turfBBox(feature2),rbush6.prototype.insert.call(this,feature2)},tree.load=function(features){var load=[];return Array.isArray(features)?features.forEach(function(feature2){if(feature2.type!=="Feature")throw new Error("invalid features");feature2.bbox=feature2.bbox?feature2.bbox:turfBBox(feature2),load.push(feature2)}):featureEach2(features,function(feature2){if(feature2.type!=="Feature")throw new Error("invalid features");feature2.bbox=feature2.bbox?feature2.bbox:turfBBox(feature2),load.push(feature2)}),rbush6.prototype.load.call(this,load)},tree.remove=function(feature2,equals9){if(feature2.type!=="Feature")throw new Error("invalid feature");return feature2.bbox=feature2.bbox?feature2.bbox:turfBBox(feature2),rbush6.prototype.remove.call(this,feature2,equals9)},tree.clear=function(){return rbush6.prototype.clear.call(this)},tree.search=function(geojson){var features=rbush6.prototype.search.call(this,this.toBBox(geojson));return featureCollection2(features)},tree.collides=function(geojson){return rbush6.prototype.collides.call(this,this.toBBox(geojson))},tree.all=function(){var features=rbush6.prototype.all.call(this);return featureCollection2(features)},tree.toJSON=function(){return rbush6.prototype.toJSON.call(this)},tree.fromJSON=function(json){return rbush6.prototype.fromJSON.call(this,json)},tree.toBBox=function(geojson){var bbox2;if(geojson.bbox)bbox2=geojson.bbox;else if(Array.isArray(geojson)&&geojson.length===4)bbox2=geojson;else if(Array.isArray(geojson)&&geojson.length===6)bbox2=[geojson[0],geojson[1],geojson[3],geojson[4]];else if(geojson.type==="Feature")bbox2=turfBBox(geojson);else if(geojson.type==="FeatureCollection")bbox2=turfBBox(geojson);else throw new Error("invalid geojson");return{minX:bbox2[0],minY:bbox2[1],maxX:bbox2[2],maxY:bbox2[3]}},tree}module.exports=geojsonRbush;module.exports.default=geojsonRbush}});var require_isArguments=__commonJS({"../../../node_modules/object-keys/isArguments.js"(exports,module){"use strict";var toStr=Object.prototype.toString;module.exports=function(value){var str=toStr.call(value),isArgs=str==="[object Arguments]";return isArgs||(isArgs=str!=="[object Array]"&&value!==null&&typeof value=="object"&&typeof value.length=="number"&&value.length>=0&&toStr.call(value.callee)==="[object Function]"),isArgs}}});var require_implementation=__commonJS({"../../../node_modules/object-keys/implementation.js"(exports,module){"use strict";var keysShim;Object.keys||(has=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArgs=require_isArguments(),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(o){var ctor=o.constructor;return ctor&&ctor.prototype===o},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if(typeof window>"u")return!1;for(var k in window)try{if(!excludedKeys["$"+k]&&has.call(window,k)&&window[k]!==null&&typeof window[k]=="object")try{equalsConstructorPrototype(window[k])}catch{return!0}}catch{return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(o){if(typeof window>"u"||!hasAutomationEqualityBug)return equalsConstructorPrototype(o);try{return equalsConstructorPrototype(o)}catch{return!1}},keysShim=function(object2){var isObject2=object2!==null&&typeof object2=="object",isFunction=toStr.call(object2)==="[object Function]",isArguments=isArgs(object2),isString=isObject2&&toStr.call(object2)==="[object String]",theKeys=[];if(!isObject2&&!isFunction&&!isArguments)throw new TypeError("Object.keys called on a non-object");var skipProto=hasProtoEnumBug&&isFunction;if(isString&&object2.length>0&&!has.call(object2,0))for(var i=0;i<object2.length;++i)theKeys.push(String(i));if(isArguments&&object2.length>0)for(var j=0;j<object2.length;++j)theKeys.push(String(j));else for(var name in object2)!(skipProto&&name==="prototype")&&has.call(object2,name)&&theKeys.push(String(name));if(hasDontEnumBug)for(var skipConstructor=equalsConstructorPrototypeIfNotBuggy(object2),k=0;k<dontEnums.length;++k)!(skipConstructor&&dontEnums[k]==="constructor")&&has.call(object2,dontEnums[k])&&theKeys.push(dontEnums[k]);return theKeys});var has,toStr,isArgs,isEnumerable,hasDontEnumBug,hasProtoEnumBug,dontEnums,equalsConstructorPrototype,excludedKeys,hasAutomationEqualityBug,equalsConstructorPrototypeIfNotBuggy;module.exports=keysShim}});var require_object_keys=__commonJS({"../../../node_modules/object-keys/index.js"(exports,module){"use strict";var slice2=Array.prototype.slice,isArgs=require_isArguments(),origKeys=Object.keys,keysShim=origKeys?function(o){return origKeys(o)}:require_implementation(),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var keysWorksWithArguments=function(){var args=Object.keys(arguments);return args&&args.length===arguments.length}(1,2);keysWorksWithArguments||(Object.keys=function(object2){return isArgs(object2)?originalKeys(slice2.call(object2)):originalKeys(object2)})}else Object.keys=keysShim;return Object.keys||keysShim};module.exports=keysShim}});var require_shams=__commonJS({"../../../node_modules/has-symbols/shams.js"(exports,module){"use strict";module.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var obj={},sym=Symbol("test"),symObj=Object(sym);if(typeof sym=="string"||Object.prototype.toString.call(sym)!=="[object Symbol]"||Object.prototype.toString.call(symObj)!=="[object Symbol]")return!1;var symVal=42;obj[sym]=symVal;for(sym in obj)return!1;if(typeof Object.keys=="function"&&Object.keys(obj).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(obj).length!==0)return!1;var syms=Object.getOwnPropertySymbols(obj);if(syms.length!==1||syms[0]!==sym||!Object.prototype.propertyIsEnumerable.call(obj,sym))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||descriptor.enumerable!==!0)return!1}return!0}}});var require_shams2=__commonJS({"../../../node_modules/has-tostringtag/shams.js"(exports,module){"use strict";var hasSymbols=require_shams();module.exports=function(){return hasSymbols()&&!!Symbol.toStringTag}}});var require_has_symbols=__commonJS({"../../../node_modules/has-symbols/index.js"(exports,module){"use strict";var origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=require_shams();module.exports=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()}}});var require_has_proto=__commonJS({"../../../node_modules/has-proto/index.js"(exports,module){"use strict";var test={foo:{}},$Object=Object;module.exports=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)}}});var require_implementation2=__commonJS({"../../../node_modules/function-bind/implementation.js"(exports,module){"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice2=Array.prototype.slice,toStr=Object.prototype.toString,funcType="[object Function]";module.exports=function(that){var target=this;if(typeof target!="function"||toStr.call(target)!==funcType)throw new TypeError(ERROR_MESSAGE+target);for(var args=slice2.call(arguments,1),bound,binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice2.call(arguments)));return Object(result)===result?result:this}else return target.apply(that,args.concat(slice2.call(arguments)))},boundLength=Math.max(0,target.length-args.length),boundArgs=[],i=0;i<boundLength;i++)boundArgs.push("$"+i);if(bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder),target.prototype){var Empty=function(){};Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null}return bound}}});var require_function_bind=__commonJS({"../../../node_modules/function-bind/index.js"(exports,module){"use strict";var implementation=require_implementation2();module.exports=Function.prototype.bind||implementation}});var require_src=__commonJS({"../../../node_modules/has/src/index.js"(exports,module){"use strict";var hasOwnProperty2={}.hasOwnProperty,call=Function.prototype.call;module.exports=call.bind?call.bind(hasOwnProperty2):function(O,P){return call.call(hasOwnProperty2,O,P)}}});var require_get_intrinsic=__commonJS({"../../../node_modules/get-intrinsic/index.js"(exports,module){"use strict";var undefined2,$SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch{}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch{$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=require_has_symbols()(),hasProto=require_has_proto()(),getProto=Object.getPrototypeOf||(hasProto?function(x2){return x2.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined2:getProto(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined2:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined2:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined2,"%AsyncFromSyncIteratorPrototype%":undefined2,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined2:Atomics,"%BigInt%":typeof BigInt>"u"?undefined2:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined2:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined2:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined2:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined2:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined2:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined2:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined2:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined2:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined2:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined2,"%JSON%":typeof JSON=="object"?JSON:undefined2,"%Map%":typeof Map>"u"?undefined2:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined2:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined2:Promise,"%Proxy%":typeof Proxy>"u"?undefined2:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined2:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined2:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined2:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined2:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined2,"%Symbol%":hasSymbols?Symbol:undefined2,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":typeof Uint8Array>"u"?undefined2:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined2:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined2:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined2:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined2:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined2:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined2:WeakSet};if(getProto)try{null.error}catch(e){errorProto=getProto(getProto(e)),INTRINSICS["%Error.prototype%"]=errorProto}var errorProto,doEval=function doEval2(name){var value;if(name==="%AsyncFunction%")value=getEvalledConstructor("async function () {}");else if(name==="%GeneratorFunction%")value=getEvalledConstructor("function* () {}");else if(name==="%AsyncGeneratorFunction%")value=getEvalledConstructor("async function* () {}");else if(name==="%AsyncGenerator%"){var fn=doEval2("%AsyncGeneratorFunction%");fn&&(value=fn.prototype)}else if(name==="%AsyncIteratorPrototype%"){var gen=doEval2("%AsyncGenerator%");gen&&getProto&&(value=getProto(gen.prototype))}return INTRINSICS[name]=value,value},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=require_function_bind(),hasOwn=require_src(),$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(string){var first=$strSlice(string,0,1),last=$strSlice(string,-1);if(first==="%"&&last!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(last==="%"&&first!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var result=[];return $replace(string,rePropName,function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match}),result},getBaseIntrinsic=function(name,allowMissing){var intrinsicName=name,alias;if(hasOwn(LEGACY_ALIASES,intrinsicName)&&(alias=LEGACY_ALIASES[intrinsicName],intrinsicName="%"+alias[0]+"%"),hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval&&(value=doEval(intrinsicName)),typeof value>"u"&&!allowMissing)throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!");return{alias,name:intrinsicName,value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function(name,allowMissing){if(typeof name!="string"||name.length===0)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof allowMissing!="boolean")throw new $TypeError('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,name)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var parts=stringToPath(name),intrinsicBaseName=parts.length>0?parts[0]:"",intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing),intrinsicRealName=intrinsic.name,value=intrinsic.value,skipFurtherCaching=!1,alias=intrinsic.alias;alias&&(intrinsicBaseName=alias[0],$spliceApply(parts,$concat([0,1],alias)));for(var i=1,isOwn=!0;i<parts.length;i+=1){var part=parts[i],first=$strSlice(part,0,1),last=$strSlice(part,-1);if((first==='"'||first==="'"||first==="`"||last==='"'||last==="'"||last==="`")&&first!==last)throw new $SyntaxError("property names with quotes must have matching quotes");if((part==="constructor"||!isOwn)&&(skipFurtherCaching=!0),intrinsicBaseName+="."+part,intrinsicRealName="%"+intrinsicBaseName+"%",hasOwn(INTRINSICS,intrinsicRealName))value=INTRINSICS[intrinsicRealName];else if(value!=null){if(!(part in value)){if(!allowMissing)throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.");return}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);isOwn=!!desc,isOwn&&"get"in desc&&!("originalValue"in desc.get)?value=desc.get:value=value[part]}else isOwn=hasOwn(value,part),value=value[part];isOwn&&!skipFurtherCaching&&(INTRINSICS[intrinsicRealName]=value)}}return value}}});var require_call_bind=__commonJS({"../../../node_modules/call-bind/index.js"(exports,module){"use strict";var bind=require_function_bind(),GetIntrinsic=require_get_intrinsic(),$apply=GetIntrinsic("%Function.prototype.apply%"),$call=GetIntrinsic("%Function.prototype.call%"),$reflectApply=GetIntrinsic("%Reflect.apply%",!0)||bind.call($call,$apply),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),$max=GetIntrinsic("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch{$defineProperty=null}module.exports=function(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");desc.configurable&&$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}return func};var applyBind=function(){return $reflectApply(bind,$apply,arguments)};$defineProperty?$defineProperty(module.exports,"apply",{value:applyBind}):module.exports.apply=applyBind}});var require_callBound=__commonJS({"../../../node_modules/call-bind/callBound.js"(exports,module){"use strict";var GetIntrinsic=require_get_intrinsic(),callBind=require_call_bind(),$indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);return typeof intrinsic=="function"&&$indexOf(name,".prototype.")>-1?callBind(intrinsic):intrinsic}}});var require_is_arguments=__commonJS({"../../../node_modules/is-arguments/index.js"(exports,module){"use strict";var hasToStringTag=require_shams2()(),callBound=require_callBound(),$toString=callBound("Object.prototype.toString"),isStandardArguments=function(value){return hasToStringTag&&value&&typeof value=="object"&&Symbol.toStringTag in value?!1:$toString(value)==="[object Arguments]"},isLegacyArguments=function(value){return isStandardArguments(value)?!0:value!==null&&typeof value=="object"&&typeof value.length=="number"&&value.length>=0&&$toString(value)!=="[object Array]"&&$toString(value.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments}});var require_has_property_descriptors=__commonJS({"../../../node_modules/has-property-descriptors/index.js"(exports,module){"use strict";var GetIntrinsic=require_get_intrinsic(),$defineProperty=GetIntrinsic("%Object.defineProperty%",!0),hasPropertyDescriptors=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};module.exports=hasPropertyDescriptors}});var require_gopd=__commonJS({"../../../node_modules/gopd/index.js"(exports,module){"use strict";var GetIntrinsic=require_get_intrinsic(),$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}module.exports=$gOPD}});var require_define_data_property=__commonJS({"../../../node_modules/define-data-property/index.js"(exports,module){"use strict";var hasPropertyDescriptors=require_has_property_descriptors()(),GetIntrinsic=require_get_intrinsic(),$defineProperty=hasPropertyDescriptors&&GetIntrinsic("%Object.defineProperty%",!0),$SyntaxError=GetIntrinsic("%SyntaxError%"),$TypeError=GetIntrinsic("%TypeError%"),gopd=require_gopd();module.exports=function(obj,property,value){if(!obj||typeof obj!="object"&&typeof obj!="function")throw new $TypeError("`obj` must be an object or a function`");if(typeof property!="string"&&typeof property!="symbol")throw new $TypeError("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError("`loose`, if provided, must be a boolean");var nonEnumerable=arguments.length>3?arguments[3]:null,nonWritable=arguments.length>4?arguments[4]:null,nonConfigurable=arguments.length>5?arguments[5]:null,loose=arguments.length>6?arguments[6]:!1,desc=!!gopd&&gopd(obj,property);if($defineProperty)$defineProperty(obj,property,{configurable:nonConfigurable===null&&desc?desc.configurable:!nonConfigurable,enumerable:nonEnumerable===null&&desc?desc.enumerable:!nonEnumerable,value,writable:nonWritable===null&&desc?desc.writable:!nonWritable});else if(loose||!nonEnumerable&&!nonWritable&&!nonConfigurable)obj[property]=value;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}}});var require_define_properties=__commonJS({"../../../node_modules/define-properties/index.js"(exports,module){"use strict";var keys=require_object_keys(),hasSymbols=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr=Object.prototype.toString,concat=Array.prototype.concat,defineDataProperty=require_define_data_property(),isFunction=function(fn){return typeof fn=="function"&&toStr.call(fn)==="[object Function]"},supportsDescriptors=require_has_property_descriptors()(),defineProperty=function(object2,name,value,predicate){if(name in object2){if(predicate===!0){if(object2[name]===value)return}else if(!isFunction(predicate)||!predicate())return}supportsDescriptors?defineDataProperty(object2,name,value,!0):defineDataProperty(object2,name,value)},defineProperties=function(object2,map5){var predicates=arguments.length>2?arguments[2]:{},props=keys(map5);hasSymbols&&(props=concat.call(props,Object.getOwnPropertySymbols(map5)));for(var i=0;i<props.length;i+=1)defineProperty(object2,props[i],map5[props[i]],predicates[props[i]])};defineProperties.supportsDescriptors=!!supportsDescriptors;module.exports=defineProperties}});var require_implementation3=__commonJS({"../../../node_modules/object-is/implementation.js"(exports,module){"use strict";var numberIsNaN=function(value){return value!==value};module.exports=function(a,b){return a===0&&b===0?1/a===1/b:!!(a===b||numberIsNaN(a)&&numberIsNaN(b))}}});var require_polyfill=__commonJS({"../../../node_modules/object-is/polyfill.js"(exports,module){"use strict";var implementation=require_implementation3();module.exports=function(){return typeof Object.is=="function"?Object.is:implementation}}});var require_shim=__commonJS({"../../../node_modules/object-is/shim.js"(exports,module){"use strict";var getPolyfill=require_polyfill(),define2=require_define_properties();module.exports=function(){var polyfill=getPolyfill();return define2(Object,{is:polyfill},{is:function(){return Object.is!==polyfill}}),polyfill}}});var require_object_is=__commonJS({"../../../node_modules/object-is/index.js"(exports,module){"use strict";var define2=require_define_properties(),callBind=require_call_bind(),implementation=require_implementation3(),getPolyfill=require_polyfill(),shim=require_shim(),polyfill=callBind(getPolyfill(),Object);define2(polyfill,{getPolyfill,implementation,shim});module.exports=polyfill}});var require_is_regex=__commonJS({"../../../node_modules/is-regex/index.js"(exports,module){"use strict";var callBound=require_callBound(),hasToStringTag=require_shams2()(),has,$exec,isRegexMarker,badStringifier;hasToStringTag&&(has=callBound("Object.prototype.hasOwnProperty"),$exec=callBound("RegExp.prototype.exec"),isRegexMarker={},throwRegexMarker=function(){throw isRegexMarker},badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker));var throwRegexMarker,$toString=callBound("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]";module.exports=hasToStringTag?function(value){if(!value||typeof value!="object")return!1;var descriptor=gOPD(value,"lastIndex"),hasLastIndexDataProperty=descriptor&&has(descriptor,"value");if(!hasLastIndexDataProperty)return!1;try{$exec(value,badStringifier)}catch(e){return e===isRegexMarker}}:function(value){return!value||typeof value!="object"&&typeof value!="function"?!1:$toString(value)===regexClass}}});var require_functions_have_names=__commonJS({"../../../node_modules/functions-have-names/index.js"(exports,module){"use strict";var functionsHaveNames=function(){return typeof function(){}.name=="string"},gOPD=Object.getOwnPropertyDescriptor;if(gOPD)try{gOPD([],"length")}catch{gOPD=null}functionsHaveNames.functionsHaveConfigurableNames=function(){if(!functionsHaveNames()||!gOPD)return!1;var desc=gOPD(function(){},"name");return!!desc&&!!desc.configurable};var $bind=Function.prototype.bind;functionsHaveNames.boundFunctionsHaveNames=function(){return functionsHaveNames()&&typeof $bind=="function"&&function(){}.bind().name!==""};module.exports=functionsHaveNames}});var require_set_function_name=__commonJS({"../../../node_modules/set-function-name/index.js"(exports,module){"use strict";var define2=require_define_data_property(),hasDescriptors=require_has_property_descriptors()(),functionsHaveConfigurableNames=require_functions_have_names().functionsHaveConfigurableNames(),$TypeError=TypeError;module.exports=function(fn,name){if(typeof fn!="function")throw new $TypeError("`fn` is not a function");var loose=arguments.length>2&&!!arguments[2];return(!loose||functionsHaveConfigurableNames)&&(hasDescriptors?define2(fn,"name",name,!0,!0):define2(fn,"name",name)),fn}}});var require_implementation4=__commonJS({"../../../node_modules/regexp.prototype.flags/implementation.js"(exports,module){"use strict";var setFunctionName=require_set_function_name(),$Object=Object,$TypeError=TypeError;module.exports=setFunctionName(function(){if(this!=null&&this!==$Object(this))throw new $TypeError("RegExp.prototype.flags getter called on non-object");var result="";return this.hasIndices&&(result+="d"),this.global&&(result+="g"),this.ignoreCase&&(result+="i"),this.multiline&&(result+="m"),this.dotAll&&(result+="s"),this.unicode&&(result+="u"),this.unicodeSets&&(result+="v"),this.sticky&&(result+="y"),result},"get flags",!0)}});var require_polyfill2=__commonJS({"../../../node_modules/regexp.prototype.flags/polyfill.js"(exports,module){"use strict";var implementation=require_implementation4(),supportsDescriptors=require_define_properties().supportsDescriptors,$gOPD=Object.getOwnPropertyDescriptor;module.exports=function(){if(supportsDescriptors&&/a/mig.flags==="gim"){var descriptor=$gOPD(RegExp.prototype,"flags");if(descriptor&&typeof descriptor.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var calls="",o={};if(Object.defineProperty(o,"hasIndices",{get:function(){calls+="d"}}),Object.defineProperty(o,"sticky",{get:function(){calls+="y"}}),calls==="dy")return descriptor.get}}return implementation}}});var require_shim2=__commonJS({"../../../node_modules/regexp.prototype.flags/shim.js"(exports,module){"use strict";var supportsDescriptors=require_define_properties().supportsDescriptors,getPolyfill=require_polyfill2(),gOPD=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto=Object.getPrototypeOf,regex=/a/;module.exports=function(){if(!supportsDescriptors||!getProto)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var polyfill=getPolyfill(),proto=getProto(regex),descriptor=gOPD(proto,"flags");return(!descriptor||descriptor.get!==polyfill)&&defineProperty(proto,"flags",{configurable:!0,enumerable:!1,get:polyfill}),polyfill}}});var require_regexp_prototype=__commonJS({"../../../node_modules/regexp.prototype.flags/index.js"(exports,module){"use strict";var define2=require_define_properties(),callBind=require_call_bind(),implementation=require_implementation4(),getPolyfill=require_polyfill2(),shim=require_shim2(),flagsBound=callBind(getPolyfill());define2(flagsBound,{getPolyfill,implementation,shim});module.exports=flagsBound}});var require_is_date_object=__commonJS({"../../../node_modules/is-date-object/index.js"(exports,module){"use strict";var getDay=Date.prototype.getDay,tryDateObject=function(value){try{return getDay.call(value),!0}catch{return!1}},toStr=Object.prototype.toString,dateClass="[object Date]",hasToStringTag=require_shams2()();module.exports=function(value){return typeof value!="object"||value===null?!1:hasToStringTag?tryDateObject(value):toStr.call(value)===dateClass}}});var require_deep_equal=__commonJS({"../../../node_modules/deep-equal/index.js"(exports,module){var objectKeys=require_object_keys(),isArguments=require_is_arguments(),is=require_object_is(),isRegex=require_is_regex(),flags=require_regexp_prototype(),isDate=require_is_date_object(),getTime=Date.prototype.getTime;function deepEqual(actual,expected,options){var opts=options||{};return(opts.strict?is(actual,expected):actual===expected)?!0:!actual||!expected||typeof actual!="object"&&typeof expected!="object"?opts.strict?is(actual,expected):actual==expected:objEquiv(actual,expected,opts)}function isUndefinedOrNull(value){return value==null}function isBuffer(x2){return!(!x2||typeof x2!="object"||typeof x2.length!="number"||typeof x2.copy!="function"||typeof x2.slice!="function"||x2.length>0&&typeof x2[0]!="number")}function objEquiv(a,b,opts){var i,key;if(typeof a!=typeof b||isUndefinedOrNull(a)||isUndefinedOrNull(b)||a.prototype!==b.prototype||isArguments(a)!==isArguments(b))return!1;var aIsRegex=isRegex(a),bIsRegex=isRegex(b);if(aIsRegex!==bIsRegex)return!1;if(aIsRegex||bIsRegex)return a.source===b.source&&flags(a)===flags(b);if(isDate(a)&&isDate(b))return getTime.call(a)===getTime.call(b);var aIsBuffer=isBuffer(a),bIsBuffer=isBuffer(b);if(aIsBuffer!==bIsBuffer)return!1;if(aIsBuffer||bIsBuffer){if(a.length!==b.length)return!1;for(i=0;i<a.length;i++)if(a[i]!==b[i])return!1;return!0}if(typeof a!=typeof b)return!1;try{var ka=objectKeys(a),kb=objectKeys(b)}catch{return!1}if(ka.length!==kb.length)return!1;for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1;for(i=ka.length-1;i>=0;i--)if(key=ka[i],!deepEqual(a[key],b[key],opts))return!1;return!0}module.exports=deepEqual}});var require_geojson_equality=__commonJS({"../../../node_modules/geojson-equality/index.js"(exports,module){var deepEqual=require_deep_equal(),Equality=function(opt){this.precision=opt&&opt.precision?opt.precision:17,this.direction=opt&&opt.direction?opt.direction:!1,this.pseudoNode=opt&&opt.pseudoNode?opt.pseudoNode:!1,this.objectComparator=opt&&opt.objectComparator?opt.objectComparator:objectComparator};Equality.prototype.compare=function(g1,g2){if(g1.type!==g2.type||!sameLength(g1,g2))return!1;switch(g1.type){case"Point":return this.compareCoord(g1.coordinates,g2.coordinates);case"LineString":return this.compareLine(g1.coordinates,g2.coordinates,0,!1);case"Polygon":return this.comparePolygon(g1,g2);case"Feature":return this.compareFeature(g1,g2);default:if(g1.type.indexOf("Multi")===0){var context=this,g1s=explode(g1),g2s=explode(g2);return g1s.every(function(g1part){return this.some(function(g2part){return context.compare(g1part,g2part)})},g2s)}}return!1};function explode(g){return g.coordinates.map(function(part){return{type:g.type.replace("Multi",""),coordinates:part}})}function sameLength(g1,g2){return g1.hasOwnProperty("coordinates")?g1.coordinates.length===g2.coordinates.length:g1.length===g2.length}Equality.prototype.compareCoord=function(c1,c2){if(c1.length!==c2.length)return!1;for(var i=0;i<c1.length;i++)if(c1[i].toFixed(this.precision)!==c2[i].toFixed(this.precision))return!1;return!0};Equality.prototype.compareLine=function(path1,path2,ind,isPoly){if(!sameLength(path1,path2))return!1;var p1=this.pseudoNode?path1:this.removePseudo(path1),p2=this.pseudoNode?path2:this.removePseudo(path2);if(!(isPoly&&!this.compareCoord(p1[0],p2[0])&&(p2=this.fixStartIndex(p2,p1),!p2))){var sameDirection=this.compareCoord(p1[ind],p2[ind]);return this.direction||sameDirection?this.comparePath(p1,p2):this.compareCoord(p1[ind],p2[p2.length-(1+ind)])?this.comparePath(p1.slice().reverse(),p2):!1}};Equality.prototype.fixStartIndex=function(sourcePath,targetPath){for(var correctPath,ind=-1,i=0;i<sourcePath.length;i++)if(this.compareCoord(sourcePath[i],targetPath[0])){ind=i;break}return ind>=0&&(correctPath=[].concat(sourcePath.slice(ind,sourcePath.length),sourcePath.slice(1,ind+1))),correctPath};Equality.prototype.comparePath=function(p1,p2){var cont=this;return p1.every(function(c,i){return cont.compareCoord(c,this[i])},p2)};Equality.prototype.comparePolygon=function(g1,g2){if(this.compareLine(g1.coordinates[0],g2.coordinates[0],1,!0)){var holes1=g1.coordinates.slice(1,g1.coordinates.length),holes2=g2.coordinates.slice(1,g2.coordinates.length),cont=this;return holes1.every(function(h1){return this.some(function(h2){return cont.compareLine(h1,h2,1,!0)})},holes2)}else return!1};Equality.prototype.compareFeature=function(g1,g2){return g1.id!==g2.id||!this.objectComparator(g1.properties,g2.properties)||!this.compareBBox(g1,g2)?!1:this.compare(g1.geometry,g2.geometry)};Equality.prototype.compareBBox=function(g1,g2){return!!(!g1.bbox&&!g2.bbox||g1.bbox&&g2.bbox&&this.compareCoord(g1.bbox,g2.bbox))};Equality.prototype.removePseudo=function(path){return path};function objectComparator(obj1,obj2){return deepEqual(obj1,obj2,{strict:!0})}module.exports=Equality}});var require_DBSCAN=__commonJS({"../../../node_modules/density-clustering/lib/DBSCAN.js"(exports,module){function DBSCAN(dataset,epsilon5,minPts,distanceFunction){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(dataset,epsilon5,minPts,distanceFunction)}DBSCAN.prototype.run=function(dataset,epsilon5,minPts,distanceFunction){this._init(dataset,epsilon5,minPts,distanceFunction);for(var pointId=0;pointId<this._datasetLength;pointId++)if(this._visited[pointId]!==1){this._visited[pointId]=1;var neighbors=this._regionQuery(pointId);if(neighbors.length<this.minPts)this.noise.push(pointId);else{var clusterId=this.clusters.length;this.clusters.push([]),this._addToCluster(pointId,clusterId),this._expandCluster(clusterId,neighbors)}}return this.clusters};DBSCAN.prototype._init=function(dataset,epsilon5,minPts,distance10){if(dataset){if(!(dataset instanceof Array))throw Error("Dataset must be of type array, "+typeof dataset+" given");this.dataset=dataset,this.clusters=[],this.noise=[],this._datasetLength=dataset.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}epsilon5&&(this.epsilon=epsilon5),minPts&&(this.minPts=minPts),distance10&&(this.distance=distance10)};DBSCAN.prototype._expandCluster=function(clusterId,neighbors){for(var i=0;i<neighbors.length;i++){var pointId2=neighbors[i];if(this._visited[pointId2]!==1){this._visited[pointId2]=1;var neighbors2=this._regionQuery(pointId2);neighbors2.length>=this.minPts&&(neighbors=this._mergeArrays(neighbors,neighbors2))}this._assigned[pointId2]!==1&&this._addToCluster(pointId2,clusterId)}};DBSCAN.prototype._addToCluster=function(pointId,clusterId){this.clusters[clusterId].push(pointId),this._assigned[pointId]=1};DBSCAN.prototype._regionQuery=function(pointId){for(var neighbors=[],id=0;id<this._datasetLength;id++){var dist=this.distance(this.dataset[pointId],this.dataset[id]);dist<this.epsilon&&neighbors.push(id)}return neighbors};DBSCAN.prototype._mergeArrays=function(a,b){for(var len=b.length,i=0;i<len;i++){var P=b[i];a.indexOf(P)<0&&a.push(P)}return a};DBSCAN.prototype._euclideanDistance=function(p,q){for(var sum2=0,i=Math.min(p.length,q.length);i--;)sum2+=(p[i]-q[i])*(p[i]-q[i]);return Math.sqrt(sum2)};typeof module<"u"&&module.exports&&(module.exports=DBSCAN)}});var require_KMEANS=__commonJS({"../../../node_modules/density-clustering/lib/KMEANS.js"(exports,module){function KMEANS(dataset,k,distance10){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(dataset,k,distance10)}KMEANS.prototype.init=function(dataset,k,distance10){this.assignments=[],this.centroids=[],typeof dataset<"u"&&(this.dataset=dataset),typeof k<"u"&&(this.k=k),typeof distance10<"u"&&(this.distance=distance10)};KMEANS.prototype.run=function(dataset,k){this.init(dataset,k);for(var len=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var change=!0;change;){change=this.assign();for(var centroidId=0;centroidId<this.k;centroidId++){for(var mean=new Array(maxDim),count2=0,dim=0;dim<maxDim;dim++)mean[dim]=0;for(var j=0;j<len;j++){var maxDim=this.dataset[j].length;if(centroidId===this.assignments[j]){for(var dim=0;dim<maxDim;dim++)mean[dim]+=this.dataset[j][dim];count2++}}if(count2>0){for(var dim=0;dim<maxDim;dim++)mean[dim]/=count2;this.centroids[centroidId]=mean}else this.centroids[centroidId]=this.randomCentroid(),change=!0}}return this.getClusters()};KMEANS.prototype.randomCentroid=function(){var maxId=this.dataset.length-1,centroid3,id;do id=Math.round(Math.random()*maxId),centroid3=this.dataset[id];while(this.centroids.indexOf(centroid3)>=0);return centroid3};KMEANS.prototype.assign=function(){for(var change=!1,len=this.dataset.length,closestCentroid,i=0;i<len;i++)closestCentroid=this.argmin(this.dataset[i],this.centroids,this.distance),closestCentroid!=this.assignments[i]&&(this.assignments[i]=closestCentroid,change=!0);return change};KMEANS.prototype.getClusters=function(){for(var clusters=new Array(this.k),centroidId,pointId=0;pointId<this.assignments.length;pointId++)centroidId=this.assignments[pointId],typeof clusters[centroidId]>"u"&&(clusters[centroidId]=[]),clusters[centroidId].push(pointId);return clusters};KMEANS.prototype.argmin=function(point4,set,f){for(var min4=Number.MAX_VALUE,arg=0,len=set.length,d,i=0;i<len;i++)d=f(point4,set[i]),d<min4&&(min4=d,arg=i);return arg};KMEANS.prototype.distance=function(p,q){for(var sum2=0,i=Math.min(p.length,q.length);i--;){var diff2=p[i]-q[i];sum2+=diff2*diff2}return Math.sqrt(sum2)};typeof module<"u"&&module.exports&&(module.exports=KMEANS)}});var require_PriorityQueue=__commonJS({"../../../node_modules/density-clustering/lib/PriorityQueue.js"(exports,module){function PriorityQueue3(elements,priorities,sorting){this._queue=[],this._priorities=[],this._sorting="desc",this._init(elements,priorities,sorting)}PriorityQueue3.prototype.insert=function(ele,priority){for(var indexToInsert=this._queue.length,index=indexToInsert;index--;){var priority2=this._priorities[index];this._sorting==="desc"?priority>priority2&&(indexToInsert=index):priority<priority2&&(indexToInsert=index)}this._insertAt(ele,priority,indexToInsert)};PriorityQueue3.prototype.remove=function(ele){for(var index=this._queue.length;index--;){var ele2=this._queue[index];if(ele===ele2){this._queue.splice(index,1),this._priorities.splice(index,1);break}}};PriorityQueue3.prototype.forEach=function(func){this._queue.forEach(func)};PriorityQueue3.prototype.getElements=function(){return this._queue};PriorityQueue3.prototype.getElementPriority=function(index){return this._priorities[index]};PriorityQueue3.prototype.getPriorities=function(){return this._priorities};PriorityQueue3.prototype.getElementsWithPriorities=function(){for(var result=[],i=0,l=this._queue.length;i<l;i++)result.push([this._queue[i],this._priorities[i]]);return result};PriorityQueue3.prototype._init=function(elements,priorities,sorting){if(elements&&priorities){if(this._queue=[],this._priorities=[],elements.length!==priorities.length)throw new Error("Arrays must have the same length");for(var i=0;i<elements.length;i++)this.insert(elements[i],priorities[i])}sorting&&(this._sorting=sorting)};PriorityQueue3.prototype._insertAt=function(ele,priority,index){this._queue.length===index?(this._queue.push(ele),this._priorities.push(priority)):(this._queue.splice(index,0,ele),this._priorities.splice(index,0,priority))};typeof module<"u"&&module.exports&&(module.exports=PriorityQueue3)}});var require_OPTICS=__commonJS({"../../../node_modules/density-clustering/lib/OPTICS.js"(exports,module){typeof module<"u"&&module.exports&&(PriorityQueue3=require_PriorityQueue());var PriorityQueue3;function OPTICS(dataset,epsilon5,minPts,distanceFunction){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(dataset,epsilon5,minPts,distanceFunction)}OPTICS.prototype.run=function(dataset,epsilon5,minPts,distanceFunction){this._init(dataset,epsilon5,minPts,distanceFunction);for(var pointId=0,l=this.dataset.length;pointId<l;pointId++)if(this._processed[pointId]!==1){this._processed[pointId]=1,this.clusters.push([pointId]);var clusterId=this.clusters.length-1;this._orderedList.push(pointId);var priorityQueue=new PriorityQueue3(null,null,"asc"),neighbors=this._regionQuery(pointId);this._distanceToCore(pointId)!==void 0&&(this._updateQueue(pointId,neighbors,priorityQueue),this._expandCluster(clusterId,priorityQueue))}return this.clusters};OPTICS.prototype.getReachabilityPlot=function(){for(var reachabilityPlot=[],i=0,l=this._orderedList.length;i<l;i++){var pointId=this._orderedList[i],distance10=this._reachability[pointId];reachabilityPlot.push([pointId,distance10])}return reachabilityPlot};OPTICS.prototype._init=function(dataset,epsilon5,minPts,distance10){if(dataset){if(!(dataset instanceof Array))throw Error("Dataset must be of type array, "+typeof dataset+" given");this.dataset=dataset,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}epsilon5&&(this.epsilon=epsilon5),minPts&&(this.minPts=minPts),distance10&&(this.distance=distance10)};OPTICS.prototype._updateQueue=function(pointId,neighbors,queue){var self2=this;this._coreDistance=this._distanceToCore(pointId),neighbors.forEach(function(pointId2){if(self2._processed[pointId2]===void 0){var dist=self2.distance(self2.dataset[pointId],self2.dataset[pointId2]),newReachableDistance=Math.max(self2._coreDistance,dist);self2._reachability[pointId2]===void 0?(self2._reachability[pointId2]=newReachableDistance,queue.insert(pointId2,newReachableDistance)):newReachableDistance<self2._reachability[pointId2]&&(self2._reachability[pointId2]=newReachableDistance,queue.remove(pointId2),queue.insert(pointId2,newReachableDistance))}})};OPTICS.prototype._expandCluster=function(clusterId,queue){for(var queueElements=queue.getElements(),p=0,l=queueElements.length;p<l;p++){var pointId=queueElements[p];if(this._processed[pointId]===void 0){var neighbors=this._regionQuery(pointId);this._processed[pointId]=1,this.clusters[clusterId].push(pointId),this._orderedList.push(pointId),this._distanceToCore(pointId)!==void 0&&(this._updateQueue(pointId,neighbors,queue),this._expandCluster(clusterId,queue))}}};OPTICS.prototype._distanceToCore=function(pointId){for(var l=this.epsilon,coreDistCand=0;coreDistCand<l;coreDistCand++){var neighbors=this._regionQuery(pointId,coreDistCand);if(neighbors.length>=this.minPts)return coreDistCand}};OPTICS.prototype._regionQuery=function(pointId,epsilon5){epsilon5=epsilon5||this.epsilon;for(var neighbors=[],id=0,l=this.dataset.length;id<l;id++)this.distance(this.dataset[pointId],this.dataset[id])<epsilon5&&neighbors.push(id);return neighbors};OPTICS.prototype._euclideanDistance=function(p,q){for(var sum2=0,i=Math.min(p.length,q.length);i--;)sum2+=(p[i]-q[i])*(p[i]-q[i]);return Math.sqrt(sum2)};typeof module<"u"&&module.exports&&(module.exports=OPTICS)}});var require_lib=__commonJS({"../../../node_modules/density-clustering/lib/index.js"(exports,module){typeof module<"u"&&module.exports&&(module.exports={DBSCAN:require_DBSCAN(),KMEANS:require_KMEANS(),OPTICS:require_OPTICS(),PriorityQueue:require_PriorityQueue()})}});var require_distance=__commonJS({"../../../node_modules/skmeans/dist/node/distance.js"(exports,module){"use strict";module.exports={eudist:function(v1,v2,sqrt4){for(var len=v1.length,sum2=0,i=0;i<len;i++){var d=(v1[i]||0)-(v2[i]||0);sum2+=d*d}return sqrt4?Math.sqrt(sum2):sum2},mandist:function(v1,v2,sqrt4){for(var len=v1.length,sum2=0,i=0;i<len;i++)sum2+=Math.abs((v1[i]||0)-(v2[i]||0));return sqrt4?Math.sqrt(sum2):sum2},dist:function(v1,v2,sqrt4){var d=Math.abs(v1-v2);return sqrt4?d:d*d}}}});var require_kinit=__commonJS({"../../../node_modules/skmeans/dist/node/kinit.js"(exports,module){"use strict";var Distance=require_distance(),eudist=Distance.eudist,dist=Distance.dist;module.exports={kmrand:function(data,k){for(var map5={},ks=[],t=k<<2,len=data.length,multi=data[0].length>0;ks.length<k&&t-- >0;){var d=data[Math.floor(Math.random()*len)],key=multi?d.join("_"):""+d;map5[key]||(map5[key]=!0,ks.push(d))}if(ks.length<k)throw new Error("Error initializating clusters");return ks},kmpp:function(data,k){var distance10=data[0].length?eudist:dist,ks=[],len=data.length,multi=data[0].length>0,map5={},c=data[Math.floor(Math.random()*len)],key=multi?c.join("_"):""+c;for(ks.push(c),map5[key]=!0;ks.length<k;){for(var dists=[],lk=ks.length,dsum=0,prs=[],i=0;i<len;i++){for(var min4=1/0,j=0;j<lk;j++){var _dist=distance10(data[i],ks[j]);_dist<=min4&&(min4=_dist)}dists[i]=min4}for(var _i=0;_i<len;_i++)dsum+=dists[_i];for(var _i2=0;_i2<len;_i2++)prs[_i2]={i:_i2,v:data[_i2],pr:dists[_i2]/dsum,cs:0};prs.sort(function(a,b){return a.pr-b.pr}),prs[0].cs=prs[0].pr;for(var _i3=1;_i3<len;_i3++)prs[_i3].cs=prs[_i3-1].cs+prs[_i3].pr;for(var rnd=Math.random(),idx=0;idx<len-1&&prs[idx++].cs<rnd;);ks.push(prs[idx-1].v)}return ks}}}});var require_main=__commonJS({"../../../node_modules/skmeans/dist/node/main.js"(exports,module){"use strict";var Distance=require_distance(),ClusterInit=require_kinit(),eudist=Distance.eudist,mandist=Distance.mandist,dist=Distance.dist,kmrand=ClusterInit.kmrand,kmpp=ClusterInit.kmpp,MAX=1e4;function init8(len,val,v){v=v||[];for(var i=0;i<len;i++)v[i]=val;return v}function skmeans2(data,k,initial,maxit){var ks=[],old=[],idxs=[],dist2=[],conv=!1,it=maxit||MAX,len=data.length,vlen=data[0].length,multi=vlen>0,count2=[];if(initial)initial=="kmrand"?ks=kmrand(data,k):initial=="kmpp"?ks=kmpp(data,k):ks=initial;else for(var _idxs={};ks.length<k;){var idx=Math.floor(Math.random()*len);_idxs[idx]||(_idxs[idx]=!0,ks.push(data[idx]))}do{init8(k,0,count2);for(var i=0;i<len;i++){for(var min4=1/0,_idx=0,j=0;j<k;j++){var dist2=multi?eudist(data[i],ks[j]):Math.abs(data[i]-ks[j]);dist2<=min4&&(min4=dist2,_idx=j)}idxs[i]=_idx,count2[_idx]++}for(var sum2=[],old=[],dif=0,_j=0;_j<k;_j++)sum2[_j]=multi?init8(vlen,0,sum2[_j]):0,old[_j]=ks[_j];if(multi){for(var _j2=0;_j2<k;_j2++)ks[_j2]=[];for(var _i=0;_i<len;_i++)for(var _idx2=idxs[_i],vsum=sum2[_idx2],vect=data[_i],h=0;h<vlen;h++)vsum[h]+=vect[h];conv=!0;for(var _j3=0;_j3<k;_j3++){for(var ksj=ks[_j3],sumj=sum2[_j3],oldj=old[_j3],cj=count2[_j3],_h=0;_h<vlen;_h++)ksj[_h]=sumj[_h]/cj||0;if(conv){for(var _h2=0;_h2<vlen;_h2++)if(oldj[_h2]!=ksj[_h2]){conv=!1;break}}}}else{for(var _i2=0;_i2<len;_i2++){var _idx3=idxs[_i2];sum2[_idx3]+=data[_i2]}for(var _j4=0;_j4<k;_j4++)ks[_j4]=sum2[_j4]/count2[_j4]||0;conv=!0;for(var _j5=0;_j5<k;_j5++)if(old[_j5]!=ks[_j5]){conv=!1;break}}conv=conv||--it<=0}while(!conv);return{it:MAX-it,k,idxs,centroids:ks}}module.exports=skmeans2}});var import_leaflet=__toESM(require_leaflet_src());(function(t,e,i){function o(t2,e3){for(;(t2=t2.parentElement)&&!t2.classList.contains(e3););return t2}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(t2,e3){this._map=t2,this._container=t2._container,this._overlayPane=t2._panes.overlayPane,this._popupPane=t2._panes.popupPane,e3&&e3.shapeOptions&&(e3.shapeOptions=L.Util.extend({},this.options.shapeOptions,e3.shapeOptions)),L.setOptions(this,e3);var i2=L.version.split(".");parseInt(i2[0],10)===1&&parseInt(i2[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t2=this._map;t2&&(L.DomUtil.disableTextSelection(),t2.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(t2){L.setOptions(this,t2)},_fireCreatedEvent:function(t2){this._map.fire(L.Draw.Event.CREATED,{layer:t2,layerType:this.type})},_cancelDrawing:function(t2){t2.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(t2,e3){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e3&&e3.drawError&&(e3.drawError=L.Util.extend({},this.options.drawError,e3.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t2,e3)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var t2=this._markers.pop(),e3=this._poly,i2=e3.getLatLngs(),o2=i2.splice(-1,1)[0];this._poly.setLatLngs(i2),this._markerGroup.removeLayer(t2),e3.getLatLngs().length<2&&this._map.removeLayer(e3),this._vertexChanged(o2,!1)}},addVertex:function(t2){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(t2))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(t2)),this._poly.addLatLng(t2),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(t2,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var t2=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),e3=this._poly.newLatLngIntersects(t2[t2.length-1]);if(!this.options.allowIntersection&&e3||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(t2){var e3=this._map.mouseEventToLayerPoint(t2.originalEvent),i2=this._map.layerPointToLatLng(e3);this._currentLatLng=i2,this._updateTooltip(i2),this._updateGuide(e3),this._mouseMarker.setLatLng(i2),L.DomEvent.preventDefault(t2.originalEvent)},_vertexChanged:function(t2,e3){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(t2,e3),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(t2){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(t2),this._clickHandled=!0,this._disableNewMarkers();var e3=t2.originalEvent,i2=e3.clientX,o2=e3.clientY;this._startPoint.call(this,i2,o2)}},_startPoint:function(t2,e3){this._mouseDownOrigin=L.point(t2,e3)},_onMouseUp:function(t2){var e3=t2.originalEvent,i2=e3.clientX,o2=e3.clientY;this._endPoint.call(this,i2,o2,t2),this._clickHandled=null},_endPoint:function(e3,i2,o2){if(this._mouseDownOrigin){var a=L.point(e3,i2).distanceTo(this._mouseDownOrigin),n=this._calculateFinishDistance(o2.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(o2.latlng),this._finishShape()):n<10&&L.Browser.touch?this._finishShape():Math.abs(a)<9*(t.devicePixelRatio||1)&&this.addVertex(o2.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t2){var e3,i2,o2=t2.originalEvent;!o2.touches||!o2.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(e3=o2.touches[0].clientX,i2=o2.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,e3,i2),this._endPoint.call(this,e3,i2,t2),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(t2){var e3;if(this._markers.length>0){var i2;if(this.type===L.Draw.Polyline.TYPE)i2=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;i2=this._markers[0]}var o2=this._map.latLngToContainerPoint(i2.getLatLng()),a=new L.Marker(t2,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),n=this._map.latLngToContainerPoint(a.getLatLng());e3=o2.distanceTo(n)}else e3=1/0;return e3},_updateFinishHandler:function(){var t2=this._markers.length;t2>1&&this._markers[t2-1].on("click",this._finishShape,this),t2>2&&this._markers[t2-2].off("click",this._finishShape,this)},_createMarker:function(t2){var e3=new L.Marker(t2,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e3),e3},_updateGuide:function(t2){var e3=this._markers?this._markers.length:0;e3>0&&(t2=t2||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e3-1].getLatLng()),t2))},_updateTooltip:function(t2){var e3=this._getTooltipText();t2&&this._tooltip.updatePosition(t2),this._errorShown||this._tooltip.updateContent(e3)},_drawGuide:function(t2,e3){var i2,o2,a,n=Math.floor(Math.sqrt(Math.pow(e3.x-t2.x,2)+Math.pow(e3.y-t2.y,2))),s=this.options.guidelineDistance,r=this.options.maxGuideLineLength,l=n>r?n-r:s;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));l<n;l+=this.options.guidelineDistance)i2=l/n,o2={x:Math.floor(t2.x*(1-i2)+i2*e3.x),y:Math.floor(t2.y*(1-i2)+i2*e3.y)},a=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),a.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(a,o2)},_updateGuideColor:function(t2){if(this._guidesContainer)for(var e3=0,i2=this._guidesContainer.childNodes.length;e3<i2;e3++)this._guidesContainer.childNodes[e3].style.backgroundColor=t2},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t2,e3,i2=this.options.showLength;return this._markers.length===0?t2={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e3=i2?this._getMeasurementString():"",t2=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e3}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e3}),t2},_updateRunningMeasure:function(t2,e3){var i2,o2,a=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(i2=a-(e3?2:1),o2=L.GeometryUtil.isVersion07x()?t2.distanceTo(this._markers[i2].getLatLng())*(this.options.factor||1):this._map.distance(t2,this._markers[i2].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=o2*(e3?1:-1))},_getMeasurementString:function(){var t2,e3=this._currentLatLng,i2=this._markers[this._markers.length-1].getLatLng();return t2=L.GeometryUtil.isVersion07x()?i2&&e3&&e3.distanceTo?this._measurementRunningTotal+e3.distanceTo(i2)*(this.options.factor||1):this._measurementRunningTotal||0:i2&&e3?this._measurementRunningTotal+this._map.distance(e3,i2)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(t2,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t2=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t2)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(t2,e3){L.Draw.Polyline.prototype.initialize.call(this,t2,e3),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t2=this._markers.length;t2===1&&this._markers[0].on("click",this._finishShape,this),t2>2&&(this._markers[t2-1].on("dblclick",this._finishShape,this),t2>3&&this._markers[t2-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t2,e3;return this._markers.length===0?t2=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(t2=L.drawLocal.draw.handlers.polygon.tooltip.cont,e3=this._getMeasurementString()):(t2=L.drawLocal.draw.handlers.polygon.tooltip.end,e3=this._getMeasurementString()),{text:t2,subtext:e3}},_getMeasurementString:function(){var t2=this._area,e3="";return t2||this.options.showLength?(this.options.showLength&&(e3=L.Draw.Polyline.prototype._getMeasurementString.call(this)),t2&&(e3+="<br>"+L.GeometryUtil.readableArea(t2,this.options.metric,this.options.precision)),e3):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(t2,e3){var i2;!this.options.allowIntersection&&this.options.showArea&&(i2=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i2)),L.Draw.Polyline.prototype._vertexChanged.call(this,t2,e3)},_cleanUpShape:function(){var t2=this._markers.length;t2>0&&(this._markers[0].off("click",this._finishShape,this),t2>2&&this._markers[t2-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t2,e3){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t2,e3)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(t2){this._isDrawing=!0,this._startLatLng=t2.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(t2.originalEvent)},_onMouseMove:function(t2){var e3=t2.latlng;this._tooltip.updatePosition(e3),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(e3))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(t2,e3){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t2,e3)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(t2){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!o(t2.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(t2){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t2)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t2),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t2=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t2)},_getTooltipText:function(){var t2,e3,i2,o2=L.Draw.SimpleShape.prototype._getTooltipText.call(this),a=this._shape,n=this.options.showArea;return a&&(t2=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e3=L.GeometryUtil.geodesicArea(t2),i2=n?L.GeometryUtil.readableArea(e3,this.options.metric):""),{text:o2.text,subtext:i2}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t2,e3){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t2,e3)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t2){var e3=t2.latlng;this._tooltip.updatePosition(e3),this._mouseMarker.setLatLng(e3),this._marker?(e3=this._mouseMarker.getLatLng(),this._marker.setLatLng(e3)):(this._marker=this._createMarker(e3),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(t2){return new L.Marker(t2,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(t2){this._onMouseMove(t2),this._onClick()},_fireCreatedEvent:function(){var t2=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t2)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(t2,e3){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,t2,e3)},_fireCreatedEvent:function(){var t2=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t2)},_createMarker:function(t2){return new L.CircleMarker(t2,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(t2,e3){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t2,e3)},_drawShape:function(t2){if(L.GeometryUtil.isVersion07x())var e3=this._startLatLng.distanceTo(t2);else var e3=this._map.distance(this._startLatLng,t2);this._shape?this._shape.setRadius(e3):(this._shape=new L.Circle(this._startLatLng,e3,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t2=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t2)},_onMouseMove:function(t2){var e3,i2=t2.latlng,o2=this.options.showRadius,a=this.options.metric;if(this._tooltip.updatePosition(i2),this._isDrawing){this._drawShape(i2),e3=this._shape.getRadius().toFixed(1);var n="";o2&&(n=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(e3,a,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:n})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(t2,e3){this._marker=t2,L.setOptions(this,e3)},addHooks:function(){var t2=this._marker;t2.dragging.enable(),t2.on("dragend",this._onDragEnd,t2),this._toggleMarkerHighlight()},removeHooks:function(){var t2=this._marker;t2.dragging.disable(),t2.off("dragend",this._onDragEnd,t2),this._toggleMarkerHighlight()},_onDragEnd:function(t2){var e3=t2.target;e3.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e3})},_toggleMarkerHighlight:function(){var t2=this._marker._icon;t2&&(t2.style.display="none",L.DomUtil.hasClass(t2,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(t2,"leaflet-edit-marker-selected"),this._offsetMarker(t2,-4)):(L.DomUtil.addClass(t2,"leaflet-edit-marker-selected"),this._offsetMarker(t2,4)),t2.style.display="")},_offsetMarker:function(t2,e3){var i2=parseInt(t2.style.marginTop,10)-e3,o2=parseInt(t2.style.marginLeft,10)-e3;t2.style.marginTop=i2+"px",t2.style.marginLeft=o2+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(t2){this.latlngs=[t2._latlngs],t2._holes&&(this.latlngs=this.latlngs.concat(t2._holes)),this._poly=t2,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(t2){for(var e3=0;e3<this._verticesHandlers.length;e3++)t2(this._verticesHandlers[e3])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(t2){t2.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(t2){t2.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(t2){t2.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var t2=0;t2<this.latlngs.length;t2++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[t2],this._poly.options.poly))},_updateLatLngs:function(t2){this.latlngs=[t2.layer._latlngs],t2.layer._holes&&(this.latlngs=this.latlngs.concat(t2.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(t2,e3,i2){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=t2,i2&&i2.drawError&&(i2.drawError=L.Util.extend({},this.options.drawError,i2.drawError)),this._latlngs=e3,L.setOptions(this,i2)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var t2=this._poly,e3=t2._path;t2 instanceof L.Polygon||(t2.options.fill=!1,t2.options.editing&&(t2.options.editing.fill=!1)),e3&&t2.options.editing&&t2.options.editing.className&&(t2.options.original.className&&t2.options.original.className.split(" ").forEach(function(t3){L.DomUtil.removeClass(e3,t3)}),t2.options.editing.className.split(" ").forEach(function(t3){L.DomUtil.addClass(e3,t3)})),t2.setStyle(t2.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var t2=this._poly,e3=t2._path;e3&&t2.options.editing&&t2.options.editing.className&&(t2.options.editing.className.split(" ").forEach(function(t3){L.DomUtil.removeClass(e3,t3)}),t2.options.original.className&&t2.options.original.className.split(" ").forEach(function(t3){L.DomUtil.addClass(e3,t3)})),t2.setStyle(t2.options.original),t2._map&&(t2._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t2,e3,i2,o2,a=this._defaultShape();for(t2=0,i2=a.length;t2<i2;t2++)o2=this._createMarker(a[t2],t2),o2.on("click",this._onMarkerClick,this),o2.on("contextmenu",this._onContextMenu,this),this._markers.push(o2);var n,s;for(t2=0,e3=i2-1;t2<i2;e3=t2++)(t2!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(n=this._markers[e3],s=this._markers[t2],this._createMiddleMarker(n,s),this._updatePrevNext(n,s))},_createMarker:function(t2,e3){var i2=new L.Marker.Touch(t2,{draggable:!0,icon:this.options.icon});return i2._origLatLng=t2,i2._index=e3,i2.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(i2),i2},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var t2=this._defaultShape(),e3=[].splice.apply(t2,arguments);return this._poly._convertLatLngs(t2,!0),this._poly.redraw(),e3},_removeMarker:function(t2){var e3=t2._index;this._markerGroup.removeLayer(t2),this._markers.splice(e3,1),this._spliceLatLngs(e3,1),this._updateIndexes(e3,-1),t2.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(t2){var e3=t2.target,i2=this._poly,o2=L.LatLngUtil.cloneLatLng(e3._origLatLng);if(L.extend(e3._origLatLng,e3._latlng),i2.options.poly){var a=i2._map._editTooltip;if(!i2.options.poly.allowIntersection&&i2.intersects()){L.extend(e3._origLatLng,o2),e3.setLatLng(o2);var n=i2.options.color;i2.setStyle({color:this.options.drawError.color}),a&&a.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){i2.setStyle({color:n}),a&&a.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}e3._middleLeft&&e3._middleLeft.setLatLng(this._getMiddleLatLng(e3._prev,e3)),e3._middleRight&&e3._middleRight.setLatLng(this._getMiddleLatLng(e3,e3._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var s=this._poly.getLatLngs();this._poly._convertLatLngs(s,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(t2){var e3=L.Polygon&&this._poly instanceof L.Polygon?4:3,i2=t2.target;this._defaultShape().length<e3||(this._removeMarker(i2),this._updatePrevNext(i2._prev,i2._next),i2._middleLeft&&this._markerGroup.removeLayer(i2._middleLeft),i2._middleRight&&this._markerGroup.removeLayer(i2._middleRight),i2._prev&&i2._next?this._createMiddleMarker(i2._prev,i2._next):i2._prev?i2._next||(i2._prev._middleRight=null):i2._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(t2){var e3=t2.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:e3,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(t2){var e3=this._map.mouseEventToLayerPoint(t2.originalEvent.touches[0]),i2=this._map.layerPointToLatLng(e3),o2=t2.target;L.extend(o2._origLatLng,i2),o2._middleLeft&&o2._middleLeft.setLatLng(this._getMiddleLatLng(o2._prev,o2)),o2._middleRight&&o2._middleRight.setLatLng(this._getMiddleLatLng(o2,o2._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(t2,e3){this._markerGroup.eachLayer(function(i2){i2._index>t2&&(i2._index+=e3)})},_createMiddleMarker:function(t2,e3){var i2,o2,a,n=this._getMiddleLatLng(t2,e3),s=this._createMarker(n);s.setOpacity(.6),t2._middleRight=e3._middleLeft=s,o2=function(){s.off("touchmove",o2,this);var a2=e3._index;s._index=a2,s.off("click",i2,this).on("click",this._onMarkerClick,this),n.lat=s.getLatLng().lat,n.lng=s.getLatLng().lng,this._spliceLatLngs(a2,0,n),this._markers.splice(a2,0,s),s.setOpacity(1),this._updateIndexes(a2,1),e3._index++,this._updatePrevNext(t2,s),this._updatePrevNext(s,e3),this._poly.fire("editstart")},a=function(){s.off("dragstart",o2,this),s.off("dragend",a,this),s.off("touchmove",o2,this),this._createMiddleMarker(t2,s),this._createMiddleMarker(s,e3)},i2=function(){o2.call(this),a.call(this),this._fireEdit()},s.on("click",i2,this).on("dragstart",o2,this).on("dragend",a,this).on("touchmove",o2,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t2,e3){t2&&(t2._next=e3),e3&&(e3._prev=t2)},_getMiddleLatLng:function(t2,e3){var i2=this._poly._map,o2=i2.project(t2.getLatLng()),a=i2.project(e3.getLatLng());return i2.unproject(o2._add(a)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(t2,e3){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=t2,L.Util.setOptions(this,e3)},addHooks:function(){var t2=this._shape;this._shape._map&&(this._map=this._shape._map,t2.setStyle(t2.options.editing),t2._map&&(this._map=t2._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t2=this._shape;if(t2.setStyle(t2.options.original),t2._map){this._unbindMarker(this._moveMarker);for(var e3=0,i2=this._resizeMarkers.length;e3<i2;e3++)this._unbindMarker(this._resizeMarkers[e3]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t2,e3){var i2=new L.Marker.Touch(t2,{draggable:!0,icon:e3,zIndexOffset:10});return this._bindMarker(i2),this._markerGroup.addLayer(i2),i2},_bindMarker:function(t2){t2.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(t2){t2.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(t2){t2.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t2){var e3=t2.target,i2=e3.getLatLng();e3===this._moveMarker?this._move(i2):this._resize(i2),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(t2){t2.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(t2){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t2),typeof this._getCorners=="function"){var e3=this._getCorners(),i2=t2.target,o2=i2._cornerIndex;i2.setOpacity(0),this._oppositeCorner=e3[(o2+2)%4],this._toggleCornerMarkers(0,o2)}this._shape.fire("editstart")},_onTouchMove:function(t2){var e3=this._map.mouseEventToLayerPoint(t2.originalEvent.touches[0]),i2=this._map.layerPointToLatLng(e3);return t2.target===this._moveMarker?this._move(i2):this._resize(i2),this._shape.redraw(),!1},_onTouchEnd:function(t2){t2.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t2=this._shape.getBounds(),e3=t2.getCenter();this._moveMarker=this._createMarker(e3,this.options.moveIcon)},_createResizeMarker:function(){var t2=this._getCorners();this._resizeMarkers=[];for(var e3=0,i2=t2.length;e3<i2;e3++)this._resizeMarkers.push(this._createMarker(t2[e3],this.options.resizeIcon)),this._resizeMarkers[e3]._cornerIndex=e3},_onMarkerDragStart:function(t2){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t2);var e3=this._getCorners(),i2=t2.target,o2=i2._cornerIndex;this._oppositeCorner=e3[(o2+2)%4],this._toggleCornerMarkers(0,o2)},_onMarkerDragEnd:function(t2){var e3,i2,o2=t2.target;o2===this._moveMarker&&(e3=this._shape.getBounds(),i2=e3.getCenter(),o2.setLatLng(i2)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t2)},_move:function(t2){for(var e3,i2=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),o2=this._shape.getBounds(),a=o2.getCenter(),n=[],s=0,r=i2.length;s<r;s++)e3=[i2[s].lat-a.lat,i2[s].lng-a.lng],n.push([t2.lat+e3[0],t2.lng+e3[1]]);this._shape.setLatLngs(n),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(t2){var e3;this._shape.setBounds(L.latLngBounds(t2,this._oppositeCorner)),e3=this._shape.getBounds(),this._moveMarker.setLatLng(e3.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var t2=this._shape.getBounds();return[t2.getNorthWest(),t2.getNorthEast(),t2.getSouthEast(),t2.getSouthWest()]},_toggleCornerMarkers:function(t2){for(var e3=0,i2=this._resizeMarkers.length;e3<i2;e3++)this._resizeMarkers[e3].setOpacity(t2)},_repositionCornerMarkers:function(){for(var t2=this._getCorners(),e3=0,i2=this._resizeMarkers.length;e3<i2;e3++)this._resizeMarkers[e3].setLatLng(t2[e3])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t2=this._shape.getLatLng();this._moveMarker=this._createMarker(t2,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t2){if(this._resizeMarkers.length){var e3=this._getResizeMarkerPoint(t2);this._resizeMarkers[0].setLatLng(e3)}this._shape.setLatLng(t2),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var t2=this._shape.getLatLng(),e3=this._getResizeMarkerPoint(t2);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e3,this.options.resizeIcon))},_getResizeMarkerPoint:function(t2){var e3=this._shape._radius*Math.cos(Math.PI/4),i2=this._map.project(t2);return this._map.unproject([i2.x+e3,i2.y-e3])},_resize:function(t2){var e3=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=e3.distanceTo(t2):radius=this._map.distance(e3,t2),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t2){this._map=t2,this._container=t2._container,this._pane=t2._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(t2,e3){var i2={};if(t2.touches!==void 0){if(!t2.touches.length)return;i2=t2.touches[0]}else if(t2.pointerType!=="touch"||(i2=t2,!this._filterClick(t2)))return;var o2=this._map.mouseEventToContainerPoint(i2),a=this._map.mouseEventToLayerPoint(i2),n=this._map.layerPointToLatLng(a);this._map.fire(e3,{latlng:n,layerPoint:a,containerPoint:o2,pageX:i2.pageX,pageY:i2.pageY,originalEvent:t2})},_filterClick:function(t2){var e3=t2.timeStamp||t2.originalEvent.timeStamp,i2=L.DomEvent._lastClick&&e3-L.DomEvent._lastClick;return i2&&i2>100&&i2<500||t2.target._simulatedClick&&!t2._simulated?(L.DomEvent.stop(t2),!1):(L.DomEvent._lastClick=e3,!0)},_onTouchStart:function(t2){this._map._loaded&&this._touchEvent(t2,"touchstart")},_onTouchEnd:function(t2){this._map._loaded&&this._touchEvent(t2,"touchend")},_onTouchCancel:function(t2){if(this._map._loaded){var e3="touchcancel";this._detectIE()&&(e3="pointercancel"),this._touchEvent(t2,e3)}},_onTouchLeave:function(t2){this._map._loaded&&this._touchEvent(t2,"touchleave")},_onTouchMove:function(t2){this._map._loaded&&this._touchEvent(t2,"touchmove")},_detectIE:function(){var e3=t.navigator.userAgent,i2=e3.indexOf("MSIE ");if(i2>0)return parseInt(e3.substring(i2+5,e3.indexOf(".",i2)),10);if(e3.indexOf("Trident/")>0){var o2=e3.indexOf("rv:");return parseInt(e3.substring(o2+3,e3.indexOf(".",o2)),10)}var a=e3.indexOf("Edge/");return a>0&&parseInt(e3.substring(a+5,e3.indexOf(".",a)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var t2=this._icon,e3=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?e3.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):e3.concat(["touchcancel"]),L.DomUtil.addClass(t2,"leaflet-clickable"),L.DomEvent.on(t2,"click",this._onMouseClick,this),L.DomEvent.on(t2,"keypress",this._onKeyPress,this);for(var i2=0;i2<e3.length;i2++)L.DomEvent.on(t2,e3[i2],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var e3=t.navigator.userAgent,i2=e3.indexOf("MSIE ");if(i2>0)return parseInt(e3.substring(i2+5,e3.indexOf(".",i2)),10);if(e3.indexOf("Trident/")>0){var o2=e3.indexOf("rv:");return parseInt(e3.substring(o2+3,e3.indexOf(".",o2)),10)}var a=e3.indexOf("Edge/");return a>0&&parseInt(e3.substring(a+5,e3.indexOf(".",a)),10)}}),L.LatLngUtil={cloneLatLngs:function(t2){for(var e3=[],i2=0,o2=t2.length;i2<o2;i2++)Array.isArray(t2[i2])?e3.push(L.LatLngUtil.cloneLatLngs(t2[i2])):e3.push(this.cloneLatLng(t2[i2]));return e3},cloneLatLng:function(t2){return L.latLng(t2.lat,t2.lng)}},function(){var t2={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t3){var e3,i2,o2=t3.length,a=0,n=Math.PI/180;if(o2>2){for(var s=0;s<o2;s++)e3=t3[s],i2=t3[(s+1)%o2],a+=(i2.lng-e3.lng)*n*(2+Math.sin(e3.lat*n)+Math.sin(i2.lat*n));a=6378137*a*6378137/2}return Math.abs(a)},formattedNumber:function(t3,e3){var i2=parseFloat(t3).toFixed(e3),o2=L.drawLocal.format&&L.drawLocal.format.numeric,a=o2&&o2.delimiters,n=a&&a.thousands,s=a&&a.decimal;if(n||s){var r=i2.split(".");i2=n?r[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+n):r[0],s=s||".",r.length>1&&(i2=i2+s+r[1])}return i2},readableArea:function(e3,i2,o2){var a,n,o2=L.Util.extend({},t2,o2);return i2?(n=["ha","m"],type=typeof i2,type==="string"?n=[i2]:type!=="boolean"&&(n=i2),a=e3>=1e6&&n.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*e3,o2.km)+" km\xB2":e3>=1e4&&n.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*e3,o2.ha)+" ha":L.GeometryUtil.formattedNumber(e3,o2.m)+" m\xB2"):(e3/=.836127,a=e3>=3097600?L.GeometryUtil.formattedNumber(e3/3097600,o2.mi)+" mi\xB2":e3>=4840?L.GeometryUtil.formattedNumber(e3/4840,o2.ac)+" acres":L.GeometryUtil.formattedNumber(e3,o2.yd)+" yd\xB2"),a},readableDistance:function(e3,i2,o2,a,n){var s,n=L.Util.extend({},t2,n);switch(i2?typeof i2=="string"?i2:"metric":o2?"feet":a?"nauticalMile":"yards"){case"metric":s=e3>1e3?L.GeometryUtil.formattedNumber(e3/1e3,n.km)+" km":L.GeometryUtil.formattedNumber(e3,n.m)+" m";break;case"feet":e3*=3.28083,s=L.GeometryUtil.formattedNumber(e3,n.ft)+" ft";break;case"nauticalMile":e3*=.53996,s=L.GeometryUtil.formattedNumber(e3/1e3,n.nm)+" nm";break;case"yards":default:e3*=1.09361,s=e3>1760?L.GeometryUtil.formattedNumber(e3/1760,n.mi)+" miles":L.GeometryUtil.formattedNumber(e3,n.yd)+" yd"}return s},isVersion07x:function(){var t3=L.version.split(".");return parseInt(t3[0],10)===0&&parseInt(t3[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t2,e3,i2,o2){return this._checkCounterclockwise(t2,i2,o2)!==this._checkCounterclockwise(e3,i2,o2)&&this._checkCounterclockwise(t2,e3,i2)!==this._checkCounterclockwise(t2,e3,o2)},_checkCounterclockwise:function(t2,e3,i2){return(i2.y-t2.y)*(e3.x-t2.x)>(e3.y-t2.y)*(i2.x-t2.x)}}),L.Polyline.include({intersects:function(){var t2,e3,i2,o2=this._getProjectedPoints(),a=o2?o2.length:0;if(this._tooFewPointsForIntersection())return!1;for(t2=a-1;t2>=3;t2--)if(e3=o2[t2-1],i2=o2[t2],this._lineSegmentsIntersectsRange(e3,i2,t2-2))return!0;return!1},newLatLngIntersects:function(t2,e3){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t2),e3)},newPointIntersects:function(t2,e3){var i2=this._getProjectedPoints(),o2=i2?i2.length:0,a=i2?i2[o2-1]:null,n=o2-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(a,t2,n,e3?1:0)},_tooFewPointsForIntersection:function(t2){var e3=this._getProjectedPoints(),i2=e3?e3.length:0;return i2+=t2||0,!e3||i2<=3},_lineSegmentsIntersectsRange:function(t2,e3,i2,o2){var a,n,s=this._getProjectedPoints();o2=o2||0;for(var r=i2;r>o2;r--)if(a=s[r-1],n=s[r],L.LineUtil.segmentsIntersect(t2,e3,a,n))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var t2=[],e3=this._defaultShape(),i2=0;i2<e3.length;i2++)t2.push(this._map.latLngToLayerPoint(e3[i2]));return t2}}),L.Polygon.include({intersects:function(){var t2,e3,i2,o2,a=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t2=a.length,e3=a[0],i2=a[t2-1],o2=t2-2,this._lineSegmentsIntersectsRange(i2,e3,o2,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t2){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,t2);var e3;this._toolbars={},L.DrawToolbar&&this.options.draw&&(e3=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=e3,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(e3=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=e3,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(t2){var e3,i2=L.DomUtil.create("div","leaflet-draw"),o2=!1;for(var a in this._toolbars)this._toolbars.hasOwnProperty(a)&&(e3=this._toolbars[a].addToolbar(t2))&&(o2||(L.DomUtil.hasClass(e3,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(e3.childNodes[0],"leaflet-draw-toolbar-top"),o2=!0),i2.appendChild(e3));return i2},onRemove:function(){for(var t2 in this._toolbars)this._toolbars.hasOwnProperty(t2)&&this._toolbars[t2].removeToolbar()},setDrawingOptions:function(t2){for(var e3 in this._toolbars)this._toolbars[e3]instanceof L.DrawToolbar&&this._toolbars[e3].setOptions(t2)},_toolbarEnabled:function(t2){var e3=t2.target;for(var i2 in this._toolbars)this._toolbars[i2]!==e3&&this._toolbars[i2].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(t2){L.setOptions(this,t2),this._modes={},this._actionButtons=[],this._activeMode=null;var e3=L.version.split(".");parseInt(e3[0],10)===1&&parseInt(e3[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(t2){var e3,i2=L.DomUtil.create("div","leaflet-draw-section"),o2=0,a=this._toolbarClass||"",n=this.getModeHandlers(t2);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t2,e3=0;e3<n.length;e3++)n[e3].enabled&&this._initModeHandler(n[e3].handler,this._toolbarContainer,o2++,a,n[e3].title);if(o2)return this._lastButtonIndex=--o2,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),i2.appendChild(this._toolbarContainer),i2.appendChild(this._actionsContainer),i2},removeToolbar:function(){for(var t2 in this._modes)this._modes.hasOwnProperty(t2)&&(this._disposeButton(this._modes[t2].button,this._modes[t2].handler.enable,this._modes[t2].handler),this._modes[t2].handler.disable(),this._modes[t2].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e3=0,i2=this._actionButtons.length;e3<i2;e3++)this._disposeButton(this._actionButtons[e3].button,this._actionButtons[e3].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t2,e3,i2,o2,a){var n=t2.type;this._modes[n]={},this._modes[n].handler=t2,this._modes[n].button=this._createButton({type:n,title:a,className:o2+"-"+n,container:e3,callback:this._modes[n].handler.enable,context:this._modes[n].handler}),this._modes[n].buttonIndex=i2,this._modes[n].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(t2){var e3=L.DomUtil.create("a",t2.className||"",t2.container),i2=L.DomUtil.create("span","sr-only",t2.container);e3.href="#",e3.appendChild(i2),t2.title&&(e3.title=t2.title,i2.innerHTML=t2.title),t2.text&&(e3.innerHTML=t2.text,i2.innerHTML=t2.text);var o2=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(e3,"click",L.DomEvent.stopPropagation).on(e3,"mousedown",L.DomEvent.stopPropagation).on(e3,"dblclick",L.DomEvent.stopPropagation).on(e3,"touchstart",L.DomEvent.stopPropagation).on(e3,"click",L.DomEvent.preventDefault).on(e3,o2,t2.callback,t2.context),e3},_disposeButton:function(t2,e3){var i2=this._detectIOS()?"touchstart":"click";L.DomEvent.off(t2,"click",L.DomEvent.stopPropagation).off(t2,"mousedown",L.DomEvent.stopPropagation).off(t2,"dblclick",L.DomEvent.stopPropagation).off(t2,"touchstart",L.DomEvent.stopPropagation).off(t2,"click",L.DomEvent.preventDefault).off(t2,i2,e3)},_handlerActivated:function(t2){this.disable(),this._activeMode=this._modes[t2.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t2){var e3,i2,o2,a,n=this._actionsContainer,s=this.getActions(t2),r=s.length;for(i2=0,o2=this._actionButtons.length;i2<o2;i2++)this._disposeButton(this._actionButtons[i2].button,this._actionButtons[i2].callback);for(this._actionButtons=[];n.firstChild;)n.removeChild(n.firstChild);for(var l=0;l<r;l++)"enabled"in s[l]&&!s[l].enabled||(e3=L.DomUtil.create("li","",n),a=this._createButton({title:s[l].title,text:s[l].text,container:e3,callback:s[l].callback,context:s[l].context}),this._actionButtons.push({button:a,callback:s[l].callback}))},_showActionsToolbar:function(){var t2=this._activeMode.buttonIndex,e3=this._lastButtonIndex,i2=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=i2+"px",t2===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t2===e3&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t2){this._map=t2,this._popupPane=t2._panes.popupPane,this._visible=!1,this._container=t2.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t2){return this._container?(t2.subtext=t2.subtext||"",t2.subtext.length!==0||this._singleLineLabel?t2.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t2.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t2.subtext+"</span><br />":"")+"<span>"+t2.text+"</span>",t2.text||t2.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t2){var e3=this._map.latLngToLayerPoint(t2),i2=this._container;return this._container&&(this._visible&&(i2.style.visibility="inherit"),L.DomUtil.setPosition(i2,e3)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(t2){for(var e3 in this.options)this.options.hasOwnProperty(e3)&&t2[e3]&&(t2[e3]=L.extend({},this.options[e3],t2[e3]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,t2)},getModeHandlers:function(t2){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(t2,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(t2,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(t2,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(t2,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(t2,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(t2,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(t2){return[{enabled:t2.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:t2.completeShape,context:t2},{enabled:t2.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:t2.deleteLastVertex,context:t2},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(t2){L.setOptions(this,t2);for(var e3 in this._modes)this._modes.hasOwnProperty(e3)&&t2.hasOwnProperty(e3)&&this._modes[e3].handler.setOptions(t2[e3])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(t2){t2.edit&&(t2.edit.selectedPathOptions===void 0&&(t2.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t2.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,t2.edit.selectedPathOptions)),t2.remove&&(t2.remove=L.extend({},this.options.remove,t2.remove)),t2.poly&&(t2.poly=L.extend({},this.options.poly,t2.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,t2),this._selectedFeatureCount=0},getModeHandlers:function(t2){var e3=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(t2,{featureGroup:e3,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(t2,{featureGroup:e3}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(t2){var e3=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return t2.removeAllLayers&&e3.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),e3},addToolbar:function(t2){var e3=L.Toolbar.prototype.addToolbar.call(this,t2);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),e3},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var t2,e3=this.options.featureGroup,i2=e3.getLayers().length!==0;this.options.edit&&(t2=this._modes[L.EditToolbar.Edit.TYPE].button,i2?L.DomUtil.removeClass(t2,"leaflet-disabled"):L.DomUtil.addClass(t2,"leaflet-disabled"),t2.setAttribute("title",i2?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t2=this._modes[L.EditToolbar.Delete.TYPE].button,i2?L.DomUtil.removeClass(t2,"leaflet-disabled"):L.DomUtil.addClass(t2,"leaflet-disabled"),t2.setAttribute("title",i2?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(t2,e3){if(L.Handler.prototype.initialize.call(this,t2),L.setOptions(this,e3),this._featureGroup=e3.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var i2=L.version.split(".");parseInt(i2[0],10)===1&&parseInt(i2[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t2=this._map;t2&&(t2.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),t2._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t2){this._revertLayer(t2)},this)},save:function(){var t2=new L.LayerGroup;this._featureGroup.eachLayer(function(e3){e3.edited&&(t2.addLayer(e3),e3.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:t2})},_backupLayer:function(t2){var e3=L.Util.stamp(t2);this._uneditedLayerProps[e3]||(t2 instanceof L.Polyline||t2 instanceof L.Polygon||t2 instanceof L.Rectangle?this._uneditedLayerProps[e3]={latlngs:L.LatLngUtil.cloneLatLngs(t2.getLatLngs())}:t2 instanceof L.Circle?this._uneditedLayerProps[e3]={latlng:L.LatLngUtil.cloneLatLng(t2.getLatLng()),radius:t2.getRadius()}:(t2 instanceof L.Marker||t2 instanceof L.CircleMarker)&&(this._uneditedLayerProps[e3]={latlng:L.LatLngUtil.cloneLatLng(t2.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(t2){var e3=L.Util.stamp(t2);t2.edited=!1,this._uneditedLayerProps.hasOwnProperty(e3)&&(t2 instanceof L.Polyline||t2 instanceof L.Polygon||t2 instanceof L.Rectangle?t2.setLatLngs(this._uneditedLayerProps[e3].latlngs):t2 instanceof L.Circle?(t2.setLatLng(this._uneditedLayerProps[e3].latlng),t2.setRadius(this._uneditedLayerProps[e3].radius)):(t2 instanceof L.Marker||t2 instanceof L.CircleMarker)&&t2.setLatLng(this._uneditedLayerProps[e3].latlng),t2.fire("revert-edited",{layer:t2}))},_enableLayerEdit:function(t2){var e3,i2,o2=t2.layer||t2.target||t2;this._backupLayer(o2),this.options.poly&&(i2=L.Util.extend({},this.options.poly),o2.options.poly=i2),this.options.selectedPathOptions&&(e3=L.Util.extend({},this.options.selectedPathOptions),e3.maintainColor&&(e3.color=o2.options.color,e3.fillColor=o2.options.fillColor),o2.options.original=L.extend({},o2.options),o2.options.editing=e3),o2 instanceof L.Marker?(o2.editing&&o2.editing.enable(),o2.dragging.enable(),o2.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):o2.editing.enable()},_disableLayerEdit:function(t2){var e3=t2.layer||t2.target||t2;e3.edited=!1,e3.editing&&e3.editing.disable(),delete e3.options.editing,delete e3.options.original,this._selectedPathOptions&&(e3 instanceof L.Marker?this._toggleMarkerHighlight(e3):(e3.setStyle(e3.options.previousOptions),delete e3.options.previousOptions)),e3 instanceof L.Marker?(e3.dragging.disable(),e3.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):e3.editing.disable()},_onMouseMove:function(t2){this._tooltip.updatePosition(t2.latlng)},_onMarkerDragEnd:function(t2){var e3=t2.target;e3.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:e3})},_onTouchMove:function(t2){var e3=t2.originalEvent.changedTouches[0],i2=this._map.mouseEventToLayerPoint(e3),o2=this._map.layerPointToLatLng(i2);t2.target.setLatLng(o2)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(t2,e3){if(L.Handler.prototype.initialize.call(this,t2),L.Util.setOptions(this,e3),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var i2=L.version.split(".");parseInt(i2[0],10)===1&&parseInt(i2[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t2=this._map;t2&&(t2.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t2){this._deletableLayers.addLayer(t2),t2.fire("revert-deleted",{layer:t2})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(t2){this._removeLayer({layer:t2})},this),this.save()},_enableLayerDelete:function(t2){(t2.layer||t2.target||t2).on("click",this._removeLayer,this)},_disableLayerDelete:function(t2){var e3=t2.layer||t2.target||t2;e3.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e3)},_removeLayer:function(t2){var e3=t2.layer||t2.target||t2;this._deletableLayers.removeLayer(e3),this._deletedLayers.addLayer(e3),e3.fire("deleted")},_onMouseMove:function(t2){this._tooltip.updatePosition(t2.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(map5){var container=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",container),this.link.href="#",this._map=map5,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),container},_click:function(e){L.DomEvent.stopPropagation(e),L.DomEvent.preventDefault(e),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(options){var container=this.getContainer();this.isFullscreen()?options&&options.pseudoFullscreen?this._disablePseudoFullscreen(container):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(container):options&&options.pseudoFullscreen?this._enablePseudoFullscreen(container):container.requestFullscreen?container.requestFullscreen():container.mozRequestFullScreen?container.mozRequestFullScreen():container.webkitRequestFullscreen?container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):container.msRequestFullscreen?container.msRequestFullscreen():this._enablePseudoFullscreen(container)},_enablePseudoFullscreen:function(container){L.DomUtil.addClass(container,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(container){L.DomUtil.removeClass(container,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(fullscreen){this._isFullscreen=fullscreen;var container=this.getContainer();fullscreen?L.DomUtil.addClass(container,"leaflet-fullscreen-on"):L.DomUtil.removeClass(container,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(e){var fullscreenElement=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;fullscreenElement===this.getContainer()&&!this._isFullscreen?(this._setFullscreen(!0),this.fire("fullscreenchange")):fullscreenElement!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange"))}});L.Map.mergeOptions({fullscreenControl:!1});L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var fullscreenchange;if("onfullscreenchange"in document?fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(fullscreenchange="MSFullscreenChange"),fullscreenchange){var onFullscreenChange=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,fullscreenchange,onFullscreenChange)}),this.on("unload",function(){L.DomEvent.off(document,fullscreenchange,onFullscreenChange)})}});L.control.fullscreen=function(options){return new L.Control.Fullscreen(options)};var earthRadius=63710088e-1,factors={centimeters:earthRadius*100,centimetres:earthRadius*100,degrees:earthRadius/111325,feet:earthRadius*3.28084,inches:earthRadius*39.37,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,meters:earthRadius,metres:earthRadius,miles:earthRadius/1609.344,millimeters:earthRadius*1e3,millimetres:earthRadius*1e3,nauticalmiles:earthRadius/1852,radians:1,yards:earthRadius*1.0936},unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/earthRadius,yards:1.0936133};function feature(geom,properties,options){options===void 0&&(options={});var feat={type:"Feature"};return(options.id===0||options.id)&&(feat.id=options.id),options.bbox&&(feat.bbox=options.bbox),feat.properties=properties||{},feat.geometry=geom,feat}function point(coordinates,properties,options){if(options===void 0&&(options={}),!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");if(coordinates.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber(coordinates[0])||!isNumber(coordinates[1]))throw new Error("coordinates must contain numbers");var geom={type:"Point",coordinates};return feature(geom,properties,options)}function polygon(coordinates,properties,options){options===void 0&&(options={});for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var ring=coordinates_1[_i];if(ring.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var j=0;j<ring[ring.length-1].length;j++)if(ring[ring.length-1][j]!==ring[0][j])throw new Error("First and last Position are not equivalent.")}var geom={type:"Polygon",coordinates};return feature(geom,properties,options)}function lineString(coordinates,properties,options){if(options===void 0&&(options={}),coordinates.length<2)throw new Error("coordinates must be an array of two or more positions");var geom={type:"LineString",coordinates};return feature(geom,properties,options)}function multiPoint(coordinates,properties,options){options===void 0&&(options={});var geom={type:"MultiPoint",coordinates};return feature(geom,properties,options)}function isNumber(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)}function coordEach(geojson,callback,excludeWrapCoord){if(geojson!==null)for(var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection2,type2=geojson.type,isFeatureCollection=type2==="FeatureCollection",isFeature=type2==="Feature",stop=isFeatureCollection?geojson.features.length:1,featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson,isGeometryCollection2=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":!1,stopG=isGeometryCollection2?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0,geometryIndex=0;if(geometry=isGeometryCollection2?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection,geometry!==null){coords=geometry.coordinates;var geomType=geometry.type;switch(wrapShrink=excludeWrapCoord&&(geomType==="Polygon"||geomType==="MultiPolygon")?1:0,geomType){case null:break;case"Point":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++,multiFeatureIndex++;break;case"LineString":case"MultiPoint":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++,geomType==="MultiPoint"&&multiFeatureIndex++}geomType==="LineString"&&multiFeatureIndex++;break;case"Polygon":case"MultiLineString":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++}geomType==="MultiLineString"&&multiFeatureIndex++,geomType==="Polygon"&&geometryIndex++}geomType==="Polygon"&&multiFeatureIndex++;break;case"MultiPolygon":for(j=0;j<coords.length;j++){for(geometryIndex=0,k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===!1)return!1;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++)if(coordEach(geometry.geometries[j],callback,excludeWrapCoord)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function coordReduce(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;return coordEach(geojson,function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){coordIndex===0&&initialValue===void 0?previousValue=currentCoord:previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)},excludeWrapCoord),previousValue}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection2,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type==="FeatureCollection",isFeature=geojson.type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){for(geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson,featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{},featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:void 0,featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:void 0,isGeometryCollection2=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":!1,stopG=isGeometryCollection2?geometryMaybeCollection.geometries.length:1,g=0;g<stopG;g++){if(geometry=isGeometryCollection2?geometryMaybeCollection.geometries[g]:geometryMaybeCollection,geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===!1)return!1;continue}switch(geometry.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===!1)return!1;break}case"GeometryCollection":{for(j=0;j<geometry.geometries.length;j++)if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}featureIndex++}}function geomReduce(geojson,callback,initialValue){var previousValue=initialValue;return geomEach(geojson,function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){featureIndex===0&&initialValue===void 0?previousValue=currentGeometry:previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)}),previousValue}function flattenEach(geojson,callback){geomEach(geojson,function(geometry,featureIndex,properties,bbox2,id){var type2=geometry===null?null:geometry.type;switch(type2){case null:case"Point":case"LineString":case"Polygon":return callback(feature(geometry,properties,{bbox:bbox2,id}),featureIndex,0)===!1?!1:void 0}var geomType;switch(type2){case"MultiPoint":geomType="Point";break;case"MultiLineString":geomType="LineString";break;case"MultiPolygon":geomType="Polygon";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate2=geometry.coordinates[multiFeatureIndex],geom={type:geomType,coordinates:coordinate2};if(callback(feature(geom,properties),featureIndex,multiFeatureIndex)===!1)return!1}})}function bbox(geojson){var result=[1/0,1/0,-1/0,-1/0];return coordEach(geojson,function(coord){result[0]>coord[0]&&(result[0]=coord[0]),result[1]>coord[1]&&(result[1]=coord[1]),result[2]<coord[0]&&(result[2]=coord[0]),result[3]<coord[1]&&(result[3]=coord[1])}),result}bbox.default=bbox;var es_default=bbox;function getCoord(coord){if(!coord)throw new Error("coord is required");if(!Array.isArray(coord)){if(coord.type==="Feature"&&coord.geometry!==null&&coord.geometry.type==="Point")return coord.geometry.coordinates;if(coord.type==="Point")return coord.coordinates}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1]))return coord;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function featureOf(feature2,type2,name){if(!feature2)throw new Error("No feature passed");if(!name)throw new Error(".featureOf() requires a name");if(!feature2||feature2.type!=="Feature"||!feature2.geometry)throw new Error("Invalid input to "+name+", Feature with geometry required");if(!feature2.geometry||feature2.geometry.type!==type2)throw new Error("Invalid input to "+name+": must be a "+type2+", given "+feature2.geometry.type)}function getGeom(geojson){return geojson.type==="Feature"?geojson.geometry:geojson}var import_object_assign=__toESM(require_object_assign(),1);var import_concaveman=__toESM(require_concaveman(),1);function booleanPointInPolygon(point4,polygon4,options){if(options===void 0&&(options={}),!point4)throw new Error("point is required");if(!polygon4)throw new Error("polygon is required");var pt=getCoord(point4),geom=getGeom(polygon4),type2=geom.type,bbox2=polygon4.bbox,polys=geom.coordinates;if(bbox2&&inBBox(pt,bbox2)===!1)return!1;type2==="Polygon"&&(polys=[polys]);for(var insidePoly=!1,i=0;i<polys.length&&!insidePoly;i++)if(inRing(pt,polys[i][0],options.ignoreBoundary)){for(var inHole=!1,k=1;k<polys[i].length&&!inHole;)inRing(pt,polys[i][k],!options.ignoreBoundary)&&(inHole=!0),k++;inHole||(insidePoly=!0)}return insidePoly}function inRing(pt,ring,ignoreBoundary){var isInside=!1;ring[0][0]===ring[ring.length-1][0]&&ring[0][1]===ring[ring.length-1][1]&&(ring=ring.slice(0,ring.length-1));for(var i=0,j=ring.length-1;i<ring.length;j=i++){var xi=ring[i][0],yi=ring[i][1],xj=ring[j][0],yj=ring[j][1],onBoundary=pt[1]*(xi-xj)+yi*(xj-pt[0])+yj*(pt[0]-xi)===0&&(xi-pt[0])*(xj-pt[0])<=0&&(yi-pt[1])*(yj-pt[1])<=0;if(onBoundary)return!ignoreBoundary;var intersect2=yi>pt[1]!=yj>pt[1]&&pt[0]<(xj-xi)*(pt[1]-yi)/(yj-yi)+xi;intersect2&&(isInside=!isInside)}return isInside}function inBBox(pt,bbox2){return bbox2[0]<=pt[0]&&bbox2[1]<=pt[1]&&bbox2[2]>=pt[0]&&bbox2[3]>=pt[1]}var Triangle=function(){function Triangle4(a,b,c){this.a=a,this.b=b,this.c=c;var A=b.x-a.x,B2=b.y-a.y,C=c.x-a.x,D=c.y-a.y,E=A*(a.x+b.x)+B2*(a.y+b.y),F=C*(a.x+c.x)+D*(a.y+c.y),G=2*(A*(c.y-b.y)-B2*(c.x-b.x)),dx,dy;this.x=(D*E-B2*F)/G,this.y=(A*F-C*E)/G,dx=this.x-a.x,dy=this.y-a.y,this.r=dx*dx+dy*dy}return Triangle4}();var buffer=new ArrayBuffer(16),floats=new Float64Array(buffer),uints=new Uint32Array(buffer);var import_rbush=__toESM(require_rbush(),1);var Spline=function(){function Spline2(options){this.points=options.points||[],this.duration=options.duration||1e4,this.sharpness=options.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=options.stepLength||60,this.length=this.points.length,this.delay=0;for(var i=0;i<this.length;i++)this.points[i].z=this.points[i].z||0;for(var i=0;i<this.length-1;i++){var p1=this.points[i],p2=this.points[i+1];this.centers.push({x:(p1.x+p2.x)/2,y:(p1.y+p2.y)/2,z:(p1.z+p2.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var i=0;i<this.centers.length-1;i++){var dx=this.points[i+1].x-(this.centers[i].x+this.centers[i+1].x)/2,dy=this.points[i+1].y-(this.centers[i].y+this.centers[i+1].y)/2,dz=this.points[i+1].z-(this.centers[i].y+this.centers[i+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[i+1].x+this.sharpness*(this.centers[i].x+dx),y:(1-this.sharpness)*this.points[i+1].y+this.sharpness*(this.centers[i].y+dy),z:(1-this.sharpness)*this.points[i+1].z+this.sharpness*(this.centers[i].z+dz)},{x:(1-this.sharpness)*this.points[i+1].x+this.sharpness*(this.centers[i+1].x+dx),y:(1-this.sharpness)*this.points[i+1].y+this.sharpness*(this.centers[i+1].y+dy),z:(1-this.sharpness)*this.points[i+1].z+this.sharpness*(this.centers[i+1].z+dz)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return Spline2.prototype.cacheSteps=function(mindist){var steps=[],laststep=this.pos(0);steps.push(0);for(var t=0;t<this.duration;t+=10){var step=this.pos(t),dist=Math.sqrt((step.x-laststep.x)*(step.x-laststep.x)+(step.y-laststep.y)*(step.y-laststep.y)+(step.z-laststep.z)*(step.z-laststep.z));dist>mindist&&(steps.push(t),laststep=step)}return steps},Spline2.prototype.vector=function(t){var p1=this.pos(t+10),p2=this.pos(t-10);return{angle:180*Math.atan2(p1.y-p2.y,p1.x-p2.x)/3.14,speed:Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y)+(p2.z-p1.z)*(p2.z-p1.z))}},Spline2.prototype.pos=function(time){var t=time-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var t2=t/this.duration;if(t2>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*t2),t1=(this.length-1)*t2-n;return bezier(t1,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},Spline2}();function bezier(t,p1,c1,c2,p2){var b=B(t),pos={x:p2.x*b[0]+c2.x*b[1]+c1.x*b[2]+p1.x*b[3],y:p2.y*b[0]+c2.y*b[1]+c1.y*b[2]+p1.y*b[3],z:p2.z*b[0]+c2.z*b[1]+c1.z*b[2]+p1.z*b[3]};return pos}function B(t){var t2=t*t,t3=t2*t;return[t3,3*t2*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}function bboxPolygon(bbox2,options){options===void 0&&(options={});var west=Number(bbox2[0]),south=Number(bbox2[1]),east=Number(bbox2[2]),north=Number(bbox2[3]);if(bbox2.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var lowLeft=[west,south],topLeft=[west,north],topRight=[east,north],lowRight=[east,south];return polygon([[lowLeft,lowRight,topRight,topLeft,lowLeft]],options.properties,{bbox:bbox2,id:options.id})}function envelope(geojson){return bboxPolygon(es_default(geojson))}var es_default5=envelope;function center(geojson,options){options===void 0&&(options={});var ext=es_default(geojson),x2=(ext[0]+ext[2])/2,y2=(ext[1]+ext[3])/2;return point([x2,y2],options.properties,options)}var es_default6=center;var import_earcut=__toESM(require_earcut(),1);var import_geojson_rbush=__toESM(require_geojson_rbush(),1);var import_object_assign2=__toESM(require_object_assign(),1);var RADIUS=6378137;function area(geojson){return geomReduce(geojson,function(value,geom){return value+calculateArea(geom)},0)}function calculateArea(geom){var total=0,i;switch(geom.type){case"Polygon":return polygonArea(geom.coordinates);case"MultiPolygon":for(i=0;i<geom.coordinates.length;i++)total+=polygonArea(geom.coordinates[i]);return total;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function polygonArea(coords){var total=0;if(coords&&coords.length>0){total+=Math.abs(ringArea(coords[0]));for(var i=1;i<coords.length;i++)total-=Math.abs(ringArea(coords[i]))}return total}function ringArea(coords){var p1,p2,p3,lowerIndex,middleIndex,upperIndex,i,total=0,coordsLength=coords.length;if(coordsLength>2){for(i=0;i<coordsLength;i++)i===coordsLength-2?(lowerIndex=coordsLength-2,middleIndex=coordsLength-1,upperIndex=0):i===coordsLength-1?(lowerIndex=coordsLength-1,middleIndex=0,upperIndex=1):(lowerIndex=i,middleIndex=i+1,upperIndex=i+2),p1=coords[lowerIndex],p2=coords[middleIndex],p3=coords[upperIndex],total+=(rad(p3[0])-rad(p1[0]))*Math.sin(rad(p2[1]));total=total*RADIUS*RADIUS/2}return total}function rad(num){return num*Math.PI/180}var import_rbush2=__toESM(require_rbush(),1);var D2R=Math.PI/180,R2D=180/Math.PI,Coord=function(lon,lat){this.lon=lon,this.lat=lat,this.x=D2R*lon,this.y=D2R*lat};Coord.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)};Coord.prototype.antipode=function(){var anti_lat=-1*this.lat,anti_lon=this.lon<0?180+this.lon:(180-this.lon)*-1;return new Coord(anti_lon,anti_lat)};var LineString=function(){this.coords=[],this.length=0};LineString.prototype.move_to=function(coord){this.length++,this.coords.push(coord)};var Arc=function(properties){this.properties=properties||{},this.geometries=[]};Arc.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var multiline=[],i=0;i<this.geometries.length;i++)multiline.push(this.geometries[i].coords);return{geometry:{type:"MultiLineString",coordinates:multiline},type:"Feature",properties:this.properties}};Arc.prototype.wkt=function(){for(var wkt_string="",wkt="LINESTRING(",collect=function(c){wkt+=c[0]+" "+c[1]+","},i=0;i<this.geometries.length;i++){if(this.geometries[i].coords.length===0)return"LINESTRING(empty)";var coords=this.geometries[i].coords;coords.forEach(collect),wkt_string+=wkt.substring(0,wkt.length-1)+")"}return wkt_string};var GreatCircle=function(start,end,properties){if(!start||start.x===void 0||start.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!end||end.x===void 0||end.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Coord(start.x,start.y),this.end=new Coord(end.x,end.y),this.properties=properties||{};var w=this.start.x-this.end.x,h=this.start.y-this.end.y,z=Math.pow(Math.sin(h/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(w/2),2);if(this.g=2*Math.asin(Math.sqrt(z)),this.g===Math.PI)throw new Error("it appears "+start.view()+" and "+end.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+start+" and "+end)};GreatCircle.prototype.interpolate=function(f){var A=Math.sin((1-f)*this.g)/Math.sin(this.g),B2=Math.sin(f*this.g)/Math.sin(this.g),x2=A*Math.cos(this.start.y)*Math.cos(this.start.x)+B2*Math.cos(this.end.y)*Math.cos(this.end.x),y2=A*Math.cos(this.start.y)*Math.sin(this.start.x)+B2*Math.cos(this.end.y)*Math.sin(this.end.x),z=A*Math.sin(this.start.y)+B2*Math.sin(this.end.y),lat=R2D*Math.atan2(z,Math.sqrt(Math.pow(x2,2)+Math.pow(y2,2))),lon=R2D*Math.atan2(y2,x2);return[lon,lat]};GreatCircle.prototype.Arc=function(npoints,options){var first_pass=[];if(!npoints||npoints<=2)first_pass.push([this.start.lon,this.start.lat]),first_pass.push([this.end.lon,this.end.lat]);else for(var delta=1/(npoints-1),i=0;i<npoints;++i){var step=delta*i,pair2=this.interpolate(step);first_pass.push(pair2)}for(var bHasBigDiff=!1,dfMaxSmallDiffLong=0,dfDateLineOffset=options&&options.offset?options.offset:10,dfLeftBorderX=180-dfDateLineOffset,dfRightBorderX=-180+dfDateLineOffset,dfDiffSpace=360-dfDateLineOffset,j=1;j<first_pass.length;++j){var dfPrevX=first_pass[j-1][0],dfX=first_pass[j][0],dfDiffLong=Math.abs(dfX-dfPrevX);dfDiffLong>dfDiffSpace&&(dfX>dfLeftBorderX&&dfPrevX<dfRightBorderX||dfPrevX>dfLeftBorderX&&dfX<dfRightBorderX)?bHasBigDiff=!0:dfDiffLong>dfMaxSmallDiffLong&&(dfMaxSmallDiffLong=dfDiffLong)}var poMulti=[];if(bHasBigDiff&&dfMaxSmallDiffLong<dfDateLineOffset){var poNewLS=[];poMulti.push(poNewLS);for(var k=0;k<first_pass.length;++k){var dfX0=parseFloat(first_pass[k][0]);if(k>0&&Math.abs(dfX0-first_pass[k-1][0])>dfDiffSpace){var dfX1=parseFloat(first_pass[k-1][0]),dfY1=parseFloat(first_pass[k-1][1]),dfX2=parseFloat(first_pass[k][0]),dfY2=parseFloat(first_pass[k][1]);if(dfX1>-180&&dfX1<dfRightBorderX&&dfX2===180&&k+1<first_pass.length&&first_pass[k-1][0]>-180&&first_pass[k-1][0]<dfRightBorderX){poNewLS.push([-180,first_pass[k][1]]),k++,poNewLS.push([first_pass[k][0],first_pass[k][1]]);continue}else if(dfX1>dfLeftBorderX&&dfX1<180&&dfX2===-180&&k+1<first_pass.length&&first_pass[k-1][0]>dfLeftBorderX&&first_pass[k-1][0]<180){poNewLS.push([180,first_pass[k][1]]),k++,poNewLS.push([first_pass[k][0],first_pass[k][1]]);continue}if(dfX1<dfRightBorderX&&dfX2>dfLeftBorderX){var tmpX=dfX1;dfX1=dfX2,dfX2=tmpX;var tmpY=dfY1;dfY1=dfY2,dfY2=tmpY}if(dfX1>dfLeftBorderX&&dfX2<dfRightBorderX&&(dfX2+=360),dfX1<=180&&dfX2>=180&&dfX1<dfX2){var dfRatio=(180-dfX1)/(dfX2-dfX1),dfY=dfRatio*dfY2+(1-dfRatio)*dfY1;poNewLS.push([first_pass[k-1][0]>dfLeftBorderX?180:-180,dfY]),poNewLS=[],poNewLS.push([first_pass[k-1][0]>dfLeftBorderX?-180:180,dfY]),poMulti.push(poNewLS)}else poNewLS=[],poMulti.push(poNewLS);poNewLS.push([dfX0,first_pass[k][1]])}else poNewLS.push([first_pass[k][0],first_pass[k][1]])}}else{var poNewLS0=[];poMulti.push(poNewLS0);for(var l=0;l<first_pass.length;++l)poNewLS0.push([first_pass[l][0],first_pass[l][1]])}for(var arc=new Arc(this.properties),m=0;m<poMulti.length;++m){var line=new LineString;arc.geometries.push(line);for(var points=poMulti[m],j0=0;j0<points.length;++j0)line.move_to(points[j0])}return arc};var import_geojson_rbush2=__toESM(require_geojson_rbush(),1);var import_geojson_rbush3=__toESM(require_geojson_rbush(),1);var import_deep_equal=__toESM(require_deep_equal(),1);var import_object_assign3=__toESM(require_object_assign(),1);var isoBandNextXTL=[],isoBandNextYTL=[],isoBandNextOTL=[],isoBandNextXTR=[],isoBandNextYTR=[],isoBandNextOTR=[],isoBandNextXRT=[],isoBandNextYRT=[],isoBandNextORT=[],isoBandNextXRB=[],isoBandNextYRB=[],isoBandNextORB=[],isoBandNextXBL=[],isoBandNextYBL=[],isoBandNextOBL=[],isoBandNextXBR=[],isoBandNextYBR=[],isoBandNextOBR=[],isoBandNextXLT=[],isoBandNextYLT=[],isoBandNextOLT=[],isoBandNextXLB=[],isoBandNextYLB=[],isoBandNextOLB=[];isoBandNextXRT[85]=isoBandNextXRB[85]=-1;isoBandNextYRT[85]=isoBandNextYRB[85]=0;isoBandNextORT[85]=isoBandNextORB[85]=1;isoBandNextXLT[85]=isoBandNextXLB[85]=1;isoBandNextYLT[85]=isoBandNextYLB[85]=0;isoBandNextOLT[85]=isoBandNextOLB[85]=1;isoBandNextXTL[85]=isoBandNextXTR[85]=0;isoBandNextYTL[85]=isoBandNextYTR[85]=-1;isoBandNextOTL[85]=isoBandNextOBL[85]=0;isoBandNextXBR[85]=isoBandNextXBL[85]=0;isoBandNextYBR[85]=isoBandNextYBL[85]=1;isoBandNextOTR[85]=isoBandNextOBR[85]=1;isoBandNextXLB[1]=isoBandNextXLB[169]=0;isoBandNextYLB[1]=isoBandNextYLB[169]=-1;isoBandNextOLB[1]=isoBandNextOLB[169]=0;isoBandNextXBL[1]=isoBandNextXBL[169]=-1;isoBandNextYBL[1]=isoBandNextYBL[169]=0;isoBandNextOBL[1]=isoBandNextOBL[169]=0;isoBandNextXRB[4]=isoBandNextXRB[166]=0;isoBandNextYRB[4]=isoBandNextYRB[166]=-1;isoBandNextORB[4]=isoBandNextORB[166]=1;isoBandNextXBR[4]=isoBandNextXBR[166]=1;isoBandNextYBR[4]=isoBandNextYBR[166]=0;isoBandNextOBR[4]=isoBandNextOBR[166]=0;isoBandNextXRT[16]=isoBandNextXRT[154]=0;isoBandNextYRT[16]=isoBandNextYRT[154]=1;isoBandNextORT[16]=isoBandNextORT[154]=1;isoBandNextXTR[16]=isoBandNextXTR[154]=1;isoBandNextYTR[16]=isoBandNextYTR[154]=0;isoBandNextOTR[16]=isoBandNextOTR[154]=1;isoBandNextXLT[64]=isoBandNextXLT[106]=0;isoBandNextYLT[64]=isoBandNextYLT[106]=1;isoBandNextOLT[64]=isoBandNextOLT[106]=0;isoBandNextXTL[64]=isoBandNextXTL[106]=-1;isoBandNextYTL[64]=isoBandNextYTL[106]=0;isoBandNextOTL[64]=isoBandNextOTL[106]=1;isoBandNextXLT[2]=isoBandNextXLT[168]=0;isoBandNextYLT[2]=isoBandNextYLT[168]=-1;isoBandNextOLT[2]=isoBandNextOLT[168]=1;isoBandNextXLB[2]=isoBandNextXLB[168]=0;isoBandNextYLB[2]=isoBandNextYLB[168]=-1;isoBandNextOLB[2]=isoBandNextOLB[168]=0;isoBandNextXBL[2]=isoBandNextXBL[168]=-1;isoBandNextYBL[2]=isoBandNextYBL[168]=0;isoBandNextOBL[2]=isoBandNextOBL[168]=0;isoBandNextXBR[2]=isoBandNextXBR[168]=-1;isoBandNextYBR[2]=isoBandNextYBR[168]=0;isoBandNextOBR[2]=isoBandNextOBR[168]=1;isoBandNextXRT[8]=isoBandNextXRT[162]=0;isoBandNextYRT[8]=isoBandNextYRT[162]=-1;isoBandNextORT[8]=isoBandNextORT[162]=0;isoBandNextXRB[8]=isoBandNextXRB[162]=0;isoBandNextYRB[8]=isoBandNextYRB[162]=-1;isoBandNextORB[8]=isoBandNextORB[162]=1;isoBandNextXBL[8]=isoBandNextXBL[162]=1;isoBandNextYBL[8]=isoBandNextYBL[162]=0;isoBandNextOBL[8]=isoBandNextOBL[162]=1;isoBandNextXBR[8]=isoBandNextXBR[162]=1;isoBandNextYBR[8]=isoBandNextYBR[162]=0;isoBandNextOBR[8]=isoBandNextOBR[162]=0;isoBandNextXRT[32]=isoBandNextXRT[138]=0;isoBandNextYRT[32]=isoBandNextYRT[138]=1;isoBandNextORT[32]=isoBandNextORT[138]=1;isoBandNextXRB[32]=isoBandNextXRB[138]=0;isoBandNextYRB[32]=isoBandNextYRB[138]=1;isoBandNextORB[32]=isoBandNextORB[138]=0;isoBandNextXTL[32]=isoBandNextXTL[138]=1;isoBandNextYTL[32]=isoBandNextYTL[138]=0;isoBandNextOTL[32]=isoBandNextOTL[138]=0;isoBandNextXTR[32]=isoBandNextXTR[138]=1;isoBandNextYTR[32]=isoBandNextYTR[138]=0;isoBandNextOTR[32]=isoBandNextOTR[138]=1;isoBandNextXLB[128]=isoBandNextXLB[42]=0;isoBandNextYLB[128]=isoBandNextYLB[42]=1;isoBandNextOLB[128]=isoBandNextOLB[42]=1;isoBandNextXLT[128]=isoBandNextXLT[42]=0;isoBandNextYLT[128]=isoBandNextYLT[42]=1;isoBandNextOLT[128]=isoBandNextOLT[42]=0;isoBandNextXTL[128]=isoBandNextXTL[42]=-1;isoBandNextYTL[128]=isoBandNextYTL[42]=0;isoBandNextOTL[128]=isoBandNextOTL[42]=1;isoBandNextXTR[128]=isoBandNextXTR[42]=-1;isoBandNextYTR[128]=isoBandNextYTR[42]=0;isoBandNextOTR[128]=isoBandNextOTR[42]=0;isoBandNextXRB[5]=isoBandNextXRB[165]=-1;isoBandNextYRB[5]=isoBandNextYRB[165]=0;isoBandNextORB[5]=isoBandNextORB[165]=0;isoBandNextXLB[5]=isoBandNextXLB[165]=1;isoBandNextYLB[5]=isoBandNextYLB[165]=0;isoBandNextOLB[5]=isoBandNextOLB[165]=0;isoBandNextXBR[20]=isoBandNextXBR[150]=0;isoBandNextYBR[20]=isoBandNextYBR[150]=1;isoBandNextOBR[20]=isoBandNextOBR[150]=1;isoBandNextXTR[20]=isoBandNextXTR[150]=0;isoBandNextYTR[20]=isoBandNextYTR[150]=-1;isoBandNextOTR[20]=isoBandNextOTR[150]=1;isoBandNextXRT[80]=isoBandNextXRT[90]=-1;isoBandNextYRT[80]=isoBandNextYRT[90]=0;isoBandNextORT[80]=isoBandNextORT[90]=1;isoBandNextXLT[80]=isoBandNextXLT[90]=1;isoBandNextYLT[80]=isoBandNextYLT[90]=0;isoBandNextOLT[80]=isoBandNextOLT[90]=1;isoBandNextXBL[65]=isoBandNextXBL[105]=0;isoBandNextYBL[65]=isoBandNextYBL[105]=1;isoBandNextOBL[65]=isoBandNextOBL[105]=0;isoBandNextXTL[65]=isoBandNextXTL[105]=0;isoBandNextYTL[65]=isoBandNextYTL[105]=-1;isoBandNextOTL[65]=isoBandNextOTL[105]=0;isoBandNextXRT[160]=isoBandNextXRT[10]=-1;isoBandNextYRT[160]=isoBandNextYRT[10]=0;isoBandNextORT[160]=isoBandNextORT[10]=1;isoBandNextXRB[160]=isoBandNextXRB[10]=-1;isoBandNextYRB[160]=isoBandNextYRB[10]=0;isoBandNextORB[160]=isoBandNextORB[10]=0;isoBandNextXLB[160]=isoBandNextXLB[10]=1;isoBandNextYLB[160]=isoBandNextYLB[10]=0;isoBandNextOLB[160]=isoBandNextOLB[10]=0;isoBandNextXLT[160]=isoBandNextXLT[10]=1;isoBandNextYLT[160]=isoBandNextYLT[10]=0;isoBandNextOLT[160]=isoBandNextOLT[10]=1;isoBandNextXBR[130]=isoBandNextXBR[40]=0;isoBandNextYBR[130]=isoBandNextYBR[40]=1;isoBandNextOBR[130]=isoBandNextOBR[40]=1;isoBandNextXBL[130]=isoBandNextXBL[40]=0;isoBandNextYBL[130]=isoBandNextYBL[40]=1;isoBandNextOBL[130]=isoBandNextOBL[40]=0;isoBandNextXTL[130]=isoBandNextXTL[40]=0;isoBandNextYTL[130]=isoBandNextYTL[40]=-1;isoBandNextOTL[130]=isoBandNextOTL[40]=0;isoBandNextXTR[130]=isoBandNextXTR[40]=0;isoBandNextYTR[130]=isoBandNextYTR[40]=-1;isoBandNextOTR[130]=isoBandNextOTR[40]=1;isoBandNextXRB[37]=isoBandNextXRB[133]=0;isoBandNextYRB[37]=isoBandNextYRB[133]=1;isoBandNextORB[37]=isoBandNextORB[133]=1;isoBandNextXLB[37]=isoBandNextXLB[133]=0;isoBandNextYLB[37]=isoBandNextYLB[133]=1;isoBandNextOLB[37]=isoBandNextOLB[133]=0;isoBandNextXTL[37]=isoBandNextXTL[133]=-1;isoBandNextYTL[37]=isoBandNextYTL[133]=0;isoBandNextOTL[37]=isoBandNextOTL[133]=0;isoBandNextXTR[37]=isoBandNextXTR[133]=1;isoBandNextYTR[37]=isoBandNextYTR[133]=0;isoBandNextOTR[37]=isoBandNextOTR[133]=0;isoBandNextXBR[148]=isoBandNextXBR[22]=-1;isoBandNextYBR[148]=isoBandNextYBR[22]=0;isoBandNextOBR[148]=isoBandNextOBR[22]=0;isoBandNextXLB[148]=isoBandNextXLB[22]=0;isoBandNextYLB[148]=isoBandNextYLB[22]=-1;isoBandNextOLB[148]=isoBandNextOLB[22]=1;isoBandNextXLT[148]=isoBandNextXLT[22]=0;isoBandNextYLT[148]=isoBandNextYLT[22]=1;isoBandNextOLT[148]=isoBandNextOLT[22]=1;isoBandNextXTR[148]=isoBandNextXTR[22]=-1;isoBandNextYTR[148]=isoBandNextYTR[22]=0;isoBandNextOTR[148]=isoBandNextOTR[22]=1;isoBandNextXRT[82]=isoBandNextXRT[88]=0;isoBandNextYRT[82]=isoBandNextYRT[88]=-1;isoBandNextORT[82]=isoBandNextORT[88]=1;isoBandNextXBR[82]=isoBandNextXBR[88]=1;isoBandNextYBR[82]=isoBandNextYBR[88]=0;isoBandNextOBR[82]=isoBandNextOBR[88]=1;isoBandNextXBL[82]=isoBandNextXBL[88]=-1;isoBandNextYBL[82]=isoBandNextYBL[88]=0;isoBandNextOBL[82]=isoBandNextOBL[88]=1;isoBandNextXLT[82]=isoBandNextXLT[88]=0;isoBandNextYLT[82]=isoBandNextYLT[88]=-1;isoBandNextOLT[82]=isoBandNextOLT[88]=0;isoBandNextXRT[73]=isoBandNextXRT[97]=0;isoBandNextYRT[73]=isoBandNextYRT[97]=1;isoBandNextORT[73]=isoBandNextORT[97]=0;isoBandNextXRB[73]=isoBandNextXRB[97]=0;isoBandNextYRB[73]=isoBandNextYRB[97]=-1;isoBandNextORB[73]=isoBandNextORB[97]=0;isoBandNextXBL[73]=isoBandNextXBL[97]=1;isoBandNextYBL[73]=isoBandNextYBL[97]=0;isoBandNextOBL[73]=isoBandNextOBL[97]=0;isoBandNextXTL[73]=isoBandNextXTL[97]=1;isoBandNextYTL[73]=isoBandNextYTL[97]=0;isoBandNextOTL[73]=isoBandNextOTL[97]=1;isoBandNextXRT[145]=isoBandNextXRT[25]=0;isoBandNextYRT[145]=isoBandNextYRT[25]=-1;isoBandNextORT[145]=isoBandNextORT[25]=0;isoBandNextXBL[145]=isoBandNextXBL[25]=1;isoBandNextYBL[145]=isoBandNextYBL[25]=0;isoBandNextOBL[145]=isoBandNextOBL[25]=1;isoBandNextXLB[145]=isoBandNextXLB[25]=0;isoBandNextYLB[145]=isoBandNextYLB[25]=1;isoBandNextOLB[145]=isoBandNextOLB[25]=1;isoBandNextXTR[145]=isoBandNextXTR[25]=-1;isoBandNextYTR[145]=isoBandNextYTR[25]=0;isoBandNextOTR[145]=isoBandNextOTR[25]=0;isoBandNextXRB[70]=isoBandNextXRB[100]=0;isoBandNextYRB[70]=isoBandNextYRB[100]=1;isoBandNextORB[70]=isoBandNextORB[100]=0;isoBandNextXBR[70]=isoBandNextXBR[100]=-1;isoBandNextYBR[70]=isoBandNextYBR[100]=0;isoBandNextOBR[70]=isoBandNextOBR[100]=1;isoBandNextXLT[70]=isoBandNextXLT[100]=0;isoBandNextYLT[70]=isoBandNextYLT[100]=-1;isoBandNextOLT[70]=isoBandNextOLT[100]=1;isoBandNextXTL[70]=isoBandNextXTL[100]=1;isoBandNextYTL[70]=isoBandNextYTL[100]=0;isoBandNextOTL[70]=isoBandNextOTL[100]=0;isoBandNextXRB[101]=isoBandNextXRB[69]=0;isoBandNextYRB[101]=isoBandNextYRB[69]=1;isoBandNextORB[101]=isoBandNextORB[69]=0;isoBandNextXTL[101]=isoBandNextXTL[69]=1;isoBandNextYTL[101]=isoBandNextYTL[69]=0;isoBandNextOTL[101]=isoBandNextOTL[69]=0;isoBandNextXLB[149]=isoBandNextXLB[21]=0;isoBandNextYLB[149]=isoBandNextYLB[21]=1;isoBandNextOLB[149]=isoBandNextOLB[21]=1;isoBandNextXTR[149]=isoBandNextXTR[21]=-1;isoBandNextYTR[149]=isoBandNextYTR[21]=0;isoBandNextOTR[149]=isoBandNextOTR[21]=0;isoBandNextXBR[86]=isoBandNextXBR[84]=-1;isoBandNextYBR[86]=isoBandNextYBR[84]=0;isoBandNextOBR[86]=isoBandNextOBR[84]=1;isoBandNextXLT[86]=isoBandNextXLT[84]=0;isoBandNextYLT[86]=isoBandNextYLT[84]=-1;isoBandNextOLT[86]=isoBandNextOLT[84]=1;isoBandNextXRT[89]=isoBandNextXRT[81]=0;isoBandNextYRT[89]=isoBandNextYRT[81]=-1;isoBandNextORT[89]=isoBandNextORT[81]=0;isoBandNextXBL[89]=isoBandNextXBL[81]=1;isoBandNextYBL[89]=isoBandNextYBL[81]=0;isoBandNextOBL[89]=isoBandNextOBL[81]=1;isoBandNextXRT[96]=isoBandNextXRT[74]=0;isoBandNextYRT[96]=isoBandNextYRT[74]=1;isoBandNextORT[96]=isoBandNextORT[74]=0;isoBandNextXRB[96]=isoBandNextXRB[74]=-1;isoBandNextYRB[96]=isoBandNextYRB[74]=0;isoBandNextORB[96]=isoBandNextORB[74]=1;isoBandNextXLT[96]=isoBandNextXLT[74]=1;isoBandNextYLT[96]=isoBandNextYLT[74]=0;isoBandNextOLT[96]=isoBandNextOLT[74]=0;isoBandNextXTL[96]=isoBandNextXTL[74]=1;isoBandNextYTL[96]=isoBandNextYTL[74]=0;isoBandNextOTL[96]=isoBandNextOTL[74]=1;isoBandNextXRT[24]=isoBandNextXRT[146]=0;isoBandNextYRT[24]=isoBandNextYRT[146]=-1;isoBandNextORT[24]=isoBandNextORT[146]=1;isoBandNextXBR[24]=isoBandNextXBR[146]=1;isoBandNextYBR[24]=isoBandNextYBR[146]=0;isoBandNextOBR[24]=isoBandNextOBR[146]=1;isoBandNextXBL[24]=isoBandNextXBL[146]=0;isoBandNextYBL[24]=isoBandNextYBL[146]=1;isoBandNextOBL[24]=isoBandNextOBL[146]=1;isoBandNextXTR[24]=isoBandNextXTR[146]=0;isoBandNextYTR[24]=isoBandNextYTR[146]=-1;isoBandNextOTR[24]=isoBandNextOTR[146]=0;isoBandNextXRB[6]=isoBandNextXRB[164]=-1;isoBandNextYRB[6]=isoBandNextYRB[164]=0;isoBandNextORB[6]=isoBandNextORB[164]=1;isoBandNextXBR[6]=isoBandNextXBR[164]=-1;isoBandNextYBR[6]=isoBandNextYBR[164]=0;isoBandNextOBR[6]=isoBandNextOBR[164]=0;isoBandNextXLB[6]=isoBandNextXLB[164]=0;isoBandNextYLB[6]=isoBandNextYLB[164]=-1;isoBandNextOLB[6]=isoBandNextOLB[164]=1;isoBandNextXLT[6]=isoBandNextXLT[164]=1;isoBandNextYLT[6]=isoBandNextYLT[164]=0;isoBandNextOLT[6]=isoBandNextOLT[164]=0;isoBandNextXBL[129]=isoBandNextXBL[41]=0;isoBandNextYBL[129]=isoBandNextYBL[41]=1;isoBandNextOBL[129]=isoBandNextOBL[41]=1;isoBandNextXLB[129]=isoBandNextXLB[41]=0;isoBandNextYLB[129]=isoBandNextYLB[41]=1;isoBandNextOLB[129]=isoBandNextOLB[41]=0;isoBandNextXTL[129]=isoBandNextXTL[41]=-1;isoBandNextYTL[129]=isoBandNextYTL[41]=0;isoBandNextOTL[129]=isoBandNextOTL[41]=0;isoBandNextXTR[129]=isoBandNextXTR[41]=0;isoBandNextYTR[129]=isoBandNextYTR[41]=-1;isoBandNextOTR[129]=isoBandNextOTR[41]=0;isoBandNextXBR[66]=isoBandNextXBR[104]=0;isoBandNextYBR[66]=isoBandNextYBR[104]=1;isoBandNextOBR[66]=isoBandNextOBR[104]=0;isoBandNextXBL[66]=isoBandNextXBL[104]=-1;isoBandNextYBL[66]=isoBandNextYBL[104]=0;isoBandNextOBL[66]=isoBandNextOBL[104]=1;isoBandNextXLT[66]=isoBandNextXLT[104]=0;isoBandNextYLT[66]=isoBandNextYLT[104]=-1;isoBandNextOLT[66]=isoBandNextOLT[104]=0;isoBandNextXTL[66]=isoBandNextXTL[104]=0;isoBandNextYTL[66]=isoBandNextYTL[104]=-1;isoBandNextOTL[66]=isoBandNextOTL[104]=1;isoBandNextXRT[144]=isoBandNextXRT[26]=-1;isoBandNextYRT[144]=isoBandNextYRT[26]=0;isoBandNextORT[144]=isoBandNextORT[26]=0;isoBandNextXLB[144]=isoBandNextXLB[26]=1;isoBandNextYLB[144]=isoBandNextYLB[26]=0;isoBandNextOLB[144]=isoBandNextOLB[26]=1;isoBandNextXLT[144]=isoBandNextXLT[26]=0;isoBandNextYLT[144]=isoBandNextYLT[26]=1;isoBandNextOLT[144]=isoBandNextOLT[26]=1;isoBandNextXTR[144]=isoBandNextXTR[26]=-1;isoBandNextYTR[144]=isoBandNextYTR[26]=0;isoBandNextOTR[144]=isoBandNextOTR[26]=1;isoBandNextXRB[36]=isoBandNextXRB[134]=0;isoBandNextYRB[36]=isoBandNextYRB[134]=1;isoBandNextORB[36]=isoBandNextORB[134]=1;isoBandNextXBR[36]=isoBandNextXBR[134]=0;isoBandNextYBR[36]=isoBandNextYBR[134]=1;isoBandNextOBR[36]=isoBandNextOBR[134]=0;isoBandNextXTL[36]=isoBandNextXTL[134]=0;isoBandNextYTL[36]=isoBandNextYTL[134]=-1;isoBandNextOTL[36]=isoBandNextOTL[134]=1;isoBandNextXTR[36]=isoBandNextXTR[134]=1;isoBandNextYTR[36]=isoBandNextYTR[134]=0;isoBandNextOTR[36]=isoBandNextOTR[134]=0;isoBandNextXRT[9]=isoBandNextXRT[161]=-1;isoBandNextYRT[9]=isoBandNextYRT[161]=0;isoBandNextORT[9]=isoBandNextORT[161]=0;isoBandNextXRB[9]=isoBandNextXRB[161]=0;isoBandNextYRB[9]=isoBandNextYRB[161]=-1;isoBandNextORB[9]=isoBandNextORB[161]=0;isoBandNextXBL[9]=isoBandNextXBL[161]=1;isoBandNextYBL[9]=isoBandNextYBL[161]=0;isoBandNextOBL[9]=isoBandNextOBL[161]=0;isoBandNextXLB[9]=isoBandNextXLB[161]=1;isoBandNextYLB[9]=isoBandNextYLB[161]=0;isoBandNextOLB[9]=isoBandNextOLB[161]=1;isoBandNextXRT[136]=0;isoBandNextYRT[136]=1;isoBandNextORT[136]=1;isoBandNextXRB[136]=0;isoBandNextYRB[136]=1;isoBandNextORB[136]=0;isoBandNextXBR[136]=-1;isoBandNextYBR[136]=0;isoBandNextOBR[136]=1;isoBandNextXBL[136]=-1;isoBandNextYBL[136]=0;isoBandNextOBL[136]=0;isoBandNextXLB[136]=0;isoBandNextYLB[136]=-1;isoBandNextOLB[136]=0;isoBandNextXLT[136]=0;isoBandNextYLT[136]=-1;isoBandNextOLT[136]=1;isoBandNextXTL[136]=1;isoBandNextYTL[136]=0;isoBandNextOTL[136]=0;isoBandNextXTR[136]=1;isoBandNextYTR[136]=0;isoBandNextOTR[136]=1;isoBandNextXRT[34]=0;isoBandNextYRT[34]=-1;isoBandNextORT[34]=0;isoBandNextXRB[34]=0;isoBandNextYRB[34]=-1;isoBandNextORB[34]=1;isoBandNextXBR[34]=1;isoBandNextYBR[34]=0;isoBandNextOBR[34]=0;isoBandNextXBL[34]=1;isoBandNextYBL[34]=0;isoBandNextOBL[34]=1;isoBandNextXLB[34]=0;isoBandNextYLB[34]=1;isoBandNextOLB[34]=1;isoBandNextXLT[34]=0;isoBandNextYLT[34]=1;isoBandNextOLT[34]=0;isoBandNextXTL[34]=-1;isoBandNextYTL[34]=0;isoBandNextOTL[34]=1;isoBandNextXTR[34]=-1;isoBandNextYTR[34]=0;isoBandNextOTR[34]=0;isoBandNextXRT[35]=0;isoBandNextYRT[35]=1;isoBandNextORT[35]=1;isoBandNextXRB[35]=0;isoBandNextYRB[35]=-1;isoBandNextORB[35]=1;isoBandNextXBR[35]=1;isoBandNextYBR[35]=0;isoBandNextOBR[35]=0;isoBandNextXBL[35]=-1;isoBandNextYBL[35]=0;isoBandNextOBL[35]=0;isoBandNextXLB[35]=0;isoBandNextYLB[35]=-1;isoBandNextOLB[35]=0;isoBandNextXLT[35]=0;isoBandNextYLT[35]=1;isoBandNextOLT[35]=0;isoBandNextXTL[35]=-1;isoBandNextYTL[35]=0;isoBandNextOTL[35]=1;isoBandNextXTR[35]=1;isoBandNextYTR[35]=0;isoBandNextOTR[35]=1;isoBandNextXRT[153]=0;isoBandNextYRT[153]=1;isoBandNextORT[153]=1;isoBandNextXBL[153]=-1;isoBandNextYBL[153]=0;isoBandNextOBL[153]=0;isoBandNextXLB[153]=0;isoBandNextYLB[153]=-1;isoBandNextOLB[153]=0;isoBandNextXTR[153]=1;isoBandNextYTR[153]=0;isoBandNextOTR[153]=1;isoBandNextXRB[102]=0;isoBandNextYRB[102]=-1;isoBandNextORB[102]=1;isoBandNextXBR[102]=1;isoBandNextYBR[102]=0;isoBandNextOBR[102]=0;isoBandNextXLT[102]=0;isoBandNextYLT[102]=1;isoBandNextOLT[102]=0;isoBandNextXTL[102]=-1;isoBandNextYTL[102]=0;isoBandNextOTL[102]=1;isoBandNextXRT[155]=0;isoBandNextYRT[155]=-1;isoBandNextORT[155]=0;isoBandNextXBL[155]=1;isoBandNextYBL[155]=0;isoBandNextOBL[155]=1;isoBandNextXLB[155]=0;isoBandNextYLB[155]=1;isoBandNextOLB[155]=1;isoBandNextXTR[155]=-1;isoBandNextYTR[155]=0;isoBandNextOTR[155]=0;isoBandNextXRB[103]=0;isoBandNextYRB[103]=1;isoBandNextORB[103]=0;isoBandNextXBR[103]=-1;isoBandNextYBR[103]=0;isoBandNextOBR[103]=1;isoBandNextXLT[103]=0;isoBandNextYLT[103]=-1;isoBandNextOLT[103]=1;isoBandNextXTL[103]=1;isoBandNextYTL[103]=0;isoBandNextOTL[103]=0;isoBandNextXRT[152]=0;isoBandNextYRT[152]=1;isoBandNextORT[152]=1;isoBandNextXBR[152]=-1;isoBandNextYBR[152]=0;isoBandNextOBR[152]=1;isoBandNextXBL[152]=-1;isoBandNextYBL[152]=0;isoBandNextOBL[152]=0;isoBandNextXLB[152]=0;isoBandNextYLB[152]=-1;isoBandNextOLB[152]=0;isoBandNextXLT[152]=0;isoBandNextYLT[152]=-1;isoBandNextOLT[152]=1;isoBandNextXTR[152]=1;isoBandNextYTR[152]=0;isoBandNextOTR[152]=1;isoBandNextXRT[156]=0;isoBandNextYRT[156]=-1;isoBandNextORT[156]=1;isoBandNextXBR[156]=1;isoBandNextYBR[156]=0;isoBandNextOBR[156]=1;isoBandNextXBL[156]=-1;isoBandNextYBL[156]=0;isoBandNextOBL[156]=0;isoBandNextXLB[156]=0;isoBandNextYLB[156]=-1;isoBandNextOLB[156]=0;isoBandNextXLT[156]=0;isoBandNextYLT[156]=1;isoBandNextOLT[156]=1;isoBandNextXTR[156]=-1;isoBandNextYTR[156]=0;isoBandNextOTR[156]=1;isoBandNextXRT[137]=0;isoBandNextYRT[137]=1;isoBandNextORT[137]=1;isoBandNextXRB[137]=0;isoBandNextYRB[137]=1;isoBandNextORB[137]=0;isoBandNextXBL[137]=-1;isoBandNextYBL[137]=0;isoBandNextOBL[137]=0;isoBandNextXLB[137]=0;isoBandNextYLB[137]=-1;isoBandNextOLB[137]=0;isoBandNextXTL[137]=1;isoBandNextYTL[137]=0;isoBandNextOTL[137]=0;isoBandNextXTR[137]=1;isoBandNextYTR[137]=0;isoBandNextOTR[137]=1;isoBandNextXRT[139]=0;isoBandNextYRT[139]=1;isoBandNextORT[139]=1;isoBandNextXRB[139]=0;isoBandNextYRB[139]=-1;isoBandNextORB[139]=0;isoBandNextXBL[139]=1;isoBandNextYBL[139]=0;isoBandNextOBL[139]=0;isoBandNextXLB[139]=0;isoBandNextYLB[139]=1;isoBandNextOLB[139]=0;isoBandNextXTL[139]=-1;isoBandNextYTL[139]=0;isoBandNextOTL[139]=0;isoBandNextXTR[139]=1;isoBandNextYTR[139]=0;isoBandNextOTR[139]=1;isoBandNextXRT[98]=0;isoBandNextYRT[98]=-1;isoBandNextORT[98]=0;isoBandNextXRB[98]=0;isoBandNextYRB[98]=-1;isoBandNextORB[98]=1;isoBandNextXBR[98]=1;isoBandNextYBR[98]=0;isoBandNextOBR[98]=0;isoBandNextXBL[98]=1;isoBandNextYBL[98]=0;isoBandNextOBL[98]=1;isoBandNextXLT[98]=0;isoBandNextYLT[98]=1;isoBandNextOLT[98]=0;isoBandNextXTL[98]=-1;isoBandNextYTL[98]=0;isoBandNextOTL[98]=1;isoBandNextXRT[99]=0;isoBandNextYRT[99]=1;isoBandNextORT[99]=0;isoBandNextXRB[99]=0;isoBandNextYRB[99]=-1;isoBandNextORB[99]=1;isoBandNextXBR[99]=1;isoBandNextYBR[99]=0;isoBandNextOBR[99]=0;isoBandNextXBL[99]=-1;isoBandNextYBL[99]=0;isoBandNextOBL[99]=1;isoBandNextXLT[99]=0;isoBandNextYLT[99]=-1;isoBandNextOLT[99]=0;isoBandNextXTL[99]=1;isoBandNextYTL[99]=0;isoBandNextOTL[99]=1;isoBandNextXRB[38]=0;isoBandNextYRB[38]=-1;isoBandNextORB[38]=1;isoBandNextXBR[38]=1;isoBandNextYBR[38]=0;isoBandNextOBR[38]=0;isoBandNextXLB[38]=0;isoBandNextYLB[38]=1;isoBandNextOLB[38]=1;isoBandNextXLT[38]=0;isoBandNextYLT[38]=1;isoBandNextOLT[38]=0;isoBandNextXTL[38]=-1;isoBandNextYTL[38]=0;isoBandNextOTL[38]=1;isoBandNextXTR[38]=-1;isoBandNextYTR[38]=0;isoBandNextOTR[38]=0;isoBandNextXRB[39]=0;isoBandNextYRB[39]=1;isoBandNextORB[39]=1;isoBandNextXBR[39]=-1;isoBandNextYBR[39]=0;isoBandNextOBR[39]=0;isoBandNextXLB[39]=0;isoBandNextYLB[39]=-1;isoBandNextOLB[39]=1;isoBandNextXLT[39]=0;isoBandNextYLT[39]=1;isoBandNextOLT[39]=0;isoBandNextXTL[39]=-1;isoBandNextYTL[39]=0;isoBandNextOTL[39]=1;isoBandNextXTR[39]=1;isoBandNextYTR[39]=0;isoBandNextOTR[39]=0;var p00=function(cell){return[[cell.bottomleft,0],[0,0],[0,cell.leftbottom]]},p01=function(cell){return[[1,cell.rightbottom],[1,0],[cell.bottomright,0]]},p02=function(cell){return[[cell.topright,1],[1,1],[1,cell.righttop]]},p03=function(cell){return[[0,cell.lefttop],[0,1],[cell.topleft,1]]},p04=function(cell){return[[cell.bottomright,0],[cell.bottomleft,0],[0,cell.leftbottom],[0,cell.lefttop]]},p05=function(cell){return[[cell.bottomright,0],[cell.bottomleft,0],[1,cell.righttop],[1,cell.rightbottom]]},p06=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[cell.topleft,1],[cell.topright,1]]},p07=function(cell){return[[0,cell.leftbottom],[0,cell.lefttop],[cell.topleft,1],[cell.topright,1]]},p08=function(cell){return[[0,0],[0,cell.leftbottom],[1,cell.rightbottom],[1,0]]},p09=function(cell){return[[1,0],[cell.bottomright,0],[cell.topright,1],[1,1]]},p10=function(cell){return[[1,1],[1,cell.righttop],[0,cell.lefttop],[0,1]]},p11=function(cell){return[[cell.bottomleft,0],[0,0],[0,1],[cell.topleft,1]]},p12=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[0,cell.leftbottom],[0,cell.lefttop]]},p13=function(cell){return[[cell.topleft,1],[cell.topright,1],[cell.bottomright,0],[cell.bottomleft,0]]},p14=function(){return[[0,0],[0,1],[1,1],[1,0]]},p15=function(cell){return[[1,cell.rightbottom],[1,0],[0,0],[0,1],[cell.topleft,1]]},p16=function(cell){return[[cell.topright,1],[1,1],[1,0],[0,0],[0,cell.leftbottom]]},p17=function(cell){return[[1,0],[cell.bottomright,0],[0,cell.lefttop],[0,1],[1,1]]},p18=function(cell){return[[1,1],[1,cell.righttop],[cell.bottomleft,0],[0,0],[0,1]]},p19=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[0,cell.lefttop],[0,1],[cell.topleft,1]]},p20=function(cell){return[[1,1],[1,cell.righttop],[cell.bottomright,0],[cell.bottomleft,0],[cell.topright,1]]},p21=function(cell){return[[1,cell.rightbottom],[1,0],[cell.bottomright,0],[0,cell.leftbottom],[0,cell.lefttop]]},p22=function(cell){return[[cell.topright,1],[cell.bottomleft,0],[0,0],[0,cell.leftbottom],[cell.topleft,1]]},p23=function(cell){return[[cell.bottomright,0],[cell.bottomleft,0],[0,cell.lefttop],[0,1],[cell.topleft,1]]},p24=function(cell){return[[1,1],[1,cell.righttop],[0,cell.leftbottom],[0,cell.lefttop],[cell.topright,1]]},p25=function(cell){return[[1,cell.rightbottom],[1,0],[cell.bottomright,0],[cell.topleft,1],[cell.topright,1]]},p26=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[cell.bottomleft,0],[0,0],[0,cell.leftbottom]]},p27=function(cell){return[[1,cell.rightbottom],[1,0],[0,0],[0,cell.leftbottom],[cell.topleft,1],[cell.topright,1]]},p28=function(cell){return[[1,1],[1,0],[cell.bottomright,0],[0,cell.leftbottom],[0,cell.lefttop],[cell.topright,1]]},p29=function(cell){return[[1,1],[1,cell.righttop],[cell.bottomright,0],[cell.bottomleft,0],[0,cell.lefttop],[0,1]]},p30=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[cell.bottomleft,0],[0,0],[0,1],[cell.topleft,1]]},p31=function(cell){return[[1,1],[1,cell.righttop],[cell.bottomleft,0],[0,0],[0,cell.leftbottom],[cell.topright,1]]},p32=function(cell){return[[1,cell.rightbottom],[1,0],[cell.bottomright,0],[0,cell.lefttop],[0,1],[cell.topleft,1]]},p33=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[cell.bottomright,0],[cell.bottomleft,0],[0,cell.leftbottom],[0,cell.lefttop],[cell.topleft,1],[cell.topright,1]]},p34=function(cell){return[[1,1],[1,cell.righttop],[cell.bottomleft,0],[0,0],[0,cell.leftbottom],[cell.topright,1]]},p35=function(cell){return[[1,cell.rightbottom],[1,0],[cell.bottomright,0],[0,cell.lefttop],[0,1],[cell.topleft,1]]},p36=function(cell){return[[1,1],[1,cell.righttop],[cell.bottomright,0],[cell.bottomleft,0],[0,cell.leftbottom],[0,cell.lefttop],[cell.topright,1]]},p37=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[cell.bottomleft,0],[0,0],[0,cell.leftbottom],[cell.topleft,1],[cell.topright,1]]},p38=function(cell){return[[1,cell.righttop],[1,cell.rightbottom],[cell.bottomright,0],[cell.bottomleft,0],[0,cell.lefttop],[0,1],[cell.topleft,1]]},p39=function(cell){return[[1,cell.rightbottom],[1,0],[cell.bottomright,0],[0,cell.leftbottom],[0,cell.lefttop],[cell.topleft,1],[cell.topright,1]]},isoBandEdgeRT=[],isoBandEdgeRB=[],isoBandEdgeBR=[],isoBandEdgeBL=[],isoBandEdgeLB=[],isoBandEdgeLT=[],isoBandEdgeTL=[],isoBandEdgeTR=[];isoBandEdgeBL[1]=isoBandEdgeLB[1]=18;isoBandEdgeBL[169]=isoBandEdgeLB[169]=18;isoBandEdgeBR[4]=isoBandEdgeRB[4]=12;isoBandEdgeBR[166]=isoBandEdgeRB[166]=12;isoBandEdgeRT[16]=isoBandEdgeTR[16]=4;isoBandEdgeRT[154]=isoBandEdgeTR[154]=4;isoBandEdgeLT[64]=isoBandEdgeTL[64]=22;isoBandEdgeLT[106]=isoBandEdgeTL[106]=22;isoBandEdgeBR[2]=isoBandEdgeLT[2]=17;isoBandEdgeBL[2]=isoBandEdgeLB[2]=18;isoBandEdgeBR[168]=isoBandEdgeLT[168]=17;isoBandEdgeBL[168]=isoBandEdgeLB[168]=18;isoBandEdgeRT[8]=isoBandEdgeBL[8]=9;isoBandEdgeRB[8]=isoBandEdgeBR[8]=12;isoBandEdgeRT[162]=isoBandEdgeBL[162]=9;isoBandEdgeRB[162]=isoBandEdgeBR[162]=12;isoBandEdgeRT[32]=isoBandEdgeTR[32]=4;isoBandEdgeRB[32]=isoBandEdgeTL[32]=1;isoBandEdgeRT[138]=isoBandEdgeTR[138]=4;isoBandEdgeRB[138]=isoBandEdgeTL[138]=1;isoBandEdgeLB[128]=isoBandEdgeTR[128]=21;isoBandEdgeLT[128]=isoBandEdgeTL[128]=22;isoBandEdgeLB[42]=isoBandEdgeTR[42]=21;isoBandEdgeLT[42]=isoBandEdgeTL[42]=22;isoBandEdgeRB[5]=isoBandEdgeLB[5]=14;isoBandEdgeRB[165]=isoBandEdgeLB[165]=14;isoBandEdgeBR[20]=isoBandEdgeTR[20]=6;isoBandEdgeBR[150]=isoBandEdgeTR[150]=6;isoBandEdgeRT[80]=isoBandEdgeLT[80]=11;isoBandEdgeRT[90]=isoBandEdgeLT[90]=11;isoBandEdgeBL[65]=isoBandEdgeTL[65]=3;isoBandEdgeBL[105]=isoBandEdgeTL[105]=3;isoBandEdgeRT[160]=isoBandEdgeLT[160]=11;isoBandEdgeRB[160]=isoBandEdgeLB[160]=14;isoBandEdgeRT[10]=isoBandEdgeLT[10]=11;isoBandEdgeRB[10]=isoBandEdgeLB[10]=14;isoBandEdgeBR[130]=isoBandEdgeTR[130]=6;isoBandEdgeBL[130]=isoBandEdgeTL[130]=3;isoBandEdgeBR[40]=isoBandEdgeTR[40]=6;isoBandEdgeBL[40]=isoBandEdgeTL[40]=3;isoBandEdgeRB[101]=isoBandEdgeTL[101]=1;isoBandEdgeRB[69]=isoBandEdgeTL[69]=1;isoBandEdgeLB[149]=isoBandEdgeTR[149]=21;isoBandEdgeLB[21]=isoBandEdgeTR[21]=21;isoBandEdgeBR[86]=isoBandEdgeLT[86]=17;isoBandEdgeBR[84]=isoBandEdgeLT[84]=17;isoBandEdgeRT[89]=isoBandEdgeBL[89]=9;isoBandEdgeRT[81]=isoBandEdgeBL[81]=9;isoBandEdgeRT[96]=isoBandEdgeTL[96]=0;isoBandEdgeRB[96]=isoBandEdgeLT[96]=15;isoBandEdgeRT[74]=isoBandEdgeTL[74]=0;isoBandEdgeRB[74]=isoBandEdgeLT[74]=15;isoBandEdgeRT[24]=isoBandEdgeBR[24]=8;isoBandEdgeBL[24]=isoBandEdgeTR[24]=7;isoBandEdgeRT[146]=isoBandEdgeBR[146]=8;isoBandEdgeBL[146]=isoBandEdgeTR[146]=7;isoBandEdgeRB[6]=isoBandEdgeLT[6]=15;isoBandEdgeBR[6]=isoBandEdgeLB[6]=16;isoBandEdgeRB[164]=isoBandEdgeLT[164]=15;isoBandEdgeBR[164]=isoBandEdgeLB[164]=16;isoBandEdgeBL[129]=isoBandEdgeTR[129]=7;isoBandEdgeLB[129]=isoBandEdgeTL[129]=20;isoBandEdgeBL[41]=isoBandEdgeTR[41]=7;isoBandEdgeLB[41]=isoBandEdgeTL[41]=20;isoBandEdgeBR[66]=isoBandEdgeTL[66]=2;isoBandEdgeBL[66]=isoBandEdgeLT[66]=19;isoBandEdgeBR[104]=isoBandEdgeTL[104]=2;isoBandEdgeBL[104]=isoBandEdgeLT[104]=19;isoBandEdgeRT[144]=isoBandEdgeLB[144]=10;isoBandEdgeLT[144]=isoBandEdgeTR[144]=23;isoBandEdgeRT[26]=isoBandEdgeLB[26]=10;isoBandEdgeLT[26]=isoBandEdgeTR[26]=23;isoBandEdgeRB[36]=isoBandEdgeTR[36]=5;isoBandEdgeBR[36]=isoBandEdgeTL[36]=2;isoBandEdgeRB[134]=isoBandEdgeTR[134]=5;isoBandEdgeBR[134]=isoBandEdgeTL[134]=2;isoBandEdgeRT[9]=isoBandEdgeLB[9]=10;isoBandEdgeRB[9]=isoBandEdgeBL[9]=13;isoBandEdgeRT[161]=isoBandEdgeLB[161]=10;isoBandEdgeRB[161]=isoBandEdgeBL[161]=13;isoBandEdgeRB[37]=isoBandEdgeTR[37]=5;isoBandEdgeLB[37]=isoBandEdgeTL[37]=20;isoBandEdgeRB[133]=isoBandEdgeTR[133]=5;isoBandEdgeLB[133]=isoBandEdgeTL[133]=20;isoBandEdgeBR[148]=isoBandEdgeLB[148]=16;isoBandEdgeLT[148]=isoBandEdgeTR[148]=23;isoBandEdgeBR[22]=isoBandEdgeLB[22]=16;isoBandEdgeLT[22]=isoBandEdgeTR[22]=23;isoBandEdgeRT[82]=isoBandEdgeBR[82]=8;isoBandEdgeBL[82]=isoBandEdgeLT[82]=19;isoBandEdgeRT[88]=isoBandEdgeBR[88]=8;isoBandEdgeBL[88]=isoBandEdgeLT[88]=19;isoBandEdgeRT[73]=isoBandEdgeTL[73]=0;isoBandEdgeRB[73]=isoBandEdgeBL[73]=13;isoBandEdgeRT[97]=isoBandEdgeTL[97]=0;isoBandEdgeRB[97]=isoBandEdgeBL[97]=13;isoBandEdgeRT[145]=isoBandEdgeBL[145]=9;isoBandEdgeLB[145]=isoBandEdgeTR[145]=21;isoBandEdgeRT[25]=isoBandEdgeBL[25]=9;isoBandEdgeLB[25]=isoBandEdgeTR[25]=21;isoBandEdgeRB[70]=isoBandEdgeTL[70]=1;isoBandEdgeBR[70]=isoBandEdgeLT[70]=17;isoBandEdgeRB[100]=isoBandEdgeTL[100]=1;isoBandEdgeBR[100]=isoBandEdgeLT[100]=17;isoBandEdgeRT[34]=isoBandEdgeBL[34]=9;isoBandEdgeRB[34]=isoBandEdgeBR[34]=12;isoBandEdgeLB[34]=isoBandEdgeTR[34]=21;isoBandEdgeLT[34]=isoBandEdgeTL[34]=22;isoBandEdgeRT[136]=isoBandEdgeTR[136]=4;isoBandEdgeRB[136]=isoBandEdgeTL[136]=1;isoBandEdgeBR[136]=isoBandEdgeLT[136]=17;isoBandEdgeBL[136]=isoBandEdgeLB[136]=18;isoBandEdgeRT[35]=isoBandEdgeTR[35]=4;isoBandEdgeRB[35]=isoBandEdgeBR[35]=12;isoBandEdgeBL[35]=isoBandEdgeLB[35]=18;isoBandEdgeLT[35]=isoBandEdgeTL[35]=22;isoBandEdgeRT[153]=isoBandEdgeTR[153]=4;isoBandEdgeBL[153]=isoBandEdgeLB[153]=18;isoBandEdgeRB[102]=isoBandEdgeBR[102]=12;isoBandEdgeLT[102]=isoBandEdgeTL[102]=22;isoBandEdgeRT[155]=isoBandEdgeBL[155]=9;isoBandEdgeLB[155]=isoBandEdgeTR[155]=23;isoBandEdgeRB[103]=isoBandEdgeTL[103]=1;isoBandEdgeBR[103]=isoBandEdgeLT[103]=17;isoBandEdgeRT[152]=isoBandEdgeTR[152]=4;isoBandEdgeBR[152]=isoBandEdgeLT[152]=17;isoBandEdgeBL[152]=isoBandEdgeLB[152]=18;isoBandEdgeRT[156]=isoBandEdgeBR[156]=8;isoBandEdgeBL[156]=isoBandEdgeLB[156]=18;isoBandEdgeLT[156]=isoBandEdgeTR[156]=23;isoBandEdgeRT[137]=isoBandEdgeTR[137]=4;isoBandEdgeRB[137]=isoBandEdgeTL[137]=1;isoBandEdgeBL[137]=isoBandEdgeLB[137]=18;isoBandEdgeRT[139]=isoBandEdgeTR[139]=4;isoBandEdgeRB[139]=isoBandEdgeBL[139]=13;isoBandEdgeLB[139]=isoBandEdgeTL[139]=20;isoBandEdgeRT[98]=isoBandEdgeBL[98]=9;isoBandEdgeRB[98]=isoBandEdgeBR[98]=12;isoBandEdgeLT[98]=isoBandEdgeTL[98]=22;isoBandEdgeRT[99]=isoBandEdgeTL[99]=0;isoBandEdgeRB[99]=isoBandEdgeBR[99]=12;isoBandEdgeBL[99]=isoBandEdgeLT[99]=19;isoBandEdgeRB[38]=isoBandEdgeBR[38]=12;isoBandEdgeLB[38]=isoBandEdgeTR[38]=21;isoBandEdgeLT[38]=isoBandEdgeTL[38]=22;isoBandEdgeRB[39]=isoBandEdgeTR[39]=5;isoBandEdgeBR[39]=isoBandEdgeLB[39]=16;isoBandEdgeLT[39]=isoBandEdgeTL[39]=22;var polygon_table=[];polygon_table[1]=polygon_table[169]=p00;polygon_table[4]=polygon_table[166]=p01;polygon_table[16]=polygon_table[154]=p02;polygon_table[64]=polygon_table[106]=p03;polygon_table[168]=polygon_table[2]=p04;polygon_table[162]=polygon_table[8]=p05;polygon_table[138]=polygon_table[32]=p06;polygon_table[42]=polygon_table[128]=p07;polygon_table[5]=polygon_table[165]=p08;polygon_table[20]=polygon_table[150]=p09;polygon_table[80]=polygon_table[90]=p10;polygon_table[65]=polygon_table[105]=p11;polygon_table[160]=polygon_table[10]=p12;polygon_table[130]=polygon_table[40]=p13;polygon_table[85]=p14;polygon_table[101]=polygon_table[69]=p15;polygon_table[149]=polygon_table[21]=p16;polygon_table[86]=polygon_table[84]=p17;polygon_table[89]=polygon_table[81]=p18;polygon_table[96]=polygon_table[74]=p19;polygon_table[24]=polygon_table[146]=p20;polygon_table[6]=polygon_table[164]=p21;polygon_table[129]=polygon_table[41]=p22;polygon_table[66]=polygon_table[104]=p23;polygon_table[144]=polygon_table[26]=p24;polygon_table[36]=polygon_table[134]=p25;polygon_table[9]=polygon_table[161]=p26;polygon_table[37]=polygon_table[133]=p27;polygon_table[148]=polygon_table[22]=p28;polygon_table[82]=polygon_table[88]=p29;polygon_table[73]=polygon_table[97]=p30;polygon_table[145]=polygon_table[25]=p31;polygon_table[70]=polygon_table[100]=p32;polygon_table[34]=function(c){return[p07(c),p05(c)]};polygon_table[35]=p33;polygon_table[136]=function(c){return[p06(c),p04(c)]};polygon_table[153]=function(c){return[p02(c),p00(c)]};polygon_table[102]=function(c){return[p01(c),p03(c)]};polygon_table[155]=p34;polygon_table[103]=p35;polygon_table[152]=function(c){return[p02(c),p04(c)]};polygon_table[156]=p36;polygon_table[137]=function(c){return[p06(c),p00(c)]};polygon_table[139]=p37;polygon_table[98]=function(c){return[p05(c),p03(c)]};polygon_table[99]=p38;polygon_table[38]=function(c){return[p01(c),p07(c)]};polygon_table[39]=p39;function mathSign(x2){return(x2>0)-(x2<0)||+x2}function orientationIndex(p1,p2,q){var dx1=p2[0]-p1[0],dy1=p2[1]-p1[1],dx2=q[0]-p2[0],dy2=q[1]-p2[1];return mathSign(dx1*dy2-dx2*dy1)}function envelopeIsEqual(env1,env2){var envX1=env1.geometry.coordinates[0].map(function(c){return c[0]}),envY1=env1.geometry.coordinates[0].map(function(c){return c[1]}),envX2=env2.geometry.coordinates[0].map(function(c){return c[0]}),envY2=env2.geometry.coordinates[0].map(function(c){return c[1]});return Math.max.apply(null,envX1)===Math.max.apply(null,envX2)&&Math.max.apply(null,envY1)===Math.max.apply(null,envY2)&&Math.min.apply(null,envX1)===Math.min.apply(null,envX2)&&Math.min.apply(null,envY1)===Math.min.apply(null,envY2)}function envelopeContains(self2,env){return env.geometry.coordinates[0].every(function(c){return booleanPointInPolygon(point(c),self2)})}function coordinatesEqual(coord1,coord2){return coord1[0]===coord2[0]&&coord1[1]===coord2[1]}var Node=function(){function Node4(coordinates){this.id=Node4.buildId(coordinates),this.coordinates=coordinates,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return Node4.buildId=function(coordinates){return coordinates.join(",")},Node4.prototype.removeInnerEdge=function(edge){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==edge.from.id})},Node4.prototype.removeOuterEdge=function(edge){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==edge.to.id})},Node4.prototype.addOuterEdge=function(edge){this.outerEdges.push(edge),this.outerEdgesSorted=!1},Node4.prototype.sortOuterEdges=function(){var _this=this;this.outerEdgesSorted||(this.outerEdges.sort(function(a,b){var aNode=a.to,bNode=b.to;if(aNode.coordinates[0]-_this.coordinates[0]>=0&&bNode.coordinates[0]-_this.coordinates[0]<0)return 1;if(aNode.coordinates[0]-_this.coordinates[0]<0&&bNode.coordinates[0]-_this.coordinates[0]>=0)return-1;if(aNode.coordinates[0]-_this.coordinates[0]===0&&bNode.coordinates[0]-_this.coordinates[0]===0)return aNode.coordinates[1]-_this.coordinates[1]>=0||bNode.coordinates[1]-_this.coordinates[1]>=0?aNode.coordinates[1]-bNode.coordinates[1]:bNode.coordinates[1]-aNode.coordinates[1];var det2=orientationIndex(_this.coordinates,aNode.coordinates,bNode.coordinates);if(det2<0)return 1;if(det2>0)return-1;var d1=Math.pow(aNode.coordinates[0]-_this.coordinates[0],2)+Math.pow(aNode.coordinates[1]-_this.coordinates[1],2),d2=Math.pow(bNode.coordinates[0]-_this.coordinates[0],2)+Math.pow(bNode.coordinates[1]-_this.coordinates[1],2);return d1-d2}),this.outerEdgesSorted=!0)},Node4.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Node4.prototype.getOuterEdge=function(i){return this.sortOuterEdges(),this.outerEdges[i]},Node4.prototype.addInnerEdge=function(edge){this.innerEdges.push(edge)},Node4}(),Node_default=Node;var Edge=function(){function Edge3(from,to){this.from=from,this.to=to,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return Edge3.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Edge3(this.to,this.from),this.symetric.symetric=this),this.symetric},Edge3.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Edge3.prototype.isEqual=function(edge){return this.from.id===edge.from.id&&this.to.id===edge.to.id},Edge3.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Edge3.prototype.toLineString=function(){return lineString([this.from.coordinates,this.to.coordinates])},Edge3.prototype.compareTo=function(edge){return orientationIndex(edge.from.coordinates,edge.to.coordinates,this.to.coordinates)},Edge3}(),Edge_default=Edge;var EdgeRing=function(){function EdgeRing4(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return EdgeRing4.prototype.push=function(edge){this.edges.push(edge),this.polygon=this.envelope=void 0},EdgeRing4.prototype.get=function(i){return this.edges[i]},Object.defineProperty(EdgeRing4.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),EdgeRing4.prototype.forEach=function(f){this.edges.forEach(f)},EdgeRing4.prototype.map=function(f){return this.edges.map(f)},EdgeRing4.prototype.some=function(f){return this.edges.some(f)},EdgeRing4.prototype.isValid=function(){return!0},EdgeRing4.prototype.isHole=function(){var _this=this,hiIndex=this.edges.reduce(function(high,edge,i){return edge.from.coordinates[1]>_this.edges[high].from.coordinates[1]&&(high=i),high},0),iPrev=(hiIndex===0?this.length:hiIndex)-1,iNext=(hiIndex+1)%this.length,disc=orientationIndex(this.edges[iPrev].from.coordinates,this.edges[hiIndex].from.coordinates,this.edges[iNext].from.coordinates);return disc===0?this.edges[iPrev].from.coordinates[0]>this.edges[iNext].from.coordinates[0]:disc>0},EdgeRing4.prototype.toMultiPoint=function(){return multiPoint(this.edges.map(function(edge){return edge.from.coordinates}))},EdgeRing4.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var coordinates=this.edges.map(function(edge){return edge.from.coordinates});return coordinates.push(this.edges[0].from.coordinates),this.polygon=polygon([coordinates])},EdgeRing4.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=es_default5(this.toPolygon())},EdgeRing4.findEdgeRingContaining=function(testEdgeRing,shellList){var testEnvelope=testEdgeRing.getEnvelope(),minEnvelope,minShell;return shellList.forEach(function(shell){var tryEnvelope=shell.getEnvelope();if(minShell&&(minEnvelope=minShell.getEnvelope()),!envelopeIsEqual(tryEnvelope,testEnvelope)&&envelopeContains(tryEnvelope,testEnvelope)){for(var testEdgeRingCoordinates=testEdgeRing.map(function(edge){return edge.from.coordinates}),testPoint=void 0,_loop_1=function(pt2){shell.some(function(edge){return coordinatesEqual(pt2,edge.from.coordinates)})||(testPoint=pt2)},_i=0,testEdgeRingCoordinates_1=testEdgeRingCoordinates;_i<testEdgeRingCoordinates_1.length;_i++){var pt=testEdgeRingCoordinates_1[_i];_loop_1(pt)}testPoint&&shell.inside(point(testPoint))&&(!minShell||envelopeContains(minEnvelope,tryEnvelope))&&(minShell=shell)}}),minShell},EdgeRing4.prototype.inside=function(pt){return booleanPointInPolygon(pt,this.toPolygon())},EdgeRing4}(),EdgeRing_default=EdgeRing;function validateGeoJson(geoJson){if(!geoJson)throw new Error("No geojson passed");if(geoJson.type!=="FeatureCollection"&&geoJson.type!=="GeometryCollection"&&geoJson.type!=="MultiLineString"&&geoJson.type!=="LineString"&&geoJson.type!=="Feature")throw new Error("Invalid input type '"+geoJson.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var Graph=function(){function Graph3(){this.edges=[],this.nodes={}}return Graph3.fromGeoJson=function(geoJson){validateGeoJson(geoJson);var graph=new Graph3;return flattenEach(geoJson,function(feature2){featureOf(feature2,"LineString","Graph::fromGeoJson"),coordReduce(feature2,function(prev,cur){if(prev){var start=graph.getNode(prev),end=graph.getNode(cur);graph.addEdge(start,end)}return cur})}),graph},Graph3.prototype.getNode=function(coordinates){var id=Node_default.buildId(coordinates),node=this.nodes[id];return node||(node=this.nodes[id]=new Node_default(coordinates)),node},Graph3.prototype.addEdge=function(from,to){var edge=new Edge_default(from,to),symetricEdge=edge.getSymetric();this.edges.push(edge),this.edges.push(symetricEdge)},Graph3.prototype.deleteDangles=function(){var _this=this;Object.keys(this.nodes).map(function(id){return _this.nodes[id]}).forEach(function(node){return _this._removeIfDangle(node)})},Graph3.prototype._removeIfDangle=function(node){var _this=this;if(node.innerEdges.length<=1){var outerNodes=node.getOuterEdges().map(function(e){return e.to});this.removeNode(node),outerNodes.forEach(function(n){return _this._removeIfDangle(n)})}},Graph3.prototype.deleteCutEdges=function(){var _this=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(edge){edge.label===edge.symetric.label&&(_this.removeEdge(edge.symetric),_this.removeEdge(edge))})},Graph3.prototype._computeNextCWEdges=function(node){var _this=this;typeof node>"u"?Object.keys(this.nodes).forEach(function(id){return _this._computeNextCWEdges(_this.nodes[id])}):node.getOuterEdges().forEach(function(edge,i){node.getOuterEdge((i===0?node.getOuterEdges().length:i)-1).symetric.next=edge})},Graph3.prototype._computeNextCCWEdges=function(node,label){for(var edges2=node.getOuterEdges(),firstOutDE,prevInDE,i=edges2.length-1;i>=0;--i){var de=edges2[i],sym=de.symetric,outDE=void 0,inDE=void 0;de.label===label&&(outDE=de),sym.label===label&&(inDE=sym),!(!outDE||!inDE)&&(inDE&&(prevInDE=inDE),outDE&&(prevInDE&&(prevInDE.next=outDE,prevInDE=void 0),firstOutDE||(firstOutDE=outDE)))}prevInDE&&(prevInDE.next=firstOutDE)},Graph3.prototype._findLabeledEdgeRings=function(){var edgeRingStarts=[],label=0;return this.edges.forEach(function(edge){if(!(edge.label>=0)){edgeRingStarts.push(edge);var e=edge;do e.label=label,e=e.next;while(!edge.isEqual(e));label++}}),edgeRingStarts},Graph3.prototype.getEdgeRings=function(){var _this=this;this._computeNextCWEdges(),this.edges.forEach(function(edge){edge.label=void 0}),this._findLabeledEdgeRings().forEach(function(edge){_this._findIntersectionNodes(edge).forEach(function(node){_this._computeNextCCWEdges(node,edge.label)})});var edgeRingList=[];return this.edges.forEach(function(edge){edge.ring||edgeRingList.push(_this._findEdgeRing(edge))}),edgeRingList},Graph3.prototype._findIntersectionNodes=function(startEdge){var intersectionNodes=[],edge=startEdge,_loop_1=function(){var degree=0;edge.from.getOuterEdges().forEach(function(e){e.label===startEdge.label&&++degree}),degree>1&&intersectionNodes.push(edge.from),edge=edge.next};do _loop_1();while(!startEdge.isEqual(edge));return intersectionNodes},Graph3.prototype._findEdgeRing=function(startEdge){var edge=startEdge,edgeRing=new EdgeRing_default;do edgeRing.push(edge),edge.ring=edgeRing,edge=edge.next;while(!startEdge.isEqual(edge));return edgeRing},Graph3.prototype.removeNode=function(node){var _this=this;node.getOuterEdges().forEach(function(edge){return _this.removeEdge(edge)}),node.innerEdges.forEach(function(edge){return _this.removeEdge(edge)}),delete this.nodes[node.id]},Graph3.prototype.removeEdge=function(edge){this.edges=this.edges.filter(function(e){return!e.isEqual(edge)}),edge.deleteEdge()},Graph3}();var import_geojson_equality=__toESM(require_geojson_equality(),1);var import_geojson_equality2=__toESM(require_geojson_equality(),1);var import_density_clustering=__toESM(require_lib(),1);var import_skmeans=__toESM(require_main(),1);function pathTo(node){for(var curr=node,path=[];curr.parent;)path.unshift(curr),curr=curr.parent;return path}function getHeap(){return new BinaryHeap(function(node){return node.f})}var astar={search:function(graph,start,end,options){graph.cleanDirty(),options=options||{};var heuristic=options.heuristic||astar.heuristics.manhattan,closest=options.closest||!1,openHeap=getHeap(),closestNode=start;for(start.h=heuristic(start,end),openHeap.push(start);openHeap.size()>0;){var currentNode=openHeap.pop();if(currentNode===end)return pathTo(currentNode);currentNode.closed=!0;for(var neighbors=graph.neighbors(currentNode),i=0,il=neighbors.length;i<il;++i){var neighbor=neighbors[i];if(!(neighbor.closed||neighbor.isWall())){var gScore=currentNode.g+neighbor.getCost(currentNode),beenVisited=neighbor.visited;(!beenVisited||gScore<neighbor.g)&&(neighbor.visited=!0,neighbor.parent=currentNode,neighbor.h=neighbor.h||heuristic(neighbor,end),neighbor.g=gScore,neighbor.f=neighbor.g+neighbor.h,graph.markDirty(neighbor),closest&&(neighbor.h<closestNode.h||neighbor.h===closestNode.h&&neighbor.g<closestNode.g)&&(closestNode=neighbor),beenVisited?openHeap.rescoreElement(neighbor):openHeap.push(neighbor))}}}return closest?pathTo(closestNode):[]},heuristics:{manhattan:function(pos0,pos1){var d1=Math.abs(pos1.x-pos0.x),d2=Math.abs(pos1.y-pos0.y);return d1+d2},diagonal:function(pos0,pos1){var D=1,D2=Math.sqrt(2),d1=Math.abs(pos1.x-pos0.x),d2=Math.abs(pos1.y-pos0.y);return D*(d1+d2)+(D2-2*D)*Math.min(d1,d2)}},cleanNode:function(node){node.f=0,node.g=0,node.h=0,node.visited=!1,node.closed=!1,node.parent=null}};function Graph2(gridIn,options){options=options||{},this.nodes=[],this.diagonal=!!options.diagonal,this.grid=[];for(var x2=0;x2<gridIn.length;x2++){this.grid[x2]=[];for(var y2=0,row=gridIn[x2];y2<row.length;y2++){var node=new GridNode(x2,y2,row[y2]);this.grid[x2][y2]=node,this.nodes.push(node)}}this.init()}Graph2.prototype.init=function(){this.dirtyNodes=[];for(var i=0;i<this.nodes.length;i++)astar.cleanNode(this.nodes[i])};Graph2.prototype.cleanDirty=function(){for(var i=0;i<this.dirtyNodes.length;i++)astar.cleanNode(this.dirtyNodes[i]);this.dirtyNodes=[]};Graph2.prototype.markDirty=function(node){this.dirtyNodes.push(node)};Graph2.prototype.neighbors=function(node){var ret=[],x2=node.x,y2=node.y,grid=this.grid;return grid[x2-1]&&grid[x2-1][y2]&&ret.push(grid[x2-1][y2]),grid[x2+1]&&grid[x2+1][y2]&&ret.push(grid[x2+1][y2]),grid[x2]&&grid[x2][y2-1]&&ret.push(grid[x2][y2-1]),grid[x2]&&grid[x2][y2+1]&&ret.push(grid[x2][y2+1]),this.diagonal&&(grid[x2-1]&&grid[x2-1][y2-1]&&ret.push(grid[x2-1][y2-1]),grid[x2+1]&&grid[x2+1][y2-1]&&ret.push(grid[x2+1][y2-1]),grid[x2-1]&&grid[x2-1][y2+1]&&ret.push(grid[x2-1][y2+1]),grid[x2+1]&&grid[x2+1][y2+1]&&ret.push(grid[x2+1][y2+1])),ret};Graph2.prototype.toString=function(){for(var graphString=[],nodes=this.grid,rowDebug,row,y2,l,x2=0,len=nodes.length;x2<len;x2++){for(rowDebug=[],row=nodes[x2],y2=0,l=row.length;y2<l;y2++)rowDebug.push(row[y2].weight);graphString.push(rowDebug.join(" "))}return graphString.join(`
`)};function GridNode(x2,y2,weight){this.x=x2,this.y=y2,this.weight=weight}GridNode.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};GridNode.prototype.getCost=function(fromNeighbor){return fromNeighbor&&fromNeighbor.x!==this.x&&fromNeighbor.y!==this.y?this.weight*1.41421:this.weight};GridNode.prototype.isWall=function(){return this.weight===0};function BinaryHeap(scoreFunction){this.content=[],this.scoreFunction=scoreFunction}BinaryHeap.prototype={push:function(element){this.content.push(element),this.sinkDown(this.content.length-1)},pop:function(){var result=this.content[0],end=this.content.pop();return this.content.length>0&&(this.content[0]=end,this.bubbleUp(0)),result},remove:function(node){var i=this.content.indexOf(node),end=this.content.pop();i!==this.content.length-1&&(this.content[i]=end,this.scoreFunction(end)<this.scoreFunction(node)?this.sinkDown(i):this.bubbleUp(i))},size:function(){return this.content.length},rescoreElement:function(node){this.sinkDown(this.content.indexOf(node))},sinkDown:function(n){for(var element=this.content[n];n>0;){var parentN=(n+1>>1)-1,parent=this.content[parentN];if(this.scoreFunction(element)<this.scoreFunction(parent))this.content[parentN]=element,this.content[n]=parent,n=parentN;else break}},bubbleUp:function(n){for(var length4=this.content.length,element=this.content[n],elemScore=this.scoreFunction(element);;){var child2N=n+1<<1,child1N=child2N-1,swap4=null,child1Score;if(child1N<length4){var child1=this.content[child1N];child1Score=this.scoreFunction(child1),child1Score<elemScore&&(swap4=child1N)}if(child2N<length4){var child2=this.content[child2N],child2Score=this.scoreFunction(child2);child2Score<(swap4===null?elemScore:child1Score)&&(swap4=child2N)}if(swap4!==null)this.content[n]=this.content[swap4],this.content[swap4]=element,n=swap4;else break}}};function RedBlackTree(){this._=null}function RedBlackNode(node){node.U=node.C=node.L=node.R=node.P=node.N=null}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(after,node){var parent,grandpa,uncle;if(after){if(node.P=after,node.N=after.N,after.N&&(after.N.P=node),after.N=node,after.R){for(after=after.R;after.L;)after=after.L;after.L=node}else after.R=node;parent=after}else this._?(after=RedBlackFirst(this._),node.P=null,node.N=after,after.P=after.L=node,parent=after):(node.P=node.N=null,this._=node,parent=null);for(node.L=node.R=null,node.U=parent,node.C=!0,after=node;parent&&parent.C;)grandpa=parent.U,parent===grandpa.L?(uncle=grandpa.R,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.R&&(RedBlackRotateLeft(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,RedBlackRotateRight(this,grandpa))):(uncle=grandpa.L,uncle&&uncle.C?(parent.C=uncle.C=!1,grandpa.C=!0,after=grandpa):(after===parent.L&&(RedBlackRotateRight(this,parent),after=parent,parent=after.U),parent.C=!1,grandpa.C=!0,RedBlackRotateLeft(this,grandpa))),parent=after.U;this._.C=!1},remove:function(node){node.N&&(node.N.P=node.P),node.P&&(node.P.N=node.N),node.N=node.P=null;var parent=node.U,sibling,left=node.L,right=node.R,next3,red;if(left?right?next3=RedBlackFirst(right):next3=left:next3=right,parent?parent.L===node?parent.L=next3:parent.R=next3:this._=next3,left&&right?(red=next3.C,next3.C=node.C,next3.L=left,left.U=next3,next3!==right?(parent=next3.U,next3.U=node.U,node=next3.R,parent.L=node,next3.R=right,right.U=next3):(next3.U=parent,parent=next3,node=next3.R)):(red=node.C,node=next3),node&&(node.U=parent),!red){if(node&&node.C){node.C=!1;return}do{if(node===this._)break;if(node===parent.L){if(sibling=parent.R,sibling.C&&(sibling.C=!1,parent.C=!0,RedBlackRotateLeft(this,parent),sibling=parent.R),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){(!sibling.R||!sibling.R.C)&&(sibling.L.C=!1,sibling.C=!0,RedBlackRotateRight(this,sibling),sibling=parent.R),sibling.C=parent.C,parent.C=sibling.R.C=!1,RedBlackRotateLeft(this,parent),node=this._;break}}else if(sibling=parent.L,sibling.C&&(sibling.C=!1,parent.C=!0,RedBlackRotateRight(this,parent),sibling=parent.L),sibling.L&&sibling.L.C||sibling.R&&sibling.R.C){(!sibling.L||!sibling.L.C)&&(sibling.R.C=!1,sibling.C=!0,RedBlackRotateLeft(this,sibling),sibling=parent.L),sibling.C=parent.C,parent.C=sibling.L.C=!1,RedBlackRotateRight(this,parent),node=this._;break}sibling.C=!0,node=parent,parent=parent.U}while(!node.C);node&&(node.C=!1)}}};function RedBlackRotateLeft(tree,node){var p=node,q=node.R,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.R=q.L,p.R&&(p.R.U=p),q.L=p}function RedBlackRotateRight(tree,node){var p=node,q=node.L,parent=p.U;parent?parent.L===p?parent.L=q:parent.R=q:tree._=q,q.U=parent,p.U=q,p.L=q.R,p.L&&(p.L.U=p),q.R=p}function RedBlackFirst(node){for(;node.L;)node=node.L;return node}var RedBlackTree_default=RedBlackTree;function createEdge(left,right,v0,v1){var edge=[null,null],index=edges.push(edge)-1;return edge.left=left,edge.right=right,v0&&setEdgeEnd(edge,left,right,v0),v1&&setEdgeEnd(edge,right,left,v1),cells[left.index].halfedges.push(index),cells[right.index].halfedges.push(index),edge}function createBorderEdge(left,v0,v1){var edge=[v0,v1];return edge.left=left,edge}function setEdgeEnd(edge,left,right,vertex){!edge[0]&&!edge[1]?(edge[0]=vertex,edge.left=left,edge.right=right):edge.left===right?edge[1]=vertex:edge[0]=vertex}function clipEdge(edge,x02,y0,x12,y1){var a=edge[0],b=edge[1],ax=a[0],ay=a[1],bx=b[0],by=b[1],t0=0,t1=1,dx=bx-ax,dy=by-ay,r;if(r=x02-ax,!(!dx&&r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x12-ax,!(!dx&&r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,!(!dy&&r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,!(!dy&&r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return!(t0>0)&&!(t1<1)||(t0>0&&(edge[0]=[ax+t0*dx,ay+t0*dy]),t1<1&&(edge[1]=[ax+t1*dx,ay+t1*dy])),!0}}}}}function connectEdge(edge,x02,y0,x12,y1){var v1=edge[1];if(v1)return!0;var v0=edge[0],left=edge.left,right=edge.right,lx=left[0],ly=left[1],rx=right[0],ry=right[1],fx=(lx+rx)/2,fy=(ly+ry)/2,fm,fb;if(ry===ly){if(fx<x02||fx>=x12)return;if(lx>rx){if(!v0)v0=[fx,y0];else if(v0[1]>=y1)return;v1=[fx,y1]}else{if(!v0)v0=[fx,y1];else if(v0[1]<y0)return;v1=[fx,y0]}}else if(fm=(lx-rx)/(ry-ly),fb=fy-fm*fx,fm<-1||fm>1)if(lx>rx){if(!v0)v0=[(y0-fb)/fm,y0];else if(v0[1]>=y1)return;v1=[(y1-fb)/fm,y1]}else{if(!v0)v0=[(y1-fb)/fm,y1];else if(v0[1]<y0)return;v1=[(y0-fb)/fm,y0]}else if(ly<ry){if(!v0)v0=[x02,fm*x02+fb];else if(v0[0]>=x12)return;v1=[x12,fm*x12+fb]}else{if(!v0)v0=[x12,fm*x12+fb];else if(v0[0]<x02)return;v1=[x02,fm*x02+fb]}return edge[0]=v0,edge[1]=v1,!0}function clipEdges(x02,y0,x12,y1){for(var i=edges.length,edge;i--;)(!connectEdge(edge=edges[i],x02,y0,x12,y1)||!clipEdge(edge,x02,y0,x12,y1)||!(Math.abs(edge[0][0]-edge[1][0])>epsilon||Math.abs(edge[0][1]-edge[1][1])>epsilon))&&delete edges[i]}function createCell(site){return cells[site.index]={site,halfedges:[]}}function cellHalfedgeAngle(cell,edge){var site=cell.site,va=edge.left,vb=edge.right;return site===vb&&(vb=va,va=site),vb?Math.atan2(vb[1]-va[1],vb[0]-va[0]):(site===va?(va=edge[1],vb=edge[0]):(va=edge[0],vb=edge[1]),Math.atan2(va[0]-vb[0],vb[1]-va[1]))}function cellHalfedgeStart(cell,edge){return edge[+(edge.left!==cell.site)]}function cellHalfedgeEnd(cell,edge){return edge[+(edge.left===cell.site)]}function sortCellHalfedges(){for(var i=0,n=cells.length,cell,halfedges,j,m;i<n;++i)if((cell=cells[i])&&(m=(halfedges=cell.halfedges).length)){var index=new Array(m),array2=new Array(m);for(j=0;j<m;++j)index[j]=j,array2[j]=cellHalfedgeAngle(cell,edges[halfedges[j]]);for(index.sort(function(i2,j2){return array2[j2]-array2[i2]}),j=0;j<m;++j)array2[j]=halfedges[index[j]];for(j=0;j<m;++j)halfedges[j]=array2[j]}}function clipCells(x02,y0,x12,y1){var nCells=cells.length,iCell,cell,site,iHalfedge,halfedges,nHalfedges,start,startX,startY,end,endX,endY,cover=!0;for(iCell=0;iCell<nCells;++iCell)if(cell=cells[iCell]){for(site=cell.site,halfedges=cell.halfedges,iHalfedge=halfedges.length;iHalfedge--;)edges[halfedges[iHalfedge]]||halfedges.splice(iHalfedge,1);for(iHalfedge=0,nHalfedges=halfedges.length;iHalfedge<nHalfedges;)end=cellHalfedgeEnd(cell,edges[halfedges[iHalfedge]]),endX=end[0],endY=end[1],start=cellHalfedgeStart(cell,edges[halfedges[++iHalfedge%nHalfedges]]),startX=start[0],startY=start[1],(Math.abs(endX-startX)>epsilon||Math.abs(endY-startY)>epsilon)&&(halfedges.splice(iHalfedge,0,edges.push(createBorderEdge(site,end,Math.abs(endX-x02)<epsilon&&y1-endY>epsilon?[x02,Math.abs(startX-x02)<epsilon?startY:y1]:Math.abs(endY-y1)<epsilon&&x12-endX>epsilon?[Math.abs(startY-y1)<epsilon?startX:x12,y1]:Math.abs(endX-x12)<epsilon&&endY-y0>epsilon?[x12,Math.abs(startX-x12)<epsilon?startY:y0]:Math.abs(endY-y0)<epsilon&&endX-x02>epsilon?[Math.abs(startY-y0)<epsilon?startX:x02,y0]:null))-1),++nHalfedges);nHalfedges&&(cover=!1)}if(cover){var dx,dy,d2,dc=1/0;for(iCell=0,cover=null;iCell<nCells;++iCell)(cell=cells[iCell])&&(site=cell.site,dx=site[0]-x02,dy=site[1]-y0,d2=dx*dx+dy*dy,d2<dc&&(dc=d2,cover=cell));if(cover){var v00=[x02,y0],v01=[x02,y1],v11=[x12,y1],v10=[x12,y0];cover.halfedges.push(edges.push(createBorderEdge(site=cover.site,v00,v01))-1,edges.push(createBorderEdge(site,v01,v11))-1,edges.push(createBorderEdge(site,v11,v10))-1,edges.push(createBorderEdge(site,v10,v00))-1)}}for(iCell=0;iCell<nCells;++iCell)(cell=cells[iCell])&&(cell.halfedges.length||delete cells[iCell])}var circlePool=[],firstCircle;function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(arc){var lArc=arc.P,rArc=arc.N;if(!(!lArc||!rArc)){var lSite=lArc.site,cSite=arc.site,rSite=rArc.site;if(lSite!==rSite){var bx=cSite[0],by=cSite[1],ax=lSite[0]-bx,ay=lSite[1]-by,cx=rSite[0]-bx,cy=rSite[1]-by,d=2*(ax*cy-ay*cx);if(!(d>=-epsilon2)){var ha=ax*ax+ay*ay,hc=cx*cx+cy*cy,x2=(cy*ha-ay*hc)/d,y2=(ax*hc-cx*ha)/d,circle2=circlePool.pop()||new Circle;circle2.arc=arc,circle2.site=cSite,circle2.x=x2+bx,circle2.y=(circle2.cy=y2+by)+Math.sqrt(x2*x2+y2*y2),arc.circle=circle2;for(var before=null,node=circles._;node;)if(circle2.y<node.y||circle2.y===node.y&&circle2.x<=node.x)if(node.L)node=node.L;else{before=node.P;break}else if(node.R)node=node.R;else{before=node;break}circles.insert(before,circle2),before||(firstCircle=circle2)}}}}function detachCircle(arc){var circle2=arc.circle;circle2&&(circle2.P||(firstCircle=circle2.N),circles.remove(circle2),circlePool.push(circle2),RedBlackNode(circle2),arc.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(site){var beach=beachPool.pop()||new Beach;return beach.site=site,beach}function detachBeach(beach){detachCircle(beach),beaches.remove(beach),beachPool.push(beach),RedBlackNode(beach)}function removeBeach(beach){var circle2=beach.circle,x2=circle2.x,y2=circle2.cy,vertex=[x2,y2],previous=beach.P,next3=beach.N,disappearing=[beach];detachBeach(beach);for(var lArc=previous;lArc.circle&&Math.abs(x2-lArc.circle.x)<epsilon&&Math.abs(y2-lArc.circle.cy)<epsilon;)previous=lArc.P,disappearing.unshift(lArc),detachBeach(lArc),lArc=previous;disappearing.unshift(lArc),detachCircle(lArc);for(var rArc=next3;rArc.circle&&Math.abs(x2-rArc.circle.x)<epsilon&&Math.abs(y2-rArc.circle.cy)<epsilon;)next3=rArc.N,disappearing.push(rArc),detachBeach(rArc),rArc=next3;disappearing.push(rArc),detachCircle(rArc);var nArcs=disappearing.length,iArc;for(iArc=1;iArc<nArcs;++iArc)rArc=disappearing[iArc],lArc=disappearing[iArc-1],setEdgeEnd(rArc.edge,lArc.site,rArc.site,vertex);lArc=disappearing[0],rArc=disappearing[nArcs-1],rArc.edge=createEdge(lArc.site,rArc.site,null,vertex),attachCircle(lArc),attachCircle(rArc)}function addBeach(site){for(var x2=site[0],directrix=site[1],lArc,rArc,dxl,dxr,node=beaches._;node;)if(dxl=leftBreakPoint(node,directrix)-x2,dxl>epsilon)node=node.L;else if(dxr=x2-rightBreakPoint(node,directrix),dxr>epsilon){if(!node.R){lArc=node;break}node=node.R}else{dxl>-epsilon?(lArc=node.P,rArc=node):dxr>-epsilon?(lArc=node,rArc=node.N):lArc=rArc=node;break}createCell(site);var newArc=createBeach(site);if(beaches.insert(lArc,newArc),!(!lArc&&!rArc)){if(lArc===rArc){detachCircle(lArc),rArc=createBeach(lArc.site),beaches.insert(newArc,rArc),newArc.edge=rArc.edge=createEdge(lArc.site,newArc.site),attachCircle(lArc),attachCircle(rArc);return}if(!rArc){newArc.edge=createEdge(lArc.site,newArc.site);return}detachCircle(lArc),detachCircle(rArc);var lSite=lArc.site,ax=lSite[0],ay=lSite[1],bx=site[0]-ax,by=site[1]-ay,rSite=rArc.site,cx=rSite[0]-ax,cy=rSite[1]-ay,d=2*(bx*cy-by*cx),hb=bx*bx+by*by,hc=cx*cx+cy*cy,vertex=[(cy*hb-by*hc)/d+ax,(bx*hc-cx*hb)/d+ay];setEdgeEnd(rArc.edge,lSite,rSite,vertex),newArc.edge=createEdge(lSite,site,null,vertex),rArc.edge=createEdge(site,rSite,null,vertex),attachCircle(lArc),attachCircle(rArc)}}function leftBreakPoint(arc,directrix){var site=arc.site,rfocx=site[0],rfocy=site[1],pby2=rfocy-directrix;if(!pby2)return rfocx;var lArc=arc.P;if(!lArc)return-1/0;site=lArc.site;var lfocx=site[0],lfocy=site[1],plby2=lfocy-directrix;if(!plby2)return lfocx;var hl=lfocx-rfocx,aby2=1/pby2-1/plby2,b=hl/plby2;return aby2?(-b+Math.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx:(rfocx+lfocx)/2}function rightBreakPoint(arc,directrix){var rArc=arc.N;if(rArc)return leftBreakPoint(rArc,directrix);var site=arc.site;return site[1]===directrix?site[0]:1/0}var epsilon=1e-6,epsilon2=1e-12,beaches,cells,circles,edges;function triangleArea(a,b,c){return(a[0]-c[0])*(b[1]-a[1])-(a[0]-b[0])*(c[1]-a[1])}function lexicographic(a,b){return b[1]-a[1]||b[0]-a[0]}function Diagram(sites,extent){var site=sites.sort(lexicographic).pop(),x2,y2,circle2;for(edges=[],cells=new Array(sites.length),beaches=new RedBlackTree_default,circles=new RedBlackTree_default;;)if(circle2=firstCircle,site&&(!circle2||site[1]<circle2.y||site[1]===circle2.y&&site[0]<circle2.x))(site[0]!==x2||site[1]!==y2)&&(addBeach(site),x2=site[0],y2=site[1]),site=sites.pop();else if(circle2)removeBeach(circle2.arc);else break;if(sortCellHalfedges(),extent){var x02=+extent[0][0],y0=+extent[0][1],x12=+extent[1][0],y1=+extent[1][1];clipEdges(x02,y0,x12,y1),clipCells(x02,y0,x12,y1)}this.edges=edges,this.cells=cells,beaches=circles=edges=cells=null}Diagram.prototype={constructor:Diagram,polygons:function(){var edges2=this.edges;return this.cells.map(function(cell){var polygon4=cell.halfedges.map(function(i){return cellHalfedgeStart(cell,edges2[i])});return polygon4.data=cell.site.data,polygon4})},triangles:function(){var triangles=[],edges2=this.edges;return this.cells.forEach(function(cell,i){if(m=(halfedges=cell.halfedges).length)for(var site=cell.site,halfedges,j=-1,m,s0,e1=edges2[halfedges[m-1]],s1=e1.left===site?e1.right:e1.left;++j<m;)s0=s1,e1=edges2[halfedges[j]],s1=e1.left===site?e1.right:e1.left,s0&&s1&&i<s0.index&&i<s1.index&&triangleArea(site,s0,s1)<0&&triangles.push([site.data,s0.data,s1.data])}),triangles},links:function(){return this.edges.filter(function(edge){return edge.right}).map(function(edge){return{source:edge.left.data,target:edge.right.data}})},find:function(x2,y2,radius2){for(var that=this,i0,i1=that._found||0,n=that.cells.length,cell;!(cell=that.cells[i1]);)if(++i1>=n)return null;var dx=x2-cell.site[0],dy=y2-cell.site[1],d2=dx*dx+dy*dy;do cell=that.cells[i0=i1],i1=null,cell.halfedges.forEach(function(e){var edge=that.edges[e],v=edge.left;if(!((v===cell.site||!v)&&!(v=edge.right))){var vx=x2-v[0],vy=y2-v[1],v2=vx*vx+vy*vy;v2<d2&&(d2=v2,i1=v.index)}});while(i1!==null);return that._found=i0,radius2==null||d2<=radius2*radius2?cell.site:null}};function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y2,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y2&&(t=op[0]&2?y2.return:op[0]?y2.throw||((t=y2.return)&&t.call(y2),0):y2.next)&&!(t=t.call(y2,op[1])).done)return t;switch(y2=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y2=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y2=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var Node2=function(){function Node4(key,data){this.next=null,this.key=key,this.data=data,this.left=null,this.right=null}return Node4}();function DEFAULT_COMPARE(a,b){return a>b?1:a<b?-1:0}function splay(i,t,comparator){for(var N=new Node2(null,null),l=N,r=N;;){var cmp3=comparator(i,t.key);if(cmp3<0){if(t.left===null)break;if(comparator(i,t.left.key)<0){var y2=t.left;if(t.left=y2.right,y2.right=t,t=y2,t.left===null)break}r.left=t,r=t,t=t.left}else if(cmp3>0){if(t.right===null)break;if(comparator(i,t.right.key)>0){var y2=t.right;if(t.right=y2.left,y2.left=t,t=y2,t.right===null)break}l.right=t,l=t,t=t.right}else break}return l.right=t.left,r.left=t.right,t.left=N.right,t.right=N.left,t}function insert(i,data,t,comparator){var node=new Node2(i,data);if(t===null)return node.left=node.right=null,node;t=splay(i,t,comparator);var cmp3=comparator(i,t.key);return cmp3<0?(node.left=t.left,node.right=t,t.left=null):cmp3>=0&&(node.right=t.right,node.left=t,t.right=null),node}function split(key,v,comparator){var left=null,right=null;if(v){v=splay(key,v,comparator);var cmp3=comparator(v.key,key);cmp3===0?(left=v.left,right=v.right):cmp3<0?(right=v.right,v.right=null,left=v):(left=v.left,v.left=null,right=v)}return{left,right}}function merge(left,right,comparator){return right===null?left:(left===null||(right=splay(left.key,right,comparator),right.left=left),right)}function printRow(root,prefix,isTail,out,printNode2){if(root){out(""+prefix+(isTail?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+printNode2(root)+`
`);var indent=prefix+(isTail?"    ":"\u2502   ");root.left&&printRow(root.left,indent,!1,out,printNode2),root.right&&printRow(root.right,indent,!0,out,printNode2)}}var Tree=function(){function Tree2(comparator){comparator===void 0&&(comparator=DEFAULT_COMPARE),this._root=null,this._size=0,this._comparator=comparator}return Tree2.prototype.insert=function(key,data){return this._size++,this._root=insert(key,data,this._root,this._comparator)},Tree2.prototype.add=function(key,data){var node=new Node2(key,data);this._root===null&&(node.left=node.right=null,this._size++,this._root=node);var comparator=this._comparator,t=splay(key,this._root,comparator),cmp3=comparator(key,t.key);return cmp3===0?this._root=t:(cmp3<0?(node.left=t.left,node.right=t,t.left=null):cmp3>0&&(node.right=t.right,node.left=t,t.right=null),this._size++,this._root=node),this._root},Tree2.prototype.remove=function(key){this._root=this._remove(key,this._root,this._comparator)},Tree2.prototype._remove=function(i,t,comparator){var x2;if(t===null)return null;t=splay(i,t,comparator);var cmp3=comparator(i,t.key);return cmp3===0?(t.left===null?x2=t.right:(x2=splay(i,t.left,comparator),x2.right=t.right),this._size--,x2):t},Tree2.prototype.pop=function(){var node=this._root;if(node){for(;node.left;)node=node.left;return this._root=splay(node.key,this._root,this._comparator),this._root=this._remove(node.key,this._root,this._comparator),{key:node.key,data:node.data}}return null},Tree2.prototype.findStatic=function(key){for(var current=this._root,compare10=this._comparator;current;){var cmp3=compare10(key,current.key);if(cmp3===0)return current;cmp3<0?current=current.left:current=current.right}return null},Tree2.prototype.find=function(key){return this._root&&(this._root=splay(key,this._root,this._comparator),this._comparator(key,this._root.key)!==0)?null:this._root},Tree2.prototype.contains=function(key){for(var current=this._root,compare10=this._comparator;current;){var cmp3=compare10(key,current.key);if(cmp3===0)return!0;cmp3<0?current=current.left:current=current.right}return!1},Tree2.prototype.forEach=function(visitor,ctx){for(var current=this._root,Q=[],done=!1;!done;)current!==null?(Q.push(current),current=current.left):Q.length!==0?(current=Q.pop(),visitor.call(ctx,current),current=current.right):done=!0;return this},Tree2.prototype.range=function(low,high,fn,ctx){for(var Q=[],compare10=this._comparator,node=this._root,cmp3;Q.length!==0||node;)if(node)Q.push(node),node=node.left;else{if(node=Q.pop(),cmp3=compare10(node.key,high),cmp3>0)break;if(compare10(node.key,low)>=0&&fn.call(ctx,node))return this;node=node.right}return this},Tree2.prototype.keys=function(){var keys=[];return this.forEach(function(_a){var key=_a.key;return keys.push(key)}),keys},Tree2.prototype.values=function(){var values3=[];return this.forEach(function(_a){var data=_a.data;return values3.push(data)}),values3},Tree2.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Tree2.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Tree2.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},Tree2.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},Tree2.prototype.at=function(index){for(var current=this._root,done=!1,i=0,Q=[];!done;)if(current)Q.push(current),current=current.left;else if(Q.length>0){if(current=Q.pop(),i===index)return current;i++,current=current.right}else done=!0;return null},Tree2.prototype.next=function(d){var root=this._root,successor=null;if(d.right){for(successor=d.right;successor.left;)successor=successor.left;return successor}for(var comparator=this._comparator;root;){var cmp3=comparator(d.key,root.key);if(cmp3===0)break;cmp3<0?(successor=root,root=root.left):root=root.right}return successor},Tree2.prototype.prev=function(d){var root=this._root,predecessor=null;if(d.left!==null){for(predecessor=d.left;predecessor.right;)predecessor=predecessor.right;return predecessor}for(var comparator=this._comparator;root;){var cmp3=comparator(d.key,root.key);if(cmp3===0)break;cmp3<0?root=root.left:(predecessor=root,root=root.right)}return predecessor},Tree2.prototype.clear=function(){return this._root=null,this._size=0,this},Tree2.prototype.toList=function(){return toList(this._root)},Tree2.prototype.load=function(keys,values3,presort){values3===void 0&&(values3=[]),presort===void 0&&(presort=!1);var size11=keys.length,comparator=this._comparator;if(presort&&sort(keys,values3,0,size11-1,comparator),this._root===null)this._root=loadRecursive(keys,values3,0,size11),this._size=size11;else{var mergedList=mergeLists(this.toList(),createList(keys,values3),comparator);size11=this._size+size11,this._root=sortedListToBST({head:mergedList},0,size11)}return this},Tree2.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(Tree2.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Tree2.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Tree2.prototype.toString=function(printNode2){printNode2===void 0&&(printNode2=function(n){return String(n.key)});var out=[];return printRow(this._root,"",!0,function(v){return out.push(v)},printNode2),out.join("")},Tree2.prototype.update=function(key,newKey,newData){var comparator=this._comparator,_a=split(key,this._root,comparator),left=_a.left,right=_a.right;comparator(key,newKey)<0?right=insert(newKey,newData,right,comparator):left=insert(newKey,newData,left,comparator),this._root=merge(left,right,comparator)},Tree2.prototype.split=function(key){return split(key,this._root,this._comparator)},Tree2.prototype[Symbol.iterator]=function(){var current,Q,done;return __generator(this,function(_a){switch(_a.label){case 0:current=this._root,Q=[],done=!1,_a.label=1;case 1:return done?[3,6]:current===null?[3,2]:(Q.push(current),current=current.left,[3,5]);case 2:return Q.length===0?[3,4]:(current=Q.pop(),[4,current]);case 3:return _a.sent(),current=current.right,[3,5];case 4:done=!0,_a.label=5;case 5:return[3,1];case 6:return[2]}})},Tree2}();function loadRecursive(keys,values3,start,end){var size11=end-start;if(size11>0){var middle=start+Math.floor(size11/2),key=keys[middle],data=values3[middle],node=new Node2(key,data);return node.left=loadRecursive(keys,values3,start,middle),node.right=loadRecursive(keys,values3,middle+1,end),node}return null}function createList(keys,values3){for(var head=new Node2(null,null),p=head,i=0;i<keys.length;i++)p=p.next=new Node2(keys[i],values3[i]);return p.next=null,head.next}function toList(root){for(var current=root,Q=[],done=!1,head=new Node2(null,null),p=head;!done;)current?(Q.push(current),current=current.left):Q.length>0?(current=p=p.next=Q.pop(),current=current.right):done=!0;return p.next=null,head.next}function sortedListToBST(list,start,end){var size11=end-start;if(size11>0){var middle=start+Math.floor(size11/2),left=sortedListToBST(list,start,middle),root=list.head;return root.left=left,list.head=list.head.next,root.right=sortedListToBST(list,middle+1,end),root}return null}function mergeLists(l1,l2,compare10){for(var head=new Node2(null,null),p=head,p1=l1,p2=l2;p1!==null&&p2!==null;)compare10(p1.key,p2.key)<0?(p.next=p1,p1=p1.next):(p.next=p2,p2=p2.next),p=p.next;return p1!==null?p.next=p1:p2!==null&&(p.next=p2),head.next}function sort(keys,values3,left,right,compare10){if(!(left>=right)){for(var pivot=keys[left+right>>1],i=left-1,j=right+1;;){do i++;while(compare10(keys[i],pivot)<0);do j--;while(compare10(keys[j],pivot)>0);if(i>=j)break;var tmp=keys[i];keys[i]=keys[j],keys[j]=tmp,tmp=values3[i],values3[i]=values3[j],values3[j]=tmp}sort(keys,values3,left,j,compare10),sort(keys,values3,j+1,right,compare10)}}var splay_esm_default=Tree;function _classCallCheck(instance2,Constructor){if(!(instance2 instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var isInBbox=function(bbox2,point4){return bbox2.ll.x<=point4.x&&point4.x<=bbox2.ur.x&&bbox2.ll.y<=point4.y&&point4.y<=bbox2.ur.y},getBboxOverlap=function(b1,b2){if(b2.ur.x<b1.ll.x||b1.ur.x<b2.ll.x||b2.ur.y<b1.ll.y||b1.ur.y<b2.ll.y)return null;var lowerX=b1.ll.x<b2.ll.x?b2.ll.x:b1.ll.x,upperX=b1.ur.x<b2.ur.x?b1.ur.x:b2.ur.x,lowerY=b1.ll.y<b2.ll.y?b2.ll.y:b1.ll.y,upperY=b1.ur.y<b2.ur.y?b1.ur.y:b2.ur.y;return{ll:{x:lowerX,y:lowerY},ur:{x:upperX,y:upperY}}},epsilon3=Number.EPSILON;epsilon3===void 0&&(epsilon3=Math.pow(2,-52));var EPSILON_SQ=epsilon3*epsilon3,cmp=function(a,b){if(-epsilon3<a&&a<epsilon3&&-epsilon3<b&&b<epsilon3)return 0;var ab=a-b;return ab*ab<EPSILON_SQ*a*b?0:a<b?-1:1},PtRounder=function(){function PtRounder2(){_classCallCheck(this,PtRounder2),this.reset()}return _createClass(PtRounder2,[{key:"reset",value:function(){this.xRounder=new CoordRounder,this.yRounder=new CoordRounder}},{key:"round",value:function(x2,y2){return{x:this.xRounder.round(x2),y:this.yRounder.round(y2)}}}]),PtRounder2}(),CoordRounder=function(){function CoordRounder2(){_classCallCheck(this,CoordRounder2),this.tree=new splay_esm_default,this.round(0)}return _createClass(CoordRounder2,[{key:"round",value:function(coord){var node=this.tree.add(coord),prevNode=this.tree.prev(node);if(prevNode!==null&&cmp(node.key,prevNode.key)===0)return this.tree.remove(coord),prevNode.key;var nextNode=this.tree.next(node);return nextNode!==null&&cmp(node.key,nextNode.key)===0?(this.tree.remove(coord),nextNode.key):coord}}]),CoordRounder2}(),rounder=new PtRounder,crossProduct=function(a,b){return a.x*b.y-a.y*b.x},dotProduct=function(a,b){return a.x*b.x+a.y*b.y},compareVectorAngles=function(basePt,endPt1,endPt2){var v1={x:endPt1.x-basePt.x,y:endPt1.y-basePt.y},v2={x:endPt2.x-basePt.x,y:endPt2.y-basePt.y},kross=crossProduct(v1,v2);return cmp(kross,0)},length2=function(v){return Math.sqrt(dotProduct(v,v))},sineOfAngle=function(pShared,pBase,pAngle){var vBase={x:pBase.x-pShared.x,y:pBase.y-pShared.y},vAngle={x:pAngle.x-pShared.x,y:pAngle.y-pShared.y};return crossProduct(vAngle,vBase)/length2(vAngle)/length2(vBase)},cosineOfAngle=function(pShared,pBase,pAngle){var vBase={x:pBase.x-pShared.x,y:pBase.y-pShared.y},vAngle={x:pAngle.x-pShared.x,y:pAngle.y-pShared.y};return dotProduct(vAngle,vBase)/length2(vAngle)/length2(vBase)},horizontalIntersection=function(pt,v,y2){return v.y===0?null:{x:pt.x+v.x/v.y*(y2-pt.y),y:y2}},verticalIntersection=function(pt,v,x2){return v.x===0?null:{x:x2,y:pt.y+v.y/v.x*(x2-pt.x)}},intersection=function(pt1,v1,pt2,v2){if(v1.x===0)return verticalIntersection(pt2,v2,pt1.x);if(v2.x===0)return verticalIntersection(pt1,v1,pt2.x);if(v1.y===0)return horizontalIntersection(pt2,v2,pt1.y);if(v2.y===0)return horizontalIntersection(pt1,v1,pt2.y);var kross=crossProduct(v1,v2);if(kross==0)return null;var ve={x:pt2.x-pt1.x,y:pt2.y-pt1.y},d1=crossProduct(ve,v1)/kross,d2=crossProduct(ve,v2)/kross,x12=pt1.x+d2*v1.x,x2=pt2.x+d1*v2.x,y1=pt1.y+d2*v1.y,y2=pt2.y+d1*v2.y,x3=(x12+x2)/2,y3=(y1+y2)/2;return{x:x3,y:y3}},SweepEvent=function(){_createClass(SweepEvent2,null,[{key:"compare",value:function(a,b){var ptCmp=SweepEvent2.comparePoints(a.point,b.point);return ptCmp!==0?ptCmp:(a.point!==b.point&&a.link(b),a.isLeft!==b.isLeft?a.isLeft?1:-1:Segment.compare(a.segment,b.segment))}},{key:"comparePoints",value:function(aPt,bPt){return aPt.x<bPt.x?-1:aPt.x>bPt.x?1:aPt.y<bPt.y?-1:aPt.y>bPt.y?1:0}}]);function SweepEvent2(point4,isLeft){_classCallCheck(this,SweepEvent2),point4.events===void 0?point4.events=[this]:point4.events.push(this),this.point=point4,this.isLeft=isLeft}return _createClass(SweepEvent2,[{key:"link",value:function(other){if(other.point===this.point)throw new Error("Tried to link already linked events");for(var otherEvents=other.point.events,i=0,iMax=otherEvents.length;i<iMax;i++){var evt=otherEvents[i];this.point.events.push(evt),evt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var numEvents=this.point.events.length,i=0;i<numEvents;i++){var evt1=this.point.events[i];if(evt1.segment.consumedBy===void 0)for(var j=i+1;j<numEvents;j++){var evt2=this.point.events[j];evt2.consumedBy===void 0&&evt1.otherSE.point.events===evt2.otherSE.point.events&&evt1.segment.consume(evt2.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var events=[],i=0,iMax=this.point.events.length;i<iMax;i++){var evt=this.point.events[i];evt!==this&&!evt.segment.ringOut&&evt.segment.isInResult()&&events.push(evt)}return events}},{key:"getLeftmostComparator",value:function(baseEvent){var _this=this,cache=new Map,fillCache=function(linkedEvent){var nextEvent=linkedEvent.otherSE;cache.set(linkedEvent,{sine:sineOfAngle(_this.point,baseEvent.point,nextEvent.point),cosine:cosineOfAngle(_this.point,baseEvent.point,nextEvent.point)})};return function(a,b){cache.has(a)||fillCache(a),cache.has(b)||fillCache(b);var _cache$get=cache.get(a),asine=_cache$get.sine,acosine=_cache$get.cosine,_cache$get2=cache.get(b),bsine=_cache$get2.sine,bcosine=_cache$get2.cosine;return asine>=0&&bsine>=0?acosine<bcosine?1:acosine>bcosine?-1:0:asine<0&&bsine<0?acosine<bcosine?-1:acosine>bcosine?1:0:bsine<asine?-1:bsine>asine?1:0}}}]),SweepEvent2}(),segmentId=0,Segment=function(){_createClass(Segment2,null,[{key:"compare",value:function(a,b){var alx=a.leftSE.point.x,blx=b.leftSE.point.x,arx=a.rightSE.point.x,brx=b.rightSE.point.x;if(brx<alx)return 1;if(arx<blx)return-1;var aly=a.leftSE.point.y,bly=b.leftSE.point.y,ary=a.rightSE.point.y,bry=b.rightSE.point.y;if(alx<blx){if(bly<aly&&bly<ary)return 1;if(bly>aly&&bly>ary)return-1;var aCmpBLeft=a.comparePoint(b.leftSE.point);if(aCmpBLeft<0)return 1;if(aCmpBLeft>0)return-1;var bCmpARight=b.comparePoint(a.rightSE.point);return bCmpARight!==0?bCmpARight:-1}if(alx>blx){if(aly<bly&&aly<bry)return-1;if(aly>bly&&aly>bry)return 1;var bCmpALeft=b.comparePoint(a.leftSE.point);if(bCmpALeft!==0)return bCmpALeft;var aCmpBRight=a.comparePoint(b.rightSE.point);return aCmpBRight<0?1:aCmpBRight>0?-1:1}if(aly<bly)return-1;if(aly>bly)return 1;if(arx<brx){var _bCmpARight=b.comparePoint(a.rightSE.point);if(_bCmpARight!==0)return _bCmpARight}if(arx>brx){var _aCmpBRight=a.comparePoint(b.rightSE.point);if(_aCmpBRight<0)return 1;if(_aCmpBRight>0)return-1}if(arx!==brx){var ay=ary-aly,ax=arx-alx,by=bry-bly,bx=brx-blx;if(ay>ax&&by<bx)return 1;if(ay<ax&&by>bx)return-1}return arx>brx?1:arx<brx||ary<bry?-1:ary>bry?1:a.id<b.id?-1:a.id>b.id?1:0}}]);function Segment2(leftSE,rightSE,rings,windings){_classCallCheck(this,Segment2),this.id=++segmentId,this.leftSE=leftSE,leftSE.segment=this,leftSE.otherSE=rightSE,this.rightSE=rightSE,rightSE.segment=this,rightSE.otherSE=leftSE,this.rings=rings,this.windings=windings}return _createClass(Segment2,[{key:"replaceRightSE",value:function(newRightSE){this.rightSE=newRightSE,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var y1=this.leftSE.point.y,y2=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:y1<y2?y1:y2},ur:{x:this.rightSE.point.x,y:y1>y2?y1:y2}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(pt){return pt.x===this.leftSE.point.x&&pt.y===this.leftSE.point.y||pt.x===this.rightSE.point.x&&pt.y===this.rightSE.point.y}},{key:"comparePoint",value:function(point4){if(this.isAnEndpoint(point4))return 0;var lPt=this.leftSE.point,rPt=this.rightSE.point,v=this.vector();if(lPt.x===rPt.x)return point4.x===lPt.x?0:point4.x<lPt.x?1:-1;var yDist=(point4.y-lPt.y)/v.y,xFromYDist=lPt.x+yDist*v.x;if(point4.x===xFromYDist)return 0;var xDist=(point4.x-lPt.x)/v.x,yFromXDist=lPt.y+xDist*v.y;return point4.y===yFromXDist?0:point4.y<yFromXDist?-1:1}},{key:"getIntersection",value:function(other){var tBbox=this.bbox(),oBbox=other.bbox(),bboxOverlap=getBboxOverlap(tBbox,oBbox);if(bboxOverlap===null)return null;var tlp=this.leftSE.point,trp=this.rightSE.point,olp=other.leftSE.point,orp=other.rightSE.point,touchesOtherLSE=isInBbox(tBbox,olp)&&this.comparePoint(olp)===0,touchesThisLSE=isInBbox(oBbox,tlp)&&other.comparePoint(tlp)===0,touchesOtherRSE=isInBbox(tBbox,orp)&&this.comparePoint(orp)===0,touchesThisRSE=isInBbox(oBbox,trp)&&other.comparePoint(trp)===0;if(touchesThisLSE&&touchesOtherLSE)return touchesThisRSE&&!touchesOtherRSE?trp:!touchesThisRSE&&touchesOtherRSE?orp:null;if(touchesThisLSE)return touchesOtherRSE&&tlp.x===orp.x&&tlp.y===orp.y?null:tlp;if(touchesOtherLSE)return touchesThisRSE&&trp.x===olp.x&&trp.y===olp.y?null:olp;if(touchesThisRSE&&touchesOtherRSE)return null;if(touchesThisRSE)return trp;if(touchesOtherRSE)return orp;var pt=intersection(tlp,this.vector(),olp,other.vector());return pt===null||!isInBbox(bboxOverlap,pt)?null:rounder.round(pt.x,pt.y)}},{key:"split",value:function(point4){var newEvents=[],alreadyLinked=point4.events!==void 0,newLeftSE=new SweepEvent(point4,!0),newRightSE=new SweepEvent(point4,!1),oldRightSE=this.rightSE;this.replaceRightSE(newRightSE),newEvents.push(newRightSE),newEvents.push(newLeftSE);var newSeg=new Segment2(newLeftSE,oldRightSE,this.rings.slice(),this.windings.slice());return SweepEvent.comparePoints(newSeg.leftSE.point,newSeg.rightSE.point)>0&&newSeg.swapEvents(),SweepEvent.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),alreadyLinked&&(newLeftSE.checkForConsuming(),newRightSE.checkForConsuming()),newEvents}},{key:"swapEvents",value:function(){var tmpEvt=this.rightSE;this.rightSE=this.leftSE,this.leftSE=tmpEvt,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var i=0,iMax=this.windings.length;i<iMax;i++)this.windings[i]*=-1}},{key:"consume",value:function(other){for(var consumer=this,consumee=other;consumer.consumedBy;)consumer=consumer.consumedBy;for(;consumee.consumedBy;)consumee=consumee.consumedBy;var cmp3=Segment2.compare(consumer,consumee);if(cmp3!==0){if(cmp3>0){var tmp=consumer;consumer=consumee,consumee=tmp}if(consumer.prev===consumee){var _tmp=consumer;consumer=consumee,consumee=_tmp}for(var i=0,iMax=consumee.rings.length;i<iMax;i++){var ring=consumee.rings[i],winding=consumee.windings[i],index=consumer.rings.indexOf(ring);index===-1?(consumer.rings.push(ring),consumer.windings.push(winding)):consumer.windings[index]+=winding}consumee.rings=null,consumee.windings=null,consumee.consumedBy=consumer,consumee.leftSE.consumedBy=consumer.leftSE,consumee.rightSE.consumedBy=consumer.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var seg=this.prev.consumedBy||this.prev;this._beforeState=seg.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var beforeState=this.beforeState();this._afterState={rings:beforeState.rings.slice(0),windings:beforeState.windings.slice(0),multiPolys:[]};for(var ringsAfter=this._afterState.rings,windingsAfter=this._afterState.windings,mpsAfter=this._afterState.multiPolys,i=0,iMax=this.rings.length;i<iMax;i++){var ring=this.rings[i],winding=this.windings[i],index=ringsAfter.indexOf(ring);index===-1?(ringsAfter.push(ring),windingsAfter.push(winding)):windingsAfter[index]+=winding}for(var polysAfter=[],polysExclude=[],_i=0,_iMax=ringsAfter.length;_i<_iMax;_i++)if(windingsAfter[_i]!==0){var _ring=ringsAfter[_i],poly=_ring.poly;if(polysExclude.indexOf(poly)===-1)if(_ring.isExterior)polysAfter.push(poly);else{polysExclude.indexOf(poly)===-1&&polysExclude.push(poly);var _index=polysAfter.indexOf(_ring.poly);_index!==-1&&polysAfter.splice(_index,1)}}for(var _i2=0,_iMax2=polysAfter.length;_i2<_iMax2;_i2++){var mp=polysAfter[_i2].multiPoly;mpsAfter.indexOf(mp)===-1&&mpsAfter.push(mp)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var mpsBefore=this.beforeState().multiPolys,mpsAfter=this.afterState().multiPolys;switch(operation.type){case"union":{var noBefores=mpsBefore.length===0,noAfters=mpsAfter.length===0;this._isInResult=noBefores!==noAfters;break}case"intersection":{var least,most;mpsBefore.length<mpsAfter.length?(least=mpsBefore.length,most=mpsAfter.length):(least=mpsAfter.length,most=mpsBefore.length),this._isInResult=most===operation.numMultiPolys&&least<most;break}case"xor":{var diff2=Math.abs(mpsBefore.length-mpsAfter.length);this._isInResult=diff2%2===1;break}case"difference":{var isJustSubject=function(mps){return mps.length===1&&mps[0].isSubject};this._isInResult=isJustSubject(mpsBefore)!==isJustSubject(mpsAfter);break}default:throw new Error("Unrecognized operation type found ".concat(operation.type))}return this._isInResult}}],[{key:"fromRing",value:function(pt1,pt2,ring){var leftPt,rightPt,winding,cmpPts=SweepEvent.comparePoints(pt1,pt2);if(cmpPts<0)leftPt=pt1,rightPt=pt2,winding=1;else if(cmpPts>0)leftPt=pt2,rightPt=pt1,winding=-1;else throw new Error("Tried to create degenerate segment at [".concat(pt1.x,", ").concat(pt1.y,"]"));var leftSE=new SweepEvent(leftPt,!0),rightSE=new SweepEvent(rightPt,!1);return new Segment2(leftSE,rightSE,[ring],[winding])}}]),Segment2}(),RingIn=function(){function RingIn2(geomRing,poly,isExterior){if(_classCallCheck(this,RingIn2),!Array.isArray(geomRing)||geomRing.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=poly,this.isExterior=isExterior,this.segments=[],typeof geomRing[0][0]!="number"||typeof geomRing[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var firstPoint=rounder.round(geomRing[0][0],geomRing[0][1]);this.bbox={ll:{x:firstPoint.x,y:firstPoint.y},ur:{x:firstPoint.x,y:firstPoint.y}};for(var prevPoint=firstPoint,i=1,iMax=geomRing.length;i<iMax;i++){if(typeof geomRing[i][0]!="number"||typeof geomRing[i][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var point4=rounder.round(geomRing[i][0],geomRing[i][1]);point4.x===prevPoint.x&&point4.y===prevPoint.y||(this.segments.push(Segment.fromRing(prevPoint,point4,this)),point4.x<this.bbox.ll.x&&(this.bbox.ll.x=point4.x),point4.y<this.bbox.ll.y&&(this.bbox.ll.y=point4.y),point4.x>this.bbox.ur.x&&(this.bbox.ur.x=point4.x),point4.y>this.bbox.ur.y&&(this.bbox.ur.y=point4.y),prevPoint=point4)}(firstPoint.x!==prevPoint.x||firstPoint.y!==prevPoint.y)&&this.segments.push(Segment.fromRing(prevPoint,firstPoint,this))}return _createClass(RingIn2,[{key:"getSweepEvents",value:function(){for(var sweepEvents=[],i=0,iMax=this.segments.length;i<iMax;i++){var segment=this.segments[i];sweepEvents.push(segment.leftSE),sweepEvents.push(segment.rightSE)}return sweepEvents}}]),RingIn2}(),PolyIn=function(){function PolyIn2(geomPoly,multiPoly){if(_classCallCheck(this,PolyIn2),!Array.isArray(geomPoly))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new RingIn(geomPoly[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,iMax=geomPoly.length;i<iMax;i++){var ring=new RingIn(geomPoly[i],this,!1);ring.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ring.bbox.ll.x),ring.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ring.bbox.ll.y),ring.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ring.bbox.ur.x),ring.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ring.bbox.ur.y),this.interiorRings.push(ring)}this.multiPoly=multiPoly}return _createClass(PolyIn2,[{key:"getSweepEvents",value:function(){for(var sweepEvents=this.exteriorRing.getSweepEvents(),i=0,iMax=this.interiorRings.length;i<iMax;i++)for(var ringSweepEvents=this.interiorRings[i].getSweepEvents(),j=0,jMax=ringSweepEvents.length;j<jMax;j++)sweepEvents.push(ringSweepEvents[j]);return sweepEvents}}]),PolyIn2}(),MultiPolyIn=function(){function MultiPolyIn2(geom,isSubject){if(_classCallCheck(this,MultiPolyIn2),!Array.isArray(geom))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof geom[0][0][0]=="number"&&(geom=[geom])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,iMax=geom.length;i<iMax;i++){var poly=new PolyIn(geom[i],this);poly.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=poly.bbox.ll.x),poly.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=poly.bbox.ll.y),poly.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=poly.bbox.ur.x),poly.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=poly.bbox.ur.y),this.polys.push(poly)}this.isSubject=isSubject}return _createClass(MultiPolyIn2,[{key:"getSweepEvents",value:function(){for(var sweepEvents=[],i=0,iMax=this.polys.length;i<iMax;i++)for(var polySweepEvents=this.polys[i].getSweepEvents(),j=0,jMax=polySweepEvents.length;j<jMax;j++)sweepEvents.push(polySweepEvents[j]);return sweepEvents}}]),MultiPolyIn2}(),RingOut=function(){_createClass(RingOut2,null,[{key:"factory",value:function(allSegments){for(var ringsOut=[],i=0,iMax=allSegments.length;i<iMax;i++){var segment=allSegments[i];if(!(!segment.isInResult()||segment.ringOut)){for(var prevEvent=null,event=segment.leftSE,nextEvent=segment.rightSE,events=[event],startingPoint=event.point,intersectionLEs=[];prevEvent=event,event=nextEvent,events.push(event),event.point!==startingPoint;)for(;;){var availableLEs=event.getAvailableLinkedEvents();if(availableLEs.length===0){var firstPt=events[0].point,lastPt=events[events.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(firstPt.x,",")+" ".concat(firstPt.y,"]. Last matching segment found ends at")+" [".concat(lastPt.x,", ").concat(lastPt.y,"]."))}if(availableLEs.length===1){nextEvent=availableLEs[0].otherSE;break}for(var indexLE=null,j=0,jMax=intersectionLEs.length;j<jMax;j++)if(intersectionLEs[j].point===event.point){indexLE=j;break}if(indexLE!==null){var intersectionLE=intersectionLEs.splice(indexLE)[0],ringEvents=events.splice(intersectionLE.index);ringEvents.unshift(ringEvents[0].otherSE),ringsOut.push(new RingOut2(ringEvents.reverse()));continue}intersectionLEs.push({index:events.length,point:event.point});var comparator=event.getLeftmostComparator(prevEvent);nextEvent=availableLEs.sort(comparator)[0].otherSE;break}ringsOut.push(new RingOut2(events))}}return ringsOut}}]);function RingOut2(events){_classCallCheck(this,RingOut2),this.events=events;for(var i=0,iMax=events.length;i<iMax;i++)events[i].segment.ringOut=this;this.poly=null}return _createClass(RingOut2,[{key:"getGeom",value:function(){for(var prevPt=this.events[0].point,points=[prevPt],i=1,iMax=this.events.length-1;i<iMax;i++){var _pt=this.events[i].point,_nextPt=this.events[i+1].point;compareVectorAngles(_pt,prevPt,_nextPt)!==0&&(points.push(_pt),prevPt=_pt)}if(points.length===1)return null;var pt=points[0],nextPt=points[1];compareVectorAngles(pt,prevPt,nextPt)===0&&points.shift(),points.push(points[0]);for(var step=this.isExteriorRing()?1:-1,iStart=this.isExteriorRing()?0:points.length-1,iEnd=this.isExteriorRing()?points.length:-1,orderedPoints=[],_i=iStart;_i!=iEnd;_i+=step)orderedPoints.push([points[_i].x,points[_i].y]);return orderedPoints}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var enclosing=this.enclosingRing();this._isExteriorRing=enclosing?!enclosing.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var leftMostEvt=this.events[0],i=1,iMax=this.events.length;i<iMax;i++){var evt=this.events[i];SweepEvent.compare(leftMostEvt,evt)>0&&(leftMostEvt=evt)}for(var prevSeg=leftMostEvt.segment.prevInResult(),prevPrevSeg=prevSeg?prevSeg.prevInResult():null;;){if(!prevSeg)return null;if(!prevPrevSeg)return prevSeg.ringOut;if(prevPrevSeg.ringOut!==prevSeg.ringOut)return prevPrevSeg.ringOut.enclosingRing()!==prevSeg.ringOut?prevSeg.ringOut:prevSeg.ringOut.enclosingRing();prevSeg=prevPrevSeg.prevInResult(),prevPrevSeg=prevSeg?prevSeg.prevInResult():null}}}]),RingOut2}(),PolyOut=function(){function PolyOut2(exteriorRing){_classCallCheck(this,PolyOut2),this.exteriorRing=exteriorRing,exteriorRing.poly=this,this.interiorRings=[]}return _createClass(PolyOut2,[{key:"addInterior",value:function(ring){this.interiorRings.push(ring),ring.poly=this}},{key:"getGeom",value:function(){var geom=[this.exteriorRing.getGeom()];if(geom[0]===null)return null;for(var i=0,iMax=this.interiorRings.length;i<iMax;i++){var ringGeom=this.interiorRings[i].getGeom();ringGeom!==null&&geom.push(ringGeom)}return geom}}]),PolyOut2}(),MultiPolyOut=function(){function MultiPolyOut2(rings){_classCallCheck(this,MultiPolyOut2),this.rings=rings,this.polys=this._composePolys(rings)}return _createClass(MultiPolyOut2,[{key:"getGeom",value:function(){for(var geom=[],i=0,iMax=this.polys.length;i<iMax;i++){var polyGeom=this.polys[i].getGeom();polyGeom!==null&&geom.push(polyGeom)}return geom}},{key:"_composePolys",value:function(rings){for(var polys=[],i=0,iMax=rings.length;i<iMax;i++){var ring=rings[i];if(!ring.poly)if(ring.isExteriorRing())polys.push(new PolyOut(ring));else{var enclosingRing=ring.enclosingRing();enclosingRing.poly||polys.push(new PolyOut(enclosingRing)),enclosingRing.poly.addInterior(ring)}}return polys}}]),MultiPolyOut2}(),SweepLine=function(){function SweepLine2(queue){var comparator=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Segment.compare;_classCallCheck(this,SweepLine2),this.queue=queue,this.tree=new splay_esm_default(comparator),this.segments=[]}return _createClass(SweepLine2,[{key:"process",value:function(event){var segment=event.segment,newEvents=[];if(event.consumedBy)return event.isLeft?this.queue.remove(event.otherSE):this.tree.remove(segment),newEvents;var node=event.isLeft?this.tree.insert(segment):this.tree.find(segment);if(!node)throw new Error("Unable to find segment #".concat(segment.id," ")+"[".concat(segment.leftSE.point.x,", ").concat(segment.leftSE.point.y,"] -> ")+"[".concat(segment.rightSE.point.x,", ").concat(segment.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var prevNode=node,nextNode=node,prevSeg=void 0,nextSeg=void 0;prevSeg===void 0;)prevNode=this.tree.prev(prevNode),prevNode===null?prevSeg=null:prevNode.key.consumedBy===void 0&&(prevSeg=prevNode.key);for(;nextSeg===void 0;)nextNode=this.tree.next(nextNode),nextNode===null?nextSeg=null:nextNode.key.consumedBy===void 0&&(nextSeg=nextNode.key);if(event.isLeft){var prevMySplitter=null;if(prevSeg){var prevInter=prevSeg.getIntersection(segment);if(prevInter!==null&&(segment.isAnEndpoint(prevInter)||(prevMySplitter=prevInter),!prevSeg.isAnEndpoint(prevInter)))for(var newEventsFromSplit=this._splitSafely(prevSeg,prevInter),i=0,iMax=newEventsFromSplit.length;i<iMax;i++)newEvents.push(newEventsFromSplit[i])}var nextMySplitter=null;if(nextSeg){var nextInter=nextSeg.getIntersection(segment);if(nextInter!==null&&(segment.isAnEndpoint(nextInter)||(nextMySplitter=nextInter),!nextSeg.isAnEndpoint(nextInter)))for(var _newEventsFromSplit=this._splitSafely(nextSeg,nextInter),_i=0,_iMax=_newEventsFromSplit.length;_i<_iMax;_i++)newEvents.push(_newEventsFromSplit[_i])}if(prevMySplitter!==null||nextMySplitter!==null){var mySplitter=null;if(prevMySplitter===null)mySplitter=nextMySplitter;else if(nextMySplitter===null)mySplitter=prevMySplitter;else{var cmpSplitters=SweepEvent.comparePoints(prevMySplitter,nextMySplitter);mySplitter=cmpSplitters<=0?prevMySplitter:nextMySplitter}this.queue.remove(segment.rightSE),newEvents.push(segment.rightSE);for(var _newEventsFromSplit2=segment.split(mySplitter),_i2=0,_iMax2=_newEventsFromSplit2.length;_i2<_iMax2;_i2++)newEvents.push(_newEventsFromSplit2[_i2])}newEvents.length>0?(this.tree.remove(segment),newEvents.push(event)):(this.segments.push(segment),segment.prev=prevSeg)}else{if(prevSeg&&nextSeg){var inter=prevSeg.getIntersection(nextSeg);if(inter!==null){if(!prevSeg.isAnEndpoint(inter))for(var _newEventsFromSplit3=this._splitSafely(prevSeg,inter),_i3=0,_iMax3=_newEventsFromSplit3.length;_i3<_iMax3;_i3++)newEvents.push(_newEventsFromSplit3[_i3]);if(!nextSeg.isAnEndpoint(inter))for(var _newEventsFromSplit4=this._splitSafely(nextSeg,inter),_i4=0,_iMax4=_newEventsFromSplit4.length;_i4<_iMax4;_i4++)newEvents.push(_newEventsFromSplit4[_i4])}}this.tree.remove(segment)}return newEvents}},{key:"_splitSafely",value:function(seg,pt){this.tree.remove(seg);var rightSE=seg.rightSE;this.queue.remove(rightSE);var newEvents=seg.split(pt);return newEvents.push(rightSE),seg.consumedBy===void 0&&this.tree.insert(seg),newEvents}}]),SweepLine2}(),POLYGON_CLIPPING_MAX_QUEUE_SIZE=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Operation=function(){function Operation2(){_classCallCheck(this,Operation2)}return _createClass(Operation2,[{key:"run",value:function(type2,geom,moreGeoms){operation.type=type2,rounder.reset();for(var multipolys=[new MultiPolyIn(geom,!0)],i=0,iMax=moreGeoms.length;i<iMax;i++)multipolys.push(new MultiPolyIn(moreGeoms[i],!1));if(operation.numMultiPolys=multipolys.length,operation.type==="difference")for(var subject=multipolys[0],_i=1;_i<multipolys.length;)getBboxOverlap(multipolys[_i].bbox,subject.bbox)!==null?_i++:multipolys.splice(_i,1);if(operation.type==="intersection"){for(var _i2=0,_iMax=multipolys.length;_i2<_iMax;_i2++)for(var mpA=multipolys[_i2],j=_i2+1,jMax=multipolys.length;j<jMax;j++)if(getBboxOverlap(mpA.bbox,multipolys[j].bbox)===null)return[]}for(var queue=new splay_esm_default(SweepEvent.compare),_i3=0,_iMax2=multipolys.length;_i3<_iMax2;_i3++)for(var sweepEvents=multipolys[_i3].getSweepEvents(),_j=0,_jMax=sweepEvents.length;_j<_jMax;_j++)if(queue.insert(sweepEvents[_j]),queue.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var sweepLine=new SweepLine(queue),prevQueueSize=queue.size,node=queue.pop();node;){var evt=node.key;if(queue.size===prevQueueSize){var seg=evt.segment;throw new Error("Unable to pop() ".concat(evt.isLeft?"left":"right"," SweepEvent ")+"[".concat(evt.point.x,", ").concat(evt.point.y,"] from segment #").concat(seg.id," ")+"[".concat(seg.leftSE.point.x,", ").concat(seg.leftSE.point.y,"] -> ")+"[".concat(seg.rightSE.point.x,", ").concat(seg.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(queue.size>POLYGON_CLIPPING_MAX_QUEUE_SIZE)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(sweepLine.segments.length>POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var newEvents=sweepLine.process(evt),_i4=0,_iMax3=newEvents.length;_i4<_iMax3;_i4++){var _evt=newEvents[_i4];_evt.consumedBy===void 0&&queue.insert(_evt)}prevQueueSize=queue.size,node=queue.pop()}rounder.reset();var ringsOut=RingOut.factory(sweepLine.segments),result=new MultiPolyOut(ringsOut);return result.getGeom()}}]),Operation2}(),operation=new Operation;"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(value){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var arrayLike=Object(this),length4=Math.max(Math.min(arrayLike.length,9007199254740991),0)||0,relativeStart=1 in arguments&&parseInt(Number(arguments[1]),10)||0;relativeStart=relativeStart<0?Math.max(length4+relativeStart,0):Math.min(relativeStart,length4);var relativeEnd=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:length4;for(relativeEnd=relativeEnd<0?Math.max(length4+arguments[2],0):Math.min(relativeEnd,length4);relativeStart<relativeEnd;)arrayLike[relativeStart]=value,++relativeStart;return arrayLike},writable:!0});Number.isFinite=Number.isFinite||function(value){return typeof value=="number"&&isFinite(value)};Number.isInteger=Number.isInteger||function(val){return typeof val=="number"&&isFinite(val)&&Math.floor(val)===val};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(value){return value!==value};Math.trunc=Math.trunc||function(x2){return x2<0?Math.ceil(x2):Math.floor(x2)};var NumberUtil=function(){};NumberUtil.prototype.interfaces_=function(){return[]};NumberUtil.prototype.getClass=function(){return NumberUtil};NumberUtil.prototype.equalsWithTolerance=function(x12,x2,tolerance){return Math.abs(x12-x2)<=tolerance};var IllegalArgumentException=function(Error2){function IllegalArgumentException2(message){Error2.call(this,message),this.name="IllegalArgumentException",this.message=message,this.stack=new Error2().stack}return Error2&&(IllegalArgumentException2.__proto__=Error2),IllegalArgumentException2.prototype=Object.create(Error2&&Error2.prototype),IllegalArgumentException2.prototype.constructor=IllegalArgumentException2,IllegalArgumentException2}(Error),Double=function(){},staticAccessors$1={MAX_VALUE:{configurable:!0}};Double.isNaN=function(n){return Number.isNaN(n)};Double.doubleToLongBits=function(n){return n};Double.longBitsToDouble=function(n){return n};Double.isInfinite=function(n){return!Number.isFinite(n)};staticAccessors$1.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(Double,staticAccessors$1);var Comparable=function(){},Clonable=function(){},Comparator=function(){};function Serializable(){}var Coordinate=function Coordinate2(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=Coordinate2.NULL_ORDINATE;else if(arguments.length===1){var c=arguments[0];this.x=c.x,this.y=c.y,this.z=c.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=Coordinate2.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},staticAccessors={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Coordinate.prototype.setOrdinate=function(ordinateIndex,value){switch(ordinateIndex){case Coordinate.X:this.x=value;break;case Coordinate.Y:this.y=value;break;case Coordinate.Z:this.z=value;break;default:throw new IllegalArgumentException("Invalid ordinate index: "+ordinateIndex)}};Coordinate.prototype.equals2D=function(){if(arguments.length===1){var other=arguments[0];return!(this.x!==other.x||this.y!==other.y)}else if(arguments.length===2){var c=arguments[0],tolerance=arguments[1];return!(!NumberUtil.equalsWithTolerance(this.x,c.x,tolerance)||!NumberUtil.equalsWithTolerance(this.y,c.y,tolerance))}};Coordinate.prototype.getOrdinate=function(ordinateIndex){switch(ordinateIndex){case Coordinate.X:return this.x;case Coordinate.Y:return this.y;case Coordinate.Z:return this.z;default:}throw new IllegalArgumentException("Invalid ordinate index: "+ordinateIndex)};Coordinate.prototype.equals3D=function(other){return this.x===other.x&&this.y===other.y&&(this.z===other.z||Double.isNaN(this.z))&&Double.isNaN(other.z)};Coordinate.prototype.equals=function(other){return other instanceof Coordinate?this.equals2D(other):!1};Coordinate.prototype.equalInZ=function(c,tolerance){return NumberUtil.equalsWithTolerance(this.z,c.z,tolerance)};Coordinate.prototype.compareTo=function(o){var other=o;return this.x<other.x?-1:this.x>other.x?1:this.y<other.y?-1:this.y>other.y?1:0};Coordinate.prototype.clone=function(){};Coordinate.prototype.copy=function(){return new Coordinate(this)};Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};Coordinate.prototype.distance3D=function(c){var dx=this.x-c.x,dy=this.y-c.y,dz=this.z-c.z;return Math.sqrt(dx*dx+dy*dy+dz*dz)};Coordinate.prototype.distance=function(c){var dx=this.x-c.x,dy=this.y-c.y;return Math.sqrt(dx*dx+dy*dy)};Coordinate.prototype.hashCode=function(){var result=17;return result=37*result+Coordinate.hashCode(this.x),result=37*result+Coordinate.hashCode(this.y),result};Coordinate.prototype.setCoordinate=function(other){this.x=other.x,this.y=other.y,this.z=other.z};Coordinate.prototype.interfaces_=function(){return[Comparable,Clonable,Serializable]};Coordinate.prototype.getClass=function(){return Coordinate};Coordinate.hashCode=function(){if(arguments.length===1){var x2=arguments[0],f=Double.doubleToLongBits(x2);return Math.trunc((f^f)>>>32)}};staticAccessors.DimensionalComparator.get=function(){return DimensionalComparator};staticAccessors.serialVersionUID.get=function(){return 6683108902428367e3};staticAccessors.NULL_ORDINATE.get=function(){return Double.NaN};staticAccessors.X.get=function(){return 0};staticAccessors.Y.get=function(){return 1};staticAccessors.Z.get=function(){return 2};Object.defineProperties(Coordinate,staticAccessors);var DimensionalComparator=function(dimensionsToTest){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var dimensionsToTest$1=arguments[0];if(dimensionsToTest$1!==2&&dimensionsToTest$1!==3)throw new IllegalArgumentException("only 2 or 3 dimensions may be specified");this._dimensionsToTest=dimensionsToTest$1}}};DimensionalComparator.prototype.compare=function(o1,o2){var c1=o1,c2=o2,compX=DimensionalComparator.compare(c1.x,c2.x);if(compX!==0)return compX;var compY=DimensionalComparator.compare(c1.y,c2.y);if(compY!==0)return compY;if(this._dimensionsToTest<=2)return 0;var compZ=DimensionalComparator.compare(c1.z,c2.z);return compZ};DimensionalComparator.prototype.interfaces_=function(){return[Comparator]};DimensionalComparator.prototype.getClass=function(){return DimensionalComparator};DimensionalComparator.compare=function(a,b){return a<b?-1:a>b?1:Double.isNaN(a)?Double.isNaN(b)?0:-1:Double.isNaN(b)?1:0};var CoordinateSequenceFactory=function(){};CoordinateSequenceFactory.prototype.create=function(){};CoordinateSequenceFactory.prototype.interfaces_=function(){return[]};CoordinateSequenceFactory.prototype.getClass=function(){return CoordinateSequenceFactory};var Location=function(){},staticAccessors$4={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Location.prototype.interfaces_=function(){return[]};Location.prototype.getClass=function(){return Location};Location.toLocationSymbol=function(locationValue){switch(locationValue){case Location.EXTERIOR:return"e";case Location.BOUNDARY:return"b";case Location.INTERIOR:return"i";case Location.NONE:return"-";default:}throw new IllegalArgumentException("Unknown location value: "+locationValue)};staticAccessors$4.INTERIOR.get=function(){return 0};staticAccessors$4.BOUNDARY.get=function(){return 1};staticAccessors$4.EXTERIOR.get=function(){return 2};staticAccessors$4.NONE.get=function(){return-1};Object.defineProperties(Location,staticAccessors$4);var hasInterface=function(o,i){return o.interfaces_&&o.interfaces_().indexOf(i)>-1},MathUtil=function(){},staticAccessors$5={LOG_10:{configurable:!0}};MathUtil.prototype.interfaces_=function(){return[]};MathUtil.prototype.getClass=function(){return MathUtil};MathUtil.log10=function(x2){var ln=Math.log(x2);return Double.isInfinite(ln)||Double.isNaN(ln)?ln:ln/MathUtil.LOG_10};MathUtil.min=function(v1,v2,v3,v42){var min4=v1;return v2<min4&&(min4=v2),v3<min4&&(min4=v3),v42<min4&&(min4=v42),min4};MathUtil.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var x2=arguments[0],min4=arguments[1],max3=arguments[2];return x2<min4?min4:x2>max3?max3:x2}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var x$1=arguments[0],min$1=arguments[1],max$1=arguments[2];return x$1<min$1?min$1:x$1>max$1?max$1:x$1}};MathUtil.wrap=function(index,max3){return index<0?max3- -index%max3:index%max3};MathUtil.max=function(){if(arguments.length===3){var v1=arguments[0],v2=arguments[1],v3=arguments[2],max3=v1;return v2>max3&&(max3=v2),v3>max3&&(max3=v3),max3}else if(arguments.length===4){var v1$1=arguments[0],v2$1=arguments[1],v3$1=arguments[2],v42=arguments[3],max$1=v1$1;return v2$1>max$1&&(max$1=v2$1),v3$1>max$1&&(max$1=v3$1),v42>max$1&&(max$1=v42),max$1}};MathUtil.average=function(x12,x2){return(x12+x2)/2};staticAccessors$5.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(MathUtil,staticAccessors$5);var StringBuffer=function(str){this.str=str};StringBuffer.prototype.append=function(e){this.str+=e};StringBuffer.prototype.setCharAt=function(i,c){this.str=this.str.substr(0,i)+c+this.str.substr(i+1)};StringBuffer.prototype.toString=function(e){return this.str};var Integer=function(value){this.value=value};Integer.prototype.intValue=function(){return this.value};Integer.prototype.compareTo=function(o){return this.value<o?-1:this.value>o?1:0};Integer.isNaN=function(n){return Number.isNaN(n)};var Character=function(){};Character.isWhitespace=function(c){return c<=32&&c>=0||c===127};Character.toUpperCase=function(c){return c.toUpperCase()};var DD=function DD2(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var x2=arguments[0];this.init(x2)}else if(arguments[0]instanceof DD2){var dd=arguments[0];this.init(dd)}else if(typeof arguments[0]=="string"){var str=arguments[0];DD2.call(this,DD2.parse(str))}}else if(arguments.length===2){var hi=arguments[0],lo=arguments[1];this.init(hi,lo)}},staticAccessors$7={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};DD.prototype.le=function(y2){return(this._hi<y2._hi||this._hi===y2._hi)&&this._lo<=y2._lo};DD.prototype.extractSignificantDigits=function(insertDecimalPoint,magnitude2){var y2=this.abs(),mag=DD.magnitude(y2._hi),scale3=DD.TEN.pow(mag);y2=y2.divide(scale3),y2.gt(DD.TEN)?(y2=y2.divide(DD.TEN),mag+=1):y2.lt(DD.ONE)&&(y2=y2.multiply(DD.TEN),mag-=1);for(var decimalPointPos=mag+1,buf=new StringBuffer,numDigits=DD.MAX_PRINT_DIGITS-1,i=0;i<=numDigits;i++){insertDecimalPoint&&i===decimalPointPos&&buf.append(".");var digit=Math.trunc(y2._hi);if(digit<0)break;var rebiasBy10=!1,digitChar=0;digit>9?(rebiasBy10=!0,digitChar="9"):digitChar="0"+digit,buf.append(digitChar),y2=y2.subtract(DD.valueOf(digit)).multiply(DD.TEN),rebiasBy10&&y2.selfAdd(DD.TEN);var continueExtractingDigits=!0,remMag=DD.magnitude(y2._hi);if(remMag<0&&Math.abs(remMag)>=numDigits-i&&(continueExtractingDigits=!1),!continueExtractingDigits)break}return magnitude2[0]=mag,buf.toString()};DD.prototype.sqr=function(){return this.multiply(this)};DD.prototype.doubleValue=function(){return this._hi+this._lo};DD.prototype.subtract=function(){if(arguments[0]instanceof DD){var y2=arguments[0];return this.add(y2.negate())}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return this.add(-y$1)}};DD.prototype.equals=function(){if(arguments.length===1){var y2=arguments[0];return this._hi===y2._hi&&this._lo===y2._lo}};DD.prototype.isZero=function(){return this._hi===0&&this._lo===0};DD.prototype.selfSubtract=function(){if(arguments[0]instanceof DD){var y2=arguments[0];return this.isNaN()?this:this.selfAdd(-y2._hi,-y2._lo)}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return this.isNaN()?this:this.selfAdd(-y$1,0)}};DD.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};DD.prototype.min=function(x2){return this.le(x2)?this:x2};DD.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof DD){var y2=arguments[0];return this.selfDivide(y2._hi,y2._lo)}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return this.selfDivide(y$1,0)}}else if(arguments.length===2){var yhi=arguments[0],ylo=arguments[1],hc=null,tc=null,hy=null,ty=null,C=null,c=null,U=null,u=null;return C=this._hi/yhi,c=DD.SPLIT*C,hc=c-C,u=DD.SPLIT*yhi,hc=c-hc,tc=C-hc,hy=u-yhi,U=C*yhi,hy=u-hy,ty=yhi-hy,u=hc*hy-U+hc*ty+tc*hy+tc*ty,c=(this._hi-U-u+this._lo-C*ylo)/yhi,u=C+c,this._hi=u,this._lo=C-u+c,this}};DD.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};DD.prototype.divide=function(){if(arguments[0]instanceof DD){var y2=arguments[0],hc=null,tc=null,hy=null,ty=null,C=null,c=null,U=null,u=null;C=this._hi/y2._hi,c=DD.SPLIT*C,hc=c-C,u=DD.SPLIT*y2._hi,hc=c-hc,tc=C-hc,hy=u-y2._hi,U=C*y2._hi,hy=u-hy,ty=y2._hi-hy,u=hc*hy-U+hc*ty+tc*hy+tc*ty,c=(this._hi-U-u+this._lo-C*y2._lo)/y2._hi,u=C+c;var zhi=u,zlo=C-u+c;return new DD(zhi,zlo)}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return Double.isNaN(y$1)?DD.createNaN():DD.copy(this).selfDivide(y$1,0)}};DD.prototype.ge=function(y2){return(this._hi>y2._hi||this._hi===y2._hi)&&this._lo>=y2._lo};DD.prototype.pow=function(exp2){if(exp2===0)return DD.valueOf(1);var r=new DD(this),s=DD.valueOf(1),n=Math.abs(exp2);if(n>1)for(;n>0;)n%2===1&&s.selfMultiply(r),n/=2,n>0&&(r=r.sqr());else s=r;return exp2<0?s.reciprocal():s};DD.prototype.ceil=function(){if(this.isNaN())return DD.NaN;var fhi=Math.ceil(this._hi),flo=0;return fhi===this._hi&&(flo=Math.ceil(this._lo)),new DD(fhi,flo)};DD.prototype.compareTo=function(o){var other=o;return this._hi<other._hi?-1:this._hi>other._hi?1:this._lo<other._lo?-1:this._lo>other._lo?1:0};DD.prototype.rint=function(){if(this.isNaN())return this;var plus5=this.add(.5);return plus5.floor()};DD.prototype.setValue=function(){if(arguments[0]instanceof DD){var value=arguments[0];return this.init(value),this}else if(typeof arguments[0]=="number"){var value$1=arguments[0];return this.init(value$1),this}};DD.prototype.max=function(x2){return this.ge(x2)?this:x2};DD.prototype.sqrt=function(){if(this.isZero())return DD.valueOf(0);if(this.isNegative())return DD.NaN;var x2=1/Math.sqrt(this._hi),ax=this._hi*x2,axdd=DD.valueOf(ax),diffSq=this.subtract(axdd.sqr()),d2=diffSq._hi*(x2*.5);return axdd.add(d2)};DD.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof DD){var y2=arguments[0];return this.selfAdd(y2._hi,y2._lo)}else if(typeof arguments[0]=="number"){var y$1=arguments[0],H=null,h=null,S=null,s=null,e=null,f=null;return S=this._hi+y$1,e=S-this._hi,s=S-e,s=y$1-e+(this._hi-s),f=s+this._lo,H=S+f,h=f+(S-H),this._hi=H+h,this._lo=h+(H-this._hi),this}}else if(arguments.length===2){var yhi=arguments[0],ylo=arguments[1],H$1=null,h$1=null,T=null,t=null,S$1=null,s$1=null,e$1=null,f$1=null;S$1=this._hi+yhi,T=this._lo+ylo,e$1=S$1-this._hi,f$1=T-this._lo,s$1=S$1-e$1,t=T-f$1,s$1=yhi-e$1+(this._hi-s$1),t=ylo-f$1+(this._lo-t),e$1=s$1+T,H$1=S$1+e$1,h$1=e$1+(S$1-H$1),e$1=t+h$1;var zhi=H$1+e$1,zlo=e$1+(H$1-zhi);return this._hi=zhi,this._lo=zlo,this}};DD.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof DD){var y2=arguments[0];return this.selfMultiply(y2._hi,y2._lo)}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return this.selfMultiply(y$1,0)}}else if(arguments.length===2){var yhi=arguments[0],ylo=arguments[1],hx=null,tx=null,hy=null,ty=null,C=null,c=null;C=DD.SPLIT*this._hi,hx=C-this._hi,c=DD.SPLIT*yhi,hx=C-hx,tx=this._hi-hx,hy=c-yhi,C=this._hi*yhi,hy=c-hy,ty=yhi-hy,c=hx*hy-C+hx*ty+tx*hy+tx*ty+(this._hi*ylo+this._lo*yhi);var zhi=C+c;hx=C-zhi;var zlo=c+hx;return this._hi=zhi,this._lo=zlo,this}};DD.prototype.selfSqr=function(){return this.selfMultiply(this)};DD.prototype.floor=function(){if(this.isNaN())return DD.NaN;var fhi=Math.floor(this._hi),flo=0;return fhi===this._hi&&(flo=Math.floor(this._lo)),new DD(fhi,flo)};DD.prototype.negate=function(){return this.isNaN()?this:new DD(-this._hi,-this._lo)};DD.prototype.clone=function(){};DD.prototype.multiply=function(){if(arguments[0]instanceof DD){var y2=arguments[0];return y2.isNaN()?DD.createNaN():DD.copy(this).selfMultiply(y2)}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return Double.isNaN(y$1)?DD.createNaN():DD.copy(this).selfMultiply(y$1,0)}};DD.prototype.isNaN=function(){return Double.isNaN(this._hi)};DD.prototype.intValue=function(){return Math.trunc(this._hi)};DD.prototype.toString=function(){var mag=DD.magnitude(this._hi);return mag>=-3&&mag<=20?this.toStandardNotation():this.toSciNotation()};DD.prototype.toStandardNotation=function(){var specialStr=this.getSpecialNumberString();if(specialStr!==null)return specialStr;var magnitude2=new Array(1).fill(null),sigDigits=this.extractSignificantDigits(!0,magnitude2),decimalPointPos=magnitude2[0]+1,num=sigDigits;if(sigDigits.charAt(0)===".")num="0"+sigDigits;else if(decimalPointPos<0)num="0."+DD.stringOfChar("0",-decimalPointPos)+sigDigits;else if(sigDigits.indexOf(".")===-1){var numZeroes=decimalPointPos-sigDigits.length,zeroes=DD.stringOfChar("0",numZeroes);num=sigDigits+zeroes+".0"}return this.isNegative()?"-"+num:num};DD.prototype.reciprocal=function(){var hc=null,tc=null,hy=null,ty=null,C=null,c=null,U=null,u=null;C=1/this._hi,c=DD.SPLIT*C,hc=c-C,u=DD.SPLIT*this._hi,hc=c-hc,tc=C-hc,hy=u-this._hi,U=C*this._hi,hy=u-hy,ty=this._hi-hy,u=hc*hy-U+hc*ty+tc*hy+tc*ty,c=(1-U-u-C*this._lo)/this._hi;var zhi=C+c,zlo=C-zhi+c;return new DD(zhi,zlo)};DD.prototype.toSciNotation=function(){if(this.isZero())return DD.SCI_NOT_ZERO;var specialStr=this.getSpecialNumberString();if(specialStr!==null)return specialStr;var magnitude2=new Array(1).fill(null),digits=this.extractSignificantDigits(!1,magnitude2),expStr=DD.SCI_NOT_EXPONENT_CHAR+magnitude2[0];if(digits.charAt(0)==="0")throw new Error("Found leading zero: "+digits);var trailingDigits="";digits.length>1&&(trailingDigits=digits.substring(1));var digitsWithDecimal=digits.charAt(0)+"."+trailingDigits;return this.isNegative()?"-"+digitsWithDecimal+expStr:digitsWithDecimal+expStr};DD.prototype.abs=function(){return this.isNaN()?DD.NaN:this.isNegative()?this.negate():new DD(this)};DD.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};DD.prototype.lt=function(y2){return(this._hi<y2._hi||this._hi===y2._hi)&&this._lo<y2._lo};DD.prototype.add=function(){if(arguments[0]instanceof DD){var y2=arguments[0];return DD.copy(this).selfAdd(y2)}else if(typeof arguments[0]=="number"){var y$1=arguments[0];return DD.copy(this).selfAdd(y$1)}};DD.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var x2=arguments[0];this._hi=x2,this._lo=0}else if(arguments[0]instanceof DD){var dd=arguments[0];this._hi=dd._hi,this._lo=dd._lo}}else if(arguments.length===2){var hi=arguments[0],lo=arguments[1];this._hi=hi,this._lo=lo}};DD.prototype.gt=function(y2){return(this._hi>y2._hi||this._hi===y2._hi)&&this._lo>y2._lo};DD.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};DD.prototype.trunc=function(){return this.isNaN()?DD.NaN:this.isPositive()?this.floor():this.ceil()};DD.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};DD.prototype.interfaces_=function(){return[Serializable,Comparable,Clonable]};DD.prototype.getClass=function(){return DD};DD.sqr=function(x2){return DD.valueOf(x2).selfMultiply(x2)};DD.valueOf=function(){if(typeof arguments[0]=="string"){var str=arguments[0];return DD.parse(str)}else if(typeof arguments[0]=="number"){var x2=arguments[0];return new DD(x2)}};DD.sqrt=function(x2){return DD.valueOf(x2).sqrt()};DD.parse=function(str){for(var i=0,strlen=str.length;Character.isWhitespace(str.charAt(i));)i++;var isNegative2=!1;if(i<strlen){var signCh=str.charAt(i);(signCh==="-"||signCh==="+")&&(i++,signCh==="-"&&(isNegative2=!0))}for(var val=new DD,numDigits=0,numBeforeDec=0,exp2=0;!(i>=strlen);){var ch=str.charAt(i);if(i++,Character.isDigit(ch)){var d=ch-"0";val.selfMultiply(DD.TEN),val.selfAdd(d),numDigits++;continue}if(ch==="."){numBeforeDec=numDigits;continue}if(ch==="e"||ch==="E"){var expStr=str.substring(i);try{exp2=Integer.parseInt(expStr)}catch(ex){throw ex instanceof Error?new Error("Invalid exponent "+expStr+" in string "+str):ex}finally{}break}throw new Error("Unexpected character '"+ch+"' at position "+i+" in string "+str)}var val2=val,numDecPlaces=numDigits-numBeforeDec-exp2;if(numDecPlaces===0)val2=val;else if(numDecPlaces>0){var scale3=DD.TEN.pow(numDecPlaces);val2=val.divide(scale3)}else if(numDecPlaces<0){var scale$1=DD.TEN.pow(-numDecPlaces);val2=val.multiply(scale$1)}return isNegative2?val2.negate():val2};DD.createNaN=function(){return new DD(Double.NaN,Double.NaN)};DD.copy=function(dd){return new DD(dd)};DD.magnitude=function(x2){var xAbs=Math.abs(x2),xLog10=Math.log(xAbs)/Math.log(10),xMag=Math.trunc(Math.floor(xLog10)),xApprox=Math.pow(10,xMag);return xApprox*10<=xAbs&&(xMag+=1),xMag};DD.stringOfChar=function(ch,len){for(var buf=new StringBuffer,i=0;i<len;i++)buf.append(ch);return buf.toString()};staticAccessors$7.PI.get=function(){return new DD(3.141592653589793,12246467991473532e-32)};staticAccessors$7.TWO_PI.get=function(){return new DD(6.283185307179586,24492935982947064e-32)};staticAccessors$7.PI_2.get=function(){return new DD(1.5707963267948966,6123233995736766e-32)};staticAccessors$7.E.get=function(){return new DD(2.718281828459045,14456468917292502e-32)};staticAccessors$7.NaN.get=function(){return new DD(Double.NaN,Double.NaN)};staticAccessors$7.EPS.get=function(){return 123259516440783e-46};staticAccessors$7.SPLIT.get=function(){return 134217729};staticAccessors$7.MAX_PRINT_DIGITS.get=function(){return 32};staticAccessors$7.TEN.get=function(){return DD.valueOf(10)};staticAccessors$7.ONE.get=function(){return DD.valueOf(1)};staticAccessors$7.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};staticAccessors$7.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(DD,staticAccessors$7);var CGAlgorithmsDD=function(){},staticAccessors$6={DP_SAFE_EPSILON:{configurable:!0}};CGAlgorithmsDD.prototype.interfaces_=function(){return[]};CGAlgorithmsDD.prototype.getClass=function(){return CGAlgorithmsDD};CGAlgorithmsDD.orientationIndex=function(p1,p2,q){var index=CGAlgorithmsDD.orientationIndexFilter(p1,p2,q);if(index<=1)return index;var dx1=DD.valueOf(p2.x).selfAdd(-p1.x),dy1=DD.valueOf(p2.y).selfAdd(-p1.y),dx2=DD.valueOf(q.x).selfAdd(-p2.x),dy2=DD.valueOf(q.y).selfAdd(-p2.y);return dx1.selfMultiply(dy2).selfSubtract(dy1.selfMultiply(dx2)).signum()};CGAlgorithmsDD.signOfDet2x2=function(x12,y1,x2,y2){var det2=x12.multiply(y2).selfSubtract(y1.multiply(x2));return det2.signum()};CGAlgorithmsDD.intersection=function(p1,p2,q1,q2){var denom1=DD.valueOf(q2.y).selfSubtract(q1.y).selfMultiply(DD.valueOf(p2.x).selfSubtract(p1.x)),denom2=DD.valueOf(q2.x).selfSubtract(q1.x).selfMultiply(DD.valueOf(p2.y).selfSubtract(p1.y)),denom=denom1.subtract(denom2),numx1=DD.valueOf(q2.x).selfSubtract(q1.x).selfMultiply(DD.valueOf(p1.y).selfSubtract(q1.y)),numx2=DD.valueOf(q2.y).selfSubtract(q1.y).selfMultiply(DD.valueOf(p1.x).selfSubtract(q1.x)),numx=numx1.subtract(numx2),fracP=numx.selfDivide(denom).doubleValue(),x2=DD.valueOf(p1.x).selfAdd(DD.valueOf(p2.x).selfSubtract(p1.x).selfMultiply(fracP)).doubleValue(),numy1=DD.valueOf(p2.x).selfSubtract(p1.x).selfMultiply(DD.valueOf(p1.y).selfSubtract(q1.y)),numy2=DD.valueOf(p2.y).selfSubtract(p1.y).selfMultiply(DD.valueOf(p1.x).selfSubtract(q1.x)),numy=numy1.subtract(numy2),fracQ=numy.selfDivide(denom).doubleValue(),y2=DD.valueOf(q1.y).selfAdd(DD.valueOf(q2.y).selfSubtract(q1.y).selfMultiply(fracQ)).doubleValue();return new Coordinate(x2,y2)};CGAlgorithmsDD.orientationIndexFilter=function(pa,pb,pc){var detsum=null,detleft=(pa.x-pc.x)*(pb.y-pc.y),detright=(pa.y-pc.y)*(pb.x-pc.x),det2=detleft-detright;if(detleft>0){if(detright<=0)return CGAlgorithmsDD.signum(det2);detsum=detleft+detright}else if(detleft<0){if(detright>=0)return CGAlgorithmsDD.signum(det2);detsum=-detleft-detright}else return CGAlgorithmsDD.signum(det2);var errbound=CGAlgorithmsDD.DP_SAFE_EPSILON*detsum;return det2>=errbound||-det2>=errbound?CGAlgorithmsDD.signum(det2):2};CGAlgorithmsDD.signum=function(x2){return x2>0?1:x2<0?-1:0};staticAccessors$6.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(CGAlgorithmsDD,staticAccessors$6);var CoordinateSequence=function(){},staticAccessors$8={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};staticAccessors$8.X.get=function(){return 0};staticAccessors$8.Y.get=function(){return 1};staticAccessors$8.Z.get=function(){return 2};staticAccessors$8.M.get=function(){return 3};CoordinateSequence.prototype.setOrdinate=function(index,ordinateIndex,value){};CoordinateSequence.prototype.size=function(){};CoordinateSequence.prototype.getOrdinate=function(index,ordinateIndex){};CoordinateSequence.prototype.getCoordinate=function(){};CoordinateSequence.prototype.getCoordinateCopy=function(i){};CoordinateSequence.prototype.getDimension=function(){};CoordinateSequence.prototype.getX=function(index){};CoordinateSequence.prototype.clone=function(){};CoordinateSequence.prototype.expandEnvelope=function(env){};CoordinateSequence.prototype.copy=function(){};CoordinateSequence.prototype.getY=function(index){};CoordinateSequence.prototype.toCoordinateArray=function(){};CoordinateSequence.prototype.interfaces_=function(){return[Clonable]};CoordinateSequence.prototype.getClass=function(){return CoordinateSequence};Object.defineProperties(CoordinateSequence,staticAccessors$8);var Exception=function(){},NotRepresentableException=function(Exception$$1){function NotRepresentableException2(){Exception$$1.call(this,"Projective point not representable on the Cartesian plane.")}return Exception$$1&&(NotRepresentableException2.__proto__=Exception$$1),NotRepresentableException2.prototype=Object.create(Exception$$1&&Exception$$1.prototype),NotRepresentableException2.prototype.constructor=NotRepresentableException2,NotRepresentableException2.prototype.interfaces_=function(){return[]},NotRepresentableException2.prototype.getClass=function(){return NotRepresentableException2},NotRepresentableException2}(Exception),System=function(){};System.arraycopy=function(src,srcPos,dest,destPos,len){for(var c=0,i=srcPos;i<srcPos+len;i++)dest[destPos+c]=src[i],c++};System.getProperty=function(name){return{"line.separator":`
`}[name]};var HCoordinate=function HCoordinate2(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var p=arguments[0];this.x=p.x,this.y=p.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var _x=arguments[0],_y=arguments[1];this.x=_x,this.y=_y,this.w=1}else if(arguments[0]instanceof HCoordinate2&&arguments[1]instanceof HCoordinate2){var p1=arguments[0],p2=arguments[1];this.x=p1.y*p2.w-p2.y*p1.w,this.y=p2.x*p1.w-p1.x*p2.w,this.w=p1.x*p2.y-p2.x*p1.y}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var p1$1=arguments[0],p2$1=arguments[1];this.x=p1$1.y-p2$1.y,this.y=p2$1.x-p1$1.x,this.w=p1$1.x*p2$1.y-p2$1.x*p1$1.y}}else if(arguments.length===3){var _x$1=arguments[0],_y$1=arguments[1],_w=arguments[2];this.x=_x$1,this.y=_y$1,this.w=_w}else if(arguments.length===4){var p1$2=arguments[0],p2$2=arguments[1],q1=arguments[2],q2=arguments[3],px=p1$2.y-p2$2.y,py=p2$2.x-p1$2.x,pw=p1$2.x*p2$2.y-p2$2.x*p1$2.y,qx=q1.y-q2.y,qy=q2.x-q1.x,qw=q1.x*q2.y-q2.x*q1.y;this.x=py*qw-qy*pw,this.y=qx*pw-px*qw,this.w=px*qy-qx*py}};HCoordinate.prototype.getY=function(){var a=this.y/this.w;if(Double.isNaN(a)||Double.isInfinite(a))throw new NotRepresentableException;return a};HCoordinate.prototype.getX=function(){var a=this.x/this.w;if(Double.isNaN(a)||Double.isInfinite(a))throw new NotRepresentableException;return a};HCoordinate.prototype.getCoordinate=function(){var p=new Coordinate;return p.x=this.getX(),p.y=this.getY(),p};HCoordinate.prototype.interfaces_=function(){return[]};HCoordinate.prototype.getClass=function(){return HCoordinate};HCoordinate.intersection=function(p1,p2,q1,q2){var px=p1.y-p2.y,py=p2.x-p1.x,pw=p1.x*p2.y-p2.x*p1.y,qx=q1.y-q2.y,qy=q2.x-q1.x,qw=q1.x*q2.y-q2.x*q1.y,x2=py*qw-qy*pw,y2=qx*pw-px*qw,w=px*qy-qx*py,xInt=x2/w,yInt=y2/w;if(Double.isNaN(xInt)||Double.isInfinite(xInt)||Double.isNaN(yInt)||Double.isInfinite(yInt))throw new NotRepresentableException;return new Coordinate(xInt,yInt)};var Envelope=function Envelope2(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var p=arguments[0];this.init(p.x,p.x,p.y,p.y)}else if(arguments[0]instanceof Envelope2){var env=arguments[0];this.init(env)}}else if(arguments.length===2){var p1=arguments[0],p2=arguments[1];this.init(p1.x,p2.x,p1.y,p2.y)}else if(arguments.length===4){var x12=arguments[0],x2=arguments[1],y1=arguments[2],y2=arguments[3];this.init(x12,x2,y1,y2)}},staticAccessors$9={serialVersionUID:{configurable:!0}};Envelope.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Envelope.prototype.equals=function(other){if(!(other instanceof Envelope))return!1;var otherEnvelope=other;return this.isNull()?otherEnvelope.isNull():this._maxx===otherEnvelope.getMaxX()&&this._maxy===otherEnvelope.getMaxY()&&this._minx===otherEnvelope.getMinX()&&this._miny===otherEnvelope.getMinY()};Envelope.prototype.intersection=function(env){if(this.isNull()||env.isNull()||!this.intersects(env))return new Envelope;var intMinX=this._minx>env._minx?this._minx:env._minx,intMinY=this._miny>env._miny?this._miny:env._miny,intMaxX=this._maxx<env._maxx?this._maxx:env._maxx,intMaxY=this._maxy<env._maxy?this._maxy:env._maxy;return new Envelope(intMinX,intMaxX,intMinY,intMaxY)};Envelope.prototype.isNull=function(){return this._maxx<this._minx};Envelope.prototype.getMaxX=function(){return this._maxx};Envelope.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var p=arguments[0];return this.covers(p.x,p.y)}else if(arguments[0]instanceof Envelope){var other=arguments[0];return this.isNull()||other.isNull()?!1:other.getMinX()>=this._minx&&other.getMaxX()<=this._maxx&&other.getMinY()>=this._miny&&other.getMaxY()<=this._maxy}}else if(arguments.length===2){var x2=arguments[0],y2=arguments[1];return this.isNull()?!1:x2>=this._minx&&x2<=this._maxx&&y2>=this._miny&&y2<=this._maxy}};Envelope.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var other=arguments[0];return this.isNull()||other.isNull()?!1:!(other._minx>this._maxx||other._maxx<this._minx||other._miny>this._maxy||other._maxy<this._miny)}else if(arguments[0]instanceof Coordinate){var p=arguments[0];return this.intersects(p.x,p.y)}}else if(arguments.length===2){var x2=arguments[0],y2=arguments[1];return this.isNull()?!1:!(x2>this._maxx||x2<this._minx||y2>this._maxy||y2<this._miny)}};Envelope.prototype.getMinY=function(){return this._miny};Envelope.prototype.getMinX=function(){return this._minx};Envelope.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof Coordinate){var p=arguments[0];this.expandToInclude(p.x,p.y)}else if(arguments[0]instanceof Envelope){var other=arguments[0];if(other.isNull())return null;this.isNull()?(this._minx=other.getMinX(),this._maxx=other.getMaxX(),this._miny=other.getMinY(),this._maxy=other.getMaxY()):(other._minx<this._minx&&(this._minx=other._minx),other._maxx>this._maxx&&(this._maxx=other._maxx),other._miny<this._miny&&(this._miny=other._miny),other._maxy>this._maxy&&(this._maxy=other._maxy))}}else if(arguments.length===2){var x2=arguments[0],y2=arguments[1];this.isNull()?(this._minx=x2,this._maxx=x2,this._miny=y2,this._maxy=y2):(x2<this._minx&&(this._minx=x2),x2>this._maxx&&(this._maxx=x2),y2<this._miny&&(this._miny=y2),y2>this._maxy&&(this._maxy=y2))}};Envelope.prototype.minExtent=function(){if(this.isNull())return 0;var w=this.getWidth(),h=this.getHeight();return w<h?w:h};Envelope.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};Envelope.prototype.compareTo=function(o){var env=o;return this.isNull()?env.isNull()?0:-1:env.isNull()?1:this._minx<env._minx?-1:this._minx>env._minx?1:this._miny<env._miny?-1:this._miny>env._miny?1:this._maxx<env._maxx?-1:this._maxx>env._maxx?1:this._maxy<env._maxy?-1:this._maxy>env._maxy?1:0};Envelope.prototype.translate=function(transX,transY){if(this.isNull())return null;this.init(this.getMinX()+transX,this.getMaxX()+transX,this.getMinY()+transY,this.getMaxY()+transY)};Envelope.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Envelope.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Envelope.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};Envelope.prototype.maxExtent=function(){if(this.isNull())return 0;var w=this.getWidth(),h=this.getHeight();return w>h?w:h};Envelope.prototype.expandBy=function(){if(arguments.length===1){var distance10=arguments[0];this.expandBy(distance10,distance10)}else if(arguments.length===2){var deltaX=arguments[0],deltaY=arguments[1];if(this.isNull())return null;this._minx-=deltaX,this._maxx+=deltaX,this._miny-=deltaY,this._maxy+=deltaY,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Envelope.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Envelope){var other=arguments[0];return this.covers(other)}else if(arguments[0]instanceof Coordinate){var p=arguments[0];return this.covers(p)}}else if(arguments.length===2){var x2=arguments[0],y2=arguments[1];return this.covers(x2,y2)}};Envelope.prototype.centre=function(){return this.isNull()?null:new Coordinate((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Envelope.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof Coordinate){var p=arguments[0];this.init(p.x,p.x,p.y,p.y)}else if(arguments[0]instanceof Envelope){var env=arguments[0];this._minx=env._minx,this._maxx=env._maxx,this._miny=env._miny,this._maxy=env._maxy}}else if(arguments.length===2){var p1=arguments[0],p2=arguments[1];this.init(p1.x,p2.x,p1.y,p2.y)}else if(arguments.length===4){var x12=arguments[0],x2=arguments[1],y1=arguments[2],y2=arguments[3];x12<x2?(this._minx=x12,this._maxx=x2):(this._minx=x2,this._maxx=x12),y1<y2?(this._miny=y1,this._maxy=y2):(this._miny=y2,this._maxy=y1)}};Envelope.prototype.getMaxY=function(){return this._maxy};Envelope.prototype.distance=function(env){if(this.intersects(env))return 0;var dx=0;this._maxx<env._minx?dx=env._minx-this._maxx:this._minx>env._maxx&&(dx=this._minx-env._maxx);var dy=0;return this._maxy<env._miny?dy=env._miny-this._maxy:this._miny>env._maxy&&(dy=this._miny-env._maxy),dx===0?dy:dy===0?dx:Math.sqrt(dx*dx+dy*dy)};Envelope.prototype.hashCode=function(){var result=17;return result=37*result+Coordinate.hashCode(this._minx),result=37*result+Coordinate.hashCode(this._maxx),result=37*result+Coordinate.hashCode(this._miny),result=37*result+Coordinate.hashCode(this._maxy),result};Envelope.prototype.interfaces_=function(){return[Comparable,Serializable]};Envelope.prototype.getClass=function(){return Envelope};Envelope.intersects=function(){if(arguments.length===3){var p1=arguments[0],p2=arguments[1],q=arguments[2];return q.x>=(p1.x<p2.x?p1.x:p2.x)&&q.x<=(p1.x>p2.x?p1.x:p2.x)&&q.y>=(p1.y<p2.y?p1.y:p2.y)&&q.y<=(p1.y>p2.y?p1.y:p2.y)}else if(arguments.length===4){var p1$1=arguments[0],p2$1=arguments[1],q1=arguments[2],q2=arguments[3],minq=Math.min(q1.x,q2.x),maxq=Math.max(q1.x,q2.x),minp=Math.min(p1$1.x,p2$1.x),maxp=Math.max(p1$1.x,p2$1.x);return!(minp>maxq||maxp<minq||(minq=Math.min(q1.y,q2.y),maxq=Math.max(q1.y,q2.y),minp=Math.min(p1$1.y,p2$1.y),maxp=Math.max(p1$1.y,p2$1.y),minp>maxq)||maxp<minq)}};staticAccessors$9.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Envelope,staticAccessors$9);var regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},WKTParser=function(geometryFactory){this.geometryFactory=geometryFactory||new GeometryFactory};WKTParser.prototype.read=function(wkt){var geometry,type2,str;wkt=wkt.replace(/[\n\r]/g," ");var matches=regExes.typeStr.exec(wkt);if(wkt.search("EMPTY")!==-1&&(matches=regExes.emptyTypeStr.exec(wkt),matches[2]=void 0),matches&&(type2=matches[1].toLowerCase(),str=matches[2],parse$1[type2]&&(geometry=parse$1[type2].apply(this,[str]))),geometry===void 0)throw new Error("Could not parse WKT "+wkt);return geometry};WKTParser.prototype.write=function(geometry){return this.extractGeometry(geometry)};WKTParser.prototype.extractGeometry=function(geometry){var type2=geometry.getGeometryType().toLowerCase();if(!extract$1[type2])return null;var wktType=type2.toUpperCase(),data;return geometry.isEmpty()?data=wktType+" EMPTY":data=wktType+"("+extract$1[type2].apply(this,[geometry])+")",data};var extract$1={coordinate:function(coordinate$1){return coordinate$1.x+" "+coordinate$1.y},point:function(point$1){return extract$1.coordinate.call(this,point$1._coordinates._coordinates[0])},multipoint:function(multipoint$1){for(var this$1=this,array2=[],i=0,len=multipoint$1._geometries.length;i<len;++i)array2.push("("+extract$1.point.apply(this$1,[multipoint$1._geometries[i]])+")");return array2.join(",")},linestring:function(linestring$1){for(var this$1=this,array2=[],i=0,len=linestring$1._points._coordinates.length;i<len;++i)array2.push(extract$1.coordinate.apply(this$1,[linestring$1._points._coordinates[i]]));return array2.join(",")},linearring:function(linearring$1){for(var this$1=this,array2=[],i=0,len=linearring$1._points._coordinates.length;i<len;++i)array2.push(extract$1.coordinate.apply(this$1,[linearring$1._points._coordinates[i]]));return array2.join(",")},multilinestring:function(multilinestring$1){for(var this$1=this,array2=[],i=0,len=multilinestring$1._geometries.length;i<len;++i)array2.push("("+extract$1.linestring.apply(this$1,[multilinestring$1._geometries[i]])+")");return array2.join(",")},polygon:function(polygon$1){var this$1=this,array2=[];array2.push("("+extract$1.linestring.apply(this,[polygon$1._shell])+")");for(var i=0,len=polygon$1._holes.length;i<len;++i)array2.push("("+extract$1.linestring.apply(this$1,[polygon$1._holes[i]])+")");return array2.join(",")},multipolygon:function(multipolygon$1){for(var this$1=this,array2=[],i=0,len=multipolygon$1._geometries.length;i<len;++i)array2.push("("+extract$1.polygon.apply(this$1,[multipolygon$1._geometries[i]])+")");return array2.join(",")},geometrycollection:function(collection){for(var this$1=this,array2=[],i=0,len=collection._geometries.length;i<len;++i)array2.push(this$1.extractGeometry(collection._geometries[i]));return array2.join(",")}},parse$1={point:function(str){if(str===void 0)return this.geometryFactory.createPoint();var coords=str.trim().split(regExes.spaces);return this.geometryFactory.createPoint(new Coordinate(Number.parseFloat(coords[0]),Number.parseFloat(coords[1])))},multipoint:function(str){var this$1=this;if(str===void 0)return this.geometryFactory.createMultiPoint();for(var point4,points=str.trim().split(","),components=[],i=0,len=points.length;i<len;++i)point4=points[i].replace(regExes.trimParens,"$1"),components.push(parse$1.point.apply(this$1,[point4]));return this.geometryFactory.createMultiPoint(components)},linestring:function(str){if(str===void 0)return this.geometryFactory.createLineString();for(var points=str.trim().split(","),components=[],coords,i=0,len=points.length;i<len;++i)coords=points[i].trim().split(regExes.spaces),components.push(new Coordinate(Number.parseFloat(coords[0]),Number.parseFloat(coords[1])));return this.geometryFactory.createLineString(components)},linearring:function(str){if(str===void 0)return this.geometryFactory.createLinearRing();for(var points=str.trim().split(","),components=[],coords,i=0,len=points.length;i<len;++i)coords=points[i].trim().split(regExes.spaces),components.push(new Coordinate(Number.parseFloat(coords[0]),Number.parseFloat(coords[1])));return this.geometryFactory.createLinearRing(components)},multilinestring:function(str){var this$1=this;if(str===void 0)return this.geometryFactory.createMultiLineString();for(var line,lines=str.trim().split(regExes.parenComma),components=[],i=0,len=lines.length;i<len;++i)line=lines[i].replace(regExes.trimParens,"$1"),components.push(parse$1.linestring.apply(this$1,[line]));return this.geometryFactory.createMultiLineString(components)},polygon:function(str){var this$1=this;if(str===void 0)return this.geometryFactory.createPolygon();for(var ring,linestring3,linearring3,rings=str.trim().split(regExes.parenComma),shell,holes=[],i=0,len=rings.length;i<len;++i)ring=rings[i].replace(regExes.trimParens,"$1"),linestring3=parse$1.linestring.apply(this$1,[ring]),linearring3=this$1.geometryFactory.createLinearRing(linestring3._points),i===0?shell=linearring3:holes.push(linearring3);return this.geometryFactory.createPolygon(shell,holes)},multipolygon:function(str){var this$1=this;if(str===void 0)return this.geometryFactory.createMultiPolygon();for(var polygon4,polygons=str.trim().split(regExes.doubleParenComma),components=[],i=0,len=polygons.length;i<len;++i)polygon4=polygons[i].replace(regExes.trimParens,"$1"),components.push(parse$1.polygon.apply(this$1,[polygon4]));return this.geometryFactory.createMultiPolygon(components)},geometrycollection:function(str){var this$1=this;if(str===void 0)return this.geometryFactory.createGeometryCollection();str=str.replace(/,\s*([A-Za-z])/g,"|$1");for(var wktArray=str.trim().split("|"),components=[],i=0,len=wktArray.length;i<len;++i)components.push(this$1.read(wktArray[i]));return this.geometryFactory.createGeometryCollection(components)}},WKTWriter=function(geometryFactory){this.parser=new WKTParser(geometryFactory)};WKTWriter.prototype.write=function(geometry){return this.parser.write(geometry)};WKTWriter.toLineString=function(p0,p1){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+p0.x+" "+p0.y+", "+p1.x+" "+p1.y+" )"};var RuntimeException=function(Error2){function RuntimeException2(message){Error2.call(this,message),this.name="RuntimeException",this.message=message,this.stack=new Error2().stack}return Error2&&(RuntimeException2.__proto__=Error2),RuntimeException2.prototype=Object.create(Error2&&Error2.prototype),RuntimeException2.prototype.constructor=RuntimeException2,RuntimeException2}(Error),AssertionFailedException=function(RuntimeException$$1){function AssertionFailedException2(){if(RuntimeException$$1.call(this),arguments.length===0)RuntimeException$$1.call(this);else if(arguments.length===1){var message=arguments[0];RuntimeException$$1.call(this,message)}}return RuntimeException$$1&&(AssertionFailedException2.__proto__=RuntimeException$$1),AssertionFailedException2.prototype=Object.create(RuntimeException$$1&&RuntimeException$$1.prototype),AssertionFailedException2.prototype.constructor=AssertionFailedException2,AssertionFailedException2.prototype.interfaces_=function(){return[]},AssertionFailedException2.prototype.getClass=function(){return AssertionFailedException2},AssertionFailedException2}(RuntimeException),Assert=function(){};Assert.prototype.interfaces_=function(){return[]};Assert.prototype.getClass=function(){return Assert};Assert.shouldNeverReachHere=function(){if(arguments.length===0)Assert.shouldNeverReachHere(null);else if(arguments.length===1){var message=arguments[0];throw new AssertionFailedException("Should never reach here"+(message!==null?": "+message:""))}};Assert.isTrue=function(){var assertion,message;if(arguments.length===1)assertion=arguments[0],Assert.isTrue(assertion,null);else if(arguments.length===2&&(assertion=arguments[0],message=arguments[1],!assertion))throw message===null?new AssertionFailedException:new AssertionFailedException(message)};Assert.equals=function(){var expectedValue,actualValue,message;if(arguments.length===2)expectedValue=arguments[0],actualValue=arguments[1],Assert.equals(expectedValue,actualValue,null);else if(arguments.length===3&&(expectedValue=arguments[0],actualValue=arguments[1],message=arguments[2],!actualValue.equals(expectedValue)))throw new AssertionFailedException("Expected "+expectedValue+" but encountered "+actualValue+(message!==null?": "+message:""))};var LineIntersector=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Coordinate,this._intPt[1]=new Coordinate,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},staticAccessors$10={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};LineIntersector.prototype.getIndexAlongSegment=function(segmentIndex,intIndex){return this.computeIntLineIndex(),this._intLineIndex[segmentIndex][intIndex]};LineIntersector.prototype.getTopologySummary=function(){var catBuf=new StringBuffer;return this.isEndPoint()&&catBuf.append(" endpoint"),this._isProper&&catBuf.append(" proper"),this.isCollinear()&&catBuf.append(" collinear"),catBuf.toString()};LineIntersector.prototype.computeIntersection=function(p1,p2,p3,p4){this._inputLines[0][0]=p1,this._inputLines[0][1]=p2,this._inputLines[1][0]=p3,this._inputLines[1][1]=p4,this._result=this.computeIntersect(p1,p2,p3,p4)};LineIntersector.prototype.getIntersectionNum=function(){return this._result};LineIntersector.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var segmentIndex=arguments[0],dist0=this.getEdgeDistance(segmentIndex,0),dist1=this.getEdgeDistance(segmentIndex,1);dist0>dist1?(this._intLineIndex[segmentIndex][0]=0,this._intLineIndex[segmentIndex][1]=1):(this._intLineIndex[segmentIndex][0]=1,this._intLineIndex[segmentIndex][1]=0)}};LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};LineIntersector.prototype.setPrecisionModel=function(precisionModel){this._precisionModel=precisionModel};LineIntersector.prototype.isInteriorIntersection=function(){var this$1=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var inputLineIndex=arguments[0],i=0;i<this._result;i++)if(!(this$1._intPt[i].equals2D(this$1._inputLines[inputLineIndex][0])||this$1._intPt[i].equals2D(this$1._inputLines[inputLineIndex][1])))return!0;return!1}};LineIntersector.prototype.getIntersection=function(intIndex){return this._intPt[intIndex]};LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};LineIntersector.prototype.hasIntersection=function(){return this._result!==LineIntersector.NO_INTERSECTION};LineIntersector.prototype.getEdgeDistance=function(segmentIndex,intIndex){var dist=LineIntersector.computeEdgeDistance(this._intPt[intIndex],this._inputLines[segmentIndex][0],this._inputLines[segmentIndex][1]);return dist};LineIntersector.prototype.isCollinear=function(){return this._result===LineIntersector.COLLINEAR_INTERSECTION};LineIntersector.prototype.toString=function(){return WKTWriter.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+WKTWriter.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};LineIntersector.prototype.getEndpoint=function(segmentIndex,ptIndex){return this._inputLines[segmentIndex][ptIndex]};LineIntersector.prototype.isIntersection=function(pt){for(var this$1=this,i=0;i<this._result;i++)if(this$1._intPt[i].equals2D(pt))return!0;return!1};LineIntersector.prototype.getIntersectionAlongSegment=function(segmentIndex,intIndex){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[segmentIndex][intIndex]]};LineIntersector.prototype.interfaces_=function(){return[]};LineIntersector.prototype.getClass=function(){return LineIntersector};LineIntersector.computeEdgeDistance=function(p,p0,p1){var dx=Math.abs(p1.x-p0.x),dy=Math.abs(p1.y-p0.y),dist=-1;if(p.equals(p0))dist=0;else if(p.equals(p1))dx>dy?dist=dx:dist=dy;else{var pdx=Math.abs(p.x-p0.x),pdy=Math.abs(p.y-p0.y);dx>dy?dist=pdx:dist=pdy,dist===0&&!p.equals(p0)&&(dist=Math.max(pdx,pdy))}return Assert.isTrue(!(dist===0&&!p.equals(p0)),"Bad distance calculation"),dist};LineIntersector.nonRobustComputeEdgeDistance=function(p,p1,p2){var dx=p.x-p1.x,dy=p.y-p1.y,dist=Math.sqrt(dx*dx+dy*dy);return Assert.isTrue(!(dist===0&&!p.equals(p1)),"Invalid distance calculation"),dist};staticAccessors$10.DONT_INTERSECT.get=function(){return 0};staticAccessors$10.DO_INTERSECT.get=function(){return 1};staticAccessors$10.COLLINEAR.get=function(){return 2};staticAccessors$10.NO_INTERSECTION.get=function(){return 0};staticAccessors$10.POINT_INTERSECTION.get=function(){return 1};staticAccessors$10.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(LineIntersector,staticAccessors$10);var RobustLineIntersector=function(LineIntersector$$1){function RobustLineIntersector2(){LineIntersector$$1.apply(this,arguments)}return LineIntersector$$1&&(RobustLineIntersector2.__proto__=LineIntersector$$1),RobustLineIntersector2.prototype=Object.create(LineIntersector$$1&&LineIntersector$$1.prototype),RobustLineIntersector2.prototype.constructor=RobustLineIntersector2,RobustLineIntersector2.prototype.isInSegmentEnvelopes=function(intPt){var env0=new Envelope(this._inputLines[0][0],this._inputLines[0][1]),env1=new Envelope(this._inputLines[1][0],this._inputLines[1][1]);return env0.contains(intPt)&&env1.contains(intPt)},RobustLineIntersector2.prototype.computeIntersection=function(){if(arguments.length===3){var p=arguments[0],p1=arguments[1],p2=arguments[2];if(this._isProper=!1,Envelope.intersects(p1,p2,p)&&CGAlgorithms.orientationIndex(p1,p2,p)===0&&CGAlgorithms.orientationIndex(p2,p1,p)===0)return this._isProper=!0,(p.equals(p1)||p.equals(p2))&&(this._isProper=!1),this._result=LineIntersector$$1.POINT_INTERSECTION,null;this._result=LineIntersector$$1.NO_INTERSECTION}else return LineIntersector$$1.prototype.computeIntersection.apply(this,arguments)},RobustLineIntersector2.prototype.normalizeToMinimum=function(n1,n2,n3,n4,normPt){normPt.x=this.smallestInAbsValue(n1.x,n2.x,n3.x,n4.x),normPt.y=this.smallestInAbsValue(n1.y,n2.y,n3.y,n4.y),n1.x-=normPt.x,n1.y-=normPt.y,n2.x-=normPt.x,n2.y-=normPt.y,n3.x-=normPt.x,n3.y-=normPt.y,n4.x-=normPt.x,n4.y-=normPt.y},RobustLineIntersector2.prototype.safeHCoordinateIntersection=function(p1,p2,q1,q2){var intPt=null;try{intPt=HCoordinate.intersection(p1,p2,q1,q2)}catch(e){if(e instanceof NotRepresentableException)intPt=RobustLineIntersector2.nearestEndpoint(p1,p2,q1,q2);else throw e}finally{}return intPt},RobustLineIntersector2.prototype.intersection=function(p1,p2,q1,q2){var intPt=this.intersectionWithNormalization(p1,p2,q1,q2);return this.isInSegmentEnvelopes(intPt)||(intPt=new Coordinate(RobustLineIntersector2.nearestEndpoint(p1,p2,q1,q2))),this._precisionModel!==null&&this._precisionModel.makePrecise(intPt),intPt},RobustLineIntersector2.prototype.smallestInAbsValue=function(x12,x2,x3,x4){var x5=x12,xabs=Math.abs(x5);return Math.abs(x2)<xabs&&(x5=x2,xabs=Math.abs(x2)),Math.abs(x3)<xabs&&(x5=x3,xabs=Math.abs(x3)),Math.abs(x4)<xabs&&(x5=x4),x5},RobustLineIntersector2.prototype.checkDD=function(p1,p2,q1,q2,intPt){var intPtDD=CGAlgorithmsDD.intersection(p1,p2,q1,q2),isIn=this.isInSegmentEnvelopes(intPtDD);System.out.println("DD in env = "+isIn+"  --------------------- "+intPtDD),intPt.distance(intPtDD)>1e-4&&System.out.println("Distance = "+intPt.distance(intPtDD))},RobustLineIntersector2.prototype.intersectionWithNormalization=function(p1,p2,q1,q2){var n1=new Coordinate(p1),n2=new Coordinate(p2),n3=new Coordinate(q1),n4=new Coordinate(q2),normPt=new Coordinate;this.normalizeToEnvCentre(n1,n2,n3,n4,normPt);var intPt=this.safeHCoordinateIntersection(n1,n2,n3,n4);return intPt.x+=normPt.x,intPt.y+=normPt.y,intPt},RobustLineIntersector2.prototype.computeCollinearIntersection=function(p1,p2,q1,q2){var p1q1p2=Envelope.intersects(p1,p2,q1),p1q2p2=Envelope.intersects(p1,p2,q2),q1p1q2=Envelope.intersects(q1,q2,p1),q1p2q2=Envelope.intersects(q1,q2,p2);return p1q1p2&&p1q2p2?(this._intPt[0]=q1,this._intPt[1]=q2,LineIntersector$$1.COLLINEAR_INTERSECTION):q1p1q2&&q1p2q2?(this._intPt[0]=p1,this._intPt[1]=p2,LineIntersector$$1.COLLINEAR_INTERSECTION):p1q1p2&&q1p1q2?(this._intPt[0]=q1,this._intPt[1]=p1,q1.equals(p1)&&!p1q2p2&&!q1p2q2?LineIntersector$$1.POINT_INTERSECTION:LineIntersector$$1.COLLINEAR_INTERSECTION):p1q1p2&&q1p2q2?(this._intPt[0]=q1,this._intPt[1]=p2,q1.equals(p2)&&!p1q2p2&&!q1p1q2?LineIntersector$$1.POINT_INTERSECTION:LineIntersector$$1.COLLINEAR_INTERSECTION):p1q2p2&&q1p1q2?(this._intPt[0]=q2,this._intPt[1]=p1,q2.equals(p1)&&!p1q1p2&&!q1p2q2?LineIntersector$$1.POINT_INTERSECTION:LineIntersector$$1.COLLINEAR_INTERSECTION):p1q2p2&&q1p2q2?(this._intPt[0]=q2,this._intPt[1]=p2,q2.equals(p2)&&!p1q1p2&&!q1p1q2?LineIntersector$$1.POINT_INTERSECTION:LineIntersector$$1.COLLINEAR_INTERSECTION):LineIntersector$$1.NO_INTERSECTION},RobustLineIntersector2.prototype.normalizeToEnvCentre=function(n00,n01,n10,n11,normPt){var minX0=n00.x<n01.x?n00.x:n01.x,minY0=n00.y<n01.y?n00.y:n01.y,maxX0=n00.x>n01.x?n00.x:n01.x,maxY0=n00.y>n01.y?n00.y:n01.y,minX1=n10.x<n11.x?n10.x:n11.x,minY1=n10.y<n11.y?n10.y:n11.y,maxX1=n10.x>n11.x?n10.x:n11.x,maxY1=n10.y>n11.y?n10.y:n11.y,intMinX=minX0>minX1?minX0:minX1,intMaxX=maxX0<maxX1?maxX0:maxX1,intMinY=minY0>minY1?minY0:minY1,intMaxY=maxY0<maxY1?maxY0:maxY1,intMidX=(intMinX+intMaxX)/2,intMidY=(intMinY+intMaxY)/2;normPt.x=intMidX,normPt.y=intMidY,n00.x-=normPt.x,n00.y-=normPt.y,n01.x-=normPt.x,n01.y-=normPt.y,n10.x-=normPt.x,n10.y-=normPt.y,n11.x-=normPt.x,n11.y-=normPt.y},RobustLineIntersector2.prototype.computeIntersect=function(p1,p2,q1,q2){if(this._isProper=!1,!Envelope.intersects(p1,p2,q1,q2))return LineIntersector$$1.NO_INTERSECTION;var Pq1=CGAlgorithms.orientationIndex(p1,p2,q1),Pq2=CGAlgorithms.orientationIndex(p1,p2,q2);if(Pq1>0&&Pq2>0||Pq1<0&&Pq2<0)return LineIntersector$$1.NO_INTERSECTION;var Qp1=CGAlgorithms.orientationIndex(q1,q2,p1),Qp2=CGAlgorithms.orientationIndex(q1,q2,p2);if(Qp1>0&&Qp2>0||Qp1<0&&Qp2<0)return LineIntersector$$1.NO_INTERSECTION;var collinear=Pq1===0&&Pq2===0&&Qp1===0&&Qp2===0;return collinear?this.computeCollinearIntersection(p1,p2,q1,q2):(Pq1===0||Pq2===0||Qp1===0||Qp2===0?(this._isProper=!1,p1.equals2D(q1)||p1.equals2D(q2)?this._intPt[0]=p1:p2.equals2D(q1)||p2.equals2D(q2)?this._intPt[0]=p2:Pq1===0?this._intPt[0]=new Coordinate(q1):Pq2===0?this._intPt[0]=new Coordinate(q2):Qp1===0?this._intPt[0]=new Coordinate(p1):Qp2===0&&(this._intPt[0]=new Coordinate(p2))):(this._isProper=!0,this._intPt[0]=this.intersection(p1,p2,q1,q2)),LineIntersector$$1.POINT_INTERSECTION)},RobustLineIntersector2.prototype.interfaces_=function(){return[]},RobustLineIntersector2.prototype.getClass=function(){return RobustLineIntersector2},RobustLineIntersector2.nearestEndpoint=function(p1,p2,q1,q2){var nearestPt=p1,minDist=CGAlgorithms.distancePointLine(p1,q1,q2),dist=CGAlgorithms.distancePointLine(p2,q1,q2);return dist<minDist&&(minDist=dist,nearestPt=p2),dist=CGAlgorithms.distancePointLine(q1,p1,p2),dist<minDist&&(minDist=dist,nearestPt=q1),dist=CGAlgorithms.distancePointLine(q2,p1,p2),dist<minDist&&(minDist=dist,nearestPt=q2),nearestPt},RobustLineIntersector2}(LineIntersector),RobustDeterminant=function(){};RobustDeterminant.prototype.interfaces_=function(){return[]};RobustDeterminant.prototype.getClass=function(){return RobustDeterminant};RobustDeterminant.orientationIndex=function(p1,p2,q){var dx1=p2.x-p1.x,dy1=p2.y-p1.y,dx2=q.x-p2.x,dy2=q.y-p2.y;return RobustDeterminant.signOfDet2x2(dx1,dy1,dx2,dy2)};RobustDeterminant.signOfDet2x2=function(x12,y1,x2,y2){var sign2=null,swap4=null,k=null;if(sign2=1,x12===0||y2===0)return y1===0||x2===0?0:y1>0?x2>0?-sign2:sign2:x2>0?sign2:-sign2;if(y1===0||x2===0)return y2>0?x12>0?sign2:-sign2:x12>0?-sign2:sign2;if(y1>0?y2>0?y1<=y2||(sign2=-sign2,swap4=x12,x12=x2,x2=swap4,swap4=y1,y1=y2,y2=swap4):y1<=-y2?(sign2=-sign2,x2=-x2,y2=-y2):(swap4=x12,x12=-x2,x2=swap4,swap4=y1,y1=-y2,y2=swap4):y2>0?-y1<=y2?(sign2=-sign2,x12=-x12,y1=-y1):(swap4=-x12,x12=x2,x2=swap4,swap4=-y1,y1=y2,y2=swap4):y1>=y2?(x12=-x12,y1=-y1,x2=-x2,y2=-y2):(sign2=-sign2,swap4=-x12,x12=-x2,x2=swap4,swap4=-y1,y1=-y2,y2=swap4),x12>0)if(x2>0){if(!(x12<=x2))return sign2}else return sign2;else{if(x2>0)return-sign2;if(x12>=x2)sign2=-sign2,x12=-x12,x2=-x2;else return-sign2}for(;;){if(k=Math.floor(x2/x12),x2=x2-k*x12,y2=y2-k*y1,y2<0)return-sign2;if(y2>y1)return sign2;if(x12>x2+x2){if(y1<y2+y2)return sign2}else{if(y1>y2+y2)return-sign2;x2=x12-x2,y2=y1-y2,sign2=-sign2}if(y2===0)return x2===0?0:-sign2;if(x2===0||(k=Math.floor(x12/x2),x12=x12-k*x2,y1=y1-k*y2,y1<0))return sign2;if(y1>y2)return-sign2;if(x2>x12+x12){if(y2<y1+y1)return-sign2}else{if(y2>y1+y1)return sign2;x12=x2-x12,y1=y2-y1,sign2=-sign2}if(y1===0)return x12===0?0:sign2;if(x12===0)return-sign2}};var RayCrossingCounter=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var p=arguments[0];this._p=p};RayCrossingCounter.prototype.countSegment=function(p1,p2){if(p1.x<this._p.x&&p2.x<this._p.x)return null;if(this._p.x===p2.x&&this._p.y===p2.y)return this._isPointOnSegment=!0,null;if(p1.y===this._p.y&&p2.y===this._p.y){var minx=p1.x,maxx=p2.x;return minx>maxx&&(minx=p2.x,maxx=p1.x),this._p.x>=minx&&this._p.x<=maxx&&(this._isPointOnSegment=!0),null}if(p1.y>this._p.y&&p2.y<=this._p.y||p2.y>this._p.y&&p1.y<=this._p.y){var x12=p1.x-this._p.x,y1=p1.y-this._p.y,x2=p2.x-this._p.x,y2=p2.y-this._p.y,xIntSign=RobustDeterminant.signOfDet2x2(x12,y1,x2,y2);if(xIntSign===0)return this._isPointOnSegment=!0,null;y2<y1&&(xIntSign=-xIntSign),xIntSign>0&&this._crossingCount++}};RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==Location.EXTERIOR};RayCrossingCounter.prototype.getLocation=function(){return this._isPointOnSegment?Location.BOUNDARY:this._crossingCount%2===1?Location.INTERIOR:Location.EXTERIOR};RayCrossingCounter.prototype.isOnSegment=function(){return this._isPointOnSegment};RayCrossingCounter.prototype.interfaces_=function(){return[]};RayCrossingCounter.prototype.getClass=function(){return RayCrossingCounter};RayCrossingCounter.locatePointInRing=function(){if(arguments[0]instanceof Coordinate&&hasInterface(arguments[1],CoordinateSequence)){for(var p=arguments[0],ring=arguments[1],counter=new RayCrossingCounter(p),p1=new Coordinate,p2=new Coordinate,i=1;i<ring.size();i++)if(ring.getCoordinate(i,p1),ring.getCoordinate(i-1,p2),counter.countSegment(p1,p2),counter.isOnSegment())return counter.getLocation();return counter.getLocation()}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Array){for(var p$1=arguments[0],ring$1=arguments[1],counter$1=new RayCrossingCounter(p$1),i$1=1;i$1<ring$1.length;i$1++){var p1$1=ring$1[i$1],p2$1=ring$1[i$1-1];if(counter$1.countSegment(p1$1,p2$1),counter$1.isOnSegment())return counter$1.getLocation()}return counter$1.getLocation()}};var CGAlgorithms=function(){},staticAccessors$3={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};CGAlgorithms.prototype.interfaces_=function(){return[]};CGAlgorithms.prototype.getClass=function(){return CGAlgorithms};CGAlgorithms.orientationIndex=function(p1,p2,q){return CGAlgorithmsDD.orientationIndex(p1,p2,q)};CGAlgorithms.signedArea=function(){if(arguments[0]instanceof Array){var ring=arguments[0];if(ring.length<3)return 0;for(var sum2=0,x02=ring[0].x,i=1;i<ring.length-1;i++){var x2=ring[i].x-x02,y1=ring[i+1].y,y2=ring[i-1].y;sum2+=x2*(y2-y1)}return sum2/2}else if(hasInterface(arguments[0],CoordinateSequence)){var ring$1=arguments[0],n=ring$1.size();if(n<3)return 0;var p0=new Coordinate,p1=new Coordinate,p2=new Coordinate;ring$1.getCoordinate(0,p1),ring$1.getCoordinate(1,p2);var x0$1=p1.x;p2.x-=x0$1;for(var sum$1=0,i$1=1;i$1<n-1;i$1++)p0.y=p1.y,p1.x=p2.x,p1.y=p2.y,ring$1.getCoordinate(i$1+1,p2),p2.x-=x0$1,sum$1+=p1.x*(p0.y-p2.y);return sum$1/2}};CGAlgorithms.distanceLineLine=function(A,B2,C,D){if(A.equals(B2))return CGAlgorithms.distancePointLine(A,C,D);if(C.equals(D))return CGAlgorithms.distancePointLine(D,A,B2);var noIntersection=!1;if(!Envelope.intersects(A,B2,C,D))noIntersection=!0;else{var denom=(B2.x-A.x)*(D.y-C.y)-(B2.y-A.y)*(D.x-C.x);if(denom===0)noIntersection=!0;else{var rNumb=(A.y-C.y)*(D.x-C.x)-(A.x-C.x)*(D.y-C.y),sNum=(A.y-C.y)*(B2.x-A.x)-(A.x-C.x)*(B2.y-A.y),s=sNum/denom,r=rNumb/denom;(r<0||r>1||s<0||s>1)&&(noIntersection=!0)}}return noIntersection?MathUtil.min(CGAlgorithms.distancePointLine(A,C,D),CGAlgorithms.distancePointLine(B2,C,D),CGAlgorithms.distancePointLine(C,A,B2),CGAlgorithms.distancePointLine(D,A,B2)):0};CGAlgorithms.isPointInRing=function(p,ring){return CGAlgorithms.locatePointInRing(p,ring)!==Location.EXTERIOR};CGAlgorithms.computeLength=function(pts){var n=pts.size();if(n<=1)return 0;var len=0,p=new Coordinate;pts.getCoordinate(0,p);for(var x02=p.x,y0=p.y,i=1;i<n;i++){pts.getCoordinate(i,p);var x12=p.x,y1=p.y,dx=x12-x02,dy=y1-y0;len+=Math.sqrt(dx*dx+dy*dy),x02=x12,y0=y1}return len};CGAlgorithms.isCCW=function(ring){var nPts=ring.length-1;if(nPts<3)throw new IllegalArgumentException("Ring has fewer than 4 points, so orientation cannot be determined");for(var hiPt=ring[0],hiIndex=0,i=1;i<=nPts;i++){var p=ring[i];p.y>hiPt.y&&(hiPt=p,hiIndex=i)}var iPrev=hiIndex;do iPrev=iPrev-1,iPrev<0&&(iPrev=nPts);while(ring[iPrev].equals2D(hiPt)&&iPrev!==hiIndex);var iNext=hiIndex;do iNext=(iNext+1)%nPts;while(ring[iNext].equals2D(hiPt)&&iNext!==hiIndex);var prev=ring[iPrev],next3=ring[iNext];if(prev.equals2D(hiPt)||next3.equals2D(hiPt)||prev.equals2D(next3))return!1;var disc=CGAlgorithms.computeOrientation(prev,hiPt,next3),isCCW2=!1;return disc===0?isCCW2=prev.x>next3.x:isCCW2=disc>0,isCCW2};CGAlgorithms.locatePointInRing=function(p,ring){return RayCrossingCounter.locatePointInRing(p,ring)};CGAlgorithms.distancePointLinePerpendicular=function(p,A,B2){var len2=(B2.x-A.x)*(B2.x-A.x)+(B2.y-A.y)*(B2.y-A.y),s=((A.y-p.y)*(B2.x-A.x)-(A.x-p.x)*(B2.y-A.y))/len2;return Math.abs(s)*Math.sqrt(len2)};CGAlgorithms.computeOrientation=function(p1,p2,q){return CGAlgorithms.orientationIndex(p1,p2,q)};CGAlgorithms.distancePointLine=function(){if(arguments.length===2){var p=arguments[0],line=arguments[1];if(line.length===0)throw new IllegalArgumentException("Line array must contain at least one vertex");for(var minDistance=p.distance(line[0]),i=0;i<line.length-1;i++){var dist=CGAlgorithms.distancePointLine(p,line[i],line[i+1]);dist<minDistance&&(minDistance=dist)}return minDistance}else if(arguments.length===3){var p$1=arguments[0],A=arguments[1],B2=arguments[2];if(A.x===B2.x&&A.y===B2.y)return p$1.distance(A);var len2=(B2.x-A.x)*(B2.x-A.x)+(B2.y-A.y)*(B2.y-A.y),r=((p$1.x-A.x)*(B2.x-A.x)+(p$1.y-A.y)*(B2.y-A.y))/len2;if(r<=0)return p$1.distance(A);if(r>=1)return p$1.distance(B2);var s=((A.y-p$1.y)*(B2.x-A.x)-(A.x-p$1.x)*(B2.y-A.y))/len2;return Math.abs(s)*Math.sqrt(len2)}};CGAlgorithms.isOnLine=function(p,pt){for(var lineIntersector=new RobustLineIntersector,i=1;i<pt.length;i++){var p0=pt[i-1],p1=pt[i];if(lineIntersector.computeIntersection(p,p0,p1),lineIntersector.hasIntersection())return!0}return!1};staticAccessors$3.CLOCKWISE.get=function(){return-1};staticAccessors$3.RIGHT.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$3.COUNTERCLOCKWISE.get=function(){return 1};staticAccessors$3.LEFT.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$3.COLLINEAR.get=function(){return 0};staticAccessors$3.STRAIGHT.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(CGAlgorithms,staticAccessors$3);var GeometryComponentFilter=function(){};GeometryComponentFilter.prototype.filter=function(geom){};GeometryComponentFilter.prototype.interfaces_=function(){return[]};GeometryComponentFilter.prototype.getClass=function(){return GeometryComponentFilter};var Geometry=function(){var factory=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=factory,this._SRID=factory.getSRID()},staticAccessors$11={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Geometry.prototype.isGeometryCollection=function(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION};Geometry.prototype.getFactory=function(){return this._factory};Geometry.prototype.getGeometryN=function(n){return this};Geometry.prototype.getArea=function(){return 0};Geometry.prototype.isRectangle=function(){return!1};Geometry.prototype.equals=function(){if(arguments[0]instanceof Geometry){var g$1=arguments[0];return g$1===null?!1:this.equalsTopo(g$1)}else if(arguments[0]instanceof Object){var o=arguments[0];if(!(o instanceof Geometry))return!1;var g=o;return this.equalsExact(g)}};Geometry.prototype.equalsExact=function(other){return this===other||this.equalsExact(other,0)};Geometry.prototype.geometryChanged=function(){this.apply(Geometry.geometryChangedFilter)};Geometry.prototype.geometryChangedAction=function(){this._envelope=null};Geometry.prototype.equalsNorm=function(g){return g===null?!1:this.norm().equalsExact(g.norm())};Geometry.prototype.getLength=function(){return 0};Geometry.prototype.getNumGeometries=function(){return 1};Geometry.prototype.compareTo=function(){if(arguments.length===1){var o=arguments[0],other=o;return this.getSortIndex()!==other.getSortIndex()?this.getSortIndex()-other.getSortIndex():this.isEmpty()&&other.isEmpty()?0:this.isEmpty()?-1:other.isEmpty()?1:this.compareToSameClass(o)}else if(arguments.length===2){var other$1=arguments[0],comp=arguments[1];return this.getSortIndex()!==other$1.getSortIndex()?this.getSortIndex()-other$1.getSortIndex():this.isEmpty()&&other$1.isEmpty()?0:this.isEmpty()?-1:other$1.isEmpty()?1:this.compareToSameClass(other$1,comp)}};Geometry.prototype.getUserData=function(){return this._userData};Geometry.prototype.getSRID=function(){return this._SRID};Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};Geometry.prototype.checkNotGeometryCollection=function(g){if(g.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION)throw new IllegalArgumentException("This method does not support GeometryCollection arguments")};Geometry.prototype.equal=function(a,b,tolerance){return tolerance===0?a.equals(b):a.distance(b)<=tolerance};Geometry.prototype.norm=function(){var copy7=this.copy();return copy7.normalize(),copy7};Geometry.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};Geometry.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Envelope(this._envelope)};Geometry.prototype.setSRID=function(SRID){this._SRID=SRID};Geometry.prototype.setUserData=function(userData){this._userData=userData};Geometry.prototype.compare=function(a,b){for(var i=a.iterator(),j=b.iterator();i.hasNext()&&j.hasNext();){var aElement=i.next(),bElement=j.next(),comparison=aElement.compareTo(bElement);if(comparison!==0)return comparison}return i.hasNext()?1:j.hasNext()?-1:0};Geometry.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};Geometry.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Geometry.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOINT||this.getSortIndex()===Geometry.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Geometry.SORTINDEX_MULTIPOLYGON};Geometry.prototype.interfaces_=function(){return[Clonable,Comparable,Serializable]};Geometry.prototype.getClass=function(){return Geometry};Geometry.hasNonEmptyElements=function(geometries){for(var i=0;i<geometries.length;i++)if(!geometries[i].isEmpty())return!0;return!1};Geometry.hasNullElements=function(array2){for(var i=0;i<array2.length;i++)if(array2[i]===null)return!0;return!1};staticAccessors$11.serialVersionUID.get=function(){return 8763622679187377e3};staticAccessors$11.SORTINDEX_POINT.get=function(){return 0};staticAccessors$11.SORTINDEX_MULTIPOINT.get=function(){return 1};staticAccessors$11.SORTINDEX_LINESTRING.get=function(){return 2};staticAccessors$11.SORTINDEX_LINEARRING.get=function(){return 3};staticAccessors$11.SORTINDEX_MULTILINESTRING.get=function(){return 4};staticAccessors$11.SORTINDEX_POLYGON.get=function(){return 5};staticAccessors$11.SORTINDEX_MULTIPOLYGON.get=function(){return 6};staticAccessors$11.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};staticAccessors$11.geometryChangedFilter.get=function(){return geometryChangedFilter};Object.defineProperties(Geometry,staticAccessors$11);var geometryChangedFilter=function(){};geometryChangedFilter.interfaces_=function(){return[GeometryComponentFilter]};geometryChangedFilter.filter=function(geom){geom.geometryChangedAction()};var CoordinateFilter=function(){};CoordinateFilter.prototype.filter=function(coord){};CoordinateFilter.prototype.interfaces_=function(){return[]};CoordinateFilter.prototype.getClass=function(){return CoordinateFilter};var BoundaryNodeRule=function(){},staticAccessors$12={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};BoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){};BoundaryNodeRule.prototype.interfaces_=function(){return[]};BoundaryNodeRule.prototype.getClass=function(){return BoundaryNodeRule};staticAccessors$12.Mod2BoundaryNodeRule.get=function(){return Mod2BoundaryNodeRule};staticAccessors$12.EndPointBoundaryNodeRule.get=function(){return EndPointBoundaryNodeRule};staticAccessors$12.MultiValentEndPointBoundaryNodeRule.get=function(){return MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MonoValentEndPointBoundaryNodeRule.get=function(){return MonoValentEndPointBoundaryNodeRule};staticAccessors$12.MOD2_BOUNDARY_RULE.get=function(){return new Mod2BoundaryNodeRule};staticAccessors$12.ENDPOINT_BOUNDARY_RULE.get=function(){return new EndPointBoundaryNodeRule};staticAccessors$12.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MultiValentEndPointBoundaryNodeRule};staticAccessors$12.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new MonoValentEndPointBoundaryNodeRule};staticAccessors$12.OGC_SFS_BOUNDARY_RULE.get=function(){return BoundaryNodeRule.MOD2_BOUNDARY_RULE};Object.defineProperties(BoundaryNodeRule,staticAccessors$12);var Mod2BoundaryNodeRule=function(){};Mod2BoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){return boundaryCount%2===1};Mod2BoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};Mod2BoundaryNodeRule.prototype.getClass=function(){return Mod2BoundaryNodeRule};var EndPointBoundaryNodeRule=function(){};EndPointBoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){return boundaryCount>0};EndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};EndPointBoundaryNodeRule.prototype.getClass=function(){return EndPointBoundaryNodeRule};var MultiValentEndPointBoundaryNodeRule=function(){};MultiValentEndPointBoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){return boundaryCount>1};MultiValentEndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};MultiValentEndPointBoundaryNodeRule.prototype.getClass=function(){return MultiValentEndPointBoundaryNodeRule};var MonoValentEndPointBoundaryNodeRule=function(){};MonoValentEndPointBoundaryNodeRule.prototype.isInBoundary=function(boundaryCount){return boundaryCount===1};MonoValentEndPointBoundaryNodeRule.prototype.interfaces_=function(){return[BoundaryNodeRule]};MonoValentEndPointBoundaryNodeRule.prototype.getClass=function(){return MonoValentEndPointBoundaryNodeRule};var Collection=function(){};Collection.prototype.add=function(){};Collection.prototype.addAll=function(){};Collection.prototype.isEmpty=function(){};Collection.prototype.iterator=function(){};Collection.prototype.size=function(){};Collection.prototype.toArray=function(){};Collection.prototype.remove=function(){};function IndexOutOfBoundsException(message){this.message=message||""}IndexOutOfBoundsException.prototype=new Error;IndexOutOfBoundsException.prototype.name="IndexOutOfBoundsException";var Iterator=function(){};Iterator.prototype.hasNext=function(){};Iterator.prototype.next=function(){};Iterator.prototype.remove=function(){};var List=function(Collection$$1){function List2(){Collection$$1.apply(this,arguments)}return Collection$$1&&(List2.__proto__=Collection$$1),List2.prototype=Object.create(Collection$$1&&Collection$$1.prototype),List2.prototype.constructor=List2,List2.prototype.get=function(){},List2.prototype.set=function(){},List2.prototype.isEmpty=function(){},List2}(Collection);function NoSuchElementException(message){this.message=message||""}NoSuchElementException.prototype=new Error;NoSuchElementException.prototype.name="NoSuchElementException";var ArrayList=function(List$$1){function ArrayList2(){List$$1.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return List$$1&&(ArrayList2.__proto__=List$$1),ArrayList2.prototype=Object.create(List$$1&&List$$1.prototype),ArrayList2.prototype.constructor=ArrayList2,ArrayList2.prototype.ensureCapacity=function(){},ArrayList2.prototype.interfaces_=function(){return[List$$1,Collection]},ArrayList2.prototype.add=function(e){return arguments.length===1?this.array_.push(e):this.array_.splice(arguments[0],arguments[1]),!0},ArrayList2.prototype.clear=function(){this.array_=[]},ArrayList2.prototype.addAll=function(c){for(var this$1=this,i=c.iterator();i.hasNext();)this$1.add(i.next());return!0},ArrayList2.prototype.set=function(index,element){var oldElement=this.array_[index];return this.array_[index]=element,oldElement},ArrayList2.prototype.iterator=function(){return new Iterator_(this)},ArrayList2.prototype.get=function(index){if(index<0||index>=this.size())throw new IndexOutOfBoundsException;return this.array_[index]},ArrayList2.prototype.isEmpty=function(){return this.array_.length===0},ArrayList2.prototype.size=function(){return this.array_.length},ArrayList2.prototype.toArray=function(){for(var this$1=this,array2=[],i=0,len=this.array_.length;i<len;i++)array2.push(this$1.array_[i]);return array2},ArrayList2.prototype.remove=function(o){for(var this$1=this,found=!1,i=0,len=this.array_.length;i<len;i++)if(this$1.array_[i]===o){this$1.array_.splice(i,1),found=!0;break}return found},ArrayList2}(List),Iterator_=function(Iterator$$1){function Iterator_2(arrayList){Iterator$$1.call(this),this.arrayList_=arrayList,this.position_=0}return Iterator$$1&&(Iterator_2.__proto__=Iterator$$1),Iterator_2.prototype=Object.create(Iterator$$1&&Iterator$$1.prototype),Iterator_2.prototype.constructor=Iterator_2,Iterator_2.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new NoSuchElementException;return this.arrayList_.get(this.position_++)},Iterator_2.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Iterator_2.prototype.set=function(element){return this.arrayList_.set(this.position_-1,element)},Iterator_2.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},Iterator_2}(Iterator),CoordinateList=function(ArrayList$$1){function CoordinateList2(){if(ArrayList$$1.call(this),arguments.length!==0){if(arguments.length===1){var coord=arguments[0];this.ensureCapacity(coord.length),this.add(coord,!0)}else if(arguments.length===2){var coord$1=arguments[0],allowRepeated=arguments[1];this.ensureCapacity(coord$1.length),this.add(coord$1,allowRepeated)}}}ArrayList$$1&&(CoordinateList2.__proto__=ArrayList$$1),CoordinateList2.prototype=Object.create(ArrayList$$1&&ArrayList$$1.prototype),CoordinateList2.prototype.constructor=CoordinateList2;var staticAccessors2={coordArrayType:{configurable:!0}};return staticAccessors2.coordArrayType.get=function(){return new Array(0).fill(null)},CoordinateList2.prototype.getCoordinate=function(i){return this.get(i)},CoordinateList2.prototype.addAll=function(){var this$1=this;if(arguments.length===2){for(var coll=arguments[0],allowRepeated=arguments[1],isChanged=!1,i=coll.iterator();i.hasNext();)this$1.add(i.next(),allowRepeated),isChanged=!0;return isChanged}else return ArrayList$$1.prototype.addAll.apply(this,arguments)},CoordinateList2.prototype.clone=function(){for(var this$1=this,clone6=ArrayList$$1.prototype.clone.call(this),i=0;i<this.size();i++)clone6.add(i,this$1.get(i).copy());return clone6},CoordinateList2.prototype.toCoordinateArray=function(){return this.toArray(CoordinateList2.coordArrayType)},CoordinateList2.prototype.add=function(){var this$1=this;if(arguments.length===1){var coord=arguments[0];ArrayList$$1.prototype.add.call(this,coord)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var coord$1=arguments[0],allowRepeated=arguments[1];return this.add(coord$1,allowRepeated,!0),!0}else if(arguments[0]instanceof Coordinate&&typeof arguments[1]=="boolean"){var coord$2=arguments[0],allowRepeated$1=arguments[1];if(!allowRepeated$1&&this.size()>=1){var last=this.get(this.size()-1);if(last.equals2D(coord$2))return null}ArrayList$$1.prototype.add.call(this,coord$2)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var obj=arguments[0],allowRepeated$2=arguments[1];return this.add(obj,allowRepeated$2),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var coord$3=arguments[0],allowRepeated$3=arguments[1],direction=arguments[2];if(direction)for(var i$1=0;i$1<coord$3.length;i$1++)this$1.add(coord$3[i$1],allowRepeated$3);else for(var i$2=coord$3.length-1;i$2>=0;i$2--)this$1.add(coord$3[i$2],allowRepeated$3);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof Coordinate){var i$3=arguments[0],coord$4=arguments[1],allowRepeated$4=arguments[2];if(!allowRepeated$4){var size11=this.size();if(size11>0){if(i$3>0){var prev=this.get(i$3-1);if(prev.equals2D(coord$4))return null}if(i$3<size11){var next3=this.get(i$3);if(next3.equals2D(coord$4))return null}}}ArrayList$$1.prototype.add.call(this,i$3,coord$4)}}else if(arguments.length===4){var coord$5=arguments[0],allowRepeated$5=arguments[1],start=arguments[2],end=arguments[3],inc=1;start>end&&(inc=-1);for(var i=start;i!==end;i+=inc)this$1.add(coord$5[i],allowRepeated$5);return!0}},CoordinateList2.prototype.closeRing=function(){this.size()>0&&this.add(new Coordinate(this.get(0)),!1)},CoordinateList2.prototype.interfaces_=function(){return[]},CoordinateList2.prototype.getClass=function(){return CoordinateList2},Object.defineProperties(CoordinateList2,staticAccessors2),CoordinateList2}(ArrayList),CoordinateArrays=function(){},staticAccessors$13={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};staticAccessors$13.ForwardComparator.get=function(){return ForwardComparator};staticAccessors$13.BidirectionalComparator.get=function(){return BidirectionalComparator};staticAccessors$13.coordArrayType.get=function(){return new Array(0).fill(null)};CoordinateArrays.prototype.interfaces_=function(){return[]};CoordinateArrays.prototype.getClass=function(){return CoordinateArrays};CoordinateArrays.isRing=function(pts){return!(pts.length<4||!pts[0].equals2D(pts[pts.length-1]))};CoordinateArrays.ptNotInList=function(testPts,pts){for(var i=0;i<testPts.length;i++){var testPt=testPts[i];if(CoordinateArrays.indexOf(testPt,pts)<0)return testPt}return null};CoordinateArrays.scroll=function(coordinates,firstCoordinate){var i=CoordinateArrays.indexOf(firstCoordinate,coordinates);if(i<0)return null;var newCoordinates=new Array(coordinates.length).fill(null);System.arraycopy(coordinates,i,newCoordinates,0,coordinates.length-i),System.arraycopy(coordinates,0,newCoordinates,coordinates.length-i,i),System.arraycopy(newCoordinates,0,coordinates,0,coordinates.length)};CoordinateArrays.equals=function(){if(arguments.length===2){var coord1=arguments[0],coord2=arguments[1];if(coord1===coord2)return!0;if(coord1===null||coord2===null||coord1.length!==coord2.length)return!1;for(var i=0;i<coord1.length;i++)if(!coord1[i].equals(coord2[i]))return!1;return!0}else if(arguments.length===3){var coord1$1=arguments[0],coord2$1=arguments[1],coordinateComparator=arguments[2];if(coord1$1===coord2$1)return!0;if(coord1$1===null||coord2$1===null||coord1$1.length!==coord2$1.length)return!1;for(var i$1=0;i$1<coord1$1.length;i$1++)if(coordinateComparator.compare(coord1$1[i$1],coord2$1[i$1])!==0)return!1;return!0}};CoordinateArrays.intersection=function(coordinates,env){for(var coordList=new CoordinateList,i=0;i<coordinates.length;i++)env.intersects(coordinates[i])&&coordList.add(coordinates[i],!0);return coordList.toCoordinateArray()};CoordinateArrays.hasRepeatedPoints=function(coord){for(var i=1;i<coord.length;i++)if(coord[i-1].equals(coord[i]))return!0;return!1};CoordinateArrays.removeRepeatedPoints=function(coord){if(!CoordinateArrays.hasRepeatedPoints(coord))return coord;var coordList=new CoordinateList(coord,!1);return coordList.toCoordinateArray()};CoordinateArrays.reverse=function(coord){for(var last=coord.length-1,mid=Math.trunc(last/2),i=0;i<=mid;i++){var tmp=coord[i];coord[i]=coord[last-i],coord[last-i]=tmp}};CoordinateArrays.removeNull=function(coord){for(var nonNull=0,i=0;i<coord.length;i++)coord[i]!==null&&nonNull++;var newCoord=new Array(nonNull).fill(null);if(nonNull===0)return newCoord;for(var j=0,i$1=0;i$1<coord.length;i$1++)coord[i$1]!==null&&(newCoord[j++]=coord[i$1]);return newCoord};CoordinateArrays.copyDeep=function(){if(arguments.length===1){for(var coordinates=arguments[0],copy7=new Array(coordinates.length).fill(null),i=0;i<coordinates.length;i++)copy7[i]=new Coordinate(coordinates[i]);return copy7}else if(arguments.length===5)for(var src=arguments[0],srcStart=arguments[1],dest=arguments[2],destStart=arguments[3],length4=arguments[4],i$1=0;i$1<length4;i$1++)dest[destStart+i$1]=new Coordinate(src[srcStart+i$1])};CoordinateArrays.isEqualReversed=function(pts1,pts2){for(var i=0;i<pts1.length;i++){var p1=pts1[i],p2=pts2[pts1.length-i-1];if(p1.compareTo(p2)!==0)return!1}return!0};CoordinateArrays.envelope=function(coordinates){for(var env=new Envelope,i=0;i<coordinates.length;i++)env.expandToInclude(coordinates[i]);return env};CoordinateArrays.toCoordinateArray=function(coordList){return coordList.toArray(CoordinateArrays.coordArrayType)};CoordinateArrays.atLeastNCoordinatesOrNothing=function(n,c){return c.length>=n?c:[]};CoordinateArrays.indexOf=function(coordinate2,coordinates){for(var i=0;i<coordinates.length;i++)if(coordinate2.equals(coordinates[i]))return i;return-1};CoordinateArrays.increasingDirection=function(pts){for(var i=0;i<Math.trunc(pts.length/2);i++){var j=pts.length-1-i,comp=pts[i].compareTo(pts[j]);if(comp!==0)return comp}return 1};CoordinateArrays.compare=function(pts1,pts2){for(var i=0;i<pts1.length&&i<pts2.length;){var compare10=pts1[i].compareTo(pts2[i]);if(compare10!==0)return compare10;i++}return i<pts2.length?-1:i<pts1.length?1:0};CoordinateArrays.minCoordinate=function(coordinates){for(var minCoord=null,i=0;i<coordinates.length;i++)(minCoord===null||minCoord.compareTo(coordinates[i])>0)&&(minCoord=coordinates[i]);return minCoord};CoordinateArrays.extract=function(pts,start,end){start=MathUtil.clamp(start,0,pts.length),end=MathUtil.clamp(end,-1,pts.length);var npts=end-start+1;end<0&&(npts=0),start>=pts.length&&(npts=0),end<start&&(npts=0);var extractPts=new Array(npts).fill(null);if(npts===0)return extractPts;for(var iPts=0,i=start;i<=end;i++)extractPts[iPts++]=pts[i];return extractPts};Object.defineProperties(CoordinateArrays,staticAccessors$13);var ForwardComparator=function(){};ForwardComparator.prototype.compare=function(o1,o2){var pts1=o1,pts2=o2;return CoordinateArrays.compare(pts1,pts2)};ForwardComparator.prototype.interfaces_=function(){return[Comparator]};ForwardComparator.prototype.getClass=function(){return ForwardComparator};var BidirectionalComparator=function(){};BidirectionalComparator.prototype.compare=function(o1,o2){var pts1=o1,pts2=o2;if(pts1.length<pts2.length)return-1;if(pts1.length>pts2.length)return 1;if(pts1.length===0)return 0;var forwardComp=CoordinateArrays.compare(pts1,pts2),isEqualRev=CoordinateArrays.isEqualReversed(pts1,pts2);return isEqualRev?0:forwardComp};BidirectionalComparator.prototype.OLDcompare=function(o1,o2){var pts1=o1,pts2=o2;if(pts1.length<pts2.length)return-1;if(pts1.length>pts2.length)return 1;if(pts1.length===0)return 0;for(var dir1=CoordinateArrays.increasingDirection(pts1),dir2=CoordinateArrays.increasingDirection(pts2),i1=dir1>0?0:pts1.length-1,i2=dir2>0?0:pts1.length-1,i=0;i<pts1.length;i++){var comparePt=pts1[i1].compareTo(pts2[i2]);if(comparePt!==0)return comparePt;i1+=dir1,i2+=dir2}return 0};BidirectionalComparator.prototype.interfaces_=function(){return[Comparator]};BidirectionalComparator.prototype.getClass=function(){return BidirectionalComparator};var Map$1=function(){};Map$1.prototype.get=function(){};Map$1.prototype.put=function(){};Map$1.prototype.size=function(){};Map$1.prototype.values=function(){};Map$1.prototype.entrySet=function(){};var SortedMap=function(Map3){function SortedMap2(){Map3.apply(this,arguments)}return Map3&&(SortedMap2.__proto__=Map3),SortedMap2.prototype=Object.create(Map3&&Map3.prototype),SortedMap2.prototype.constructor=SortedMap2,SortedMap2}(Map$1);function OperationNotSupported(message){this.message=message||""}OperationNotSupported.prototype=new Error;OperationNotSupported.prototype.name="OperationNotSupported";function Set2(){}Set2.prototype=new Collection;Set2.prototype.contains=function(){};var HashSet=function(Set$$1){function HashSet2(){Set$$1.call(this),this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}return Set$$1&&(HashSet2.__proto__=Set$$1),HashSet2.prototype=Object.create(Set$$1&&Set$$1.prototype),HashSet2.prototype.constructor=HashSet2,HashSet2.prototype.contains=function(o){for(var this$1=this,i=0,len=this.array_.length;i<len;i++){var e=this$1.array_[i];if(e===o)return!0}return!1},HashSet2.prototype.add=function(o){return this.contains(o)?!1:(this.array_.push(o),!0)},HashSet2.prototype.addAll=function(c){for(var this$1=this,i=c.iterator();i.hasNext();)this$1.add(i.next());return!0},HashSet2.prototype.remove=function(o){throw new Error},HashSet2.prototype.size=function(){return this.array_.length},HashSet2.prototype.isEmpty=function(){return this.array_.length===0},HashSet2.prototype.toArray=function(){for(var this$1=this,array2=[],i=0,len=this.array_.length;i<len;i++)array2.push(this$1.array_[i]);return array2},HashSet2.prototype.iterator=function(){return new Iterator_$1(this)},HashSet2}(Set2),Iterator_$1=function(Iterator$$1){function Iterator_2(hashSet){Iterator$$1.call(this),this.hashSet_=hashSet,this.position_=0}return Iterator$$1&&(Iterator_2.__proto__=Iterator$$1),Iterator_2.prototype=Object.create(Iterator$$1&&Iterator$$1.prototype),Iterator_2.prototype.constructor=Iterator_2,Iterator_2.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new NoSuchElementException;return this.hashSet_.array_[this.position_++]},Iterator_2.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Iterator_2.prototype.remove=function(){throw new OperationNotSupported},Iterator_2}(Iterator),BLACK=0,RED=1;function colorOf(p){return p===null?BLACK:p.color}function parentOf(p){return p===null?null:p.parent}function setColor(p,c){p!==null&&(p.color=c)}function leftOf(p){return p===null?null:p.left}function rightOf(p){return p===null?null:p.right}function TreeMap(){this.root_=null,this.size_=0}TreeMap.prototype=new SortedMap;TreeMap.prototype.get=function(key){for(var p=this.root_;p!==null;){var cmp3=key.compareTo(p.key);if(cmp3<0)p=p.left;else if(cmp3>0)p=p.right;else return p.value}return null};TreeMap.prototype.put=function(key,value){if(this.root_===null)return this.root_={key,value,left:null,right:null,parent:null,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var t=this.root_,parent,cmp3;do if(parent=t,cmp3=key.compareTo(t.key),cmp3<0)t=t.left;else if(cmp3>0)t=t.right;else{var oldValue=t.value;return t.value=value,oldValue}while(t!==null);var e={key,left:null,right:null,value,parent,color:BLACK,getValue:function(){return this.value},getKey:function(){return this.key}};return cmp3<0?parent.left=e:parent.right=e,this.fixAfterInsertion(e),this.size_++,null};TreeMap.prototype.fixAfterInsertion=function(x2){var this$1=this;for(x2.color=RED;x2!=null&&x2!==this.root_&&x2.parent.color===RED;)if(parentOf(x2)===leftOf(parentOf(parentOf(x2)))){var y2=rightOf(parentOf(parentOf(x2)));colorOf(y2)===RED?(setColor(parentOf(x2),BLACK),setColor(y2,BLACK),setColor(parentOf(parentOf(x2)),RED),x2=parentOf(parentOf(x2))):(x2===rightOf(parentOf(x2))&&(x2=parentOf(x2),this$1.rotateLeft(x2)),setColor(parentOf(x2),BLACK),setColor(parentOf(parentOf(x2)),RED),this$1.rotateRight(parentOf(parentOf(x2))))}else{var y$1=leftOf(parentOf(parentOf(x2)));colorOf(y$1)===RED?(setColor(parentOf(x2),BLACK),setColor(y$1,BLACK),setColor(parentOf(parentOf(x2)),RED),x2=parentOf(parentOf(x2))):(x2===leftOf(parentOf(x2))&&(x2=parentOf(x2),this$1.rotateRight(x2)),setColor(parentOf(x2),BLACK),setColor(parentOf(parentOf(x2)),RED),this$1.rotateLeft(parentOf(parentOf(x2))))}this.root_.color=BLACK};TreeMap.prototype.values=function(){var arrayList=new ArrayList,p=this.getFirstEntry();if(p!==null)for(arrayList.add(p.value);(p=TreeMap.successor(p))!==null;)arrayList.add(p.value);return arrayList};TreeMap.prototype.entrySet=function(){var hashSet=new HashSet,p=this.getFirstEntry();if(p!==null)for(hashSet.add(p);(p=TreeMap.successor(p))!==null;)hashSet.add(p);return hashSet};TreeMap.prototype.rotateLeft=function(p){if(p!=null){var r=p.right;p.right=r.left,r.left!=null&&(r.left.parent=p),r.parent=p.parent,p.parent===null?this.root_=r:p.parent.left===p?p.parent.left=r:p.parent.right=r,r.left=p,p.parent=r}};TreeMap.prototype.rotateRight=function(p){if(p!=null){var l=p.left;p.left=l.right,l.right!=null&&(l.right.parent=p),l.parent=p.parent,p.parent===null?this.root_=l:p.parent.right===p?p.parent.right=l:p.parent.left=l,l.right=p,p.parent=l}};TreeMap.prototype.getFirstEntry=function(){var p=this.root_;if(p!=null)for(;p.left!=null;)p=p.left;return p};TreeMap.successor=function(t){if(t===null)return null;if(t.right!==null){for(var p=t.right;p.left!==null;)p=p.left;return p}else{for(var p$1=t.parent,ch=t;p$1!==null&&ch===p$1.right;)ch=p$1,p$1=p$1.parent;return p$1}};TreeMap.prototype.size=function(){return this.size_};var Lineal=function(){};Lineal.prototype.interfaces_=function(){return[]};Lineal.prototype.getClass=function(){return Lineal};function SortedSet(){}SortedSet.prototype=new Set2;function TreeSet(){this.array_=[],arguments[0]instanceof Collection&&this.addAll(arguments[0])}TreeSet.prototype=new SortedSet;TreeSet.prototype.contains=function(o){for(var this$1=this,i=0,len=this.array_.length;i<len;i++){var e=this$1.array_[i];if(e.compareTo(o)===0)return!0}return!1};TreeSet.prototype.add=function(o){var this$1=this;if(this.contains(o))return!1;for(var i=0,len=this.array_.length;i<len;i++){var e=this$1.array_[i];if(e.compareTo(o)===1)return this$1.array_.splice(i,0,o),!0}return this.array_.push(o),!0};TreeSet.prototype.addAll=function(c){for(var this$1=this,i=c.iterator();i.hasNext();)this$1.add(i.next());return!0};TreeSet.prototype.remove=function(e){throw new OperationNotSupported};TreeSet.prototype.size=function(){return this.array_.length};TreeSet.prototype.isEmpty=function(){return this.array_.length===0};TreeSet.prototype.toArray=function(){for(var this$1=this,array2=[],i=0,len=this.array_.length;i<len;i++)array2.push(this$1.array_[i]);return array2};TreeSet.prototype.iterator=function(){return new Iterator_$2(this)};var Iterator_$2=function(treeSet){this.treeSet_=treeSet,this.position_=0};Iterator_$2.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new NoSuchElementException;return this.treeSet_.array_[this.position_++]};Iterator_$2.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Iterator_$2.prototype.remove=function(){throw new OperationNotSupported};var Arrays=function(){};Arrays.sort=function(){var a=arguments[0],i,t,comparator,compare10;if(arguments.length===1)compare10=function(a2,b){return a2.compareTo(b)},a.sort(compare10);else if(arguments.length===2)comparator=arguments[1],compare10=function(a2,b){return comparator.compare(a2,b)},a.sort(compare10);else if(arguments.length===3){t=a.slice(arguments[1],arguments[2]),t.sort();var r=a.slice(0,arguments[1]).concat(t,a.slice(arguments[2],a.length));for(a.splice(0,a.length),i=0;i<r.length;i++)a.push(r[i])}else if(arguments.length===4)for(t=a.slice(arguments[1],arguments[2]),comparator=arguments[3],compare10=function(a2,b){return comparator.compare(a2,b)},t.sort(compare10),r=a.slice(0,arguments[1]).concat(t,a.slice(arguments[2],a.length)),a.splice(0,a.length),i=0;i<r.length;i++)a.push(r[i])};Arrays.asList=function(array2){for(var arrayList=new ArrayList,i=0,len=array2.length;i<len;i++)arrayList.add(array2[i]);return arrayList};var Dimension=function(){},staticAccessors$14={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};staticAccessors$14.P.get=function(){return 0};staticAccessors$14.L.get=function(){return 1};staticAccessors$14.A.get=function(){return 2};staticAccessors$14.FALSE.get=function(){return-1};staticAccessors$14.TRUE.get=function(){return-2};staticAccessors$14.DONTCARE.get=function(){return-3};staticAccessors$14.SYM_FALSE.get=function(){return"F"};staticAccessors$14.SYM_TRUE.get=function(){return"T"};staticAccessors$14.SYM_DONTCARE.get=function(){return"*"};staticAccessors$14.SYM_P.get=function(){return"0"};staticAccessors$14.SYM_L.get=function(){return"1"};staticAccessors$14.SYM_A.get=function(){return"2"};Dimension.prototype.interfaces_=function(){return[]};Dimension.prototype.getClass=function(){return Dimension};Dimension.toDimensionSymbol=function(dimensionValue){switch(dimensionValue){case Dimension.FALSE:return Dimension.SYM_FALSE;case Dimension.TRUE:return Dimension.SYM_TRUE;case Dimension.DONTCARE:return Dimension.SYM_DONTCARE;case Dimension.P:return Dimension.SYM_P;case Dimension.L:return Dimension.SYM_L;case Dimension.A:return Dimension.SYM_A;default:}throw new IllegalArgumentException("Unknown dimension value: "+dimensionValue)};Dimension.toDimensionValue=function(dimensionSymbol){switch(Character.toUpperCase(dimensionSymbol)){case Dimension.SYM_FALSE:return Dimension.FALSE;case Dimension.SYM_TRUE:return Dimension.TRUE;case Dimension.SYM_DONTCARE:return Dimension.DONTCARE;case Dimension.SYM_P:return Dimension.P;case Dimension.SYM_L:return Dimension.L;case Dimension.SYM_A:return Dimension.A;default:}throw new IllegalArgumentException("Unknown dimension symbol: "+dimensionSymbol)};Object.defineProperties(Dimension,staticAccessors$14);var GeometryFilter=function(){};GeometryFilter.prototype.filter=function(geom){};GeometryFilter.prototype.interfaces_=function(){return[]};GeometryFilter.prototype.getClass=function(){return GeometryFilter};var CoordinateSequenceFilter=function(){};CoordinateSequenceFilter.prototype.filter=function(seq,i){};CoordinateSequenceFilter.prototype.isDone=function(){};CoordinateSequenceFilter.prototype.isGeometryChanged=function(){};CoordinateSequenceFilter.prototype.interfaces_=function(){return[]};CoordinateSequenceFilter.prototype.getClass=function(){return CoordinateSequenceFilter};var GeometryCollection=function(Geometry$$1){function GeometryCollection2(geometries,factory){if(Geometry$$1.call(this,factory),this._geometries=geometries||[],Geometry$$1.hasNullElements(this._geometries))throw new IllegalArgumentException("geometries must not contain null elements")}Geometry$$1&&(GeometryCollection2.__proto__=Geometry$$1),GeometryCollection2.prototype=Object.create(Geometry$$1&&Geometry$$1.prototype),GeometryCollection2.prototype.constructor=GeometryCollection2;var staticAccessors2={serialVersionUID:{configurable:!0}};return GeometryCollection2.prototype.computeEnvelopeInternal=function(){for(var this$1=this,envelope3=new Envelope,i=0;i<this._geometries.length;i++)envelope3.expandToInclude(this$1._geometries[i].getEnvelopeInternal());return envelope3},GeometryCollection2.prototype.getGeometryN=function(n){return this._geometries[n]},GeometryCollection2.prototype.getSortIndex=function(){return Geometry$$1.SORTINDEX_GEOMETRYCOLLECTION},GeometryCollection2.prototype.getCoordinates=function(){for(var this$1=this,coordinates=new Array(this.getNumPoints()).fill(null),k=-1,i=0;i<this._geometries.length;i++)for(var childCoordinates=this$1._geometries[i].getCoordinates(),j=0;j<childCoordinates.length;j++)k++,coordinates[k]=childCoordinates[j];return coordinates},GeometryCollection2.prototype.getArea=function(){for(var this$1=this,area5=0,i=0;i<this._geometries.length;i++)area5+=this$1._geometries[i].getArea();return area5},GeometryCollection2.prototype.equalsExact=function(){var this$1=this;if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];if(!this.isEquivalentClass(other))return!1;var otherCollection=other;if(this._geometries.length!==otherCollection._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this$1._geometries[i].equalsExact(otherCollection._geometries[i],tolerance))return!1;return!0}else return Geometry$$1.prototype.equalsExact.apply(this,arguments)},GeometryCollection2.prototype.normalize=function(){for(var this$1=this,i=0;i<this._geometries.length;i++)this$1._geometries[i].normalize();Arrays.sort(this._geometries)},GeometryCollection2.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},GeometryCollection2.prototype.getBoundaryDimension=function(){for(var this$1=this,dimension=Dimension.FALSE,i=0;i<this._geometries.length;i++)dimension=Math.max(dimension,this$1._geometries[i].getBoundaryDimension());return dimension},GeometryCollection2.prototype.getDimension=function(){for(var this$1=this,dimension=Dimension.FALSE,i=0;i<this._geometries.length;i++)dimension=Math.max(dimension,this$1._geometries[i].getDimension());return dimension},GeometryCollection2.prototype.getLength=function(){for(var this$1=this,sum2=0,i=0;i<this._geometries.length;i++)sum2+=this$1._geometries[i].getLength();return sum2},GeometryCollection2.prototype.getNumPoints=function(){for(var this$1=this,numPoints=0,i=0;i<this._geometries.length;i++)numPoints+=this$1._geometries[i].getNumPoints();return numPoints},GeometryCollection2.prototype.getNumGeometries=function(){return this._geometries.length},GeometryCollection2.prototype.reverse=function(){for(var this$1=this,n=this._geometries.length,revGeoms=new Array(n).fill(null),i=0;i<this._geometries.length;i++)revGeoms[i]=this$1._geometries[i].reverse();return this.getFactory().createGeometryCollection(revGeoms)},GeometryCollection2.prototype.compareToSameClass=function(){var this$1=this;if(arguments.length===1){var o=arguments[0],theseElements=new TreeSet(Arrays.asList(this._geometries)),otherElements=new TreeSet(Arrays.asList(o._geometries));return this.compare(theseElements,otherElements)}else if(arguments.length===2){for(var o$1=arguments[0],comp=arguments[1],gc=o$1,n1=this.getNumGeometries(),n2=gc.getNumGeometries(),i=0;i<n1&&i<n2;){var thisGeom=this$1.getGeometryN(i),otherGeom=gc.getGeometryN(i),holeComp=thisGeom.compareToSameClass(otherGeom,comp);if(holeComp!==0)return holeComp;i++}return i<n1?1:i<n2?-1:0}},GeometryCollection2.prototype.apply=function(){var this$1=this;if(hasInterface(arguments[0],CoordinateFilter))for(var filter17=arguments[0],i=0;i<this._geometries.length;i++)this$1._geometries[i].apply(filter17);else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var filter$1=arguments[0];if(this._geometries.length===0)return null;for(var i$1=0;i$1<this._geometries.length&&(this$1._geometries[i$1].apply(filter$1),!filter$1.isDone());i$1++);filter$1.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var filter$2=arguments[0];filter$2.filter(this);for(var i$2=0;i$2<this._geometries.length;i$2++)this$1._geometries[i$2].apply(filter$2)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var filter$3=arguments[0];filter$3.filter(this);for(var i$3=0;i$3<this._geometries.length;i$3++)this$1._geometries[i$3].apply(filter$3)}},GeometryCollection2.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Assert.shouldNeverReachHere(),null},GeometryCollection2.prototype.clone=function(){var this$1=this,gc=Geometry$$1.prototype.clone.call(this);gc._geometries=new Array(this._geometries.length).fill(null);for(var i=0;i<this._geometries.length;i++)gc._geometries[i]=this$1._geometries[i].clone();return gc},GeometryCollection2.prototype.getGeometryType=function(){return"GeometryCollection"},GeometryCollection2.prototype.copy=function(){for(var this$1=this,geometries=new Array(this._geometries.length).fill(null),i=0;i<geometries.length;i++)geometries[i]=this$1._geometries[i].copy();return new GeometryCollection2(geometries,this._factory)},GeometryCollection2.prototype.isEmpty=function(){for(var this$1=this,i=0;i<this._geometries.length;i++)if(!this$1._geometries[i].isEmpty())return!1;return!0},GeometryCollection2.prototype.interfaces_=function(){return[]},GeometryCollection2.prototype.getClass=function(){return GeometryCollection2},staticAccessors2.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(GeometryCollection2,staticAccessors2),GeometryCollection2}(Geometry),MultiLineString=function(GeometryCollection$$1){function MultiLineString2(){GeometryCollection$$1.apply(this,arguments)}GeometryCollection$$1&&(MultiLineString2.__proto__=GeometryCollection$$1),MultiLineString2.prototype=Object.create(GeometryCollection$$1&&GeometryCollection$$1.prototype),MultiLineString2.prototype.constructor=MultiLineString2;var staticAccessors2={serialVersionUID:{configurable:!0}};return MultiLineString2.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTILINESTRING},MultiLineString2.prototype.equalsExact=function(){if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];return this.isEquivalentClass(other)?GeometryCollection$$1.prototype.equalsExact.call(this,other,tolerance):!1}else return GeometryCollection$$1.prototype.equalsExact.apply(this,arguments)},MultiLineString2.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},MultiLineString2.prototype.isClosed=function(){var this$1=this;if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!this$1._geometries[i].isClosed())return!1;return!0},MultiLineString2.prototype.getDimension=function(){return 1},MultiLineString2.prototype.reverse=function(){for(var this$1=this,nLines=this._geometries.length,revLines=new Array(nLines).fill(null),i=0;i<this._geometries.length;i++)revLines[nLines-1-i]=this$1._geometries[i].reverse();return this.getFactory().createMultiLineString(revLines)},MultiLineString2.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},MultiLineString2.prototype.getGeometryType=function(){return"MultiLineString"},MultiLineString2.prototype.copy=function(){for(var this$1=this,lineStrings=new Array(this._geometries.length).fill(null),i=0;i<lineStrings.length;i++)lineStrings[i]=this$1._geometries[i].copy();return new MultiLineString2(lineStrings,this._factory)},MultiLineString2.prototype.interfaces_=function(){return[Lineal]},MultiLineString2.prototype.getClass=function(){return MultiLineString2},staticAccessors2.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(MultiLineString2,staticAccessors2),MultiLineString2}(GeometryCollection),BoundaryOp=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var geom=arguments[0],bnRule=BoundaryNodeRule.MOD2_BOUNDARY_RULE;this._geom=geom,this._geomFact=geom.getFactory(),this._bnRule=bnRule}else if(arguments.length===2){var geom$1=arguments[0],bnRule$1=arguments[1];this._geom=geom$1,this._geomFact=geom$1.getFactory(),this._bnRule=bnRule$1}};BoundaryOp.prototype.boundaryMultiLineString=function(mLine){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var bdyPts=this.computeBoundaryCoordinates(mLine);return bdyPts.length===1?this._geomFact.createPoint(bdyPts[0]):this._geomFact.createMultiPointFromCoords(bdyPts)};BoundaryOp.prototype.getBoundary=function(){return this._geom instanceof LineString2?this.boundaryLineString(this._geom):this._geom instanceof MultiLineString?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};BoundaryOp.prototype.boundaryLineString=function(line){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(line.isClosed()){var closedEndpointOnBoundary=this._bnRule.isInBoundary(2);return closedEndpointOnBoundary?line.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([line.getStartPoint(),line.getEndPoint()])};BoundaryOp.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};BoundaryOp.prototype.computeBoundaryCoordinates=function(mLine){var this$1=this,bdyPts=new ArrayList;this._endpointMap=new TreeMap;for(var i=0;i<mLine.getNumGeometries();i++){var line=mLine.getGeometryN(i);line.getNumPoints()!==0&&(this$1.addEndpoint(line.getCoordinateN(0)),this$1.addEndpoint(line.getCoordinateN(line.getNumPoints()-1)))}for(var it=this._endpointMap.entrySet().iterator();it.hasNext();){var entry=it.next(),counter=entry.getValue(),valence=counter.count;this$1._bnRule.isInBoundary(valence)&&bdyPts.add(entry.getKey())}return CoordinateArrays.toCoordinateArray(bdyPts)};BoundaryOp.prototype.addEndpoint=function(pt){var counter=this._endpointMap.get(pt);counter===null&&(counter=new Counter,this._endpointMap.put(pt,counter)),counter.count++};BoundaryOp.prototype.interfaces_=function(){return[]};BoundaryOp.prototype.getClass=function(){return BoundaryOp};BoundaryOp.getBoundary=function(){if(arguments.length===1){var g=arguments[0],bop=new BoundaryOp(g);return bop.getBoundary()}else if(arguments.length===2){var g$1=arguments[0],bnRule=arguments[1],bop$1=new BoundaryOp(g$1,bnRule);return bop$1.getBoundary()}};var Counter=function(){this.count=null};Counter.prototype.interfaces_=function(){return[]};Counter.prototype.getClass=function(){return Counter};function PrintStream(){}function StringReader(){}var DecimalFormat=function(){};function ByteArrayOutputStream(){}function IOException(){}function LineNumberReader(){}var StringUtil=function(){},staticAccessors$15={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};StringUtil.prototype.interfaces_=function(){return[]};StringUtil.prototype.getClass=function(){return StringUtil};StringUtil.chars=function(c,n){for(var ch=new Array(n).fill(null),i=0;i<n;i++)ch[i]=c;return String(ch)};StringUtil.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],os=new ByteArrayOutputStream,ps=new PrintStream(os);return t.printStackTrace(ps),os.toString()}else if(arguments.length===2){for(var t$1=arguments[0],depth2=arguments[1],stackTrace="",stringReader=new StringReader(StringUtil.getStackTrace(t$1)),lineNumberReader=new LineNumberReader(stringReader),i=0;i<depth2;i++)try{stackTrace+=lineNumberReader.readLine()+StringUtil.NEWLINE}catch(e){if(e instanceof IOException)Assert.shouldNeverReachHere();else throw e}finally{}return stackTrace}};StringUtil.split=function(s,separator){for(var separatorlen=separator.length,tokenList=new ArrayList,tmpString=""+s,pos=tmpString.indexOf(separator);pos>=0;){var token=tmpString.substring(0,pos);tokenList.add(token),tmpString=tmpString.substring(pos+separatorlen),pos=tmpString.indexOf(separator)}tmpString.length>0&&tokenList.add(tmpString);for(var res=new Array(tokenList.size()).fill(null),i=0;i<res.length;i++)res[i]=tokenList.get(i);return res};StringUtil.toString=function(){if(arguments.length===1){var d=arguments[0];return StringUtil.SIMPLE_ORDINATE_FORMAT.format(d)}};StringUtil.spaces=function(n){return StringUtil.chars(" ",n)};staticAccessors$15.NEWLINE.get=function(){return System.getProperty("line.separator")};staticAccessors$15.SIMPLE_ORDINATE_FORMAT.get=function(){return new DecimalFormat("0.#")};Object.defineProperties(StringUtil,staticAccessors$15);var CoordinateSequences=function(){};CoordinateSequences.prototype.interfaces_=function(){return[]};CoordinateSequences.prototype.getClass=function(){return CoordinateSequences};CoordinateSequences.copyCoord=function(src,srcPos,dest,destPos){for(var minDim=Math.min(src.getDimension(),dest.getDimension()),dim=0;dim<minDim;dim++)dest.setOrdinate(destPos,dim,src.getOrdinate(srcPos,dim))};CoordinateSequences.isRing=function(seq){var n=seq.size();return n===0?!0:n<=3?!1:seq.getOrdinate(0,CoordinateSequence.X)===seq.getOrdinate(n-1,CoordinateSequence.X)&&seq.getOrdinate(0,CoordinateSequence.Y)===seq.getOrdinate(n-1,CoordinateSequence.Y)};CoordinateSequences.isEqual=function(cs1,cs2){var cs1Size=cs1.size(),cs2Size=cs2.size();if(cs1Size!==cs2Size)return!1;for(var dim=Math.min(cs1.getDimension(),cs2.getDimension()),i=0;i<cs1Size;i++)for(var d=0;d<dim;d++){var v1=cs1.getOrdinate(i,d),v2=cs2.getOrdinate(i,d);if(cs1.getOrdinate(i,d)!==cs2.getOrdinate(i,d)&&!(Double.isNaN(v1)&&Double.isNaN(v2)))return!1}return!0};CoordinateSequences.extend=function(fact,seq,size11){var newseq=fact.create(size11,seq.getDimension()),n=seq.size();if(CoordinateSequences.copy(seq,0,newseq,0,n),n>0)for(var i=n;i<size11;i++)CoordinateSequences.copy(seq,n-1,newseq,i,1);return newseq};CoordinateSequences.reverse=function(seq){for(var last=seq.size()-1,mid=Math.trunc(last/2),i=0;i<=mid;i++)CoordinateSequences.swap(seq,i,last-i)};CoordinateSequences.swap=function(seq,i,j){if(i===j)return null;for(var dim=0;dim<seq.getDimension();dim++){var tmp=seq.getOrdinate(i,dim);seq.setOrdinate(i,dim,seq.getOrdinate(j,dim)),seq.setOrdinate(j,dim,tmp)}};CoordinateSequences.copy=function(src,srcPos,dest,destPos,length4){for(var i=0;i<length4;i++)CoordinateSequences.copyCoord(src,srcPos+i,dest,destPos+i)};CoordinateSequences.toString=function(){if(arguments.length===1){var cs=arguments[0],size11=cs.size();if(size11===0)return"()";var dim=cs.getDimension(),buf=new StringBuffer;buf.append("(");for(var i=0;i<size11;i++){i>0&&buf.append(" ");for(var d=0;d<dim;d++)d>0&&buf.append(","),buf.append(StringUtil.toString(cs.getOrdinate(i,d)))}return buf.append(")"),buf.toString()}};CoordinateSequences.ensureValidRing=function(fact,seq){var n=seq.size();if(n===0)return seq;if(n<=3)return CoordinateSequences.createClosedRing(fact,seq,4);var isClosed5=seq.getOrdinate(0,CoordinateSequence.X)===seq.getOrdinate(n-1,CoordinateSequence.X)&&seq.getOrdinate(0,CoordinateSequence.Y)===seq.getOrdinate(n-1,CoordinateSequence.Y);return isClosed5?seq:CoordinateSequences.createClosedRing(fact,seq,n+1)};CoordinateSequences.createClosedRing=function(fact,seq,size11){var newseq=fact.create(size11,seq.getDimension()),n=seq.size();CoordinateSequences.copy(seq,0,newseq,0,n);for(var i=n;i<size11;i++)CoordinateSequences.copy(seq,0,newseq,i,1);return newseq};var LineString2=function(Geometry$$1){function LineString3(points,factory){Geometry$$1.call(this,factory),this._points=null,this.init(points)}Geometry$$1&&(LineString3.__proto__=Geometry$$1),LineString3.prototype=Object.create(Geometry$$1&&Geometry$$1.prototype),LineString3.prototype.constructor=LineString3;var staticAccessors2={serialVersionUID:{configurable:!0}};return LineString3.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Envelope:this._points.expandEnvelope(new Envelope)},LineString3.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},LineString3.prototype.getSortIndex=function(){return Geometry$$1.SORTINDEX_LINESTRING},LineString3.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},LineString3.prototype.equalsExact=function(){var this$1=this;if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];if(!this.isEquivalentClass(other))return!1;var otherLineString=other;if(this._points.size()!==otherLineString._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this$1.equal(this$1._points.getCoordinate(i),otherLineString._points.getCoordinate(i),tolerance))return!1;return!0}else return Geometry$$1.prototype.equalsExact.apply(this,arguments)},LineString3.prototype.normalize=function(){for(var this$1=this,i=0;i<Math.trunc(this._points.size()/2);i++){var j=this$1._points.size()-1-i;if(!this$1._points.getCoordinate(i).equals(this$1._points.getCoordinate(j)))return this$1._points.getCoordinate(i).compareTo(this$1._points.getCoordinate(j))>0&&CoordinateSequences.reverse(this$1._points),null}},LineString3.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},LineString3.prototype.getBoundaryDimension=function(){return this.isClosed()?Dimension.FALSE:0},LineString3.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},LineString3.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},LineString3.prototype.getDimension=function(){return 1},LineString3.prototype.getLength=function(){return CGAlgorithms.computeLength(this._points)},LineString3.prototype.getNumPoints=function(){return this._points.size()},LineString3.prototype.reverse=function(){var seq=this._points.copy();CoordinateSequences.reverse(seq);var revLine=this.getFactory().createLineString(seq);return revLine},LineString3.prototype.compareToSameClass=function(){var this$1=this;if(arguments.length===1){for(var o=arguments[0],line=o,i=0,j=0;i<this._points.size()&&j<line._points.size();){var comparison=this$1._points.getCoordinate(i).compareTo(line._points.getCoordinate(j));if(comparison!==0)return comparison;i++,j++}return i<this._points.size()?1:j<line._points.size()?-1:0}else if(arguments.length===2){var o$1=arguments[0],comp=arguments[1],line$1=o$1;return comp.compare(this._points,line$1._points)}},LineString3.prototype.apply=function(){var this$1=this;if(hasInterface(arguments[0],CoordinateFilter))for(var filter17=arguments[0],i=0;i<this._points.size();i++)filter17.filter(this$1._points.getCoordinate(i));else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var filter$1=arguments[0];if(this._points.size()===0)return null;for(var i$1=0;i$1<this._points.size()&&(filter$1.filter(this$1._points,i$1),!filter$1.isDone());i$1++);filter$1.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var filter$2=arguments[0];filter$2.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var filter$3=arguments[0];filter$3.filter(this)}},LineString3.prototype.getBoundary=function(){return new BoundaryOp(this).getBoundary()},LineString3.prototype.isEquivalentClass=function(other){return other instanceof LineString3},LineString3.prototype.clone=function(){var ls=Geometry$$1.prototype.clone.call(this);return ls._points=this._points.clone(),ls},LineString3.prototype.getCoordinateN=function(n){return this._points.getCoordinate(n)},LineString3.prototype.getGeometryType=function(){return"LineString"},LineString3.prototype.copy=function(){return new LineString3(this._points.copy(),this._factory)},LineString3.prototype.getCoordinateSequence=function(){return this._points},LineString3.prototype.isEmpty=function(){return this._points.size()===0},LineString3.prototype.init=function(points){if(points===null&&(points=this.getFactory().getCoordinateSequenceFactory().create([])),points.size()===1)throw new IllegalArgumentException("Invalid number of points in LineString (found "+points.size()+" - must be 0 or >= 2)");this._points=points},LineString3.prototype.isCoordinate=function(pt){for(var this$1=this,i=0;i<this._points.size();i++)if(this$1._points.getCoordinate(i).equals(pt))return!0;return!1},LineString3.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},LineString3.prototype.getPointN=function(n){return this.getFactory().createPoint(this._points.getCoordinate(n))},LineString3.prototype.interfaces_=function(){return[Lineal]},LineString3.prototype.getClass=function(){return LineString3},staticAccessors2.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(LineString3,staticAccessors2),LineString3}(Geometry),Puntal=function(){};Puntal.prototype.interfaces_=function(){return[]};Puntal.prototype.getClass=function(){return Puntal};var Point=function(Geometry$$1){function Point2(coordinates,factory){Geometry$$1.call(this,factory),this._coordinates=coordinates||null,this.init(this._coordinates)}Geometry$$1&&(Point2.__proto__=Geometry$$1),Point2.prototype=Object.create(Geometry$$1&&Geometry$$1.prototype),Point2.prototype.constructor=Point2;var staticAccessors2={serialVersionUID:{configurable:!0}};return Point2.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Envelope;var env=new Envelope;return env.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),env},Point2.prototype.getSortIndex=function(){return Geometry$$1.SORTINDEX_POINT},Point2.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},Point2.prototype.equalsExact=function(){if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];return this.isEquivalentClass(other)?this.isEmpty()&&other.isEmpty()?!0:this.isEmpty()!==other.isEmpty()?!1:this.equal(other.getCoordinate(),this.getCoordinate(),tolerance):!1}else return Geometry$$1.prototype.equalsExact.apply(this,arguments)},Point2.prototype.normalize=function(){},Point2.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},Point2.prototype.getBoundaryDimension=function(){return Dimension.FALSE},Point2.prototype.getDimension=function(){return 0},Point2.prototype.getNumPoints=function(){return this.isEmpty()?0:1},Point2.prototype.reverse=function(){return this.copy()},Point2.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},Point2.prototype.compareToSameClass=function(){if(arguments.length===1){var other=arguments[0],point$1=other;return this.getCoordinate().compareTo(point$1.getCoordinate())}else if(arguments.length===2){var other$1=arguments[0],comp=arguments[1],point4=other$1;return comp.compare(this._coordinates,point4._coordinates)}},Point2.prototype.apply=function(){if(hasInterface(arguments[0],CoordinateFilter)){var filter17=arguments[0];if(this.isEmpty())return null;filter17.filter(this.getCoordinate())}else if(hasInterface(arguments[0],CoordinateSequenceFilter)){var filter$1=arguments[0];if(this.isEmpty())return null;filter$1.filter(this._coordinates,0),filter$1.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(arguments[0],GeometryFilter)){var filter$2=arguments[0];filter$2.filter(this)}else if(hasInterface(arguments[0],GeometryComponentFilter)){var filter$3=arguments[0];filter$3.filter(this)}},Point2.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},Point2.prototype.clone=function(){var p=Geometry$$1.prototype.clone.call(this);return p._coordinates=this._coordinates.clone(),p},Point2.prototype.getGeometryType=function(){return"Point"},Point2.prototype.copy=function(){return new Point2(this._coordinates.copy(),this._factory)},Point2.prototype.getCoordinateSequence=function(){return this._coordinates},Point2.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},Point2.prototype.isEmpty=function(){return this._coordinates.size()===0},Point2.prototype.init=function(coordinates){coordinates===null&&(coordinates=this.getFactory().getCoordinateSequenceFactory().create([])),Assert.isTrue(coordinates.size()<=1),this._coordinates=coordinates},Point2.prototype.isSimple=function(){return!0},Point2.prototype.interfaces_=function(){return[Puntal]},Point2.prototype.getClass=function(){return Point2},staticAccessors2.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(Point2,staticAccessors2),Point2}(Geometry),Polygonal=function(){};Polygonal.prototype.interfaces_=function(){return[]};Polygonal.prototype.getClass=function(){return Polygonal};var Polygon=function(Geometry$$1){function Polygon2(shell,holes,factory){if(Geometry$$1.call(this,factory),this._shell=null,this._holes=null,shell===null&&(shell=this.getFactory().createLinearRing()),holes===null&&(holes=[]),Geometry$$1.hasNullElements(holes))throw new IllegalArgumentException("holes must not contain null elements");if(shell.isEmpty()&&Geometry$$1.hasNonEmptyElements(holes))throw new IllegalArgumentException("shell is empty but holes are not");this._shell=shell,this._holes=holes}Geometry$$1&&(Polygon2.__proto__=Geometry$$1),Polygon2.prototype=Object.create(Geometry$$1&&Geometry$$1.prototype),Polygon2.prototype.constructor=Polygon2;var staticAccessors2={serialVersionUID:{configurable:!0}};return Polygon2.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},Polygon2.prototype.getSortIndex=function(){return Geometry$$1.SORTINDEX_POLYGON},Polygon2.prototype.getCoordinates=function(){var this$1=this;if(this.isEmpty())return[];for(var coordinates=new Array(this.getNumPoints()).fill(null),k=-1,shellCoordinates=this._shell.getCoordinates(),x2=0;x2<shellCoordinates.length;x2++)k++,coordinates[k]=shellCoordinates[x2];for(var i=0;i<this._holes.length;i++)for(var childCoordinates=this$1._holes[i].getCoordinates(),j=0;j<childCoordinates.length;j++)k++,coordinates[k]=childCoordinates[j];return coordinates},Polygon2.prototype.getArea=function(){var this$1=this,area5=0;area5+=Math.abs(CGAlgorithms.signedArea(this._shell.getCoordinateSequence()));for(var i=0;i<this._holes.length;i++)area5-=Math.abs(CGAlgorithms.signedArea(this$1._holes[i].getCoordinateSequence()));return area5},Polygon2.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var seq=this._shell.getCoordinateSequence(),env=this.getEnvelopeInternal(),i=0;i<5;i++){var x2=seq.getX(i);if(!(x2===env.getMinX()||x2===env.getMaxX()))return!1;var y2=seq.getY(i);if(!(y2===env.getMinY()||y2===env.getMaxY()))return!1}for(var prevX=seq.getX(0),prevY=seq.getY(0),i$1=1;i$1<=4;i$1++){var x$1=seq.getX(i$1),y$1=seq.getY(i$1),xChanged=x$1!==prevX,yChanged=y$1!==prevY;if(xChanged===yChanged)return!1;prevX=x$1,prevY=y$1}return!0},Polygon2.prototype.equalsExact=function(){var this$1=this;if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];if(!this.isEquivalentClass(other))return!1;var otherPolygon=other,thisShell=this._shell,otherPolygonShell=otherPolygon._shell;if(!thisShell.equalsExact(otherPolygonShell,tolerance)||this._holes.length!==otherPolygon._holes.length)return!1;for(var i=0;i<this._holes.length;i++)if(!this$1._holes[i].equalsExact(otherPolygon._holes[i],tolerance))return!1;return!0}else return Geometry$$1.prototype.equalsExact.apply(this,arguments)},Polygon2.prototype.normalize=function(){var this$1=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)this$1.normalize(this$1._holes[i],!1);Arrays.sort(this._holes)}else if(arguments.length===2){var ring=arguments[0],clockwise=arguments[1];if(ring.isEmpty())return null;var uniqueCoordinates=new Array(ring.getCoordinates().length-1).fill(null);System.arraycopy(ring.getCoordinates(),0,uniqueCoordinates,0,uniqueCoordinates.length);var minCoordinate2=CoordinateArrays.minCoordinate(ring.getCoordinates());CoordinateArrays.scroll(uniqueCoordinates,minCoordinate2),System.arraycopy(uniqueCoordinates,0,ring.getCoordinates(),0,uniqueCoordinates.length),ring.getCoordinates()[uniqueCoordinates.length]=uniqueCoordinates[0],CGAlgorithms.isCCW(ring.getCoordinates())===clockwise&&CoordinateArrays.reverse(ring.getCoordinates())}},Polygon2.prototype.getCoordinate=function(){return this._shell.getCoordinate()},Polygon2.prototype.getNumInteriorRing=function(){return this._holes.length},Polygon2.prototype.getBoundaryDimension=function(){return 1},Polygon2.prototype.getDimension=function(){return 2},Polygon2.prototype.getLength=function(){var this$1=this,len=0;len+=this._shell.getLength();for(var i=0;i<this._holes.length;i++)len+=this$1._holes[i].getLength();return len},Polygon2.prototype.getNumPoints=function(){for(var this$1=this,numPoints=this._shell.getNumPoints(),i=0;i<this._holes.length;i++)numPoints+=this$1._holes[i].getNumPoints();return numPoints},Polygon2.prototype.reverse=function(){var this$1=this,poly=this.copy();poly._shell=this._shell.copy().reverse(),poly._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)poly._holes[i]=this$1._holes[i].copy().reverse();return poly},Polygon2.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},Polygon2.prototype.compareToSameClass=function(){var this$1=this;if(arguments.length===1){var o=arguments[0],thisShell=this._shell,otherShell=o._shell;return thisShell.compareToSameClass(otherShell)}else if(arguments.length===2){var o$1=arguments[0],comp=arguments[1],poly=o$1,thisShell$1=this._shell,otherShell$1=poly._shell,shellComp=thisShell$1.compareToSameClass(otherShell$1,comp);if(shellComp!==0)return shellComp;for(var nHole1=this.getNumInteriorRing(),nHole2=poly.getNumInteriorRing(),i=0;i<nHole1&&i<nHole2;){var thisHole=this$1.getInteriorRingN(i),otherHole=poly.getInteriorRingN(i),holeComp=thisHole.compareToSameClass(otherHole,comp);if(holeComp!==0)return holeComp;i++}return i<nHole1?1:i<nHole2?-1:0}},Polygon2.prototype.apply=function(filter17){var this$1=this;if(hasInterface(filter17,CoordinateFilter)){this._shell.apply(filter17);for(var i$1=0;i$1<this._holes.length;i$1++)this$1._holes[i$1].apply(filter17)}else if(hasInterface(filter17,CoordinateSequenceFilter)){if(this._shell.apply(filter17),!filter17.isDone())for(var i$2=0;i$2<this._holes.length&&(this$1._holes[i$2].apply(filter17),!filter17.isDone());i$2++);filter17.isGeometryChanged()&&this.geometryChanged()}else if(hasInterface(filter17,GeometryFilter))filter17.filter(this);else if(hasInterface(filter17,GeometryComponentFilter)){filter17.filter(this),this._shell.apply(filter17);for(var i=0;i<this._holes.length;i++)this$1._holes[i].apply(filter17)}},Polygon2.prototype.getBoundary=function(){var this$1=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var rings=new Array(this._holes.length+1).fill(null);rings[0]=this._shell;for(var i=0;i<this._holes.length;i++)rings[i+1]=this$1._holes[i];return rings.length<=1?this.getFactory().createLinearRing(rings[0].getCoordinateSequence()):this.getFactory().createMultiLineString(rings)},Polygon2.prototype.clone=function(){var this$1=this,poly=Geometry$$1.prototype.clone.call(this);poly._shell=this._shell.clone(),poly._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)poly._holes[i]=this$1._holes[i].clone();return poly},Polygon2.prototype.getGeometryType=function(){return"Polygon"},Polygon2.prototype.copy=function(){for(var this$1=this,shell=this._shell.copy(),holes=new Array(this._holes.length).fill(null),i=0;i<holes.length;i++)holes[i]=this$1._holes[i].copy();return new Polygon2(shell,holes,this._factory)},Polygon2.prototype.getExteriorRing=function(){return this._shell},Polygon2.prototype.isEmpty=function(){return this._shell.isEmpty()},Polygon2.prototype.getInteriorRingN=function(n){return this._holes[n]},Polygon2.prototype.interfaces_=function(){return[Polygonal]},Polygon2.prototype.getClass=function(){return Polygon2},staticAccessors2.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(Polygon2,staticAccessors2),Polygon2}(Geometry),MultiPoint=function(GeometryCollection$$1){function MultiPoint2(){GeometryCollection$$1.apply(this,arguments)}GeometryCollection$$1&&(MultiPoint2.__proto__=GeometryCollection$$1),MultiPoint2.prototype=Object.create(GeometryCollection$$1&&GeometryCollection$$1.prototype),MultiPoint2.prototype.constructor=MultiPoint2;var staticAccessors2={serialVersionUID:{configurable:!0}};return MultiPoint2.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOINT},MultiPoint2.prototype.isValid=function(){return!0},MultiPoint2.prototype.equalsExact=function(){if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];return this.isEquivalentClass(other)?GeometryCollection$$1.prototype.equalsExact.call(this,other,tolerance):!1}else return GeometryCollection$$1.prototype.equalsExact.apply(this,arguments)},MultiPoint2.prototype.getCoordinate=function(){if(arguments.length===1){var n=arguments[0];return this._geometries[n].getCoordinate()}else return GeometryCollection$$1.prototype.getCoordinate.apply(this,arguments)},MultiPoint2.prototype.getBoundaryDimension=function(){return Dimension.FALSE},MultiPoint2.prototype.getDimension=function(){return 0},MultiPoint2.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},MultiPoint2.prototype.getGeometryType=function(){return"MultiPoint"},MultiPoint2.prototype.copy=function(){for(var this$1=this,points=new Array(this._geometries.length).fill(null),i=0;i<points.length;i++)points[i]=this$1._geometries[i].copy();return new MultiPoint2(points,this._factory)},MultiPoint2.prototype.interfaces_=function(){return[Puntal]},MultiPoint2.prototype.getClass=function(){return MultiPoint2},staticAccessors2.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(MultiPoint2,staticAccessors2),MultiPoint2}(GeometryCollection),LinearRing=function(LineString$$1){function LinearRing2(points,factory){points instanceof Coordinate&&factory instanceof GeometryFactory&&(points=factory.getCoordinateSequenceFactory().create(points)),LineString$$1.call(this,points,factory),this.validateConstruction()}LineString$$1&&(LinearRing2.__proto__=LineString$$1),LinearRing2.prototype=Object.create(LineString$$1&&LineString$$1.prototype),LinearRing2.prototype.constructor=LinearRing2;var staticAccessors2={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return LinearRing2.prototype.getSortIndex=function(){return Geometry.SORTINDEX_LINEARRING},LinearRing2.prototype.getBoundaryDimension=function(){return Dimension.FALSE},LinearRing2.prototype.isClosed=function(){return this.isEmpty()?!0:LineString$$1.prototype.isClosed.call(this)},LinearRing2.prototype.reverse=function(){var seq=this._points.copy();CoordinateSequences.reverse(seq);var rev=this.getFactory().createLinearRing(seq);return rev},LinearRing2.prototype.validateConstruction=function(){if(!this.isEmpty()&&!LineString$$1.prototype.isClosed.call(this))throw new IllegalArgumentException("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<LinearRing2.MINIMUM_VALID_SIZE)throw new IllegalArgumentException("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},LinearRing2.prototype.getGeometryType=function(){return"LinearRing"},LinearRing2.prototype.copy=function(){return new LinearRing2(this._points.copy(),this._factory)},LinearRing2.prototype.interfaces_=function(){return[]},LinearRing2.prototype.getClass=function(){return LinearRing2},staticAccessors2.MINIMUM_VALID_SIZE.get=function(){return 4},staticAccessors2.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(LinearRing2,staticAccessors2),LinearRing2}(LineString2),MultiPolygon=function(GeometryCollection$$1){function MultiPolygon2(){GeometryCollection$$1.apply(this,arguments)}GeometryCollection$$1&&(MultiPolygon2.__proto__=GeometryCollection$$1),MultiPolygon2.prototype=Object.create(GeometryCollection$$1&&GeometryCollection$$1.prototype),MultiPolygon2.prototype.constructor=MultiPolygon2;var staticAccessors2={serialVersionUID:{configurable:!0}};return MultiPolygon2.prototype.getSortIndex=function(){return Geometry.SORTINDEX_MULTIPOLYGON},MultiPolygon2.prototype.equalsExact=function(){if(arguments.length===2){var other=arguments[0],tolerance=arguments[1];return this.isEquivalentClass(other)?GeometryCollection$$1.prototype.equalsExact.call(this,other,tolerance):!1}else return GeometryCollection$$1.prototype.equalsExact.apply(this,arguments)},MultiPolygon2.prototype.getBoundaryDimension=function(){return 1},MultiPolygon2.prototype.getDimension=function(){return 2},MultiPolygon2.prototype.reverse=function(){for(var this$1=this,n=this._geometries.length,revGeoms=new Array(n).fill(null),i=0;i<this._geometries.length;i++)revGeoms[i]=this$1._geometries[i].reverse();return this.getFactory().createMultiPolygon(revGeoms)},MultiPolygon2.prototype.getBoundary=function(){var this$1=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var allRings=new ArrayList,i=0;i<this._geometries.length;i++)for(var polygon4=this$1._geometries[i],rings=polygon4.getBoundary(),j=0;j<rings.getNumGeometries();j++)allRings.add(rings.getGeometryN(j));var allRingsArray=new Array(allRings.size()).fill(null);return this.getFactory().createMultiLineString(allRings.toArray(allRingsArray))},MultiPolygon2.prototype.getGeometryType=function(){return"MultiPolygon"},MultiPolygon2.prototype.copy=function(){for(var this$1=this,polygons=new Array(this._geometries.length).fill(null),i=0;i<polygons.length;i++)polygons[i]=this$1._geometries[i].copy();return new MultiPolygon2(polygons,this._factory)},MultiPolygon2.prototype.interfaces_=function(){return[Polygonal]},MultiPolygon2.prototype.getClass=function(){return MultiPolygon2},staticAccessors2.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(MultiPolygon2,staticAccessors2),MultiPolygon2}(GeometryCollection),GeometryEditor=function(factory){this._factory=factory||null,this._isUserDataCopied=!1},staticAccessors$16={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};GeometryEditor.prototype.setCopyUserData=function(isUserDataCopied){this._isUserDataCopied=isUserDataCopied};GeometryEditor.prototype.edit=function(geometry,operation2){if(geometry===null)return null;var result=this.editInternal(geometry,operation2);return this._isUserDataCopied&&result.setUserData(geometry.getUserData()),result};GeometryEditor.prototype.editInternal=function(geometry,operation2){return this._factory===null&&(this._factory=geometry.getFactory()),geometry instanceof GeometryCollection?this.editGeometryCollection(geometry,operation2):geometry instanceof Polygon?this.editPolygon(geometry,operation2):geometry instanceof Point?operation2.edit(geometry,this._factory):geometry instanceof LineString2?operation2.edit(geometry,this._factory):(Assert.shouldNeverReachHere("Unsupported Geometry class: "+geometry.getClass().getName()),null)};GeometryEditor.prototype.editGeometryCollection=function(collection,operation2){for(var this$1=this,collectionForType=operation2.edit(collection,this._factory),geometries=new ArrayList,i=0;i<collectionForType.getNumGeometries();i++){var geometry=this$1.edit(collectionForType.getGeometryN(i),operation2);geometry===null||geometry.isEmpty()||geometries.add(geometry)}return collectionForType.getClass()===MultiPoint?this._factory.createMultiPoint(geometries.toArray([])):collectionForType.getClass()===MultiLineString?this._factory.createMultiLineString(geometries.toArray([])):collectionForType.getClass()===MultiPolygon?this._factory.createMultiPolygon(geometries.toArray([])):this._factory.createGeometryCollection(geometries.toArray([]))};GeometryEditor.prototype.editPolygon=function(polygon4,operation2){var this$1=this,newPolygon=operation2.edit(polygon4,this._factory);if(newPolygon===null&&(newPolygon=this._factory.createPolygon(null)),newPolygon.isEmpty())return newPolygon;var shell=this.edit(newPolygon.getExteriorRing(),operation2);if(shell===null||shell.isEmpty())return this._factory.createPolygon();for(var holes=new ArrayList,i=0;i<newPolygon.getNumInteriorRing();i++){var hole=this$1.edit(newPolygon.getInteriorRingN(i),operation2);hole===null||hole.isEmpty()||holes.add(hole)}return this._factory.createPolygon(shell,holes.toArray([]))};GeometryEditor.prototype.interfaces_=function(){return[]};GeometryEditor.prototype.getClass=function(){return GeometryEditor};GeometryEditor.GeometryEditorOperation=function(){};staticAccessors$16.NoOpGeometryOperation.get=function(){return NoOpGeometryOperation};staticAccessors$16.CoordinateOperation.get=function(){return CoordinateOperation};staticAccessors$16.CoordinateSequenceOperation.get=function(){return CoordinateSequenceOperation};Object.defineProperties(GeometryEditor,staticAccessors$16);var NoOpGeometryOperation=function(){};NoOpGeometryOperation.prototype.edit=function(geometry,factory){return geometry};NoOpGeometryOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]};NoOpGeometryOperation.prototype.getClass=function(){return NoOpGeometryOperation};var CoordinateOperation=function(){};CoordinateOperation.prototype.edit=function(geometry,factory){var coords=this.editCoordinates(geometry.getCoordinates(),geometry);return coords===null?geometry:geometry instanceof LinearRing?factory.createLinearRing(coords):geometry instanceof LineString2?factory.createLineString(coords):geometry instanceof Point?coords.length>0?factory.createPoint(coords[0]):factory.createPoint():geometry};CoordinateOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]};CoordinateOperation.prototype.getClass=function(){return CoordinateOperation};var CoordinateSequenceOperation=function(){};CoordinateSequenceOperation.prototype.edit=function(geometry,factory){return geometry instanceof LinearRing?factory.createLinearRing(this.edit(geometry.getCoordinateSequence(),geometry)):geometry instanceof LineString2?factory.createLineString(this.edit(geometry.getCoordinateSequence(),geometry)):geometry instanceof Point?factory.createPoint(this.edit(geometry.getCoordinateSequence(),geometry)):geometry};CoordinateSequenceOperation.prototype.interfaces_=function(){return[GeometryEditor.GeometryEditorOperation]};CoordinateSequenceOperation.prototype.getClass=function(){return CoordinateSequenceOperation};var CoordinateArraySequence=function(){var this$1=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var size11=arguments[0];this._coordinates=new Array(size11).fill(null);for(var i=0;i<size11;i++)this$1._coordinates[i]=new Coordinate}else if(hasInterface(arguments[0],CoordinateSequence)){var coordSeq=arguments[0];if(coordSeq===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=coordSeq.getDimension(),this._coordinates=new Array(coordSeq.size()).fill(null);for(var i$1=0;i$1<this._coordinates.length;i$1++)this$1._coordinates[i$1]=coordSeq.getCoordinateCopy(i$1)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var coordinates=arguments[0],dimension=arguments[1];this._coordinates=coordinates,this._dimension=dimension,coordinates===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var size$1=arguments[0],dimension$1=arguments[1];this._coordinates=new Array(size$1).fill(null),this._dimension=dimension$1;for(var i$2=0;i$2<size$1;i$2++)this$1._coordinates[i$2]=new Coordinate}}},staticAccessors$18={serialVersionUID:{configurable:!0}};CoordinateArraySequence.prototype.setOrdinate=function(index,ordinateIndex,value){switch(ordinateIndex){case CoordinateSequence.X:this._coordinates[index].x=value;break;case CoordinateSequence.Y:this._coordinates[index].y=value;break;case CoordinateSequence.Z:this._coordinates[index].z=value;break;default:throw new IllegalArgumentException("invalid ordinateIndex")}};CoordinateArraySequence.prototype.size=function(){return this._coordinates.length};CoordinateArraySequence.prototype.getOrdinate=function(index,ordinateIndex){switch(ordinateIndex){case CoordinateSequence.X:return this._coordinates[index].x;case CoordinateSequence.Y:return this._coordinates[index].y;case CoordinateSequence.Z:return this._coordinates[index].z;default:}return Double.NaN};CoordinateArraySequence.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._coordinates[i]}else if(arguments.length===2){var index=arguments[0],coord=arguments[1];coord.x=this._coordinates[index].x,coord.y=this._coordinates[index].y,coord.z=this._coordinates[index].z}};CoordinateArraySequence.prototype.getCoordinateCopy=function(i){return new Coordinate(this._coordinates[i])};CoordinateArraySequence.prototype.getDimension=function(){return this._dimension};CoordinateArraySequence.prototype.getX=function(index){return this._coordinates[index].x};CoordinateArraySequence.prototype.clone=function(){for(var this$1=this,cloneCoordinates=new Array(this.size()).fill(null),i=0;i<this._coordinates.length;i++)cloneCoordinates[i]=this$1._coordinates[i].clone();return new CoordinateArraySequence(cloneCoordinates,this._dimension)};CoordinateArraySequence.prototype.expandEnvelope=function(env){for(var this$1=this,i=0;i<this._coordinates.length;i++)env.expandToInclude(this$1._coordinates[i]);return env};CoordinateArraySequence.prototype.copy=function(){for(var this$1=this,cloneCoordinates=new Array(this.size()).fill(null),i=0;i<this._coordinates.length;i++)cloneCoordinates[i]=this$1._coordinates[i].copy();return new CoordinateArraySequence(cloneCoordinates,this._dimension)};CoordinateArraySequence.prototype.toString=function(){var this$1=this;if(this._coordinates.length>0){var strBuf=new StringBuffer(17*this._coordinates.length);strBuf.append("("),strBuf.append(this._coordinates[0]);for(var i=1;i<this._coordinates.length;i++)strBuf.append(", "),strBuf.append(this$1._coordinates[i]);return strBuf.append(")"),strBuf.toString()}else return"()"};CoordinateArraySequence.prototype.getY=function(index){return this._coordinates[index].y};CoordinateArraySequence.prototype.toCoordinateArray=function(){return this._coordinates};CoordinateArraySequence.prototype.interfaces_=function(){return[CoordinateSequence,Serializable]};CoordinateArraySequence.prototype.getClass=function(){return CoordinateArraySequence};staticAccessors$18.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(CoordinateArraySequence,staticAccessors$18);var CoordinateArraySequenceFactory=function(){},staticAccessors$17={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};CoordinateArraySequenceFactory.prototype.readResolve=function(){return CoordinateArraySequenceFactory.instance()};CoordinateArraySequenceFactory.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var coordinates=arguments[0];return new CoordinateArraySequence(coordinates)}else if(hasInterface(arguments[0],CoordinateSequence)){var coordSeq=arguments[0];return new CoordinateArraySequence(coordSeq)}}else if(arguments.length===2){var size11=arguments[0],dimension=arguments[1];return dimension>3&&(dimension=3),dimension<2?new CoordinateArraySequence(size11):new CoordinateArraySequence(size11,dimension)}};CoordinateArraySequenceFactory.prototype.interfaces_=function(){return[CoordinateSequenceFactory,Serializable]};CoordinateArraySequenceFactory.prototype.getClass=function(){return CoordinateArraySequenceFactory};CoordinateArraySequenceFactory.instance=function(){return CoordinateArraySequenceFactory.instanceObject};staticAccessors$17.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};staticAccessors$17.instanceObject.get=function(){return new CoordinateArraySequenceFactory};Object.defineProperties(CoordinateArraySequenceFactory,staticAccessors$17);var HashMap=function(MapInterface){function HashMap2(){MapInterface.call(this),this.map_=new Map}return MapInterface&&(HashMap2.__proto__=MapInterface),HashMap2.prototype=Object.create(MapInterface&&MapInterface.prototype),HashMap2.prototype.constructor=HashMap2,HashMap2.prototype.get=function(key){return this.map_.get(key)||null},HashMap2.prototype.put=function(key,value){return this.map_.set(key,value),value},HashMap2.prototype.values=function(){for(var arrayList=new ArrayList,it=this.map_.values(),o=it.next();!o.done;)arrayList.add(o.value),o=it.next();return arrayList},HashMap2.prototype.entrySet=function(){var hashSet=new HashSet;return this.map_.entries().forEach(function(entry){return hashSet.add(entry)}),hashSet},HashMap2.prototype.size=function(){return this.map_.size()},HashMap2}(Map$1),PrecisionModel=function PrecisionModel2(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=PrecisionModel2.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Type){var modelType=arguments[0];this._modelType=modelType,modelType===PrecisionModel2.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var scale3=arguments[0];this._modelType=PrecisionModel2.FIXED,this.setScale(scale3)}else if(arguments[0]instanceof PrecisionModel2){var pm=arguments[0];this._modelType=pm._modelType,this._scale=pm._scale}}},staticAccessors$19={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};PrecisionModel.prototype.equals=function(other){if(!(other instanceof PrecisionModel))return!1;var otherPrecisionModel=other;return this._modelType===otherPrecisionModel._modelType&&this._scale===otherPrecisionModel._scale};PrecisionModel.prototype.compareTo=function(o){var other=o,sigDigits=this.getMaximumSignificantDigits(),otherSigDigits=other.getMaximumSignificantDigits();return new Integer(sigDigits).compareTo(new Integer(otherSigDigits))};PrecisionModel.prototype.getScale=function(){return this._scale};PrecisionModel.prototype.isFloating=function(){return this._modelType===PrecisionModel.FLOATING||this._modelType===PrecisionModel.FLOATING_SINGLE};PrecisionModel.prototype.getType=function(){return this._modelType};PrecisionModel.prototype.toString=function(){var description="UNKNOWN";return this._modelType===PrecisionModel.FLOATING?description="Floating":this._modelType===PrecisionModel.FLOATING_SINGLE?description="Floating-Single":this._modelType===PrecisionModel.FIXED&&(description="Fixed (Scale="+this.getScale()+")"),description};PrecisionModel.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var val=arguments[0];if(Double.isNaN(val))return val;if(this._modelType===PrecisionModel.FLOATING_SINGLE){var floatSingleVal=val;return floatSingleVal}return this._modelType===PrecisionModel.FIXED?Math.round(val*this._scale)/this._scale:val}else if(arguments[0]instanceof Coordinate){var coord=arguments[0];if(this._modelType===PrecisionModel.FLOATING)return null;coord.x=this.makePrecise(coord.x),coord.y=this.makePrecise(coord.y)}};PrecisionModel.prototype.getMaximumSignificantDigits=function(){var maxSigDigits=16;return this._modelType===PrecisionModel.FLOATING?maxSigDigits=16:this._modelType===PrecisionModel.FLOATING_SINGLE?maxSigDigits=6:this._modelType===PrecisionModel.FIXED&&(maxSigDigits=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),maxSigDigits};PrecisionModel.prototype.setScale=function(scale3){this._scale=Math.abs(scale3)};PrecisionModel.prototype.interfaces_=function(){return[Serializable,Comparable]};PrecisionModel.prototype.getClass=function(){return PrecisionModel};PrecisionModel.mostPrecise=function(pm1,pm2){return pm1.compareTo(pm2)>=0?pm1:pm2};staticAccessors$19.serialVersionUID.get=function(){return 7777263578777804e3};staticAccessors$19.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(PrecisionModel,staticAccessors$19);var Type=function Type2(name){this._name=name||null,Type2.nameToTypeMap.put(name,this)},staticAccessors$1$1={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Type.prototype.readResolve=function(){return Type.nameToTypeMap.get(this._name)};Type.prototype.toString=function(){return this._name};Type.prototype.interfaces_=function(){return[Serializable]};Type.prototype.getClass=function(){return Type};staticAccessors$1$1.serialVersionUID.get=function(){return-552860263173159e4};staticAccessors$1$1.nameToTypeMap.get=function(){return new HashMap};Object.defineProperties(Type,staticAccessors$1$1);PrecisionModel.Type=Type;PrecisionModel.FIXED=new Type("FIXED");PrecisionModel.FLOATING=new Type("FLOATING");PrecisionModel.FLOATING_SINGLE=new Type("FLOATING SINGLE");var GeometryFactory=function GeometryFactory2(){this._precisionModel=new PrecisionModel,this._SRID=0,this._coordinateSequenceFactory=GeometryFactory2.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?hasInterface(arguments[0],CoordinateSequenceFactory)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof PrecisionModel&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},staticAccessors$2={serialVersionUID:{configurable:!0}};GeometryFactory.prototype.toGeometry=function(envelope3){return envelope3.isNull()?this.createPoint(null):envelope3.getMinX()===envelope3.getMaxX()&&envelope3.getMinY()===envelope3.getMaxY()?this.createPoint(new Coordinate(envelope3.getMinX(),envelope3.getMinY())):envelope3.getMinX()===envelope3.getMaxX()||envelope3.getMinY()===envelope3.getMaxY()?this.createLineString([new Coordinate(envelope3.getMinX(),envelope3.getMinY()),new Coordinate(envelope3.getMaxX(),envelope3.getMaxY())]):this.createPolygon(this.createLinearRing([new Coordinate(envelope3.getMinX(),envelope3.getMinY()),new Coordinate(envelope3.getMinX(),envelope3.getMaxY()),new Coordinate(envelope3.getMaxX(),envelope3.getMaxY()),new Coordinate(envelope3.getMaxX(),envelope3.getMinY()),new Coordinate(envelope3.getMinX(),envelope3.getMinY())]),null)};GeometryFactory.prototype.createLineString=function(coordinates){if(coordinates){if(coordinates instanceof Array)return new LineString2(this.getCoordinateSequenceFactory().create(coordinates),this);if(hasInterface(coordinates,CoordinateSequence))return new LineString2(coordinates,this)}else return new LineString2(this.getCoordinateSequenceFactory().create([]),this)};GeometryFactory.prototype.createMultiLineString=function(){if(arguments.length===0)return new MultiLineString(null,this);if(arguments.length===1){var lineStrings=arguments[0];return new MultiLineString(lineStrings,this)}};GeometryFactory.prototype.buildGeometry=function(geomList){for(var geomClass=null,isHeterogeneous=!1,hasGeometryCollection=!1,i=geomList.iterator();i.hasNext();){var geom=i.next(),partClass=geom.getClass();geomClass===null&&(geomClass=partClass),partClass!==geomClass&&(isHeterogeneous=!0),geom.isGeometryCollectionOrDerived()&&(hasGeometryCollection=!0)}if(geomClass===null)return this.createGeometryCollection();if(isHeterogeneous||hasGeometryCollection)return this.createGeometryCollection(GeometryFactory.toGeometryArray(geomList));var geom0=geomList.iterator().next(),isCollection=geomList.size()>1;if(isCollection){if(geom0 instanceof Polygon)return this.createMultiPolygon(GeometryFactory.toPolygonArray(geomList));if(geom0 instanceof LineString2)return this.createMultiLineString(GeometryFactory.toLineStringArray(geomList));if(geom0 instanceof Point)return this.createMultiPoint(GeometryFactory.toPointArray(geomList));Assert.shouldNeverReachHere("Unhandled class: "+geom0.getClass().getName())}return geom0};GeometryFactory.prototype.createMultiPointFromCoords=function(coordinates){return this.createMultiPoint(coordinates!==null?this.getCoordinateSequenceFactory().create(coordinates):null)};GeometryFactory.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Coordinate){var coordinate2=arguments[0];return this.createPoint(coordinate2!==null?this.getCoordinateSequenceFactory().create([coordinate2]):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var coordinates=arguments[0];return new Point(coordinates,this)}}};GeometryFactory.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};GeometryFactory.prototype.createPolygon=function(){if(arguments.length===0)return new Polygon(null,null,this);if(arguments.length===1){if(hasInterface(arguments[0],CoordinateSequence)){var coordinates=arguments[0];return this.createPolygon(this.createLinearRing(coordinates))}else if(arguments[0]instanceof Array){var coordinates$1=arguments[0];return this.createPolygon(this.createLinearRing(coordinates$1))}else if(arguments[0]instanceof LinearRing){var shell=arguments[0];return this.createPolygon(shell,null)}}else if(arguments.length===2){var shell$1=arguments[0],holes=arguments[1];return new Polygon(shell$1,holes,this)}};GeometryFactory.prototype.getSRID=function(){return this._SRID};GeometryFactory.prototype.createGeometryCollection=function(){if(arguments.length===0)return new GeometryCollection(null,this);if(arguments.length===1){var geometries=arguments[0];return new GeometryCollection(geometries,this)}};GeometryFactory.prototype.createGeometry=function(g){var editor=new GeometryEditor(this);return editor.edit(g,{edit:function(){if(arguments.length===2){var coordSeq=arguments[0];return this._coordinateSequenceFactory.create(coordSeq)}}})};GeometryFactory.prototype.getPrecisionModel=function(){return this._precisionModel};GeometryFactory.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var coordinates=arguments[0];return this.createLinearRing(coordinates!==null?this.getCoordinateSequenceFactory().create(coordinates):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var coordinates$1=arguments[0];return new LinearRing(coordinates$1,this)}}};GeometryFactory.prototype.createMultiPolygon=function(){if(arguments.length===0)return new MultiPolygon(null,this);if(arguments.length===1){var polygons=arguments[0];return new MultiPolygon(polygons,this)}};GeometryFactory.prototype.createMultiPoint=function(){var this$1=this;if(arguments.length===0)return new MultiPoint(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var point4=arguments[0];return new MultiPoint(point4,this)}else if(arguments[0]instanceof Array){var coordinates=arguments[0];return this.createMultiPoint(coordinates!==null?this.getCoordinateSequenceFactory().create(coordinates):null)}else if(hasInterface(arguments[0],CoordinateSequence)){var coordinates$1=arguments[0];if(coordinates$1===null)return this.createMultiPoint(new Array(0).fill(null));for(var points=new Array(coordinates$1.size()).fill(null),i=0;i<coordinates$1.size();i++){var ptSeq=this$1.getCoordinateSequenceFactory().create(1,coordinates$1.getDimension());CoordinateSequences.copy(coordinates$1,i,ptSeq,0,1),points[i]=this$1.createPoint(ptSeq)}return this.createMultiPoint(points)}}};GeometryFactory.prototype.interfaces_=function(){return[Serializable]};GeometryFactory.prototype.getClass=function(){return GeometryFactory};GeometryFactory.toMultiPolygonArray=function(multiPolygons){var multiPolygonArray=new Array(multiPolygons.size()).fill(null);return multiPolygons.toArray(multiPolygonArray)};GeometryFactory.toGeometryArray=function(geometries){if(geometries===null)return null;var geometryArray=new Array(geometries.size()).fill(null);return geometries.toArray(geometryArray)};GeometryFactory.getDefaultCoordinateSequenceFactory=function(){return CoordinateArraySequenceFactory.instance()};GeometryFactory.toMultiLineStringArray=function(multiLineStrings){var multiLineStringArray=new Array(multiLineStrings.size()).fill(null);return multiLineStrings.toArray(multiLineStringArray)};GeometryFactory.toLineStringArray=function(lineStrings){var lineStringArray=new Array(lineStrings.size()).fill(null);return lineStrings.toArray(lineStringArray)};GeometryFactory.toMultiPointArray=function(multiPoints){var multiPointArray=new Array(multiPoints.size()).fill(null);return multiPoints.toArray(multiPointArray)};GeometryFactory.toLinearRingArray=function(linearRings){var linearRingArray=new Array(linearRings.size()).fill(null);return linearRings.toArray(linearRingArray)};GeometryFactory.toPointArray=function(points){var pointArray=new Array(points.size()).fill(null);return points.toArray(pointArray)};GeometryFactory.toPolygonArray=function(polygons){var polygonArray=new Array(polygons.size()).fill(null);return polygons.toArray(polygonArray)};GeometryFactory.createPointFromInternalCoord=function(coord,exemplar){return exemplar.getPrecisionModel().makePrecise(coord),exemplar.getFactory().createPoint(coord)};staticAccessors$2.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(GeometryFactory,staticAccessors$2);var geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],GeoJSONParser=function(geometryFactory){this.geometryFactory=geometryFactory||new GeometryFactory};GeoJSONParser.prototype.read=function(json){var obj;typeof json=="string"?obj=JSON.parse(json):obj=json;var type2=obj.type;if(!parse2[type2])throw new Error("Unknown GeoJSON type: "+obj.type);return geometryTypes.indexOf(type2)!==-1?parse2[type2].apply(this,[obj.coordinates]):type2==="GeometryCollection"?parse2[type2].apply(this,[obj.geometries]):parse2[type2].apply(this,[obj])};GeoJSONParser.prototype.write=function(geometry){var type2=geometry.getGeometryType();if(!extract2[type2])throw new Error("Geometry is not supported");return extract2[type2].apply(this,[geometry])};var parse2={Feature:function(obj){var feature2={};for(var key in obj)feature2[key]=obj[key];if(obj.geometry){var type2=obj.geometry.type;if(!parse2[type2])throw new Error("Unknown GeoJSON type: "+obj.type);feature2.geometry=this.read(obj.geometry)}return obj.bbox&&(feature2.bbox=parse2.bbox.apply(this,[obj.bbox])),feature2},FeatureCollection:function(obj){var this$1=this,featureCollection2={};if(obj.features){featureCollection2.features=[];for(var i=0;i<obj.features.length;++i)featureCollection2.features.push(this$1.read(obj.features[i]))}return obj.bbox&&(featureCollection2.bbox=this.parse.bbox.apply(this,[obj.bbox])),featureCollection2},coordinates:function(array2){for(var coordinates=[],i=0;i<array2.length;++i){var sub=array2[i];coordinates.push(new Coordinate(sub[0],sub[1]))}return coordinates},bbox:function(array2){return this.geometryFactory.createLinearRing([new Coordinate(array2[0],array2[1]),new Coordinate(array2[2],array2[1]),new Coordinate(array2[2],array2[3]),new Coordinate(array2[0],array2[3]),new Coordinate(array2[0],array2[1])])},Point:function(array2){var coordinate2=new Coordinate(array2[0],array2[1]);return this.geometryFactory.createPoint(coordinate2)},MultiPoint:function(array2){for(var this$1=this,points=[],i=0;i<array2.length;++i)points.push(parse2.Point.apply(this$1,[array2[i]]));return this.geometryFactory.createMultiPoint(points)},LineString:function(array2){var coordinates=parse2.coordinates.apply(this,[array2]);return this.geometryFactory.createLineString(coordinates)},MultiLineString:function(array2){for(var this$1=this,lineStrings=[],i=0;i<array2.length;++i)lineStrings.push(parse2.LineString.apply(this$1,[array2[i]]));return this.geometryFactory.createMultiLineString(lineStrings)},Polygon:function(array2){for(var this$1=this,shellCoordinates=parse2.coordinates.apply(this,[array2[0]]),shell=this.geometryFactory.createLinearRing(shellCoordinates),holes=[],i=1;i<array2.length;++i){var hole=array2[i],coordinates=parse2.coordinates.apply(this$1,[hole]),linearRing=this$1.geometryFactory.createLinearRing(coordinates);holes.push(linearRing)}return this.geometryFactory.createPolygon(shell,holes)},MultiPolygon:function(array2){for(var this$1=this,polygons=[],i=0;i<array2.length;++i){var polygon4=array2[i];polygons.push(parse2.Polygon.apply(this$1,[polygon4]))}return this.geometryFactory.createMultiPolygon(polygons)},GeometryCollection:function(array2){for(var this$1=this,geometries=[],i=0;i<array2.length;++i){var geometry=array2[i];geometries.push(this$1.read(geometry))}return this.geometryFactory.createGeometryCollection(geometries)}},extract2={coordinate:function(coordinate2){return[coordinate2.x,coordinate2.y]},Point:function(point4){var array2=extract2.coordinate.apply(this,[point4.getCoordinate()]);return{type:"Point",coordinates:array2}},MultiPoint:function(multipoint3){for(var this$1=this,array2=[],i=0;i<multipoint3._geometries.length;++i){var point4=multipoint3._geometries[i],geoJson=extract2.Point.apply(this$1,[point4]);array2.push(geoJson.coordinates)}return{type:"MultiPoint",coordinates:array2}},LineString:function(linestring3){for(var this$1=this,array2=[],coordinates=linestring3.getCoordinates(),i=0;i<coordinates.length;++i){var coordinate2=coordinates[i];array2.push(extract2.coordinate.apply(this$1,[coordinate2]))}return{type:"LineString",coordinates:array2}},MultiLineString:function(multilinestring3){for(var this$1=this,array2=[],i=0;i<multilinestring3._geometries.length;++i){var linestring3=multilinestring3._geometries[i],geoJson=extract2.LineString.apply(this$1,[linestring3]);array2.push(geoJson.coordinates)}return{type:"MultiLineString",coordinates:array2}},Polygon:function(polygon4){var this$1=this,array2=[],shellGeoJson=extract2.LineString.apply(this,[polygon4._shell]);array2.push(shellGeoJson.coordinates);for(var i=0;i<polygon4._holes.length;++i){var hole=polygon4._holes[i],holeGeoJson=extract2.LineString.apply(this$1,[hole]);array2.push(holeGeoJson.coordinates)}return{type:"Polygon",coordinates:array2}},MultiPolygon:function(multipolygon3){for(var this$1=this,array2=[],i=0;i<multipolygon3._geometries.length;++i){var polygon4=multipolygon3._geometries[i],geoJson=extract2.Polygon.apply(this$1,[polygon4]);array2.push(geoJson.coordinates)}return{type:"MultiPolygon",coordinates:array2}},GeometryCollection:function(collection){for(var this$1=this,array2=[],i=0;i<collection._geometries.length;++i){var geometry=collection._geometries[i],type2=geometry.getGeometryType();array2.push(extract2[type2].apply(this$1,[geometry]))}return{type:"GeometryCollection",geometries:array2}}},GeoJSONReader=function(geometryFactory){this.geometryFactory=geometryFactory||new GeometryFactory,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONReader.prototype.read=function(geoJson){var geometry=this.parser.read(geoJson);return this.precisionModel.getType()===PrecisionModel.FIXED&&this.reducePrecision(geometry),geometry};GeoJSONReader.prototype.reducePrecision=function(geometry){var this$1=this,i,len;if(geometry.coordinate)this.precisionModel.makePrecise(geometry.coordinate);else if(geometry.points)for(i=0,len=geometry.points.length;i<len;i++)this$1.precisionModel.makePrecise(geometry.points[i]);else if(geometry.geometries)for(i=0,len=geometry.geometries.length;i<len;i++)this$1.reducePrecision(geometry.geometries[i])};var GeoJSONWriter=function(){this.parser=new GeoJSONParser(this.geometryFactory)};GeoJSONWriter.prototype.write=function(geometry){return this.parser.write(geometry)};var Position=function(){},staticAccessors$20={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Position.prototype.interfaces_=function(){return[]};Position.prototype.getClass=function(){return Position};Position.opposite=function(position){return position===Position.LEFT?Position.RIGHT:position===Position.RIGHT?Position.LEFT:position};staticAccessors$20.ON.get=function(){return 0};staticAccessors$20.LEFT.get=function(){return 1};staticAccessors$20.RIGHT.get=function(){return 2};Object.defineProperties(Position,staticAccessors$20);function EmptyStackException(message){this.message=message||""}EmptyStackException.prototype=new Error;EmptyStackException.prototype.name="EmptyStackException";function Stack(){this.array_=[]}Stack.prototype=new List;Stack.prototype.add=function(e){return this.array_.push(e),!0};Stack.prototype.get=function(index){if(index<0||index>=this.size())throw new Error;return this.array_[index]};Stack.prototype.push=function(e){return this.array_.push(e),e};Stack.prototype.pop=function(e){if(this.array_.length===0)throw new EmptyStackException;return this.array_.pop()};Stack.prototype.peek=function(){if(this.array_.length===0)throw new EmptyStackException;return this.array_[this.array_.length-1]};Stack.prototype.empty=function(){return this.array_.length===0};Stack.prototype.isEmpty=function(){return this.empty()};Stack.prototype.search=function(o){return this.array_.indexOf(o)};Stack.prototype.size=function(){return this.array_.length};Stack.prototype.toArray=function(){for(var this$1=this,array2=[],i=0,len=this.array_.length;i<len;i++)array2.push(this$1.array_[i]);return array2};var RightmostEdgeFinder=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};RightmostEdgeFinder.prototype.getCoordinate=function(){return this._minCoord};RightmostEdgeFinder.prototype.getRightmostSide=function(de,index){var side=this.getRightmostSideOfSegment(de,index);return side<0&&(side=this.getRightmostSideOfSegment(de,index-1)),side<0&&(this._minCoord=null,this.checkForRightmostCoordinate(de)),side};RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var pts=this._minDe.getEdge().getCoordinates();Assert.isTrue(this._minIndex>0&&this._minIndex<pts.length,"rightmost point expected to be interior vertex of edge");var pPrev=pts[this._minIndex-1],pNext=pts[this._minIndex+1],orientation3=CGAlgorithms.computeOrientation(this._minCoord,pNext,pPrev),usePrev=!1;(pPrev.y<this._minCoord.y&&pNext.y<this._minCoord.y&&orientation3===CGAlgorithms.COUNTERCLOCKWISE||pPrev.y>this._minCoord.y&&pNext.y>this._minCoord.y&&orientation3===CGAlgorithms.CLOCKWISE)&&(usePrev=!0),usePrev&&(this._minIndex=this._minIndex-1)};RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(de,i){var e=de.getEdge(),coord=e.getCoordinates();if(i<0||i+1>=coord.length||coord[i].y===coord[i+1].y)return-1;var pos=Position.LEFT;return coord[i].y<coord[i+1].y&&(pos=Position.RIGHT),pos};RightmostEdgeFinder.prototype.getEdge=function(){return this._orientedDe};RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(de){for(var this$1=this,coord=de.getEdge().getCoordinates(),i=0;i<coord.length-1;i++)(this$1._minCoord===null||coord[i].x>this$1._minCoord.x)&&(this$1._minDe=de,this$1._minIndex=i,this$1._minCoord=coord[i])};RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var node=this._minDe.getNode(),star=node.getEdges();this._minDe=star.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};RightmostEdgeFinder.prototype.findEdge=function(dirEdgeList){for(var this$1=this,i=dirEdgeList.iterator();i.hasNext();){var de=i.next();de.isForward()&&this$1.checkForRightmostCoordinate(de)}Assert.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var rightmostSide=this.getRightmostSide(this._minDe,this._minIndex);rightmostSide===Position.LEFT&&(this._orientedDe=this._minDe.getSym())};RightmostEdgeFinder.prototype.interfaces_=function(){return[]};RightmostEdgeFinder.prototype.getClass=function(){return RightmostEdgeFinder};var TopologyException=function(RuntimeException$$1){function TopologyException2(msg,pt){RuntimeException$$1.call(this,TopologyException2.msgWithCoord(msg,pt)),this.pt=pt?new Coordinate(pt):null,this.name="TopologyException"}return RuntimeException$$1&&(TopologyException2.__proto__=RuntimeException$$1),TopologyException2.prototype=Object.create(RuntimeException$$1&&RuntimeException$$1.prototype),TopologyException2.prototype.constructor=TopologyException2,TopologyException2.prototype.getCoordinate=function(){return this.pt},TopologyException2.prototype.interfaces_=function(){return[]},TopologyException2.prototype.getClass=function(){return TopologyException2},TopologyException2.msgWithCoord=function(msg,pt){return pt?msg:msg+" [ "+pt+" ]"},TopologyException2}(RuntimeException),LinkedList=function(){this.array_=[]};LinkedList.prototype.addLast=function(e){this.array_.push(e)};LinkedList.prototype.removeFirst=function(){return this.array_.shift()};LinkedList.prototype.isEmpty=function(){return this.array_.length===0};var BufferSubgraph=function(){this._finder=null,this._dirEdgeList=new ArrayList,this._nodes=new ArrayList,this._rightMostCoord=null,this._env=null,this._finder=new RightmostEdgeFinder};BufferSubgraph.prototype.clearVisitedEdges=function(){for(var it=this._dirEdgeList.iterator();it.hasNext();){var de=it.next();de.setVisited(!1)}};BufferSubgraph.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};BufferSubgraph.prototype.computeNodeDepth=function(n){for(var this$1=this,startEdge=null,i=n.getEdges().iterator();i.hasNext();){var de=i.next();if(de.isVisited()||de.getSym().isVisited()){startEdge=de;break}}if(startEdge===null)throw new TopologyException("unable to find edge to compute depths at "+n.getCoordinate());n.getEdges().computeDepths(startEdge);for(var i$1=n.getEdges().iterator();i$1.hasNext();){var de$1=i$1.next();de$1.setVisited(!0),this$1.copySymDepths(de$1)}};BufferSubgraph.prototype.computeDepth=function(outsideDepth){this.clearVisitedEdges();var de=this._finder.getEdge();de.setEdgeDepths(Position.RIGHT,outsideDepth),this.copySymDepths(de),this.computeDepths(de)};BufferSubgraph.prototype.create=function(node){this.addReachable(node),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};BufferSubgraph.prototype.findResultEdges=function(){for(var it=this._dirEdgeList.iterator();it.hasNext();){var de=it.next();de.getDepth(Position.RIGHT)>=1&&de.getDepth(Position.LEFT)<=0&&!de.isInteriorAreaEdge()&&de.setInResult(!0)}};BufferSubgraph.prototype.computeDepths=function(startEdge){var this$1=this,nodesVisited=new HashSet,nodeQueue=new LinkedList,startNode=startEdge.getNode();for(nodeQueue.addLast(startNode),nodesVisited.add(startNode),startEdge.setVisited(!0);!nodeQueue.isEmpty();){var n=nodeQueue.removeFirst();nodesVisited.add(n),this$1.computeNodeDepth(n);for(var i=n.getEdges().iterator();i.hasNext();){var de=i.next(),sym=de.getSym();if(!sym.isVisited()){var adjNode=sym.getNode();nodesVisited.contains(adjNode)||(nodeQueue.addLast(adjNode),nodesVisited.add(adjNode))}}}};BufferSubgraph.prototype.compareTo=function(o){var graph=o;return this._rightMostCoord.x<graph._rightMostCoord.x?-1:this._rightMostCoord.x>graph._rightMostCoord.x?1:0};BufferSubgraph.prototype.getEnvelope=function(){if(this._env===null){for(var edgeEnv=new Envelope,it=this._dirEdgeList.iterator();it.hasNext();)for(var dirEdge=it.next(),pts=dirEdge.getEdge().getCoordinates(),i=0;i<pts.length-1;i++)edgeEnv.expandToInclude(pts[i]);this._env=edgeEnv}return this._env};BufferSubgraph.prototype.addReachable=function(startNode){var this$1=this,nodeStack=new Stack;for(nodeStack.add(startNode);!nodeStack.empty();){var node=nodeStack.pop();this$1.add(node,nodeStack)}};BufferSubgraph.prototype.copySymDepths=function(de){var sym=de.getSym();sym.setDepth(Position.LEFT,de.getDepth(Position.RIGHT)),sym.setDepth(Position.RIGHT,de.getDepth(Position.LEFT))};BufferSubgraph.prototype.add=function(node,nodeStack){var this$1=this;node.setVisited(!0),this._nodes.add(node);for(var i=node.getEdges().iterator();i.hasNext();){var de=i.next();this$1._dirEdgeList.add(de);var sym=de.getSym(),symNode=sym.getNode();symNode.isVisited()||nodeStack.push(symNode)}};BufferSubgraph.prototype.getNodes=function(){return this._nodes};BufferSubgraph.prototype.getDirectedEdges=function(){return this._dirEdgeList};BufferSubgraph.prototype.interfaces_=function(){return[Comparable]};BufferSubgraph.prototype.getClass=function(){return BufferSubgraph};var TopologyLocation=function TopologyLocation2(){var this$1=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var location=arguments[0];this.init(location.length)}else if(Number.isInteger(arguments[0])){var on=arguments[0];this.init(1),this.location[Position.ON]=on}else if(arguments[0]instanceof TopologyLocation2){var gl=arguments[0];if(this.init(gl.location.length),gl!==null)for(var i=0;i<this.location.length;i++)this$1.location[i]=gl.location[i]}}else if(arguments.length===3){var on$1=arguments[0],left=arguments[1],right=arguments[2];this.init(3),this.location[Position.ON]=on$1,this.location[Position.LEFT]=left,this.location[Position.RIGHT]=right}};TopologyLocation.prototype.setAllLocations=function(locValue){for(var this$1=this,i=0;i<this.location.length;i++)this$1.location[i]=locValue};TopologyLocation.prototype.isNull=function(){for(var this$1=this,i=0;i<this.location.length;i++)if(this$1.location[i]!==Location.NONE)return!1;return!0};TopologyLocation.prototype.setAllLocationsIfNull=function(locValue){for(var this$1=this,i=0;i<this.location.length;i++)this$1.location[i]===Location.NONE&&(this$1.location[i]=locValue)};TopologyLocation.prototype.isLine=function(){return this.location.length===1};TopologyLocation.prototype.merge=function(gl){var this$1=this;if(gl.location.length>this.location.length){var newLoc=new Array(3).fill(null);newLoc[Position.ON]=this.location[Position.ON],newLoc[Position.LEFT]=Location.NONE,newLoc[Position.RIGHT]=Location.NONE,this.location=newLoc}for(var i=0;i<this.location.length;i++)this$1.location[i]===Location.NONE&&i<gl.location.length&&(this$1.location[i]=gl.location[i])};TopologyLocation.prototype.getLocations=function(){return this.location};TopologyLocation.prototype.flip=function(){if(this.location.length<=1)return null;var temp2=this.location[Position.LEFT];this.location[Position.LEFT]=this.location[Position.RIGHT],this.location[Position.RIGHT]=temp2};TopologyLocation.prototype.toString=function(){var buf=new StringBuffer;return this.location.length>1&&buf.append(Location.toLocationSymbol(this.location[Position.LEFT])),buf.append(Location.toLocationSymbol(this.location[Position.ON])),this.location.length>1&&buf.append(Location.toLocationSymbol(this.location[Position.RIGHT])),buf.toString()};TopologyLocation.prototype.setLocations=function(on,left,right){this.location[Position.ON]=on,this.location[Position.LEFT]=left,this.location[Position.RIGHT]=right};TopologyLocation.prototype.get=function(posIndex){return posIndex<this.location.length?this.location[posIndex]:Location.NONE};TopologyLocation.prototype.isArea=function(){return this.location.length>1};TopologyLocation.prototype.isAnyNull=function(){for(var this$1=this,i=0;i<this.location.length;i++)if(this$1.location[i]===Location.NONE)return!0;return!1};TopologyLocation.prototype.setLocation=function(){if(arguments.length===1){var locValue=arguments[0];this.setLocation(Position.ON,locValue)}else if(arguments.length===2){var locIndex=arguments[0],locValue$1=arguments[1];this.location[locIndex]=locValue$1}};TopologyLocation.prototype.init=function(size11){this.location=new Array(size11).fill(null),this.setAllLocations(Location.NONE)};TopologyLocation.prototype.isEqualOnSide=function(le2,locIndex){return this.location[locIndex]===le2.location[locIndex]};TopologyLocation.prototype.allPositionsEqual=function(loc){for(var this$1=this,i=0;i<this.location.length;i++)if(this$1.location[i]!==loc)return!1;return!0};TopologyLocation.prototype.interfaces_=function(){return[]};TopologyLocation.prototype.getClass=function(){return TopologyLocation};var Label=function Label2(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var onLoc=arguments[0];this.elt[0]=new TopologyLocation(onLoc),this.elt[1]=new TopologyLocation(onLoc)}else if(arguments[0]instanceof Label2){var lbl=arguments[0];this.elt[0]=new TopologyLocation(lbl.elt[0]),this.elt[1]=new TopologyLocation(lbl.elt[1])}}else if(arguments.length===2){var geomIndex=arguments[0],onLoc$1=arguments[1];this.elt[0]=new TopologyLocation(Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE),this.elt[geomIndex].setLocation(onLoc$1)}else if(arguments.length===3){var onLoc$2=arguments[0],leftLoc=arguments[1],rightLoc=arguments[2];this.elt[0]=new TopologyLocation(onLoc$2,leftLoc,rightLoc),this.elt[1]=new TopologyLocation(onLoc$2,leftLoc,rightLoc)}else if(arguments.length===4){var geomIndex$1=arguments[0],onLoc$3=arguments[1],leftLoc$1=arguments[2],rightLoc$1=arguments[3];this.elt[0]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[1]=new TopologyLocation(Location.NONE,Location.NONE,Location.NONE),this.elt[geomIndex$1].setLocations(onLoc$3,leftLoc$1,rightLoc$1)}};Label.prototype.getGeometryCount=function(){var count2=0;return this.elt[0].isNull()||count2++,this.elt[1].isNull()||count2++,count2};Label.prototype.setAllLocations=function(geomIndex,location){this.elt[geomIndex].setAllLocations(location)};Label.prototype.isNull=function(geomIndex){return this.elt[geomIndex].isNull()};Label.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var location=arguments[0];this.setAllLocationsIfNull(0,location),this.setAllLocationsIfNull(1,location)}else if(arguments.length===2){var geomIndex=arguments[0],location$1=arguments[1];this.elt[geomIndex].setAllLocationsIfNull(location$1)}};Label.prototype.isLine=function(geomIndex){return this.elt[geomIndex].isLine()};Label.prototype.merge=function(lbl){for(var this$1=this,i=0;i<2;i++)this$1.elt[i]===null&&lbl.elt[i]!==null?this$1.elt[i]=new TopologyLocation(lbl.elt[i]):this$1.elt[i].merge(lbl.elt[i])};Label.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Label.prototype.getLocation=function(){if(arguments.length===1){var geomIndex=arguments[0];return this.elt[geomIndex].get(Position.ON)}else if(arguments.length===2){var geomIndex$1=arguments[0],posIndex=arguments[1];return this.elt[geomIndex$1].get(posIndex)}};Label.prototype.toString=function(){var buf=new StringBuffer;return this.elt[0]!==null&&(buf.append("A:"),buf.append(this.elt[0].toString())),this.elt[1]!==null&&(buf.append(" B:"),buf.append(this.elt[1].toString())),buf.toString()};Label.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var geomIndex=arguments[0];return this.elt[geomIndex].isArea()}};Label.prototype.isAnyNull=function(geomIndex){return this.elt[geomIndex].isAnyNull()};Label.prototype.setLocation=function(){if(arguments.length===2){var geomIndex=arguments[0],location=arguments[1];this.elt[geomIndex].setLocation(Position.ON,location)}else if(arguments.length===3){var geomIndex$1=arguments[0],posIndex=arguments[1],location$1=arguments[2];this.elt[geomIndex$1].setLocation(posIndex,location$1)}};Label.prototype.isEqualOnSide=function(lbl,side){return this.elt[0].isEqualOnSide(lbl.elt[0],side)&&this.elt[1].isEqualOnSide(lbl.elt[1],side)};Label.prototype.allPositionsEqual=function(geomIndex,loc){return this.elt[geomIndex].allPositionsEqual(loc)};Label.prototype.toLine=function(geomIndex){this.elt[geomIndex].isArea()&&(this.elt[geomIndex]=new TopologyLocation(this.elt[geomIndex].location[0]))};Label.prototype.interfaces_=function(){return[]};Label.prototype.getClass=function(){return Label};Label.toLineLabel=function(label){for(var lineLabel=new Label(Location.NONE),i=0;i<2;i++)lineLabel.setLocation(i,label.getLocation(i));return lineLabel};var EdgeRing2=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new ArrayList,this._pts=new ArrayList,this._label=new Label(Location.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new ArrayList,this._geometryFactory=null;var start=arguments[0],geometryFactory=arguments[1];this._geometryFactory=geometryFactory,this.computePoints(start),this.computeRing()};EdgeRing2.prototype.computeRing=function(){var this$1=this;if(this._ring!==null)return null;for(var coord=new Array(this._pts.size()).fill(null),i=0;i<this._pts.size();i++)coord[i]=this$1._pts.get(i);this._ring=this._geometryFactory.createLinearRing(coord),this._isHole=CGAlgorithms.isCCW(this._ring.getCoordinates())};EdgeRing2.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};EdgeRing2.prototype.computePoints=function(start){var this$1=this;this._startDe=start;var de=start,isFirstEdge=!0;do{if(de===null)throw new TopologyException("Found null DirectedEdge");if(de.getEdgeRing()===this$1)throw new TopologyException("Directed Edge visited twice during ring-building at "+de.getCoordinate());this$1._edges.add(de);var label=de.getLabel();Assert.isTrue(label.isArea()),this$1.mergeLabel(label),this$1.addPoints(de.getEdge(),de.isForward(),isFirstEdge),isFirstEdge=!1,this$1.setEdgeRing(de,this$1),de=this$1.getNext(de)}while(de!==this._startDe)};EdgeRing2.prototype.getLinearRing=function(){return this._ring};EdgeRing2.prototype.getCoordinate=function(i){return this._pts.get(i)};EdgeRing2.prototype.computeMaxNodeDegree=function(){var this$1=this;this._maxNodeDegree=0;var de=this._startDe;do{var node=de.getNode(),degree=node.getEdges().getOutgoingDegree(this$1);degree>this$1._maxNodeDegree&&(this$1._maxNodeDegree=degree),de=this$1.getNext(de)}while(de!==this._startDe);this._maxNodeDegree*=2};EdgeRing2.prototype.addPoints=function(edge,isForward,isFirstEdge){var this$1=this,edgePts=edge.getCoordinates();if(isForward){var startIndex=1;isFirstEdge&&(startIndex=0);for(var i=startIndex;i<edgePts.length;i++)this$1._pts.add(edgePts[i])}else{var startIndex$1=edgePts.length-2;isFirstEdge&&(startIndex$1=edgePts.length-1);for(var i$1=startIndex$1;i$1>=0;i$1--)this$1._pts.add(edgePts[i$1])}};EdgeRing2.prototype.isHole=function(){return this._isHole};EdgeRing2.prototype.setInResult=function(){var de=this._startDe;do de.getEdge().setInResult(!0),de=de.getNext();while(de!==this._startDe)};EdgeRing2.prototype.containsPoint=function(p){var shell=this.getLinearRing(),env=shell.getEnvelopeInternal();if(!env.contains(p)||!CGAlgorithms.isPointInRing(p,shell.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var hole=i.next();if(hole.containsPoint(p))return!1}return!0};EdgeRing2.prototype.addHole=function(ring){this._holes.add(ring)};EdgeRing2.prototype.isShell=function(){return this._shell===null};EdgeRing2.prototype.getLabel=function(){return this._label};EdgeRing2.prototype.getEdges=function(){return this._edges};EdgeRing2.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};EdgeRing2.prototype.getShell=function(){return this._shell};EdgeRing2.prototype.mergeLabel=function(){if(arguments.length===1){var deLabel=arguments[0];this.mergeLabel(deLabel,0),this.mergeLabel(deLabel,1)}else if(arguments.length===2){var deLabel$1=arguments[0],geomIndex=arguments[1],loc=deLabel$1.getLocation(geomIndex,Position.RIGHT);if(loc===Location.NONE)return null;if(this._label.getLocation(geomIndex)===Location.NONE)return this._label.setLocation(geomIndex,loc),null}};EdgeRing2.prototype.setShell=function(shell){this._shell=shell,shell!==null&&shell.addHole(this)};EdgeRing2.prototype.toPolygon=function(geometryFactory){for(var this$1=this,holeLR=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)holeLR[i]=this$1._holes.get(i).getLinearRing();var poly=geometryFactory.createPolygon(this.getLinearRing(),holeLR);return poly};EdgeRing2.prototype.interfaces_=function(){return[]};EdgeRing2.prototype.getClass=function(){return EdgeRing2};var MinimalEdgeRing=function(EdgeRing$$1){function MinimalEdgeRing2(){var start=arguments[0],geometryFactory=arguments[1];EdgeRing$$1.call(this,start,geometryFactory)}return EdgeRing$$1&&(MinimalEdgeRing2.__proto__=EdgeRing$$1),MinimalEdgeRing2.prototype=Object.create(EdgeRing$$1&&EdgeRing$$1.prototype),MinimalEdgeRing2.prototype.constructor=MinimalEdgeRing2,MinimalEdgeRing2.prototype.setEdgeRing=function(de,er){de.setMinEdgeRing(er)},MinimalEdgeRing2.prototype.getNext=function(de){return de.getNextMin()},MinimalEdgeRing2.prototype.interfaces_=function(){return[]},MinimalEdgeRing2.prototype.getClass=function(){return MinimalEdgeRing2},MinimalEdgeRing2}(EdgeRing2),MaximalEdgeRing=function(EdgeRing$$1){function MaximalEdgeRing2(){var start=arguments[0],geometryFactory=arguments[1];EdgeRing$$1.call(this,start,geometryFactory)}return EdgeRing$$1&&(MaximalEdgeRing2.__proto__=EdgeRing$$1),MaximalEdgeRing2.prototype=Object.create(EdgeRing$$1&&EdgeRing$$1.prototype),MaximalEdgeRing2.prototype.constructor=MaximalEdgeRing2,MaximalEdgeRing2.prototype.buildMinimalRings=function(){var this$1=this,minEdgeRings=new ArrayList,de=this._startDe;do{if(de.getMinEdgeRing()===null){var minEr=new MinimalEdgeRing(de,this$1._geometryFactory);minEdgeRings.add(minEr)}de=de.getNext()}while(de!==this._startDe);return minEdgeRings},MaximalEdgeRing2.prototype.setEdgeRing=function(de,er){de.setEdgeRing(er)},MaximalEdgeRing2.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var this$1=this,de=this._startDe;do{var node=de.getNode();node.getEdges().linkMinimalDirectedEdges(this$1),de=de.getNext()}while(de!==this._startDe)},MaximalEdgeRing2.prototype.getNext=function(de){return de.getNext()},MaximalEdgeRing2.prototype.interfaces_=function(){return[]},MaximalEdgeRing2.prototype.getClass=function(){return MaximalEdgeRing2},MaximalEdgeRing2}(EdgeRing2),GraphComponent=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var label=arguments[0];this._label=label}}};GraphComponent.prototype.setVisited=function(isVisited2){this._isVisited=isVisited2};GraphComponent.prototype.setInResult=function(isInResult2){this._isInResult=isInResult2};GraphComponent.prototype.isCovered=function(){return this._isCovered};GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet};GraphComponent.prototype.setLabel=function(label){this._label=label};GraphComponent.prototype.getLabel=function(){return this._label};GraphComponent.prototype.setCovered=function(isCovered2){this._isCovered=isCovered2,this._isCoveredSet=!0};GraphComponent.prototype.updateIM=function(im){Assert.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(im)};GraphComponent.prototype.isInResult=function(){return this._isInResult};GraphComponent.prototype.isVisited=function(){return this._isVisited};GraphComponent.prototype.interfaces_=function(){return[]};GraphComponent.prototype.getClass=function(){return GraphComponent};var Node3=function(GraphComponent$$1){function Node4(){GraphComponent$$1.call(this),this._coord=null,this._edges=null;var coord=arguments[0],edges2=arguments[1];this._coord=coord,this._edges=edges2,this._label=new Label(0,Location.NONE)}return GraphComponent$$1&&(Node4.__proto__=GraphComponent$$1),Node4.prototype=Object.create(GraphComponent$$1&&GraphComponent$$1.prototype),Node4.prototype.constructor=Node4,Node4.prototype.isIncidentEdgeInResult=function(){for(var it=this.getEdges().getEdges().iterator();it.hasNext();){var de=it.next();if(de.getEdge().isInResult())return!0}return!1},Node4.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Node4.prototype.getCoordinate=function(){return this._coord},Node4.prototype.print=function(out){out.println("node "+this._coord+" lbl: "+this._label)},Node4.prototype.computeIM=function(im){},Node4.prototype.computeMergedLocation=function(label2,eltIndex){var loc=Location.NONE;if(loc=this._label.getLocation(eltIndex),!label2.isNull(eltIndex)){var nLoc=label2.getLocation(eltIndex);loc!==Location.BOUNDARY&&(loc=nLoc)}return loc},Node4.prototype.setLabel=function(){if(arguments.length===2){var argIndex=arguments[0],onLocation=arguments[1];this._label===null?this._label=new Label(argIndex,onLocation):this._label.setLocation(argIndex,onLocation)}else return GraphComponent$$1.prototype.setLabel.apply(this,arguments)},Node4.prototype.getEdges=function(){return this._edges},Node4.prototype.mergeLabel=function(){var this$1=this;if(arguments[0]instanceof Node4){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Label)for(var label2=arguments[0],i=0;i<2;i++){var loc=this$1.computeMergedLocation(label2,i),thisLoc=this$1._label.getLocation(i);thisLoc===Location.NONE&&this$1._label.setLocation(i,loc)}},Node4.prototype.add=function(e){this._edges.insert(e),e.setNode(this)},Node4.prototype.setLabelBoundary=function(argIndex){if(this._label===null)return null;var loc=Location.NONE;this._label!==null&&(loc=this._label.getLocation(argIndex));var newLoc=null;switch(loc){case Location.BOUNDARY:newLoc=Location.INTERIOR;break;case Location.INTERIOR:newLoc=Location.BOUNDARY;break;default:newLoc=Location.BOUNDARY;break}this._label.setLocation(argIndex,newLoc)},Node4.prototype.interfaces_=function(){return[]},Node4.prototype.getClass=function(){return Node4},Node4}(GraphComponent),NodeMap=function(){this.nodeMap=new TreeMap,this.nodeFact=null;var nodeFact=arguments[0];this.nodeFact=nodeFact};NodeMap.prototype.find=function(coord){return this.nodeMap.get(coord)};NodeMap.prototype.addNode=function(){if(arguments[0]instanceof Coordinate){var coord=arguments[0],node=this.nodeMap.get(coord);return node===null&&(node=this.nodeFact.createNode(coord),this.nodeMap.put(coord,node)),node}else if(arguments[0]instanceof Node3){var n=arguments[0],node$1=this.nodeMap.get(n.getCoordinate());return node$1===null?(this.nodeMap.put(n.getCoordinate(),n),n):(node$1.mergeLabel(n),node$1)}};NodeMap.prototype.print=function(out){for(var it=this.iterator();it.hasNext();){var n=it.next();n.print(out)}};NodeMap.prototype.iterator=function(){return this.nodeMap.values().iterator()};NodeMap.prototype.values=function(){return this.nodeMap.values()};NodeMap.prototype.getBoundaryNodes=function(geomIndex){for(var bdyNodes=new ArrayList,i=this.iterator();i.hasNext();){var node=i.next();node.getLabel().getLocation(geomIndex)===Location.BOUNDARY&&bdyNodes.add(node)}return bdyNodes};NodeMap.prototype.add=function(e){var p=e.getCoordinate(),n=this.addNode(p);n.add(e)};NodeMap.prototype.interfaces_=function(){return[]};NodeMap.prototype.getClass=function(){return NodeMap};var Quadrant=function(){},staticAccessors$21={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Quadrant.prototype.interfaces_=function(){return[]};Quadrant.prototype.getClass=function(){return Quadrant};Quadrant.isNorthern=function(quad){return quad===Quadrant.NE||quad===Quadrant.NW};Quadrant.isOpposite=function(quad1,quad2){if(quad1===quad2)return!1;var diff2=(quad1-quad2+4)%4;return diff2===2};Quadrant.commonHalfPlane=function(quad1,quad2){if(quad1===quad2)return quad1;var diff2=(quad1-quad2+4)%4;if(diff2===2)return-1;var min4=quad1<quad2?quad1:quad2,max3=quad1>quad2?quad1:quad2;return min4===0&&max3===3?3:min4};Quadrant.isInHalfPlane=function(quad,halfPlane){return halfPlane===Quadrant.SE?quad===Quadrant.SE||quad===Quadrant.SW:quad===halfPlane||quad===halfPlane+1};Quadrant.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var dx=arguments[0],dy=arguments[1];if(dx===0&&dy===0)throw new IllegalArgumentException("Cannot compute the quadrant for point ( "+dx+", "+dy+" )");return dx>=0?dy>=0?Quadrant.NE:Quadrant.SE:dy>=0?Quadrant.NW:Quadrant.SW}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var p0=arguments[0],p1=arguments[1];if(p1.x===p0.x&&p1.y===p0.y)throw new IllegalArgumentException("Cannot compute the quadrant for two identical points "+p0);return p1.x>=p0.x?p1.y>=p0.y?Quadrant.NE:Quadrant.SE:p1.y>=p0.y?Quadrant.NW:Quadrant.SW}};staticAccessors$21.NE.get=function(){return 0};staticAccessors$21.NW.get=function(){return 1};staticAccessors$21.SW.get=function(){return 2};staticAccessors$21.SE.get=function(){return 3};Object.defineProperties(Quadrant,staticAccessors$21);var EdgeEnd=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var edge=arguments[0];this._edge=edge}else if(arguments.length===3){var edge$1=arguments[0],p0=arguments[1],p1=arguments[2],label=null;this._edge=edge$1,this.init(p0,p1),this._label=label}else if(arguments.length===4){var edge$2=arguments[0],p0$1=arguments[1],p1$1=arguments[2],label$1=arguments[3];this._edge=edge$2,this.init(p0$1,p1$1),this._label=label$1}};EdgeEnd.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:CGAlgorithms.computeOrientation(e._p0,e._p1,this._p1)};EdgeEnd.prototype.getDy=function(){return this._dy};EdgeEnd.prototype.getCoordinate=function(){return this._p0};EdgeEnd.prototype.setNode=function(node){this._node=node};EdgeEnd.prototype.print=function(out){var angle3=Math.atan2(this._dy,this._dx),className=this.getClass().getName(),lastDotPos=className.lastIndexOf("."),name=className.substring(lastDotPos+1);out.print("  "+name+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+angle3+"   "+this._label)};EdgeEnd.prototype.compareTo=function(obj){var e=obj;return this.compareDirection(e)};EdgeEnd.prototype.getDirectedCoordinate=function(){return this._p1};EdgeEnd.prototype.getDx=function(){return this._dx};EdgeEnd.prototype.getLabel=function(){return this._label};EdgeEnd.prototype.getEdge=function(){return this._edge};EdgeEnd.prototype.getQuadrant=function(){return this._quadrant};EdgeEnd.prototype.getNode=function(){return this._node};EdgeEnd.prototype.toString=function(){var angle3=Math.atan2(this._dy,this._dx),className=this.getClass().getName(),lastDotPos=className.lastIndexOf("."),name=className.substring(lastDotPos+1);return"  "+name+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+angle3+"   "+this._label};EdgeEnd.prototype.computeLabel=function(boundaryNodeRule){};EdgeEnd.prototype.init=function(p0,p1){this._p0=p0,this._p1=p1,this._dx=p1.x-p0.x,this._dy=p1.y-p0.y,this._quadrant=Quadrant.quadrant(this._dx,this._dy),Assert.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};EdgeEnd.prototype.interfaces_=function(){return[Comparable]};EdgeEnd.prototype.getClass=function(){return EdgeEnd};var DirectedEdge=function(EdgeEnd$$1){function DirectedEdge2(){var edge=arguments[0],isForward=arguments[1];if(EdgeEnd$$1.call(this,edge),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=isForward,isForward)this.init(edge.getCoordinate(0),edge.getCoordinate(1));else{var n=edge.getNumPoints()-1;this.init(edge.getCoordinate(n),edge.getCoordinate(n-1))}this.computeDirectedLabel()}return EdgeEnd$$1&&(DirectedEdge2.__proto__=EdgeEnd$$1),DirectedEdge2.prototype=Object.create(EdgeEnd$$1&&EdgeEnd$$1.prototype),DirectedEdge2.prototype.constructor=DirectedEdge2,DirectedEdge2.prototype.getNextMin=function(){return this._nextMin},DirectedEdge2.prototype.getDepth=function(position){return this._depth[position]},DirectedEdge2.prototype.setVisited=function(isVisited2){this._isVisited=isVisited2},DirectedEdge2.prototype.computeDirectedLabel=function(){this._label=new Label(this._edge.getLabel()),this._isForward||this._label.flip()},DirectedEdge2.prototype.getNext=function(){return this._next},DirectedEdge2.prototype.setDepth=function(position,depthVal){if(this._depth[position]!==-999&&this._depth[position]!==depthVal)throw new TopologyException("assigned depths do not match",this.getCoordinate());this._depth[position]=depthVal},DirectedEdge2.prototype.isInteriorAreaEdge=function(){for(var this$1=this,isInteriorAreaEdge2=!0,i=0;i<2;i++)this$1._label.isArea(i)&&this$1._label.getLocation(i,Position.LEFT)===Location.INTERIOR&&this$1._label.getLocation(i,Position.RIGHT)===Location.INTERIOR||(isInteriorAreaEdge2=!1);return isInteriorAreaEdge2},DirectedEdge2.prototype.setNextMin=function(nextMin){this._nextMin=nextMin},DirectedEdge2.prototype.print=function(out){EdgeEnd$$1.prototype.print.call(this,out),out.print(" "+this._depth[Position.LEFT]+"/"+this._depth[Position.RIGHT]),out.print(" ("+this.getDepthDelta()+")"),this._isInResult&&out.print(" inResult")},DirectedEdge2.prototype.setMinEdgeRing=function(minEdgeRing){this._minEdgeRing=minEdgeRing},DirectedEdge2.prototype.isLineEdge=function(){var isLine3=this._label.isLine(0)||this._label.isLine(1),isExteriorIfArea0=!this._label.isArea(0)||this._label.allPositionsEqual(0,Location.EXTERIOR),isExteriorIfArea1=!this._label.isArea(1)||this._label.allPositionsEqual(1,Location.EXTERIOR);return isLine3&&isExteriorIfArea0&&isExteriorIfArea1},DirectedEdge2.prototype.setEdgeRing=function(edgeRing){this._edgeRing=edgeRing},DirectedEdge2.prototype.getMinEdgeRing=function(){return this._minEdgeRing},DirectedEdge2.prototype.getDepthDelta=function(){var depthDelta2=this._edge.getDepthDelta();return this._isForward||(depthDelta2=-depthDelta2),depthDelta2},DirectedEdge2.prototype.setInResult=function(isInResult2){this._isInResult=isInResult2},DirectedEdge2.prototype.getSym=function(){return this._sym},DirectedEdge2.prototype.isForward=function(){return this._isForward},DirectedEdge2.prototype.getEdge=function(){return this._edge},DirectedEdge2.prototype.printEdge=function(out){this.print(out),out.print(" "),this._isForward?this._edge.print(out):this._edge.printReverse(out)},DirectedEdge2.prototype.setSym=function(de){this._sym=de},DirectedEdge2.prototype.setVisitedEdge=function(isVisited2){this.setVisited(isVisited2),this._sym.setVisited(isVisited2)},DirectedEdge2.prototype.setEdgeDepths=function(position,depth2){var depthDelta2=this.getEdge().getDepthDelta();this._isForward||(depthDelta2=-depthDelta2);var directionFactor=1;position===Position.LEFT&&(directionFactor=-1);var oppositePos=Position.opposite(position),delta=depthDelta2*directionFactor,oppositeDepth=depth2+delta;this.setDepth(position,depth2),this.setDepth(oppositePos,oppositeDepth)},DirectedEdge2.prototype.getEdgeRing=function(){return this._edgeRing},DirectedEdge2.prototype.isInResult=function(){return this._isInResult},DirectedEdge2.prototype.setNext=function(next3){this._next=next3},DirectedEdge2.prototype.isVisited=function(){return this._isVisited},DirectedEdge2.prototype.interfaces_=function(){return[]},DirectedEdge2.prototype.getClass=function(){return DirectedEdge2},DirectedEdge2.depthFactor=function(currLocation,nextLocation){return currLocation===Location.EXTERIOR&&nextLocation===Location.INTERIOR?1:currLocation===Location.INTERIOR&&nextLocation===Location.EXTERIOR?-1:0},DirectedEdge2}(EdgeEnd),NodeFactory=function(){};NodeFactory.prototype.createNode=function(coord){return new Node3(coord,null)};NodeFactory.prototype.interfaces_=function(){return[]};NodeFactory.prototype.getClass=function(){return NodeFactory};var PlanarGraph=function(){if(this._edges=new ArrayList,this._nodes=null,this._edgeEndList=new ArrayList,arguments.length===0)this._nodes=new NodeMap(new NodeFactory);else if(arguments.length===1){var nodeFact=arguments[0];this._nodes=new NodeMap(nodeFact)}};PlanarGraph.prototype.printEdges=function(out){var this$1=this;out.println("Edges:");for(var i=0;i<this._edges.size();i++){out.println("edge "+i+":");var e=this$1._edges.get(i);e.print(out),e.eiList.print(out)}};PlanarGraph.prototype.find=function(coord){return this._nodes.find(coord)};PlanarGraph.prototype.addNode=function(){if(arguments[0]instanceof Node3){var node=arguments[0];return this._nodes.addNode(node)}else if(arguments[0]instanceof Coordinate){var coord=arguments[0];return this._nodes.addNode(coord)}};PlanarGraph.prototype.getNodeIterator=function(){return this._nodes.iterator()};PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var nodeit=this._nodes.iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().linkResultDirectedEdges()}};PlanarGraph.prototype.debugPrintln=function(o){System.out.println(o)};PlanarGraph.prototype.isBoundaryNode=function(geomIndex,coord){var node=this._nodes.find(coord);if(node===null)return!1;var label=node.getLabel();return label!==null&&label.getLocation(geomIndex)===Location.BOUNDARY};PlanarGraph.prototype.linkAllDirectedEdges=function(){for(var nodeit=this._nodes.iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().linkAllDirectedEdges()}};PlanarGraph.prototype.matchInSameDirection=function(p0,p1,ep0,ep1){return p0.equals(ep0)?CGAlgorithms.computeOrientation(p0,p1,ep1)===CGAlgorithms.COLLINEAR&&Quadrant.quadrant(p0,p1)===Quadrant.quadrant(ep0,ep1):!1};PlanarGraph.prototype.getEdgeEnds=function(){return this._edgeEndList};PlanarGraph.prototype.debugPrint=function(o){System.out.print(o)};PlanarGraph.prototype.getEdgeIterator=function(){return this._edges.iterator()};PlanarGraph.prototype.findEdgeInSameDirection=function(p0,p1){for(var this$1=this,i=0;i<this._edges.size();i++){var e=this$1._edges.get(i),eCoord=e.getCoordinates();if(this$1.matchInSameDirection(p0,p1,eCoord[0],eCoord[1])||this$1.matchInSameDirection(p0,p1,eCoord[eCoord.length-1],eCoord[eCoord.length-2]))return e}return null};PlanarGraph.prototype.insertEdge=function(e){this._edges.add(e)};PlanarGraph.prototype.findEdgeEnd=function(e){for(var i=this.getEdgeEnds().iterator();i.hasNext();){var ee=i.next();if(ee.getEdge()===e)return ee}return null};PlanarGraph.prototype.addEdges=function(edgesToAdd){for(var this$1=this,it=edgesToAdd.iterator();it.hasNext();){var e=it.next();this$1._edges.add(e);var de1=new DirectedEdge(e,!0),de2=new DirectedEdge(e,!1);de1.setSym(de2),de2.setSym(de1),this$1.add(de1),this$1.add(de2)}};PlanarGraph.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)};PlanarGraph.prototype.getNodes=function(){return this._nodes.values()};PlanarGraph.prototype.findEdge=function(p0,p1){for(var this$1=this,i=0;i<this._edges.size();i++){var e=this$1._edges.get(i),eCoord=e.getCoordinates();if(p0.equals(eCoord[0])&&p1.equals(eCoord[1]))return e}return null};PlanarGraph.prototype.interfaces_=function(){return[]};PlanarGraph.prototype.getClass=function(){return PlanarGraph};PlanarGraph.linkResultDirectedEdges=function(nodes){for(var nodeit=nodes.iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().linkResultDirectedEdges()}};var PolygonBuilder=function(){this._geometryFactory=null,this._shellList=new ArrayList;var geometryFactory=arguments[0];this._geometryFactory=geometryFactory};PolygonBuilder.prototype.sortShellsAndHoles=function(edgeRings,shellList,freeHoleList){for(var it=edgeRings.iterator();it.hasNext();){var er=it.next();er.isHole()?freeHoleList.add(er):shellList.add(er)}};PolygonBuilder.prototype.computePolygons=function(shellList){for(var this$1=this,resultPolyList=new ArrayList,it=shellList.iterator();it.hasNext();){var er=it.next(),poly=er.toPolygon(this$1._geometryFactory);resultPolyList.add(poly)}return resultPolyList};PolygonBuilder.prototype.placeFreeHoles=function(shellList,freeHoleList){for(var this$1=this,it=freeHoleList.iterator();it.hasNext();){var hole=it.next();if(hole.getShell()===null){var shell=this$1.findEdgeRingContaining(hole,shellList);if(shell===null)throw new TopologyException("unable to assign hole to a shell",hole.getCoordinate(0));hole.setShell(shell)}}};PolygonBuilder.prototype.buildMinimalEdgeRings=function(maxEdgeRings,shellList,freeHoleList){for(var this$1=this,edgeRings=new ArrayList,it=maxEdgeRings.iterator();it.hasNext();){var er=it.next();if(er.getMaxNodeDegree()>2){er.linkDirectedEdgesForMinimalEdgeRings();var minEdgeRings=er.buildMinimalRings(),shell=this$1.findShell(minEdgeRings);shell!==null?(this$1.placePolygonHoles(shell,minEdgeRings),shellList.add(shell)):freeHoleList.addAll(minEdgeRings)}else edgeRings.add(er)}return edgeRings};PolygonBuilder.prototype.containsPoint=function(p){for(var it=this._shellList.iterator();it.hasNext();){var er=it.next();if(er.containsPoint(p))return!0}return!1};PolygonBuilder.prototype.buildMaximalEdgeRings=function(dirEdges){for(var this$1=this,maxEdgeRings=new ArrayList,it=dirEdges.iterator();it.hasNext();){var de=it.next();if(de.isInResult()&&de.getLabel().isArea()&&de.getEdgeRing()===null){var er=new MaximalEdgeRing(de,this$1._geometryFactory);maxEdgeRings.add(er),er.setInResult()}}return maxEdgeRings};PolygonBuilder.prototype.placePolygonHoles=function(shell,minEdgeRings){for(var it=minEdgeRings.iterator();it.hasNext();){var er=it.next();er.isHole()&&er.setShell(shell)}};PolygonBuilder.prototype.getPolygons=function(){var resultPolyList=this.computePolygons(this._shellList);return resultPolyList};PolygonBuilder.prototype.findEdgeRingContaining=function(testEr,shellList){for(var testRing=testEr.getLinearRing(),testEnv=testRing.getEnvelopeInternal(),testPt=testRing.getCoordinateN(0),minShell=null,minEnv=null,it=shellList.iterator();it.hasNext();){var tryShell=it.next(),tryRing=tryShell.getLinearRing(),tryEnv=tryRing.getEnvelopeInternal();minShell!==null&&(minEnv=minShell.getLinearRing().getEnvelopeInternal());var isContained=!1;tryEnv.contains(testEnv)&&CGAlgorithms.isPointInRing(testPt,tryRing.getCoordinates())&&(isContained=!0),isContained&&(minShell===null||minEnv.contains(tryEnv))&&(minShell=tryShell)}return minShell};PolygonBuilder.prototype.findShell=function(minEdgeRings){for(var shellCount=0,shell=null,it=minEdgeRings.iterator();it.hasNext();){var er=it.next();er.isHole()||(shell=er,shellCount++)}return Assert.isTrue(shellCount<=1,"found two shells in MinimalEdgeRing list"),shell};PolygonBuilder.prototype.add=function(){if(arguments.length===1){var graph=arguments[0];this.add(graph.getEdgeEnds(),graph.getNodes())}else if(arguments.length===2){var dirEdges=arguments[0],nodes=arguments[1];PlanarGraph.linkResultDirectedEdges(nodes);var maxEdgeRings=this.buildMaximalEdgeRings(dirEdges),freeHoleList=new ArrayList,edgeRings=this.buildMinimalEdgeRings(maxEdgeRings,this._shellList,freeHoleList);this.sortShellsAndHoles(edgeRings,this._shellList,freeHoleList),this.placeFreeHoles(this._shellList,freeHoleList)}};PolygonBuilder.prototype.interfaces_=function(){return[]};PolygonBuilder.prototype.getClass=function(){return PolygonBuilder};var Boundable=function(){};Boundable.prototype.getBounds=function(){};Boundable.prototype.interfaces_=function(){return[]};Boundable.prototype.getClass=function(){return Boundable};var ItemBoundable=function(){this._bounds=null,this._item=null;var bounds=arguments[0],item=arguments[1];this._bounds=bounds,this._item=item};ItemBoundable.prototype.getItem=function(){return this._item};ItemBoundable.prototype.getBounds=function(){return this._bounds};ItemBoundable.prototype.interfaces_=function(){return[Boundable,Serializable]};ItemBoundable.prototype.getClass=function(){return ItemBoundable};var PriorityQueue=function(){this._size=null,this._items=null,this._size=0,this._items=new ArrayList,this._items.add(null)};PriorityQueue.prototype.poll=function(){if(this.isEmpty())return null;var minItem=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),minItem};PriorityQueue.prototype.size=function(){return this._size};PriorityQueue.prototype.reorder=function(hole){for(var this$1=this,child=null,tmp=this._items.get(hole);hole*2<=this._size&&(child=hole*2,child!==this$1._size&&this$1._items.get(child+1).compareTo(this$1._items.get(child))<0&&child++,this$1._items.get(child).compareTo(tmp)<0);hole=child)this$1._items.set(hole,this$1._items.get(child));this._items.set(hole,tmp)};PriorityQueue.prototype.clear=function(){this._size=0,this._items.clear()};PriorityQueue.prototype.isEmpty=function(){return this._size===0};PriorityQueue.prototype.add=function(x2){var this$1=this;this._items.add(null),this._size+=1;var hole=this._size;for(this._items.set(0,x2);x2.compareTo(this._items.get(Math.trunc(hole/2)))<0;hole/=2)this$1._items.set(hole,this$1._items.get(Math.trunc(hole/2)));this._items.set(hole,x2)};PriorityQueue.prototype.interfaces_=function(){return[]};PriorityQueue.prototype.getClass=function(){return PriorityQueue};var ItemVisitor=function(){};ItemVisitor.prototype.visitItem=function(item){};ItemVisitor.prototype.interfaces_=function(){return[]};ItemVisitor.prototype.getClass=function(){return ItemVisitor};var SpatialIndex=function(){};SpatialIndex.prototype.insert=function(itemEnv,item){};SpatialIndex.prototype.remove=function(itemEnv,item){};SpatialIndex.prototype.query=function(){};SpatialIndex.prototype.interfaces_=function(){return[]};SpatialIndex.prototype.getClass=function(){return SpatialIndex};var AbstractNode=function(){if(this._childBoundables=new ArrayList,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var level=arguments[0];this._level=level}}},staticAccessors$22={serialVersionUID:{configurable:!0}};AbstractNode.prototype.getLevel=function(){return this._level};AbstractNode.prototype.size=function(){return this._childBoundables.size()};AbstractNode.prototype.getChildBoundables=function(){return this._childBoundables};AbstractNode.prototype.addChildBoundable=function(childBoundable){Assert.isTrue(this._bounds===null),this._childBoundables.add(childBoundable)};AbstractNode.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};AbstractNode.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};AbstractNode.prototype.interfaces_=function(){return[Boundable,Serializable]};AbstractNode.prototype.getClass=function(){return AbstractNode};staticAccessors$22.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(AbstractNode,staticAccessors$22);var Collections=function(){};Collections.reverseOrder=function(){return{compare:function(a,b){return b.compareTo(a)}}};Collections.min=function(l){return Collections.sort(l),l.get(0)};Collections.sort=function(l,c){var a=l.toArray();c?Arrays.sort(a,c):Arrays.sort(a);for(var i=l.iterator(),pos=0,alen=a.length;pos<alen;pos++)i.next(),i.set(a[pos])};Collections.singletonList=function(o){var arrayList=new ArrayList;return arrayList.add(o),arrayList};var BoundablePair=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var boundable1=arguments[0],boundable2=arguments[1],itemDistance=arguments[2];this._boundable1=boundable1,this._boundable2=boundable2,this._itemDistance=itemDistance,this._distance=this.distance()};BoundablePair.prototype.expandToQueue=function(priQ,minDistance){var isComp1=BoundablePair.isComposite(this._boundable1),isComp2=BoundablePair.isComposite(this._boundable2);if(isComp1&&isComp2)return BoundablePair.area(this._boundable1)>BoundablePair.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,priQ,minDistance),null):(this.expand(this._boundable2,this._boundable1,priQ,minDistance),null);if(isComp1)return this.expand(this._boundable1,this._boundable2,priQ,minDistance),null;if(isComp2)return this.expand(this._boundable2,this._boundable1,priQ,minDistance),null;throw new IllegalArgumentException("neither boundable is composite")};BoundablePair.prototype.isLeaves=function(){return!(BoundablePair.isComposite(this._boundable1)||BoundablePair.isComposite(this._boundable2))};BoundablePair.prototype.compareTo=function(o){var nd=o;return this._distance<nd._distance?-1:this._distance>nd._distance?1:0};BoundablePair.prototype.expand=function(bndComposite,bndOther,priQ,minDistance){for(var this$1=this,children=bndComposite.getChildBoundables(),i=children.iterator();i.hasNext();){var child=i.next(),bp=new BoundablePair(child,bndOther,this$1._itemDistance);bp.getDistance()<minDistance&&priQ.add(bp)}};BoundablePair.prototype.getBoundable=function(i){return i===0?this._boundable1:this._boundable2};BoundablePair.prototype.getDistance=function(){return this._distance};BoundablePair.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};BoundablePair.prototype.interfaces_=function(){return[Comparable]};BoundablePair.prototype.getClass=function(){return BoundablePair};BoundablePair.area=function(b){return b.getBounds().getArea()};BoundablePair.isComposite=function(item){return item instanceof AbstractNode};var AbstractSTRtree=function AbstractSTRtree2(){if(this._root=null,this._built=!1,this._itemBoundables=new ArrayList,this._nodeCapacity=null,arguments.length===0){var nodeCapacity=AbstractSTRtree2.DEFAULT_NODE_CAPACITY;this._nodeCapacity=nodeCapacity}else if(arguments.length===1){var nodeCapacity$1=arguments[0];Assert.isTrue(nodeCapacity$1>1,"Node capacity must be greater than 1"),this._nodeCapacity=nodeCapacity$1}},staticAccessors$23={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};AbstractSTRtree.prototype.getNodeCapacity=function(){return this._nodeCapacity};AbstractSTRtree.prototype.lastNode=function(nodes){return nodes.get(nodes.size()-1)};AbstractSTRtree.prototype.size=function(){var this$1=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var node=arguments[0],size11=0,i=node.getChildBoundables().iterator();i.hasNext();){var childBoundable=i.next();childBoundable instanceof AbstractNode?size11+=this$1.size(childBoundable):childBoundable instanceof ItemBoundable&&(size11+=1)}return size11}};AbstractSTRtree.prototype.removeItem=function(node,item){for(var childToRemove=null,i=node.getChildBoundables().iterator();i.hasNext();){var childBoundable=i.next();childBoundable instanceof ItemBoundable&&childBoundable.getItem()===item&&(childToRemove=childBoundable)}return childToRemove!==null?(node.getChildBoundables().remove(childToRemove),!0):!1};AbstractSTRtree.prototype.itemsTree=function(){var this$1=this;if(arguments.length===0){this.build();var valuesTree=this.itemsTree(this._root);return valuesTree===null?new ArrayList:valuesTree}else if(arguments.length===1){for(var node=arguments[0],valuesTreeForNode=new ArrayList,i=node.getChildBoundables().iterator();i.hasNext();){var childBoundable=i.next();if(childBoundable instanceof AbstractNode){var valuesTreeForChild=this$1.itemsTree(childBoundable);valuesTreeForChild!==null&&valuesTreeForNode.add(valuesTreeForChild)}else childBoundable instanceof ItemBoundable?valuesTreeForNode.add(childBoundable.getItem()):Assert.shouldNeverReachHere()}return valuesTreeForNode.size()<=0?null:valuesTreeForNode}};AbstractSTRtree.prototype.insert=function(bounds,item){Assert.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ItemBoundable(bounds,item))};AbstractSTRtree.prototype.boundablesAtLevel=function(){var this$1=this;if(arguments.length===1){var level=arguments[0],boundables=new ArrayList;return this.boundablesAtLevel(level,this._root,boundables),boundables}else if(arguments.length===3){var level$1=arguments[0],top=arguments[1],boundables$1=arguments[2];if(Assert.isTrue(level$1>-2),top.getLevel()===level$1)return boundables$1.add(top),null;for(var i=top.getChildBoundables().iterator();i.hasNext();){var boundable=i.next();boundable instanceof AbstractNode?this$1.boundablesAtLevel(level$1,boundable,boundables$1):(Assert.isTrue(boundable instanceof ItemBoundable),level$1===-1&&boundables$1.add(boundable))}return null}};AbstractSTRtree.prototype.query=function(){var this$1=this;if(arguments.length===1){var searchBounds=arguments[0];this.build();var matches=new ArrayList;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),searchBounds)&&this.query(searchBounds,this._root,matches),matches}else if(arguments.length===2){var searchBounds$1=arguments[0],visitor=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),searchBounds$1)&&this.query(searchBounds$1,this._root,visitor)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var searchBounds$2=arguments[0],node=arguments[1],visitor$1=arguments[2],childBoundables=node.getChildBoundables(),i=0;i<childBoundables.size();i++){var childBoundable=childBoundables.get(i);this$1.getIntersectsOp().intersects(childBoundable.getBounds(),searchBounds$2)&&(childBoundable instanceof AbstractNode?this$1.query(searchBounds$2,childBoundable,visitor$1):childBoundable instanceof ItemBoundable?visitor$1.visitItem(childBoundable.getItem()):Assert.shouldNeverReachHere())}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode)for(var searchBounds$3=arguments[0],node$1=arguments[1],matches$1=arguments[2],childBoundables$1=node$1.getChildBoundables(),i$1=0;i$1<childBoundables$1.size();i$1++){var childBoundable$1=childBoundables$1.get(i$1);this$1.getIntersectsOp().intersects(childBoundable$1.getBounds(),searchBounds$3)&&(childBoundable$1 instanceof AbstractNode?this$1.query(searchBounds$3,childBoundable$1,matches$1):childBoundable$1 instanceof ItemBoundable?matches$1.add(childBoundable$1.getItem()):Assert.shouldNeverReachHere())}}};AbstractSTRtree.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};AbstractSTRtree.prototype.getRoot=function(){return this.build(),this._root};AbstractSTRtree.prototype.remove=function(){var this$1=this;if(arguments.length===2){var searchBounds=arguments[0],item=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),searchBounds)?this.remove(searchBounds,this._root,item):!1}else if(arguments.length===3){var searchBounds$1=arguments[0],node=arguments[1],item$1=arguments[2],found=this.removeItem(node,item$1);if(found)return!0;for(var childToPrune=null,i=node.getChildBoundables().iterator();i.hasNext();){var childBoundable=i.next();if(this$1.getIntersectsOp().intersects(childBoundable.getBounds(),searchBounds$1)&&childBoundable instanceof AbstractNode&&(found=this$1.remove(searchBounds$1,childBoundable,item$1),found)){childToPrune=childBoundable;break}}return childToPrune!==null&&childToPrune.getChildBoundables().isEmpty()&&node.getChildBoundables().remove(childToPrune),found}};AbstractSTRtree.prototype.createHigherLevels=function(boundablesOfALevel,level){Assert.isTrue(!boundablesOfALevel.isEmpty());var parentBoundables=this.createParentBoundables(boundablesOfALevel,level+1);return parentBoundables.size()===1?parentBoundables.get(0):this.createHigherLevels(parentBoundables,level+1)};AbstractSTRtree.prototype.depth=function(){var this$1=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var node=arguments[0],maxChildDepth=0,i=node.getChildBoundables().iterator();i.hasNext();){var childBoundable=i.next();if(childBoundable instanceof AbstractNode){var childDepth=this$1.depth(childBoundable);childDepth>maxChildDepth&&(maxChildDepth=childDepth)}}return maxChildDepth+1}};AbstractSTRtree.prototype.createParentBoundables=function(childBoundables,newLevel){var this$1=this;Assert.isTrue(!childBoundables.isEmpty());var parentBoundables=new ArrayList;parentBoundables.add(this.createNode(newLevel));var sortedChildBoundables=new ArrayList(childBoundables);Collections.sort(sortedChildBoundables,this.getComparator());for(var i=sortedChildBoundables.iterator();i.hasNext();){var childBoundable=i.next();this$1.lastNode(parentBoundables).getChildBoundables().size()===this$1.getNodeCapacity()&&parentBoundables.add(this$1.createNode(newLevel)),this$1.lastNode(parentBoundables).addChildBoundable(childBoundable)}return parentBoundables};AbstractSTRtree.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};AbstractSTRtree.prototype.interfaces_=function(){return[Serializable]};AbstractSTRtree.prototype.getClass=function(){return AbstractSTRtree};AbstractSTRtree.compareDoubles=function(a,b){return a>b?1:a<b?-1:0};staticAccessors$23.IntersectsOp.get=function(){return IntersectsOp};staticAccessors$23.serialVersionUID.get=function(){return-3886435814360241e3};staticAccessors$23.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(AbstractSTRtree,staticAccessors$23);var IntersectsOp=function(){},ItemDistance=function(){};ItemDistance.prototype.distance=function(item1,item2){};ItemDistance.prototype.interfaces_=function(){return[]};ItemDistance.prototype.getClass=function(){return ItemDistance};var STRtree=function(AbstractSTRtree$$1){function STRtree2(nodeCapacity){nodeCapacity=nodeCapacity||STRtree2.DEFAULT_NODE_CAPACITY,AbstractSTRtree$$1.call(this,nodeCapacity)}AbstractSTRtree$$1&&(STRtree2.__proto__=AbstractSTRtree$$1),STRtree2.prototype=Object.create(AbstractSTRtree$$1&&AbstractSTRtree$$1.prototype),STRtree2.prototype.constructor=STRtree2;var staticAccessors2={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return STRtree2.prototype.createParentBoundablesFromVerticalSlices=function(verticalSlices,newLevel){var this$1=this;Assert.isTrue(verticalSlices.length>0);for(var parentBoundables=new ArrayList,i=0;i<verticalSlices.length;i++)parentBoundables.addAll(this$1.createParentBoundablesFromVerticalSlice(verticalSlices[i],newLevel));return parentBoundables},STRtree2.prototype.createNode=function(level){return new STRtreeNode(level)},STRtree2.prototype.size=function(){return arguments.length===0?AbstractSTRtree$$1.prototype.size.call(this):AbstractSTRtree$$1.prototype.size.apply(this,arguments)},STRtree2.prototype.insert=function(){if(arguments.length===2){var itemEnv=arguments[0],item=arguments[1];if(itemEnv.isNull())return null;AbstractSTRtree$$1.prototype.insert.call(this,itemEnv,item)}else return AbstractSTRtree$$1.prototype.insert.apply(this,arguments)},STRtree2.prototype.getIntersectsOp=function(){return STRtree2.intersectsOp},STRtree2.prototype.verticalSlices=function(childBoundables,sliceCount){for(var sliceCapacity=Math.trunc(Math.ceil(childBoundables.size()/sliceCount)),slices=new Array(sliceCount).fill(null),i=childBoundables.iterator(),j=0;j<sliceCount;j++){slices[j]=new ArrayList;for(var boundablesAddedToSlice=0;i.hasNext()&&boundablesAddedToSlice<sliceCapacity;){var childBoundable=i.next();slices[j].add(childBoundable),boundablesAddedToSlice++}}return slices},STRtree2.prototype.query=function(){if(arguments.length===1){var searchEnv=arguments[0];return AbstractSTRtree$$1.prototype.query.call(this,searchEnv)}else if(arguments.length===2){var searchEnv$1=arguments[0],visitor=arguments[1];AbstractSTRtree$$1.prototype.query.call(this,searchEnv$1,visitor)}else if(arguments.length===3){if(hasInterface(arguments[2],ItemVisitor)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var searchBounds=arguments[0],node=arguments[1],visitor$1=arguments[2];AbstractSTRtree$$1.prototype.query.call(this,searchBounds,node,visitor$1)}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Object&&arguments[1]instanceof AbstractNode){var searchBounds$1=arguments[0],node$1=arguments[1],matches=arguments[2];AbstractSTRtree$$1.prototype.query.call(this,searchBounds$1,node$1,matches)}}},STRtree2.prototype.getComparator=function(){return STRtree2.yComparator},STRtree2.prototype.createParentBoundablesFromVerticalSlice=function(childBoundables,newLevel){return AbstractSTRtree$$1.prototype.createParentBoundables.call(this,childBoundables,newLevel)},STRtree2.prototype.remove=function(){if(arguments.length===2){var itemEnv=arguments[0],item=arguments[1];return AbstractSTRtree$$1.prototype.remove.call(this,itemEnv,item)}else return AbstractSTRtree$$1.prototype.remove.apply(this,arguments)},STRtree2.prototype.depth=function(){return arguments.length===0?AbstractSTRtree$$1.prototype.depth.call(this):AbstractSTRtree$$1.prototype.depth.apply(this,arguments)},STRtree2.prototype.createParentBoundables=function(childBoundables,newLevel){Assert.isTrue(!childBoundables.isEmpty());var minLeafCount=Math.trunc(Math.ceil(childBoundables.size()/this.getNodeCapacity())),sortedChildBoundables=new ArrayList(childBoundables);Collections.sort(sortedChildBoundables,STRtree2.xComparator);var verticalSlices=this.verticalSlices(sortedChildBoundables,Math.trunc(Math.ceil(Math.sqrt(minLeafCount))));return this.createParentBoundablesFromVerticalSlices(verticalSlices,newLevel)},STRtree2.prototype.nearestNeighbour=function(){if(arguments.length===1){if(hasInterface(arguments[0],ItemDistance)){var itemDist=arguments[0],bp=new BoundablePair(this.getRoot(),this.getRoot(),itemDist);return this.nearestNeighbour(bp)}else if(arguments[0]instanceof BoundablePair){var initBndPair=arguments[0];return this.nearestNeighbour(initBndPair,Double.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof STRtree2&&hasInterface(arguments[1],ItemDistance)){var tree=arguments[0],itemDist$1=arguments[1],bp$1=new BoundablePair(this.getRoot(),tree.getRoot(),itemDist$1);return this.nearestNeighbour(bp$1)}else if(arguments[0]instanceof BoundablePair&&typeof arguments[1]=="number"){var initBndPair$1=arguments[0],maxDistance=arguments[1],distanceLowerBound=maxDistance,minPair=null,priQ=new PriorityQueue;for(priQ.add(initBndPair$1);!priQ.isEmpty()&&distanceLowerBound>0;){var bndPair=priQ.poll(),currentDistance=bndPair.getDistance();if(currentDistance>=distanceLowerBound)break;bndPair.isLeaves()?(distanceLowerBound=currentDistance,minPair=bndPair):bndPair.expandToQueue(priQ,distanceLowerBound)}return[minPair.getBoundable(0).getItem(),minPair.getBoundable(1).getItem()]}}else if(arguments.length===3){var env=arguments[0],item=arguments[1],itemDist$2=arguments[2],bnd=new ItemBoundable(env,item),bp$2=new BoundablePair(this.getRoot(),bnd,itemDist$2);return this.nearestNeighbour(bp$2)[0]}},STRtree2.prototype.interfaces_=function(){return[SpatialIndex,Serializable]},STRtree2.prototype.getClass=function(){return STRtree2},STRtree2.centreX=function(e){return STRtree2.avg(e.getMinX(),e.getMaxX())},STRtree2.avg=function(a,b){return(a+b)/2},STRtree2.centreY=function(e){return STRtree2.avg(e.getMinY(),e.getMaxY())},staticAccessors2.STRtreeNode.get=function(){return STRtreeNode},staticAccessors2.serialVersionUID.get=function(){return 0x39920f7d5f261e0},staticAccessors2.xComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(o1,o2){return AbstractSTRtree$$1.compareDoubles(STRtree2.centreX(o1.getBounds()),STRtree2.centreX(o2.getBounds()))}}},staticAccessors2.yComparator.get=function(){return{interfaces_:function(){return[Comparator]},compare:function(o1,o2){return AbstractSTRtree$$1.compareDoubles(STRtree2.centreY(o1.getBounds()),STRtree2.centreY(o2.getBounds()))}}},staticAccessors2.intersectsOp.get=function(){return{interfaces_:function(){return[AbstractSTRtree$$1.IntersectsOp]},intersects:function(aBounds,bBounds){return aBounds.intersects(bBounds)}}},staticAccessors2.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(STRtree2,staticAccessors2),STRtree2}(AbstractSTRtree),STRtreeNode=function(AbstractNode$$1){function STRtreeNode2(){var level=arguments[0];AbstractNode$$1.call(this,level)}return AbstractNode$$1&&(STRtreeNode2.__proto__=AbstractNode$$1),STRtreeNode2.prototype=Object.create(AbstractNode$$1&&AbstractNode$$1.prototype),STRtreeNode2.prototype.constructor=STRtreeNode2,STRtreeNode2.prototype.computeBounds=function(){for(var bounds=null,i=this.getChildBoundables().iterator();i.hasNext();){var childBoundable=i.next();bounds===null?bounds=new Envelope(childBoundable.getBounds()):bounds.expandToInclude(childBoundable.getBounds())}return bounds},STRtreeNode2.prototype.interfaces_=function(){return[]},STRtreeNode2.prototype.getClass=function(){return STRtreeNode2},STRtreeNode2}(AbstractNode),SegmentPointComparator=function(){};SegmentPointComparator.prototype.interfaces_=function(){return[]};SegmentPointComparator.prototype.getClass=function(){return SegmentPointComparator};SegmentPointComparator.relativeSign=function(x02,x12){return x02<x12?-1:x02>x12?1:0};SegmentPointComparator.compare=function(octant2,p0,p1){if(p0.equals2D(p1))return 0;var xSign=SegmentPointComparator.relativeSign(p0.x,p1.x),ySign=SegmentPointComparator.relativeSign(p0.y,p1.y);switch(octant2){case 0:return SegmentPointComparator.compareValue(xSign,ySign);case 1:return SegmentPointComparator.compareValue(ySign,xSign);case 2:return SegmentPointComparator.compareValue(ySign,-xSign);case 3:return SegmentPointComparator.compareValue(-xSign,ySign);case 4:return SegmentPointComparator.compareValue(-xSign,-ySign);case 5:return SegmentPointComparator.compareValue(-ySign,-xSign);case 6:return SegmentPointComparator.compareValue(-ySign,xSign);case 7:return SegmentPointComparator.compareValue(xSign,-ySign);default:}return Assert.shouldNeverReachHere("invalid octant value"),0};SegmentPointComparator.compareValue=function(compareSign0,compareSign1){return compareSign0<0?-1:compareSign0>0?1:compareSign1<0?-1:compareSign1>0?1:0};var SegmentNode=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var segString=arguments[0],coord=arguments[1],segmentIndex=arguments[2],segmentOctant=arguments[3];this._segString=segString,this.coord=new Coordinate(coord),this.segmentIndex=segmentIndex,this._segmentOctant=segmentOctant,this._isInterior=!coord.equals2D(segString.getCoordinate(segmentIndex))};SegmentNode.prototype.getCoordinate=function(){return this.coord};SegmentNode.prototype.print=function(out){out.print(this.coord),out.print(" seg # = "+this.segmentIndex)};SegmentNode.prototype.compareTo=function(obj){var other=obj;return this.segmentIndex<other.segmentIndex?-1:this.segmentIndex>other.segmentIndex?1:this.coord.equals2D(other.coord)?0:SegmentPointComparator.compare(this._segmentOctant,this.coord,other.coord)};SegmentNode.prototype.isEndPoint=function(maxSegmentIndex){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===maxSegmentIndex};SegmentNode.prototype.isInterior=function(){return this._isInterior};SegmentNode.prototype.interfaces_=function(){return[Comparable]};SegmentNode.prototype.getClass=function(){return SegmentNode};var SegmentNodeList=function(){this._nodeMap=new TreeMap,this._edge=null;var edge=arguments[0];this._edge=edge};SegmentNodeList.prototype.getSplitCoordinates=function(){var this$1=this,coordList=new CoordinateList;this.addEndpoints();for(var it=this.iterator(),eiPrev=it.next();it.hasNext();){var ei=it.next();this$1.addEdgeCoordinates(eiPrev,ei,coordList),eiPrev=ei}return coordList.toCoordinateArray()};SegmentNodeList.prototype.addCollapsedNodes=function(){var this$1=this,collapsedVertexIndexes=new ArrayList;this.findCollapsesFromInsertedNodes(collapsedVertexIndexes),this.findCollapsesFromExistingVertices(collapsedVertexIndexes);for(var it=collapsedVertexIndexes.iterator();it.hasNext();){var vertexIndex=it.next().intValue();this$1.add(this$1._edge.getCoordinate(vertexIndex),vertexIndex)}};SegmentNodeList.prototype.print=function(out){out.println("Intersections:");for(var it=this.iterator();it.hasNext();){var ei=it.next();ei.print(out)}};SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(collapsedVertexIndexes){for(var this$1=this,i=0;i<this._edge.size()-2;i++){var p0=this$1._edge.getCoordinate(i),p2=this$1._edge.getCoordinate(i+2);p0.equals2D(p2)&&collapsedVertexIndexes.add(new Integer(i+1))}};SegmentNodeList.prototype.addEdgeCoordinates=function(ei0,ei1,coordList){var this$1=this,lastSegStartPt=this._edge.getCoordinate(ei1.segmentIndex),useIntPt1=ei1.isInterior()||!ei1.coord.equals2D(lastSegStartPt);coordList.add(new Coordinate(ei0.coord),!1);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++)coordList.add(this$1._edge.getCoordinate(i));useIntPt1&&coordList.add(new Coordinate(ei1.coord))};SegmentNodeList.prototype.iterator=function(){return this._nodeMap.values().iterator()};SegmentNodeList.prototype.addSplitEdges=function(edgeList){var this$1=this;this.addEndpoints(),this.addCollapsedNodes();for(var it=this.iterator(),eiPrev=it.next();it.hasNext();){var ei=it.next(),newEdge=this$1.createSplitEdge(eiPrev,ei);edgeList.add(newEdge),eiPrev=ei}};SegmentNodeList.prototype.findCollapseIndex=function(ei0,ei1,collapsedVertexIndex){if(!ei0.coord.equals2D(ei1.coord))return!1;var numVerticesBetween=ei1.segmentIndex-ei0.segmentIndex;return ei1.isInterior()||numVerticesBetween--,numVerticesBetween===1?(collapsedVertexIndex[0]=ei0.segmentIndex+1,!0):!1};SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(collapsedVertexIndexes){for(var this$1=this,collapsedVertexIndex=new Array(1).fill(null),it=this.iterator(),eiPrev=it.next();it.hasNext();){var ei=it.next(),isCollapsed=this$1.findCollapseIndex(eiPrev,ei,collapsedVertexIndex);isCollapsed&&collapsedVertexIndexes.add(new Integer(collapsedVertexIndex[0])),eiPrev=ei}};SegmentNodeList.prototype.getEdge=function(){return this._edge};SegmentNodeList.prototype.addEndpoints=function(){var maxSegIndex=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(maxSegIndex),maxSegIndex)};SegmentNodeList.prototype.createSplitEdge=function(ei0,ei1){var this$1=this,npts=ei1.segmentIndex-ei0.segmentIndex+2,lastSegStartPt=this._edge.getCoordinate(ei1.segmentIndex),useIntPt1=ei1.isInterior()||!ei1.coord.equals2D(lastSegStartPt);useIntPt1||npts--;var pts=new Array(npts).fill(null),ipt=0;pts[ipt++]=new Coordinate(ei0.coord);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++)pts[ipt++]=this$1._edge.getCoordinate(i);return useIntPt1&&(pts[ipt]=new Coordinate(ei1.coord)),new NodedSegmentString(pts,this._edge.getData())};SegmentNodeList.prototype.add=function(intPt,segmentIndex){var eiNew=new SegmentNode(this._edge,intPt,segmentIndex,this._edge.getSegmentOctant(segmentIndex)),ei=this._nodeMap.get(eiNew);return ei!==null?(Assert.isTrue(ei.coord.equals2D(intPt),"Found equal nodes with different coordinates"),ei):(this._nodeMap.put(eiNew,eiNew),eiNew)};SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(splitEdges){var edgePts=this._edge.getCoordinates(),split0=splitEdges.get(0),pt0=split0.getCoordinate(0);if(!pt0.equals2D(edgePts[0]))throw new RuntimeException("bad split edge start point at "+pt0);var splitn=splitEdges.get(splitEdges.size()-1),splitnPts=splitn.getCoordinates(),ptn=splitnPts[splitnPts.length-1];if(!ptn.equals2D(edgePts[edgePts.length-1]))throw new RuntimeException("bad split edge end point at "+ptn)};SegmentNodeList.prototype.interfaces_=function(){return[]};SegmentNodeList.prototype.getClass=function(){return SegmentNodeList};var Octant=function(){};Octant.prototype.interfaces_=function(){return[]};Octant.prototype.getClass=function(){return Octant};Octant.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var dx=arguments[0],dy=arguments[1];if(dx===0&&dy===0)throw new IllegalArgumentException("Cannot compute the octant for point ( "+dx+", "+dy+" )");var adx=Math.abs(dx),ady=Math.abs(dy);return dx>=0?dy>=0?adx>=ady?0:1:adx>=ady?7:6:dy>=0?adx>=ady?3:2:adx>=ady?4:5}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Coordinate){var p0=arguments[0],p1=arguments[1],dx$1=p1.x-p0.x,dy$1=p1.y-p0.y;if(dx$1===0&&dy$1===0)throw new IllegalArgumentException("Cannot compute the octant for two identical points "+p0);return Octant.octant(dx$1,dy$1)}};var SegmentString=function(){};SegmentString.prototype.getCoordinates=function(){};SegmentString.prototype.size=function(){};SegmentString.prototype.getCoordinate=function(i){};SegmentString.prototype.isClosed=function(){};SegmentString.prototype.setData=function(data){};SegmentString.prototype.getData=function(){};SegmentString.prototype.interfaces_=function(){return[]};SegmentString.prototype.getClass=function(){return SegmentString};var NodableSegmentString=function(){};NodableSegmentString.prototype.addIntersection=function(intPt,segmentIndex){};NodableSegmentString.prototype.interfaces_=function(){return[SegmentString]};NodableSegmentString.prototype.getClass=function(){return NodableSegmentString};var NodedSegmentString=function(){this._nodeList=new SegmentNodeList(this),this._pts=null,this._data=null;var pts=arguments[0],data=arguments[1];this._pts=pts,this._data=data};NodedSegmentString.prototype.getCoordinates=function(){return this._pts};NodedSegmentString.prototype.size=function(){return this._pts.length};NodedSegmentString.prototype.getCoordinate=function(i){return this._pts[i]};NodedSegmentString.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};NodedSegmentString.prototype.getSegmentOctant=function(index){return index===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(index),this.getCoordinate(index+1))};NodedSegmentString.prototype.setData=function(data){this._data=data};NodedSegmentString.prototype.safeOctant=function(p0,p1){return p0.equals2D(p1)?0:Octant.octant(p0,p1)};NodedSegmentString.prototype.getData=function(){return this._data};NodedSegmentString.prototype.addIntersection=function(){if(arguments.length===2){var intPt$1=arguments[0],segmentIndex=arguments[1];this.addIntersectionNode(intPt$1,segmentIndex)}else if(arguments.length===4){var li=arguments[0],segmentIndex$1=arguments[1],intIndex=arguments[3],intPt=new Coordinate(li.getIntersection(intIndex));this.addIntersection(intPt,segmentIndex$1)}};NodedSegmentString.prototype.toString=function(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};NodedSegmentString.prototype.getNodeList=function(){return this._nodeList};NodedSegmentString.prototype.addIntersectionNode=function(intPt,segmentIndex){var normalizedSegmentIndex=segmentIndex,nextSegIndex=normalizedSegmentIndex+1;if(nextSegIndex<this._pts.length){var nextPt=this._pts[nextSegIndex];intPt.equals2D(nextPt)&&(normalizedSegmentIndex=nextSegIndex)}var ei=this._nodeList.add(intPt,normalizedSegmentIndex);return ei};NodedSegmentString.prototype.addIntersections=function(li,segmentIndex,geomIndex){for(var this$1=this,i=0;i<li.getIntersectionNum();i++)this$1.addIntersection(li,segmentIndex,geomIndex,i)};NodedSegmentString.prototype.interfaces_=function(){return[NodableSegmentString]};NodedSegmentString.prototype.getClass=function(){return NodedSegmentString};NodedSegmentString.getNodedSubstrings=function(){if(arguments.length===1){var segStrings=arguments[0],resultEdgelist=new ArrayList;return NodedSegmentString.getNodedSubstrings(segStrings,resultEdgelist),resultEdgelist}else if(arguments.length===2)for(var segStrings$1=arguments[0],resultEdgelist$1=arguments[1],i=segStrings$1.iterator();i.hasNext();){var ss=i.next();ss.getNodeList().addSplitEdges(resultEdgelist$1)}};var LineSegment=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new Coordinate,this.p1=new Coordinate;else if(arguments.length===1){var ls=arguments[0];this.p0=new Coordinate(ls.p0),this.p1=new Coordinate(ls.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var x02=arguments[0],y0=arguments[1],x12=arguments[2],y1=arguments[3];this.p0=new Coordinate(x02,y0),this.p1=new Coordinate(x12,y1)}},staticAccessors$24={serialVersionUID:{configurable:!0}};LineSegment.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};LineSegment.prototype.orientationIndex=function(){if(arguments[0]instanceof LineSegment){var seg=arguments[0],orient0=CGAlgorithms.orientationIndex(this.p0,this.p1,seg.p0),orient1=CGAlgorithms.orientationIndex(this.p0,this.p1,seg.p1);return orient0>=0&&orient1>=0||orient0<=0&&orient1<=0?Math.max(orient0,orient1):0}else if(arguments[0]instanceof Coordinate){var p=arguments[0];return CGAlgorithms.orientationIndex(this.p0,this.p1,p)}};LineSegment.prototype.toGeometry=function(geomFactory){return geomFactory.createLineString([this.p0,this.p1])};LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x};LineSegment.prototype.equals=function(o){if(!(o instanceof LineSegment))return!1;var other=o;return this.p0.equals(other.p0)&&this.p1.equals(other.p1)};LineSegment.prototype.intersection=function(line){var li=new RobustLineIntersector;return li.computeIntersection(this.p0,this.p1,line.p0,line.p1),li.hasIntersection()?li.getIntersection(0):null};LineSegment.prototype.project=function(){if(arguments[0]instanceof Coordinate){var p=arguments[0];if(p.equals(this.p0)||p.equals(this.p1))return new Coordinate(p);var r=this.projectionFactor(p),coord=new Coordinate;return coord.x=this.p0.x+r*(this.p1.x-this.p0.x),coord.y=this.p0.y+r*(this.p1.y-this.p0.y),coord}else if(arguments[0]instanceof LineSegment){var seg=arguments[0],pf0=this.projectionFactor(seg.p0),pf1=this.projectionFactor(seg.p1);if(pf0>=1&&pf1>=1||pf0<=0&&pf1<=0)return null;var newp0=this.project(seg.p0);pf0<0&&(newp0=this.p0),pf0>1&&(newp0=this.p1);var newp1=this.project(seg.p1);return pf1<0&&(newp1=this.p0),pf1>1&&(newp1=this.p1),new LineSegment(newp0,newp1)}};LineSegment.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};LineSegment.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};LineSegment.prototype.getCoordinate=function(i){return i===0?this.p0:this.p1};LineSegment.prototype.distancePerpendicular=function(p){return CGAlgorithms.distancePointLinePerpendicular(p,this.p0,this.p1)};LineSegment.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};LineSegment.prototype.midPoint=function(){return LineSegment.midPoint(this.p0,this.p1)};LineSegment.prototype.projectionFactor=function(p){if(p.equals(this.p0))return 0;if(p.equals(this.p1))return 1;var dx=this.p1.x-this.p0.x,dy=this.p1.y-this.p0.y,len=dx*dx+dy*dy;if(len<=0)return Double.NaN;var r=((p.x-this.p0.x)*dx+(p.y-this.p0.y)*dy)/len;return r};LineSegment.prototype.closestPoints=function(line){var intPt=this.intersection(line);if(intPt!==null)return[intPt,intPt];var closestPt=new Array(2).fill(null),minDistance=Double.MAX_VALUE,dist=null,close00=this.closestPoint(line.p0);minDistance=close00.distance(line.p0),closestPt[0]=close00,closestPt[1]=line.p0;var close01=this.closestPoint(line.p1);dist=close01.distance(line.p1),dist<minDistance&&(minDistance=dist,closestPt[0]=close01,closestPt[1]=line.p1);var close10=line.closestPoint(this.p0);dist=close10.distance(this.p0),dist<minDistance&&(minDistance=dist,closestPt[0]=this.p0,closestPt[1]=close10);var close11=line.closestPoint(this.p1);return dist=close11.distance(this.p1),dist<minDistance&&(minDistance=dist,closestPt[0]=this.p1,closestPt[1]=close11),closestPt};LineSegment.prototype.closestPoint=function(p){var factor=this.projectionFactor(p);if(factor>0&&factor<1)return this.project(p);var dist0=this.p0.distance(p),dist1=this.p1.distance(p);return dist0<dist1?this.p0:this.p1};LineSegment.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};LineSegment.prototype.getLength=function(){return this.p0.distance(this.p1)};LineSegment.prototype.compareTo=function(o){var other=o,comp0=this.p0.compareTo(other.p0);return comp0!==0?comp0:this.p1.compareTo(other.p1)};LineSegment.prototype.reverse=function(){var temp2=this.p0;this.p0=this.p1,this.p1=temp2};LineSegment.prototype.equalsTopo=function(other){return this.p0.equals(other.p0)&&(this.p1.equals(other.p1)||this.p0.equals(other.p1))&&this.p1.equals(other.p0)};LineSegment.prototype.lineIntersection=function(line){try{var intPt=HCoordinate.intersection(this.p0,this.p1,line.p0,line.p1);return intPt}catch(ex){if(!(ex instanceof NotRepresentableException))throw ex}finally{}return null};LineSegment.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};LineSegment.prototype.pointAlongOffset=function(segmentLengthFraction,offsetDistance){var segx=this.p0.x+segmentLengthFraction*(this.p1.x-this.p0.x),segy=this.p0.y+segmentLengthFraction*(this.p1.y-this.p0.y),dx=this.p1.x-this.p0.x,dy=this.p1.y-this.p0.y,len=Math.sqrt(dx*dx+dy*dy),ux=0,uy=0;if(offsetDistance!==0){if(len<=0)throw new Error("Cannot compute offset from zero-length line segment");ux=offsetDistance*dx/len,uy=offsetDistance*dy/len}var offsetx=segx-uy,offsety=segy+ux,coord=new Coordinate(offsetx,offsety);return coord};LineSegment.prototype.setCoordinates=function(){if(arguments.length===1){var ls=arguments[0];this.setCoordinates(ls.p0,ls.p1)}else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];this.p0.x=p0.x,this.p0.y=p0.y,this.p1.x=p1.x,this.p1.y=p1.y}};LineSegment.prototype.segmentFraction=function(inputPt){var segFrac=this.projectionFactor(inputPt);return segFrac<0?segFrac=0:(segFrac>1||Double.isNaN(segFrac))&&(segFrac=1),segFrac};LineSegment.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};LineSegment.prototype.distance=function(){if(arguments[0]instanceof LineSegment){var ls=arguments[0];return CGAlgorithms.distanceLineLine(this.p0,this.p1,ls.p0,ls.p1)}else if(arguments[0]instanceof Coordinate){var p=arguments[0];return CGAlgorithms.distancePointLine(p,this.p0,this.p1)}};LineSegment.prototype.pointAlong=function(segmentLengthFraction){var coord=new Coordinate;return coord.x=this.p0.x+segmentLengthFraction*(this.p1.x-this.p0.x),coord.y=this.p0.y+segmentLengthFraction*(this.p1.y-this.p0.y),coord};LineSegment.prototype.hashCode=function(){var bits0=Double.doubleToLongBits(this.p0.x);bits0^=Double.doubleToLongBits(this.p0.y)*31;var hash0=Math.trunc(bits0)^Math.trunc(bits0>>32),bits1=Double.doubleToLongBits(this.p1.x);bits1^=Double.doubleToLongBits(this.p1.y)*31;var hash1=Math.trunc(bits1)^Math.trunc(bits1>>32);return hash0^hash1};LineSegment.prototype.interfaces_=function(){return[Comparable,Serializable]};LineSegment.prototype.getClass=function(){return LineSegment};LineSegment.midPoint=function(p0,p1){return new Coordinate((p0.x+p1.x)/2,(p0.y+p1.y)/2)};staticAccessors$24.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(LineSegment,staticAccessors$24);var MonotoneChainOverlapAction=function(){this.tempEnv1=new Envelope,this.tempEnv2=new Envelope,this._overlapSeg1=new LineSegment,this._overlapSeg2=new LineSegment};MonotoneChainOverlapAction.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var mc1=arguments[0],start1=arguments[1],mc2=arguments[2],start2=arguments[3];mc1.getLineSegment(start1,this._overlapSeg1),mc2.getLineSegment(start2,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};MonotoneChainOverlapAction.prototype.interfaces_=function(){return[]};MonotoneChainOverlapAction.prototype.getClass=function(){return MonotoneChainOverlapAction};var MonotoneChain=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var pts=arguments[0],start=arguments[1],end=arguments[2],context=arguments[3];this._pts=pts,this._start=start,this._end=end,this._context=context};MonotoneChain.prototype.getLineSegment=function(index,ls){ls.p0=this._pts[index],ls.p1=this._pts[index+1]};MonotoneChain.prototype.computeSelect=function(searchEnv,start0,end0,mcs){var p0=this._pts[start0],p1=this._pts[end0];if(mcs.tempEnv1.init(p0,p1),end0-start0===1)return mcs.select(this,start0),null;if(!searchEnv.intersects(mcs.tempEnv1))return null;var mid=Math.trunc((start0+end0)/2);start0<mid&&this.computeSelect(searchEnv,start0,mid,mcs),mid<end0&&this.computeSelect(searchEnv,mid,end0,mcs)};MonotoneChain.prototype.getCoordinates=function(){for(var this$1=this,coord=new Array(this._end-this._start+1).fill(null),index=0,i=this._start;i<=this._end;i++)coord[index++]=this$1._pts[i];return coord};MonotoneChain.prototype.computeOverlaps=function(mc,mco){this.computeOverlapsInternal(this._start,this._end,mc,mc._start,mc._end,mco)};MonotoneChain.prototype.setId=function(id){this._id=id};MonotoneChain.prototype.select=function(searchEnv,mcs){this.computeSelect(searchEnv,this._start,this._end,mcs)};MonotoneChain.prototype.getEnvelope=function(){if(this._env===null){var p0=this._pts[this._start],p1=this._pts[this._end];this._env=new Envelope(p0,p1)}return this._env};MonotoneChain.prototype.getEndIndex=function(){return this._end};MonotoneChain.prototype.getStartIndex=function(){return this._start};MonotoneChain.prototype.getContext=function(){return this._context};MonotoneChain.prototype.getId=function(){return this._id};MonotoneChain.prototype.computeOverlapsInternal=function(start0,end0,mc,start1,end1,mco){var p002=this._pts[start0],p012=this._pts[end0],p102=mc._pts[start1],p112=mc._pts[end1];if(end0-start0===1&&end1-start1===1)return mco.overlap(this,start0,mc,start1),null;if(mco.tempEnv1.init(p002,p012),mco.tempEnv2.init(p102,p112),!mco.tempEnv1.intersects(mco.tempEnv2))return null;var mid0=Math.trunc((start0+end0)/2),mid1=Math.trunc((start1+end1)/2);start0<mid0&&(start1<mid1&&this.computeOverlapsInternal(start0,mid0,mc,start1,mid1,mco),mid1<end1&&this.computeOverlapsInternal(start0,mid0,mc,mid1,end1,mco)),mid0<end0&&(start1<mid1&&this.computeOverlapsInternal(mid0,end0,mc,start1,mid1,mco),mid1<end1&&this.computeOverlapsInternal(mid0,end0,mc,mid1,end1,mco))};MonotoneChain.prototype.interfaces_=function(){return[]};MonotoneChain.prototype.getClass=function(){return MonotoneChain};var MonotoneChainBuilder=function(){};MonotoneChainBuilder.prototype.interfaces_=function(){return[]};MonotoneChainBuilder.prototype.getClass=function(){return MonotoneChainBuilder};MonotoneChainBuilder.getChainStartIndices=function(pts){var start=0,startIndexList=new ArrayList;startIndexList.add(new Integer(start));do{var last=MonotoneChainBuilder.findChainEnd(pts,start);startIndexList.add(new Integer(last)),start=last}while(start<pts.length-1);var startIndex=MonotoneChainBuilder.toIntArray(startIndexList);return startIndex};MonotoneChainBuilder.findChainEnd=function(pts,start){for(var safeStart=start;safeStart<pts.length-1&&pts[safeStart].equals2D(pts[safeStart+1]);)safeStart++;if(safeStart>=pts.length-1)return pts.length-1;for(var chainQuad=Quadrant.quadrant(pts[safeStart],pts[safeStart+1]),last=start+1;last<pts.length;){if(!pts[last-1].equals2D(pts[last])){var quad=Quadrant.quadrant(pts[last-1],pts[last]);if(quad!==chainQuad)break}last++}return last-1};MonotoneChainBuilder.getChains=function(){if(arguments.length===1){var pts=arguments[0];return MonotoneChainBuilder.getChains(pts,null)}else if(arguments.length===2){for(var pts$1=arguments[0],context=arguments[1],mcList=new ArrayList,startIndex=MonotoneChainBuilder.getChainStartIndices(pts$1),i=0;i<startIndex.length-1;i++){var mc=new MonotoneChain(pts$1,startIndex[i],startIndex[i+1],context);mcList.add(mc)}return mcList}};MonotoneChainBuilder.toIntArray=function(list){for(var array2=new Array(list.size()).fill(null),i=0;i<array2.length;i++)array2[i]=list.get(i).intValue();return array2};var Noder=function(){};Noder.prototype.computeNodes=function(segStrings){};Noder.prototype.getNodedSubstrings=function(){};Noder.prototype.interfaces_=function(){return[]};Noder.prototype.getClass=function(){return Noder};var SinglePassNoder=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var segInt=arguments[0];this.setSegmentIntersector(segInt)}}};SinglePassNoder.prototype.setSegmentIntersector=function(segInt){this._segInt=segInt};SinglePassNoder.prototype.interfaces_=function(){return[Noder]};SinglePassNoder.prototype.getClass=function(){return SinglePassNoder};var MCIndexNoder=function(SinglePassNoder$$1){function MCIndexNoder2(si){si?SinglePassNoder$$1.call(this,si):SinglePassNoder$$1.call(this),this._monoChains=new ArrayList,this._index=new STRtree,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}SinglePassNoder$$1&&(MCIndexNoder2.__proto__=SinglePassNoder$$1),MCIndexNoder2.prototype=Object.create(SinglePassNoder$$1&&SinglePassNoder$$1.prototype),MCIndexNoder2.prototype.constructor=MCIndexNoder2;var staticAccessors2={SegmentOverlapAction:{configurable:!0}};return MCIndexNoder2.prototype.getMonotoneChains=function(){return this._monoChains},MCIndexNoder2.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)},MCIndexNoder2.prototype.getIndex=function(){return this._index},MCIndexNoder2.prototype.add=function(segStr){for(var this$1=this,segChains=MonotoneChainBuilder.getChains(segStr.getCoordinates(),segStr),i=segChains.iterator();i.hasNext();){var mc=i.next();mc.setId(this$1._idCounter++),this$1._index.insert(mc.getEnvelope(),mc),this$1._monoChains.add(mc)}},MCIndexNoder2.prototype.computeNodes=function(inputSegStrings){var this$1=this;this._nodedSegStrings=inputSegStrings;for(var i=inputSegStrings.iterator();i.hasNext();)this$1.add(i.next());this.intersectChains()},MCIndexNoder2.prototype.intersectChains=function(){for(var this$1=this,overlapAction=new SegmentOverlapAction(this._segInt),i=this._monoChains.iterator();i.hasNext();)for(var queryChain=i.next(),overlapChains=this$1._index.query(queryChain.getEnvelope()),j=overlapChains.iterator();j.hasNext();){var testChain=j.next();if(testChain.getId()>queryChain.getId()&&(queryChain.computeOverlaps(testChain,overlapAction),this$1._nOverlaps++),this$1._segInt.isDone())return null}},MCIndexNoder2.prototype.interfaces_=function(){return[]},MCIndexNoder2.prototype.getClass=function(){return MCIndexNoder2},staticAccessors2.SegmentOverlapAction.get=function(){return SegmentOverlapAction},Object.defineProperties(MCIndexNoder2,staticAccessors2),MCIndexNoder2}(SinglePassNoder),SegmentOverlapAction=function(MonotoneChainOverlapAction$$1){function SegmentOverlapAction2(){MonotoneChainOverlapAction$$1.call(this),this._si=null;var si=arguments[0];this._si=si}return MonotoneChainOverlapAction$$1&&(SegmentOverlapAction2.__proto__=MonotoneChainOverlapAction$$1),SegmentOverlapAction2.prototype=Object.create(MonotoneChainOverlapAction$$1&&MonotoneChainOverlapAction$$1.prototype),SegmentOverlapAction2.prototype.constructor=SegmentOverlapAction2,SegmentOverlapAction2.prototype.overlap=function(){if(arguments.length===4){var mc1=arguments[0],start1=arguments[1],mc2=arguments[2],start2=arguments[3],ss1=mc1.getContext(),ss2=mc2.getContext();this._si.processIntersections(ss1,start1,ss2,start2)}else return MonotoneChainOverlapAction$$1.prototype.overlap.apply(this,arguments)},SegmentOverlapAction2.prototype.interfaces_=function(){return[]},SegmentOverlapAction2.prototype.getClass=function(){return SegmentOverlapAction2},SegmentOverlapAction2}(MonotoneChainOverlapAction),BufferParameters=function BufferParameters2(){if(this._quadrantSegments=BufferParameters2.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=BufferParameters2.CAP_ROUND,this._joinStyle=BufferParameters2.JOIN_ROUND,this._mitreLimit=BufferParameters2.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=BufferParameters2.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var quadrantSegments=arguments[0];this.setQuadrantSegments(quadrantSegments)}else if(arguments.length===2){var quadrantSegments$1=arguments[0],endCapStyle=arguments[1];this.setQuadrantSegments(quadrantSegments$1),this.setEndCapStyle(endCapStyle)}else if(arguments.length===4){var quadrantSegments$2=arguments[0],endCapStyle$1=arguments[1],joinStyle=arguments[2],mitreLimit=arguments[3];this.setQuadrantSegments(quadrantSegments$2),this.setEndCapStyle(endCapStyle$1),this.setJoinStyle(joinStyle),this.setMitreLimit(mitreLimit)}}},staticAccessors$25={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};BufferParameters.prototype.getEndCapStyle=function(){return this._endCapStyle};BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided};BufferParameters.prototype.setQuadrantSegments=function(quadSegs){this._quadrantSegments=quadSegs,this._quadrantSegments===0&&(this._joinStyle=BufferParameters.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=BufferParameters.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),quadSegs<=0&&(this._quadrantSegments=1),this._joinStyle!==BufferParameters.JOIN_ROUND&&(this._quadrantSegments=BufferParameters.DEFAULT_QUADRANT_SEGMENTS)};BufferParameters.prototype.getJoinStyle=function(){return this._joinStyle};BufferParameters.prototype.setJoinStyle=function(joinStyle){this._joinStyle=joinStyle};BufferParameters.prototype.setSimplifyFactor=function(simplifyFactor){this._simplifyFactor=simplifyFactor<0?0:simplifyFactor};BufferParameters.prototype.getSimplifyFactor=function(){return this._simplifyFactor};BufferParameters.prototype.getQuadrantSegments=function(){return this._quadrantSegments};BufferParameters.prototype.setEndCapStyle=function(endCapStyle){this._endCapStyle=endCapStyle};BufferParameters.prototype.getMitreLimit=function(){return this._mitreLimit};BufferParameters.prototype.setMitreLimit=function(mitreLimit){this._mitreLimit=mitreLimit};BufferParameters.prototype.setSingleSided=function(isSingleSided2){this._isSingleSided=isSingleSided2};BufferParameters.prototype.interfaces_=function(){return[]};BufferParameters.prototype.getClass=function(){return BufferParameters};BufferParameters.bufferDistanceError=function(quadSegs){var alpha=Math.PI/2/quadSegs;return 1-Math.cos(alpha/2)};staticAccessors$25.CAP_ROUND.get=function(){return 1};staticAccessors$25.CAP_FLAT.get=function(){return 2};staticAccessors$25.CAP_SQUARE.get=function(){return 3};staticAccessors$25.JOIN_ROUND.get=function(){return 1};staticAccessors$25.JOIN_MITRE.get=function(){return 2};staticAccessors$25.JOIN_BEVEL.get=function(){return 3};staticAccessors$25.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};staticAccessors$25.DEFAULT_MITRE_LIMIT.get=function(){return 5};staticAccessors$25.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(BufferParameters,staticAccessors$25);var BufferInputLineSimplifier=function(inputLine){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=CGAlgorithms.COUNTERCLOCKWISE,this._inputLine=inputLine||null},staticAccessors$26={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};BufferInputLineSimplifier.prototype.isDeletable=function(i0,i1,i2,distanceTol){var p0=this._inputLine[i0],p1=this._inputLine[i1],p2=this._inputLine[i2];return!this.isConcave(p0,p1,p2)||!this.isShallow(p0,p1,p2,distanceTol)?!1:this.isShallowSampled(p0,p1,i0,i2,distanceTol)};BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){for(var this$1=this,index=1,midIndex=this.findNextNonDeletedIndex(index),lastIndex=this.findNextNonDeletedIndex(midIndex),isChanged=!1;lastIndex<this._inputLine.length;){var isMiddleVertexDeleted=!1;this$1.isDeletable(index,midIndex,lastIndex,this$1._distanceTol)&&(this$1._isDeleted[midIndex]=BufferInputLineSimplifier.DELETE,isMiddleVertexDeleted=!0,isChanged=!0),isMiddleVertexDeleted?index=lastIndex:index=midIndex,midIndex=this$1.findNextNonDeletedIndex(index),lastIndex=this$1.findNextNonDeletedIndex(midIndex)}return isChanged};BufferInputLineSimplifier.prototype.isShallowConcavity=function(p0,p1,p2,distanceTol){var orientation3=CGAlgorithms.computeOrientation(p0,p1,p2),isAngleToSimplify=orientation3===this._angleOrientation;if(!isAngleToSimplify)return!1;var dist=CGAlgorithms.distancePointLine(p1,p0,p2);return dist<distanceTol};BufferInputLineSimplifier.prototype.isShallowSampled=function(p0,p2,i0,i2,distanceTol){var this$1=this,inc=Math.trunc((i2-i0)/BufferInputLineSimplifier.NUM_PTS_TO_CHECK);inc<=0&&(inc=1);for(var i=i0;i<i2;i+=inc)if(!this$1.isShallow(p0,p2,this$1._inputLine[i],distanceTol))return!1;return!0};BufferInputLineSimplifier.prototype.isConcave=function(p0,p1,p2){var orientation3=CGAlgorithms.computeOrientation(p0,p1,p2),isConcave2=orientation3===this._angleOrientation;return isConcave2};BufferInputLineSimplifier.prototype.simplify=function(distanceTol){var this$1=this;this._distanceTol=Math.abs(distanceTol),distanceTol<0&&(this._angleOrientation=CGAlgorithms.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var isChanged=!1;do isChanged=this$1.deleteShallowConcavities();while(isChanged);return this.collapseLine()};BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(index){for(var next3=index+1;next3<this._inputLine.length&&this._isDeleted[next3]===BufferInputLineSimplifier.DELETE;)next3++;return next3};BufferInputLineSimplifier.prototype.isShallow=function(p0,p1,p2,distanceTol){var dist=CGAlgorithms.distancePointLine(p1,p0,p2);return dist<distanceTol};BufferInputLineSimplifier.prototype.collapseLine=function(){for(var this$1=this,coordList=new CoordinateList,i=0;i<this._inputLine.length;i++)this$1._isDeleted[i]!==BufferInputLineSimplifier.DELETE&&coordList.add(this$1._inputLine[i]);return coordList.toCoordinateArray()};BufferInputLineSimplifier.prototype.interfaces_=function(){return[]};BufferInputLineSimplifier.prototype.getClass=function(){return BufferInputLineSimplifier};BufferInputLineSimplifier.simplify=function(inputLine,distanceTol){var simp=new BufferInputLineSimplifier(inputLine);return simp.simplify(distanceTol)};staticAccessors$26.INIT.get=function(){return 0};staticAccessors$26.DELETE.get=function(){return 1};staticAccessors$26.KEEP.get=function(){return 1};staticAccessors$26.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(BufferInputLineSimplifier,staticAccessors$26);var OffsetSegmentString=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new ArrayList},staticAccessors$28={COORDINATE_ARRAY_TYPE:{configurable:!0}};OffsetSegmentString.prototype.getCoordinates=function(){var coord=this._ptList.toArray(OffsetSegmentString.COORDINATE_ARRAY_TYPE);return coord};OffsetSegmentString.prototype.setPrecisionModel=function(precisionModel){this._precisionModel=precisionModel};OffsetSegmentString.prototype.addPt=function(pt){var bufPt=new Coordinate(pt);if(this._precisionModel.makePrecise(bufPt),this.isRedundant(bufPt))return null;this._ptList.add(bufPt)};OffsetSegmentString.prototype.revere=function(){};OffsetSegmentString.prototype.addPts=function(pt,isForward){var this$1=this;if(isForward)for(var i=0;i<pt.length;i++)this$1.addPt(pt[i]);else for(var i$1=pt.length-1;i$1>=0;i$1--)this$1.addPt(pt[i$1])};OffsetSegmentString.prototype.isRedundant=function(pt){if(this._ptList.size()<1)return!1;var lastPt=this._ptList.get(this._ptList.size()-1),ptDist=pt.distance(lastPt);return ptDist<this._minimimVertexDistance};OffsetSegmentString.prototype.toString=function(){var fact=new GeometryFactory,line=fact.createLineString(this.getCoordinates());return line.toString()};OffsetSegmentString.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var startPt=new Coordinate(this._ptList.get(0)),lastPt=this._ptList.get(this._ptList.size()-1);if(startPt.equals(lastPt))return null;this._ptList.add(startPt)};OffsetSegmentString.prototype.setMinimumVertexDistance=function(minimimVertexDistance){this._minimimVertexDistance=minimimVertexDistance};OffsetSegmentString.prototype.interfaces_=function(){return[]};OffsetSegmentString.prototype.getClass=function(){return OffsetSegmentString};staticAccessors$28.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(OffsetSegmentString,staticAccessors$28);var Angle=function(){},staticAccessors$29={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Angle.prototype.interfaces_=function(){return[]};Angle.prototype.getClass=function(){return Angle};Angle.toDegrees=function(radians2){return radians2*180/Math.PI};Angle.normalize=function(angle3){for(;angle3>Math.PI;)angle3-=Angle.PI_TIMES_2;for(;angle3<=-Math.PI;)angle3+=Angle.PI_TIMES_2;return angle3};Angle.angle=function(){if(arguments.length===1){var p=arguments[0];return Math.atan2(p.y,p.x)}else if(arguments.length===2){var p0=arguments[0],p1=arguments[1],dx=p1.x-p0.x,dy=p1.y-p0.y;return Math.atan2(dy,dx)}};Angle.isAcute=function(p0,p1,p2){var dx0=p0.x-p1.x,dy0=p0.y-p1.y,dx1=p2.x-p1.x,dy1=p2.y-p1.y,dotprod=dx0*dx1+dy0*dy1;return dotprod>0};Angle.isObtuse=function(p0,p1,p2){var dx0=p0.x-p1.x,dy0=p0.y-p1.y,dx1=p2.x-p1.x,dy1=p2.y-p1.y,dotprod=dx0*dx1+dy0*dy1;return dotprod<0};Angle.interiorAngle=function(p0,p1,p2){var anglePrev=Angle.angle(p1,p0),angleNext=Angle.angle(p1,p2);return Math.abs(angleNext-anglePrev)};Angle.normalizePositive=function(angle3){if(angle3<0){for(;angle3<0;)angle3+=Angle.PI_TIMES_2;angle3>=Angle.PI_TIMES_2&&(angle3=0)}else{for(;angle3>=Angle.PI_TIMES_2;)angle3-=Angle.PI_TIMES_2;angle3<0&&(angle3=0)}return angle3};Angle.angleBetween=function(tip1,tail,tip2){var a1=Angle.angle(tail,tip1),a2=Angle.angle(tail,tip2);return Angle.diff(a1,a2)};Angle.diff=function(ang1,ang2){var delAngle=null;return ang1<ang2?delAngle=ang2-ang1:delAngle=ang1-ang2,delAngle>Math.PI&&(delAngle=2*Math.PI-delAngle),delAngle};Angle.toRadians=function(angleDegrees){return angleDegrees*Math.PI/180};Angle.getTurn=function(ang1,ang2){var crossproduct=Math.sin(ang2-ang1);return crossproduct>0?Angle.COUNTERCLOCKWISE:crossproduct<0?Angle.CLOCKWISE:Angle.NONE};Angle.angleBetweenOriented=function(tip1,tail,tip2){var a1=Angle.angle(tail,tip1),a2=Angle.angle(tail,tip2),angDel=a2-a1;return angDel<=-Math.PI?angDel+Angle.PI_TIMES_2:angDel>Math.PI?angDel-Angle.PI_TIMES_2:angDel};staticAccessors$29.PI_TIMES_2.get=function(){return 2*Math.PI};staticAccessors$29.PI_OVER_2.get=function(){return Math.PI/2};staticAccessors$29.PI_OVER_4.get=function(){return Math.PI/4};staticAccessors$29.COUNTERCLOCKWISE.get=function(){return CGAlgorithms.COUNTERCLOCKWISE};staticAccessors$29.CLOCKWISE.get=function(){return CGAlgorithms.CLOCKWISE};staticAccessors$29.NONE.get=function(){return CGAlgorithms.COLLINEAR};Object.defineProperties(Angle,staticAccessors$29);var OffsetSegmentGenerator=function OffsetSegmentGenerator2(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new LineSegment,this._seg1=new LineSegment,this._offset0=new LineSegment,this._offset1=new LineSegment,this._side=0,this._hasNarrowConcaveAngle=!1;var precisionModel=arguments[0],bufParams=arguments[1],distance10=arguments[2];this._precisionModel=precisionModel,this._bufParams=bufParams,this._li=new RobustLineIntersector,this._filletAngleQuantum=Math.PI/2/bufParams.getQuadrantSegments(),bufParams.getQuadrantSegments()>=8&&bufParams.getJoinStyle()===BufferParameters.JOIN_ROUND&&(this._closingSegLengthFactor=OffsetSegmentGenerator2.MAX_CLOSING_SEG_LEN_FACTOR),this.init(distance10)},staticAccessors$27={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};OffsetSegmentGenerator.prototype.addNextSegment=function(p,addStartPoint){if(this._s0=this._s1,this._s1=this._s2,this._s2=p,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var orientation3=CGAlgorithms.computeOrientation(this._s0,this._s1,this._s2),outsideTurn=orientation3===CGAlgorithms.CLOCKWISE&&this._side===Position.LEFT||orientation3===CGAlgorithms.COUNTERCLOCKWISE&&this._side===Position.RIGHT;orientation3===0?this.addCollinear(addStartPoint):outsideTurn?this.addOutsideTurn(orientation3,addStartPoint):this.addInsideTurn(orientation3,addStartPoint)};OffsetSegmentGenerator.prototype.addLineEndCap=function(p0,p1){var seg=new LineSegment(p0,p1),offsetL=new LineSegment;this.computeOffsetSegment(seg,Position.LEFT,this._distance,offsetL);var offsetR=new LineSegment;this.computeOffsetSegment(seg,Position.RIGHT,this._distance,offsetR);var dx=p1.x-p0.x,dy=p1.y-p0.y,angle3=Math.atan2(dy,dx);switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:this._segList.addPt(offsetL.p1),this.addFilletArc(p1,angle3+Math.PI/2,angle3-Math.PI/2,CGAlgorithms.CLOCKWISE,this._distance),this._segList.addPt(offsetR.p1);break;case BufferParameters.CAP_FLAT:this._segList.addPt(offsetL.p1),this._segList.addPt(offsetR.p1);break;case BufferParameters.CAP_SQUARE:var squareCapSideOffset=new Coordinate;squareCapSideOffset.x=Math.abs(this._distance)*Math.cos(angle3),squareCapSideOffset.y=Math.abs(this._distance)*Math.sin(angle3);var squareCapLOffset=new Coordinate(offsetL.p1.x+squareCapSideOffset.x,offsetL.p1.y+squareCapSideOffset.y),squareCapROffset=new Coordinate(offsetR.p1.x+squareCapSideOffset.x,offsetR.p1.y+squareCapSideOffset.y);this._segList.addPt(squareCapLOffset),this._segList.addPt(squareCapROffset);break;default:}};OffsetSegmentGenerator.prototype.getCoordinates=function(){var pts=this._segList.getCoordinates();return pts};OffsetSegmentGenerator.prototype.addMitreJoin=function(p,offset0,offset1,distance10){var isMitreWithinLimit=!0,intPt=null;try{intPt=HCoordinate.intersection(offset0.p0,offset0.p1,offset1.p0,offset1.p1);var mitreRatio=distance10<=0?1:intPt.distance(p)/Math.abs(distance10);mitreRatio>this._bufParams.getMitreLimit()&&(isMitreWithinLimit=!1)}catch(ex){if(ex instanceof NotRepresentableException)intPt=new Coordinate(0,0),isMitreWithinLimit=!1;else throw ex}finally{}isMitreWithinLimit?this._segList.addPt(intPt):this.addLimitedMitreJoin(offset0,offset1,distance10,this._bufParams.getMitreLimit())};OffsetSegmentGenerator.prototype.addFilletCorner=function(p,p0,p1,direction,radius2){var dx0=p0.x-p.x,dy0=p0.y-p.y,startAngle=Math.atan2(dy0,dx0),dx1=p1.x-p.x,dy1=p1.y-p.y,endAngle=Math.atan2(dy1,dx1);direction===CGAlgorithms.CLOCKWISE?startAngle<=endAngle&&(startAngle+=2*Math.PI):startAngle>=endAngle&&(startAngle-=2*Math.PI),this._segList.addPt(p0),this.addFilletArc(p,startAngle,endAngle,direction,radius2),this._segList.addPt(p1)};OffsetSegmentGenerator.prototype.addOutsideTurn=function(orientation3,addStartPoint){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(addStartPoint&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,orientation3,this._distance),this._segList.addPt(this._offset1.p0))};OffsetSegmentGenerator.prototype.createSquare=function(p){this._segList.addPt(new Coordinate(p.x+this._distance,p.y+this._distance)),this._segList.addPt(new Coordinate(p.x+this._distance,p.y-this._distance)),this._segList.addPt(new Coordinate(p.x-this._distance,p.y-this._distance)),this._segList.addPt(new Coordinate(p.x-this._distance,p.y+this._distance)),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addSegments=function(pt,isForward){this._segList.addPts(pt,isForward)};OffsetSegmentGenerator.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};OffsetSegmentGenerator.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};OffsetSegmentGenerator.prototype.initSideSegments=function(s1,s2,side){this._s1=s1,this._s2=s2,this._side=side,this._seg1.setCoordinates(s1,s2),this.computeOffsetSegment(this._seg1,side,this._distance,this._offset1)};OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(offset0,offset1,distance10,mitreLimit){var basePt=this._seg0.p1,ang0=Angle.angle(basePt,this._seg0.p0),angDiff=Angle.angleBetweenOriented(this._seg0.p0,basePt,this._seg1.p1),angDiffHalf=angDiff/2,midAng=Angle.normalize(ang0+angDiffHalf),mitreMidAng=Angle.normalize(midAng+Math.PI),mitreDist=mitreLimit*distance10,bevelDelta=mitreDist*Math.abs(Math.sin(angDiffHalf)),bevelHalfLen=distance10-bevelDelta,bevelMidX=basePt.x+mitreDist*Math.cos(mitreMidAng),bevelMidY=basePt.y+mitreDist*Math.sin(mitreMidAng),bevelMidPt=new Coordinate(bevelMidX,bevelMidY),mitreMidLine=new LineSegment(basePt,bevelMidPt),bevelEndLeft=mitreMidLine.pointAlongOffset(1,bevelHalfLen),bevelEndRight=mitreMidLine.pointAlongOffset(1,-bevelHalfLen);this._side===Position.LEFT?(this._segList.addPt(bevelEndLeft),this._segList.addPt(bevelEndRight)):(this._segList.addPt(bevelEndRight),this._segList.addPt(bevelEndLeft))};OffsetSegmentGenerator.prototype.computeOffsetSegment=function(seg,side,distance10,offset){var sideSign=side===Position.LEFT?1:-1,dx=seg.p1.x-seg.p0.x,dy=seg.p1.y-seg.p0.y,len=Math.sqrt(dx*dx+dy*dy),ux=sideSign*distance10*dx/len,uy=sideSign*distance10*dy/len;offset.p0.x=seg.p0.x-uy,offset.p0.y=seg.p0.y+ux,offset.p1.x=seg.p1.x-uy,offset.p1.y=seg.p1.y+ux};OffsetSegmentGenerator.prototype.addFilletArc=function(p,startAngle,endAngle,direction,radius2){var this$1=this,directionFactor=direction===CGAlgorithms.CLOCKWISE?-1:1,totalAngle=Math.abs(startAngle-endAngle),nSegs=Math.trunc(totalAngle/this._filletAngleQuantum+.5);if(nSegs<1)return null;for(var initAngle=0,currAngleInc=totalAngle/nSegs,currAngle=initAngle,pt=new Coordinate;currAngle<totalAngle;){var angle3=startAngle+directionFactor*currAngle;pt.x=p.x+radius2*Math.cos(angle3),pt.y=p.y+radius2*Math.sin(angle3),this$1._segList.addPt(pt),currAngle+=currAngleInc}};OffsetSegmentGenerator.prototype.addInsideTurn=function(orientation3,addStartPoint){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var mid0=new Coordinate((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(mid0);var mid1=new Coordinate((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(mid1)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};OffsetSegmentGenerator.prototype.createCircle=function(p){var pt=new Coordinate(p.x+this._distance,p.y);this._segList.addPt(pt),this.addFilletArc(p,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};OffsetSegmentGenerator.prototype.addBevelJoin=function(offset0,offset1){this._segList.addPt(offset0.p1),this._segList.addPt(offset1.p0)};OffsetSegmentGenerator.prototype.init=function(distance10){this._distance=distance10,this._maxCurveSegmentError=distance10*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new OffsetSegmentString,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(distance10*OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};OffsetSegmentGenerator.prototype.addCollinear=function(addStartPoint){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var numInt=this._li.getIntersectionNum();numInt>=2&&(this._bufParams.getJoinStyle()===BufferParameters.JOIN_BEVEL||this._bufParams.getJoinStyle()===BufferParameters.JOIN_MITRE?(addStartPoint&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,CGAlgorithms.CLOCKWISE,this._distance))};OffsetSegmentGenerator.prototype.closeRing=function(){this._segList.closeRing()};OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};OffsetSegmentGenerator.prototype.interfaces_=function(){return[]};OffsetSegmentGenerator.prototype.getClass=function(){return OffsetSegmentGenerator};staticAccessors$27.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};staticAccessors$27.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};staticAccessors$27.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};staticAccessors$27.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(OffsetSegmentGenerator,staticAccessors$27);var OffsetCurveBuilder=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var precisionModel=arguments[0],bufParams=arguments[1];this._precisionModel=precisionModel,this._bufParams=bufParams};OffsetCurveBuilder.prototype.getOffsetCurve=function(inputPts,distance10){if(this._distance=distance10,distance10===0)return null;var isRightSide=distance10<0,posDistance=Math.abs(distance10),segGen=this.getSegGen(posDistance);inputPts.length<=1?this.computePointCurve(inputPts[0],segGen):this.computeOffsetCurve(inputPts,isRightSide,segGen);var curvePts=segGen.getCoordinates();return isRightSide&&CoordinateArrays.reverse(curvePts),curvePts};OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(inputPts,isRightSide,segGen){var distTol=this.simplifyTolerance(this._distance);if(isRightSide){segGen.addSegments(inputPts,!0);var simp2=BufferInputLineSimplifier.simplify(inputPts,-distTol),n2=simp2.length-1;segGen.initSideSegments(simp2[n2],simp2[n2-1],Position.LEFT),segGen.addFirstSegment();for(var i=n2-2;i>=0;i--)segGen.addNextSegment(simp2[i],!0)}else{segGen.addSegments(inputPts,!1);var simp1=BufferInputLineSimplifier.simplify(inputPts,distTol),n1=simp1.length-1;segGen.initSideSegments(simp1[0],simp1[1],Position.LEFT),segGen.addFirstSegment();for(var i$1=2;i$1<=n1;i$1++)segGen.addNextSegment(simp1[i$1],!0)}segGen.addLastSegment(),segGen.closeRing()};OffsetCurveBuilder.prototype.computeRingBufferCurve=function(inputPts,side,segGen){var distTol=this.simplifyTolerance(this._distance);side===Position.RIGHT&&(distTol=-distTol);var simp=BufferInputLineSimplifier.simplify(inputPts,distTol),n=simp.length-1;segGen.initSideSegments(simp[n-1],simp[0],side);for(var i=1;i<=n;i++){var addStartPoint=i!==1;segGen.addNextSegment(simp[i],addStartPoint)}segGen.closeRing()};OffsetCurveBuilder.prototype.computeLineBufferCurve=function(inputPts,segGen){var distTol=this.simplifyTolerance(this._distance),simp1=BufferInputLineSimplifier.simplify(inputPts,distTol),n1=simp1.length-1;segGen.initSideSegments(simp1[0],simp1[1],Position.LEFT);for(var i=2;i<=n1;i++)segGen.addNextSegment(simp1[i],!0);segGen.addLastSegment(),segGen.addLineEndCap(simp1[n1-1],simp1[n1]);var simp2=BufferInputLineSimplifier.simplify(inputPts,-distTol),n2=simp2.length-1;segGen.initSideSegments(simp2[n2],simp2[n2-1],Position.LEFT);for(var i$1=n2-2;i$1>=0;i$1--)segGen.addNextSegment(simp2[i$1],!0);segGen.addLastSegment(),segGen.addLineEndCap(simp2[1],simp2[0]),segGen.closeRing()};OffsetCurveBuilder.prototype.computePointCurve=function(pt,segGen){switch(this._bufParams.getEndCapStyle()){case BufferParameters.CAP_ROUND:segGen.createCircle(pt);break;case BufferParameters.CAP_SQUARE:segGen.createSquare(pt);break;default:}};OffsetCurveBuilder.prototype.getLineCurve=function(inputPts,distance10){if(this._distance=distance10,distance10<0&&!this._bufParams.isSingleSided()||distance10===0)return null;var posDistance=Math.abs(distance10),segGen=this.getSegGen(posDistance);if(inputPts.length<=1)this.computePointCurve(inputPts[0],segGen);else if(this._bufParams.isSingleSided()){var isRightSide=distance10<0;this.computeSingleSidedBufferCurve(inputPts,isRightSide,segGen)}else this.computeLineBufferCurve(inputPts,segGen);var lineCoord=segGen.getCoordinates();return lineCoord};OffsetCurveBuilder.prototype.getBufferParameters=function(){return this._bufParams};OffsetCurveBuilder.prototype.simplifyTolerance=function(bufDistance){return bufDistance*this._bufParams.getSimplifyFactor()};OffsetCurveBuilder.prototype.getRingCurve=function(inputPts,side,distance10){if(this._distance=distance10,inputPts.length<=2)return this.getLineCurve(inputPts,distance10);if(distance10===0)return OffsetCurveBuilder.copyCoordinates(inputPts);var segGen=this.getSegGen(distance10);return this.computeRingBufferCurve(inputPts,side,segGen),segGen.getCoordinates()};OffsetCurveBuilder.prototype.computeOffsetCurve=function(inputPts,isRightSide,segGen){var distTol=this.simplifyTolerance(this._distance);if(isRightSide){var simp2=BufferInputLineSimplifier.simplify(inputPts,-distTol),n2=simp2.length-1;segGen.initSideSegments(simp2[n2],simp2[n2-1],Position.LEFT),segGen.addFirstSegment();for(var i=n2-2;i>=0;i--)segGen.addNextSegment(simp2[i],!0)}else{var simp1=BufferInputLineSimplifier.simplify(inputPts,distTol),n1=simp1.length-1;segGen.initSideSegments(simp1[0],simp1[1],Position.LEFT),segGen.addFirstSegment();for(var i$1=2;i$1<=n1;i$1++)segGen.addNextSegment(simp1[i$1],!0)}segGen.addLastSegment()};OffsetCurveBuilder.prototype.getSegGen=function(distance10){return new OffsetSegmentGenerator(this._precisionModel,this._bufParams,distance10)};OffsetCurveBuilder.prototype.interfaces_=function(){return[]};OffsetCurveBuilder.prototype.getClass=function(){return OffsetCurveBuilder};OffsetCurveBuilder.copyCoordinates=function(pts){for(var copy7=new Array(pts.length).fill(null),i=0;i<copy7.length;i++)copy7[i]=new Coordinate(pts[i]);return copy7};var SubgraphDepthLocater=function(){this._subgraphs=null,this._seg=new LineSegment,this._cga=new CGAlgorithms;var subgraphs=arguments[0];this._subgraphs=subgraphs},staticAccessors$30={DepthSegment:{configurable:!0}};SubgraphDepthLocater.prototype.findStabbedSegments=function(){var this$1=this;if(arguments.length===1){for(var stabbingRayLeftPt=arguments[0],stabbedSegments=new ArrayList,i=this._subgraphs.iterator();i.hasNext();){var bsg=i.next(),env=bsg.getEnvelope();stabbingRayLeftPt.y<env.getMinY()||stabbingRayLeftPt.y>env.getMaxY()||this$1.findStabbedSegments(stabbingRayLeftPt,bsg.getDirectedEdges(),stabbedSegments)}return stabbedSegments}else if(arguments.length===3){if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&arguments[1]instanceof DirectedEdge)for(var stabbingRayLeftPt$1=arguments[0],dirEdge=arguments[1],stabbedSegments$1=arguments[2],pts=dirEdge.getEdge().getCoordinates(),i$1=0;i$1<pts.length-1;i$1++){this$1._seg.p0=pts[i$1],this$1._seg.p1=pts[i$1+1],this$1._seg.p0.y>this$1._seg.p1.y&&this$1._seg.reverse();var maxx=Math.max(this$1._seg.p0.x,this$1._seg.p1.x);if(!(maxx<stabbingRayLeftPt$1.x)&&!this$1._seg.isHorizontal()&&!(stabbingRayLeftPt$1.y<this$1._seg.p0.y||stabbingRayLeftPt$1.y>this$1._seg.p1.y)&&CGAlgorithms.computeOrientation(this$1._seg.p0,this$1._seg.p1,stabbingRayLeftPt$1)!==CGAlgorithms.RIGHT){var depth2=dirEdge.getDepth(Position.LEFT);this$1._seg.p0.equals(pts[i$1])||(depth2=dirEdge.getDepth(Position.RIGHT));var ds=new DepthSegment(this$1._seg,depth2);stabbedSegments$1.add(ds)}}else if(hasInterface(arguments[2],List)&&arguments[0]instanceof Coordinate&&hasInterface(arguments[1],List))for(var stabbingRayLeftPt$2=arguments[0],dirEdges=arguments[1],stabbedSegments$2=arguments[2],i$2=dirEdges.iterator();i$2.hasNext();){var de=i$2.next();de.isForward()&&this$1.findStabbedSegments(stabbingRayLeftPt$2,de,stabbedSegments$2)}}};SubgraphDepthLocater.prototype.getDepth=function(p){var stabbedSegments=this.findStabbedSegments(p);if(stabbedSegments.size()===0)return 0;var ds=Collections.min(stabbedSegments);return ds._leftDepth};SubgraphDepthLocater.prototype.interfaces_=function(){return[]};SubgraphDepthLocater.prototype.getClass=function(){return SubgraphDepthLocater};staticAccessors$30.DepthSegment.get=function(){return DepthSegment};Object.defineProperties(SubgraphDepthLocater,staticAccessors$30);var DepthSegment=function(){this._upwardSeg=null,this._leftDepth=null;var seg=arguments[0],depth2=arguments[1];this._upwardSeg=new LineSegment(seg),this._leftDepth=depth2};DepthSegment.prototype.compareTo=function(obj){var other=obj;if(this._upwardSeg.minX()>=other._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=other._upwardSeg.minX())return-1;var orientIndex=this._upwardSeg.orientationIndex(other._upwardSeg);return orientIndex!==0||(orientIndex=-1*other._upwardSeg.orientationIndex(this._upwardSeg),orientIndex!==0)?orientIndex:this._upwardSeg.compareTo(other._upwardSeg)};DepthSegment.prototype.compareX=function(seg0,seg1){var compare0=seg0.p0.compareTo(seg1.p0);return compare0!==0?compare0:seg0.p1.compareTo(seg1.p1)};DepthSegment.prototype.toString=function(){return this._upwardSeg.toString()};DepthSegment.prototype.interfaces_=function(){return[Comparable]};DepthSegment.prototype.getClass=function(){return DepthSegment};var Triangle2=function(p0,p1,p2){this.p0=p0||null,this.p1=p1||null,this.p2=p2||null};Triangle2.prototype.area=function(){return Triangle2.area(this.p0,this.p1,this.p2)};Triangle2.prototype.signedArea=function(){return Triangle2.signedArea(this.p0,this.p1,this.p2)};Triangle2.prototype.interpolateZ=function(p){if(p===null)throw new IllegalArgumentException("Supplied point is null.");return Triangle2.interpolateZ(p,this.p0,this.p1,this.p2)};Triangle2.prototype.longestSideLength=function(){return Triangle2.longestSideLength(this.p0,this.p1,this.p2)};Triangle2.prototype.isAcute=function(){return Triangle2.isAcute(this.p0,this.p1,this.p2)};Triangle2.prototype.circumcentre=function(){return Triangle2.circumcentre(this.p0,this.p1,this.p2)};Triangle2.prototype.area3D=function(){return Triangle2.area3D(this.p0,this.p1,this.p2)};Triangle2.prototype.centroid=function(){return Triangle2.centroid(this.p0,this.p1,this.p2)};Triangle2.prototype.inCentre=function(){return Triangle2.inCentre(this.p0,this.p1,this.p2)};Triangle2.prototype.interfaces_=function(){return[]};Triangle2.prototype.getClass=function(){return Triangle2};Triangle2.area=function(a,b,c){return Math.abs(((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2)};Triangle2.signedArea=function(a,b,c){return((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))/2};Triangle2.det=function(m00,m01,m10,m11){return m00*m11-m01*m10};Triangle2.interpolateZ=function(p,v0,v1,v2){var x02=v0.x,y0=v0.y,a=v1.x-x02,b=v2.x-x02,c=v1.y-y0,d=v2.y-y0,det2=a*d-b*c,dx=p.x-x02,dy=p.y-y0,t=(d*dx-b*dy)/det2,u=(-c*dx+a*dy)/det2,z=v0.z+t*(v1.z-v0.z)+u*(v2.z-v0.z);return z};Triangle2.longestSideLength=function(a,b,c){var lenAB=a.distance(b),lenBC=b.distance(c),lenCA=c.distance(a),maxLen=lenAB;return lenBC>maxLen&&(maxLen=lenBC),lenCA>maxLen&&(maxLen=lenCA),maxLen};Triangle2.isAcute=function(a,b,c){return!(!Angle.isAcute(a,b,c)||!Angle.isAcute(b,c,a)||!Angle.isAcute(c,a,b))};Triangle2.circumcentre=function(a,b,c){var cx=c.x,cy=c.y,ax=a.x-cx,ay=a.y-cy,bx=b.x-cx,by=b.y-cy,denom=2*Triangle2.det(ax,ay,bx,by),numx=Triangle2.det(ay,ax*ax+ay*ay,by,bx*bx+by*by),numy=Triangle2.det(ax,ax*ax+ay*ay,bx,bx*bx+by*by),ccx=cx-numx/denom,ccy=cy+numy/denom;return new Coordinate(ccx,ccy)};Triangle2.perpendicularBisector=function(a,b){var dx=b.x-a.x,dy=b.y-a.y,l1=new HCoordinate(a.x+dx/2,a.y+dy/2,1),l2=new HCoordinate(a.x-dy+dx/2,a.y+dx+dy/2,1);return new HCoordinate(l1,l2)};Triangle2.angleBisector=function(a,b,c){var len0=b.distance(a),len2=b.distance(c),frac=len0/(len0+len2),dx=c.x-a.x,dy=c.y-a.y,splitPt=new Coordinate(a.x+frac*dx,a.y+frac*dy);return splitPt};Triangle2.area3D=function(a,b,c){var ux=b.x-a.x,uy=b.y-a.y,uz=b.z-a.z,vx=c.x-a.x,vy=c.y-a.y,vz=c.z-a.z,crossx=uy*vz-uz*vy,crossy=uz*vx-ux*vz,crossz=ux*vy-uy*vx,absSq=crossx*crossx+crossy*crossy+crossz*crossz,area3D3=Math.sqrt(absSq)/2;return area3D3};Triangle2.centroid=function(a,b,c){var x2=(a.x+b.x+c.x)/3,y2=(a.y+b.y+c.y)/3;return new Coordinate(x2,y2)};Triangle2.inCentre=function(a,b,c){var len0=b.distance(c),len1=a.distance(c),len2=a.distance(b),circum=len0+len1+len2,inCentreX=(len0*a.x+len1*b.x+len2*c.x)/circum,inCentreY=(len0*a.y+len1*b.y+len2*c.y)/circum;return new Coordinate(inCentreX,inCentreY)};var OffsetCurveSetBuilder=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new ArrayList;var inputGeom=arguments[0],distance10=arguments[1],curveBuilder=arguments[2];this._inputGeom=inputGeom,this._distance=distance10,this._curveBuilder=curveBuilder};OffsetCurveSetBuilder.prototype.addPoint=function(p){if(this._distance<=0)return null;var coord=p.getCoordinates(),curve=this._curveBuilder.getLineCurve(coord,this._distance);this.addCurve(curve,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addPolygon=function(p){var this$1=this,offsetDistance=this._distance,offsetSide=Position.LEFT;this._distance<0&&(offsetDistance=-this._distance,offsetSide=Position.RIGHT);var shell=p.getExteriorRing(),shellCoord=CoordinateArrays.removeRepeatedPoints(shell.getCoordinates());if(this._distance<0&&this.isErodedCompletely(shell,this._distance)||this._distance<=0&&shellCoord.length<3)return null;this.addPolygonRing(shellCoord,offsetDistance,offsetSide,Location.EXTERIOR,Location.INTERIOR);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i),holeCoord=CoordinateArrays.removeRepeatedPoints(hole.getCoordinates());this$1._distance>0&&this$1.isErodedCompletely(hole,-this$1._distance)||this$1.addPolygonRing(holeCoord,offsetDistance,Position.opposite(offsetSide),Location.INTERIOR,Location.EXTERIOR)}};OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(triangleCoord,bufferDistance){var tri=new Triangle2(triangleCoord[0],triangleCoord[1],triangleCoord[2]),inCentre3=tri.inCentre(),distToCentre=CGAlgorithms.distancePointLine(inCentre3,tri.p0,tri.p1);return distToCentre<Math.abs(bufferDistance)};OffsetCurveSetBuilder.prototype.addLineString=function(line){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var coord=CoordinateArrays.removeRepeatedPoints(line.getCoordinates()),curve=this._curveBuilder.getLineCurve(coord,this._distance);this.addCurve(curve,Location.EXTERIOR,Location.INTERIOR)};OffsetCurveSetBuilder.prototype.addCurve=function(coord,leftLoc,rightLoc){if(coord===null||coord.length<2)return null;var e=new NodedSegmentString(coord,new Label(0,Location.BOUNDARY,leftLoc,rightLoc));this._curveList.add(e)};OffsetCurveSetBuilder.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};OffsetCurveSetBuilder.prototype.addPolygonRing=function(coord,offsetDistance,side,cwLeftLoc,cwRightLoc){if(offsetDistance===0&&coord.length<LinearRing.MINIMUM_VALID_SIZE)return null;var leftLoc=cwLeftLoc,rightLoc=cwRightLoc;coord.length>=LinearRing.MINIMUM_VALID_SIZE&&CGAlgorithms.isCCW(coord)&&(leftLoc=cwRightLoc,rightLoc=cwLeftLoc,side=Position.opposite(side));var curve=this._curveBuilder.getRingCurve(coord,side,offsetDistance);this.addCurve(curve,leftLoc,rightLoc)};OffsetCurveSetBuilder.prototype.add=function(g){if(g.isEmpty())return null;g instanceof Polygon?this.addPolygon(g):g instanceof LineString2?this.addLineString(g):g instanceof Point?this.addPoint(g):g instanceof MultiPoint?this.addCollection(g):g instanceof MultiLineString?this.addCollection(g):g instanceof MultiPolygon?this.addCollection(g):g instanceof GeometryCollection&&this.addCollection(g)};OffsetCurveSetBuilder.prototype.isErodedCompletely=function(ring,bufferDistance){var ringCoord=ring.getCoordinates();if(ringCoord.length<4)return bufferDistance<0;if(ringCoord.length===4)return this.isTriangleErodedCompletely(ringCoord,bufferDistance);var env=ring.getEnvelopeInternal(),envMinDimension=Math.min(env.getHeight(),env.getWidth());return bufferDistance<0&&2*Math.abs(bufferDistance)>envMinDimension};OffsetCurveSetBuilder.prototype.addCollection=function(gc){for(var this$1=this,i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this$1.add(g)}};OffsetCurveSetBuilder.prototype.interfaces_=function(){return[]};OffsetCurveSetBuilder.prototype.getClass=function(){return OffsetCurveSetBuilder};var PointOnGeometryLocator=function(){};PointOnGeometryLocator.prototype.locate=function(p){};PointOnGeometryLocator.prototype.interfaces_=function(){return[]};PointOnGeometryLocator.prototype.getClass=function(){return PointOnGeometryLocator};var GeometryCollectionIterator=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var parent=arguments[0];this._parent=parent,this._atStart=!0,this._index=0,this._max=parent.getNumGeometries()};GeometryCollectionIterator.prototype.next=function(){if(this._atStart)return this._atStart=!1,GeometryCollectionIterator.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new NoSuchElementException;var obj=this._parent.getGeometryN(this._index++);return obj instanceof GeometryCollection?(this._subcollectionIterator=new GeometryCollectionIterator(obj),this._subcollectionIterator.next()):obj};GeometryCollectionIterator.prototype.remove=function(){throw new Error(this.getClass().getName())};GeometryCollectionIterator.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};GeometryCollectionIterator.prototype.interfaces_=function(){return[Iterator]};GeometryCollectionIterator.prototype.getClass=function(){return GeometryCollectionIterator};GeometryCollectionIterator.isAtomic=function(geom){return!(geom instanceof GeometryCollection)};var SimplePointInAreaLocator=function(){this._geom=null;var geom=arguments[0];this._geom=geom};SimplePointInAreaLocator.prototype.locate=function(p){return SimplePointInAreaLocator.locate(p,this._geom)};SimplePointInAreaLocator.prototype.interfaces_=function(){return[PointOnGeometryLocator]};SimplePointInAreaLocator.prototype.getClass=function(){return SimplePointInAreaLocator};SimplePointInAreaLocator.isPointInRing=function(p,ring){return ring.getEnvelopeInternal().intersects(p)?CGAlgorithms.isPointInRing(p,ring.getCoordinates()):!1};SimplePointInAreaLocator.containsPointInPolygon=function(p,poly){if(poly.isEmpty())return!1;var shell=poly.getExteriorRing();if(!SimplePointInAreaLocator.isPointInRing(p,shell))return!1;for(var i=0;i<poly.getNumInteriorRing();i++){var hole=poly.getInteriorRingN(i);if(SimplePointInAreaLocator.isPointInRing(p,hole))return!1}return!0};SimplePointInAreaLocator.containsPoint=function(p,geom){if(geom instanceof Polygon)return SimplePointInAreaLocator.containsPointInPolygon(p,geom);if(geom instanceof GeometryCollection)for(var geomi=new GeometryCollectionIterator(geom);geomi.hasNext();){var g2=geomi.next();if(g2!==geom&&SimplePointInAreaLocator.containsPoint(p,g2))return!0}return!1};SimplePointInAreaLocator.locate=function(p,geom){return geom.isEmpty()?Location.EXTERIOR:SimplePointInAreaLocator.containsPoint(p,geom)?Location.INTERIOR:Location.EXTERIOR};var EdgeEndStar=function(){this._edgeMap=new TreeMap,this._edgeList=null,this._ptInAreaLocation=[Location.NONE,Location.NONE]};EdgeEndStar.prototype.getNextCW=function(ee){this.getEdges();var i=this._edgeList.indexOf(ee),iNextCW=i-1;return i===0&&(iNextCW=this._edgeList.size()-1),this._edgeList.get(iNextCW)};EdgeEndStar.prototype.propagateSideLabels=function(geomIndex){for(var startLoc=Location.NONE,it=this.iterator();it.hasNext();){var e=it.next(),label=e.getLabel();label.isArea(geomIndex)&&label.getLocation(geomIndex,Position.LEFT)!==Location.NONE&&(startLoc=label.getLocation(geomIndex,Position.LEFT))}if(startLoc===Location.NONE)return null;for(var currLoc=startLoc,it$1=this.iterator();it$1.hasNext();){var e$1=it$1.next(),label$1=e$1.getLabel();if(label$1.getLocation(geomIndex,Position.ON)===Location.NONE&&label$1.setLocation(geomIndex,Position.ON,currLoc),label$1.isArea(geomIndex)){var leftLoc=label$1.getLocation(geomIndex,Position.LEFT),rightLoc=label$1.getLocation(geomIndex,Position.RIGHT);if(rightLoc!==Location.NONE){if(rightLoc!==currLoc)throw new TopologyException("side location conflict",e$1.getCoordinate());leftLoc===Location.NONE&&Assert.shouldNeverReachHere("found single null side (at "+e$1.getCoordinate()+")"),currLoc=leftLoc}else Assert.isTrue(label$1.getLocation(geomIndex,Position.LEFT)===Location.NONE,"found single null side"),label$1.setLocation(geomIndex,Position.RIGHT,currLoc),label$1.setLocation(geomIndex,Position.LEFT,currLoc)}}};EdgeEndStar.prototype.getCoordinate=function(){var it=this.iterator();if(!it.hasNext())return null;var e=it.next();return e.getCoordinate()};EdgeEndStar.prototype.print=function(out){System.out.println("EdgeEndStar:   "+this.getCoordinate());for(var it=this.iterator();it.hasNext();){var e=it.next();e.print(out)}};EdgeEndStar.prototype.isAreaLabelsConsistent=function(geomGraph){return this.computeEdgeEndLabels(geomGraph.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};EdgeEndStar.prototype.checkAreaLabelsConsistent=function(geomIndex){var edges2=this.getEdges();if(edges2.size()<=0)return!0;var lastEdgeIndex=edges2.size()-1,startLabel=edges2.get(lastEdgeIndex).getLabel(),startLoc=startLabel.getLocation(geomIndex,Position.LEFT);Assert.isTrue(startLoc!==Location.NONE,"Found unlabelled area edge");for(var currLoc=startLoc,it=this.iterator();it.hasNext();){var e=it.next(),label=e.getLabel();Assert.isTrue(label.isArea(geomIndex),"Found non-area edge");var leftLoc=label.getLocation(geomIndex,Position.LEFT),rightLoc=label.getLocation(geomIndex,Position.RIGHT);if(leftLoc===rightLoc||rightLoc!==currLoc)return!1;currLoc=leftLoc}return!0};EdgeEndStar.prototype.findIndex=function(eSearch){var this$1=this;this.iterator();for(var i=0;i<this._edgeList.size();i++){var e=this$1._edgeList.get(i);if(e===eSearch)return i}return-1};EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()};EdgeEndStar.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new ArrayList(this._edgeMap.values())),this._edgeList};EdgeEndStar.prototype.getLocation=function(geomIndex,p,geom){return this._ptInAreaLocation[geomIndex]===Location.NONE&&(this._ptInAreaLocation[geomIndex]=SimplePointInAreaLocator.locate(p,geom[geomIndex].getGeometry())),this._ptInAreaLocation[geomIndex]};EdgeEndStar.prototype.toString=function(){var buf=new StringBuffer;buf.append("EdgeEndStar:   "+this.getCoordinate()),buf.append(`
`);for(var it=this.iterator();it.hasNext();){var e=it.next();buf.append(e),buf.append(`
`)}return buf.toString()};EdgeEndStar.prototype.computeEdgeEndLabels=function(boundaryNodeRule){for(var it=this.iterator();it.hasNext();){var ee=it.next();ee.computeLabel(boundaryNodeRule)}};EdgeEndStar.prototype.computeLabelling=function(geomGraph){var this$1=this;this.computeEdgeEndLabels(geomGraph[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var hasDimensionalCollapseEdge=[!1,!1],it=this.iterator();it.hasNext();)for(var e=it.next(),label=e.getLabel(),geomi=0;geomi<2;geomi++)label.isLine(geomi)&&label.getLocation(geomi)===Location.BOUNDARY&&(hasDimensionalCollapseEdge[geomi]=!0);for(var it$1=this.iterator();it$1.hasNext();)for(var e$1=it$1.next(),label$1=e$1.getLabel(),geomi$1=0;geomi$1<2;geomi$1++)if(label$1.isAnyNull(geomi$1)){var loc=Location.NONE;if(hasDimensionalCollapseEdge[geomi$1])loc=Location.EXTERIOR;else{var p=e$1.getCoordinate();loc=this$1.getLocation(geomi$1,p,geomGraph)}label$1.setAllLocationsIfNull(geomi$1,loc)}};EdgeEndStar.prototype.getDegree=function(){return this._edgeMap.size()};EdgeEndStar.prototype.insertEdgeEnd=function(e,obj){this._edgeMap.put(e,obj),this._edgeList=null};EdgeEndStar.prototype.interfaces_=function(){return[]};EdgeEndStar.prototype.getClass=function(){return EdgeEndStar};var DirectedEdgeStar=function(EdgeEndStar$$1){function DirectedEdgeStar2(){EdgeEndStar$$1.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return EdgeEndStar$$1&&(DirectedEdgeStar2.__proto__=EdgeEndStar$$1),DirectedEdgeStar2.prototype=Object.create(EdgeEndStar$$1&&EdgeEndStar$$1.prototype),DirectedEdgeStar2.prototype.constructor=DirectedEdgeStar2,DirectedEdgeStar2.prototype.linkResultDirectedEdges=function(){var this$1=this;this.getResultAreaEdges();for(var firstOut=null,incoming=null,state=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var nextOut=this$1._resultAreaEdgeList.get(i),nextIn=nextOut.getSym();if(nextOut.getLabel().isArea())switch(firstOut===null&&nextOut.isInResult()&&(firstOut=nextOut),state){case this$1._SCANNING_FOR_INCOMING:if(!nextIn.isInResult())continue;incoming=nextIn,state=this$1._LINKING_TO_OUTGOING;break;case this$1._LINKING_TO_OUTGOING:if(!nextOut.isInResult())continue;incoming.setNext(nextOut),state=this$1._SCANNING_FOR_INCOMING;break;default:}}if(state===this._LINKING_TO_OUTGOING){if(firstOut===null)throw new TopologyException("no outgoing dirEdge found",this.getCoordinate());Assert.isTrue(firstOut.isInResult(),"unable to link last incoming dirEdge"),incoming.setNext(firstOut)}},DirectedEdgeStar2.prototype.insert=function(ee){var de=ee;this.insertEdgeEnd(de,de)},DirectedEdgeStar2.prototype.getRightmostEdge=function(){var edges2=this.getEdges(),size11=edges2.size();if(size11<1)return null;var de0=edges2.get(0);if(size11===1)return de0;var deLast=edges2.get(size11-1),quad0=de0.getQuadrant(),quad1=deLast.getQuadrant();return Quadrant.isNorthern(quad0)&&Quadrant.isNorthern(quad1)?de0:!Quadrant.isNorthern(quad0)&&!Quadrant.isNorthern(quad1)?deLast:de0.getDy()!==0?de0:deLast.getDy()!==0?deLast:(Assert.shouldNeverReachHere("found two horizontal edges incident on node"),null)},DirectedEdgeStar2.prototype.print=function(out){System.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var it=this.iterator();it.hasNext();){var de=it.next();out.print("out "),de.print(out),out.println(),out.print("in "),de.getSym().print(out),out.println()}},DirectedEdgeStar2.prototype.getResultAreaEdges=function(){var this$1=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new ArrayList;for(var it=this.iterator();it.hasNext();){var de=it.next();(de.isInResult()||de.getSym().isInResult())&&this$1._resultAreaEdgeList.add(de)}return this._resultAreaEdgeList},DirectedEdgeStar2.prototype.updateLabelling=function(nodeLabel){for(var it=this.iterator();it.hasNext();){var de=it.next(),label=de.getLabel();label.setAllLocationsIfNull(0,nodeLabel.getLocation(0)),label.setAllLocationsIfNull(1,nodeLabel.getLocation(1))}},DirectedEdgeStar2.prototype.linkAllDirectedEdges=function(){var this$1=this;this.getEdges();for(var prevOut=null,firstIn=null,i=this._edgeList.size()-1;i>=0;i--){var nextOut=this$1._edgeList.get(i),nextIn=nextOut.getSym();firstIn===null&&(firstIn=nextIn),prevOut!==null&&nextIn.setNext(prevOut),prevOut=nextOut}firstIn.setNext(prevOut)},DirectedEdgeStar2.prototype.computeDepths=function(){var this$1=this;if(arguments.length===1){var de=arguments[0],edgeIndex=this.findIndex(de),startDepth=de.getDepth(Position.LEFT),targetLastDepth=de.getDepth(Position.RIGHT),nextDepth=this.computeDepths(edgeIndex+1,this._edgeList.size(),startDepth),lastDepth=this.computeDepths(0,edgeIndex,nextDepth);if(lastDepth!==targetLastDepth)throw new TopologyException("depth mismatch at "+de.getCoordinate())}else if(arguments.length===3){for(var startIndex=arguments[0],endIndex=arguments[1],startDepth$1=arguments[2],currDepth=startDepth$1,i=startIndex;i<endIndex;i++){var nextDe=this$1._edgeList.get(i);nextDe.setEdgeDepths(Position.RIGHT,currDepth),currDepth=nextDe.getDepth(Position.LEFT)}return currDepth}},DirectedEdgeStar2.prototype.mergeSymLabels=function(){for(var it=this.iterator();it.hasNext();){var de=it.next(),label=de.getLabel();label.merge(de.getSym().getLabel())}},DirectedEdgeStar2.prototype.linkMinimalDirectedEdges=function(er){for(var this$1=this,firstOut=null,incoming=null,state=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var nextOut=this$1._resultAreaEdgeList.get(i),nextIn=nextOut.getSym();switch(firstOut===null&&nextOut.getEdgeRing()===er&&(firstOut=nextOut),state){case this$1._SCANNING_FOR_INCOMING:if(nextIn.getEdgeRing()!==er)continue;incoming=nextIn,state=this$1._LINKING_TO_OUTGOING;break;case this$1._LINKING_TO_OUTGOING:if(nextOut.getEdgeRing()!==er)continue;incoming.setNextMin(nextOut),state=this$1._SCANNING_FOR_INCOMING;break;default:}}state===this._LINKING_TO_OUTGOING&&(Assert.isTrue(firstOut!==null,"found null for first outgoing dirEdge"),Assert.isTrue(firstOut.getEdgeRing()===er,"unable to link last incoming dirEdge"),incoming.setNextMin(firstOut))},DirectedEdgeStar2.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var degree=0,it=this.iterator();it.hasNext();){var de=it.next();de.isInResult()&&degree++}return degree}else if(arguments.length===1){for(var er=arguments[0],degree$1=0,it$1=this.iterator();it$1.hasNext();){var de$1=it$1.next();de$1.getEdgeRing()===er&&degree$1++}return degree$1}},DirectedEdgeStar2.prototype.getLabel=function(){return this._label},DirectedEdgeStar2.prototype.findCoveredLineEdges=function(){for(var startLoc=Location.NONE,it=this.iterator();it.hasNext();){var nextOut=it.next(),nextIn=nextOut.getSym();if(!nextOut.isLineEdge()){if(nextOut.isInResult()){startLoc=Location.INTERIOR;break}if(nextIn.isInResult()){startLoc=Location.EXTERIOR;break}}}if(startLoc===Location.NONE)return null;for(var currLoc=startLoc,it$1=this.iterator();it$1.hasNext();){var nextOut$1=it$1.next(),nextIn$1=nextOut$1.getSym();nextOut$1.isLineEdge()?nextOut$1.getEdge().setCovered(currLoc===Location.INTERIOR):(nextOut$1.isInResult()&&(currLoc=Location.EXTERIOR),nextIn$1.isInResult()&&(currLoc=Location.INTERIOR))}},DirectedEdgeStar2.prototype.computeLabelling=function(geom){var this$1=this;EdgeEndStar$$1.prototype.computeLabelling.call(this,geom),this._label=new Label(Location.NONE);for(var it=this.iterator();it.hasNext();)for(var ee=it.next(),e=ee.getEdge(),eLabel=e.getLabel(),i=0;i<2;i++){var eLoc=eLabel.getLocation(i);(eLoc===Location.INTERIOR||eLoc===Location.BOUNDARY)&&this$1._label.setLocation(i,Location.INTERIOR)}},DirectedEdgeStar2.prototype.interfaces_=function(){return[]},DirectedEdgeStar2.prototype.getClass=function(){return DirectedEdgeStar2},DirectedEdgeStar2}(EdgeEndStar),OverlayNodeFactory=function(NodeFactory$$1){function OverlayNodeFactory2(){NodeFactory$$1.apply(this,arguments)}return NodeFactory$$1&&(OverlayNodeFactory2.__proto__=NodeFactory$$1),OverlayNodeFactory2.prototype=Object.create(NodeFactory$$1&&NodeFactory$$1.prototype),OverlayNodeFactory2.prototype.constructor=OverlayNodeFactory2,OverlayNodeFactory2.prototype.createNode=function(coord){return new Node3(coord,new DirectedEdgeStar)},OverlayNodeFactory2.prototype.interfaces_=function(){return[]},OverlayNodeFactory2.prototype.getClass=function(){return OverlayNodeFactory2},OverlayNodeFactory2}(NodeFactory),OrientedCoordinateArray=function OrientedCoordinateArray2(){this._pts=null,this._orientation=null;var pts=arguments[0];this._pts=pts,this._orientation=OrientedCoordinateArray2.orientation(pts)};OrientedCoordinateArray.prototype.compareTo=function(o1){var oca=o1,comp=OrientedCoordinateArray.compareOriented(this._pts,this._orientation,oca._pts,oca._orientation);return comp};OrientedCoordinateArray.prototype.interfaces_=function(){return[Comparable]};OrientedCoordinateArray.prototype.getClass=function(){return OrientedCoordinateArray};OrientedCoordinateArray.orientation=function(pts){return CoordinateArrays.increasingDirection(pts)===1};OrientedCoordinateArray.compareOriented=function(pts1,orientation1,pts2,orientation22){for(var dir1=orientation1?1:-1,dir2=orientation22?1:-1,limit1=orientation1?pts1.length:-1,limit2=orientation22?pts2.length:-1,i1=orientation1?0:pts1.length-1,i2=orientation22?0:pts2.length-1;;){var compPt=pts1[i1].compareTo(pts2[i2]);if(compPt!==0)return compPt;i1+=dir1,i2+=dir2;var done1=i1===limit1,done2=i2===limit2;if(done1&&!done2)return-1;if(!done1&&done2)return 1;if(done1&&done2)return 0}};var EdgeList=function(){this._edges=new ArrayList,this._ocaMap=new TreeMap};EdgeList.prototype.print=function(out){var this$1=this;out.print("MULTILINESTRING ( ");for(var j=0;j<this._edges.size();j++){var e=this$1._edges.get(j);j>0&&out.print(","),out.print("(");for(var pts=e.getCoordinates(),i=0;i<pts.length;i++)i>0&&out.print(","),out.print(pts[i].x+" "+pts[i].y);out.println(")")}out.print(")  ")};EdgeList.prototype.addAll=function(edgeColl){for(var this$1=this,i=edgeColl.iterator();i.hasNext();)this$1.add(i.next())};EdgeList.prototype.findEdgeIndex=function(e){for(var this$1=this,i=0;i<this._edges.size();i++)if(this$1._edges.get(i).equals(e))return i;return-1};EdgeList.prototype.iterator=function(){return this._edges.iterator()};EdgeList.prototype.getEdges=function(){return this._edges};EdgeList.prototype.get=function(i){return this._edges.get(i)};EdgeList.prototype.findEqualEdge=function(e){var oca=new OrientedCoordinateArray(e.getCoordinates()),matchEdge=this._ocaMap.get(oca);return matchEdge};EdgeList.prototype.add=function(e){this._edges.add(e);var oca=new OrientedCoordinateArray(e.getCoordinates());this._ocaMap.put(oca,e)};EdgeList.prototype.interfaces_=function(){return[]};EdgeList.prototype.getClass=function(){return EdgeList};var SegmentIntersector=function(){};SegmentIntersector.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){};SegmentIntersector.prototype.isDone=function(){};SegmentIntersector.prototype.interfaces_=function(){return[]};SegmentIntersector.prototype.getClass=function(){return SegmentIntersector};var IntersectionAdder=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var li=arguments[0];this._li=li};IntersectionAdder.prototype.isTrivialIntersection=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&this._li.getIntersectionNum()===1){if(IntersectionAdder.isAdjacentSegments(segIndex0,segIndex1))return!0;if(e0.isClosed()){var maxSegIndex=e0.size()-1;if(segIndex0===0&&segIndex1===maxSegIndex||segIndex1===0&&segIndex0===maxSegIndex)return!0}}return!1};IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};IntersectionAdder.prototype.getLineIntersector=function(){return this._li};IntersectionAdder.prototype.hasProperIntersection=function(){return this._hasProper};IntersectionAdder.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&segIndex0===segIndex1)return null;this.numTests++;var p002=e0.getCoordinates()[segIndex0],p012=e0.getCoordinates()[segIndex0+1],p102=e1.getCoordinates()[segIndex1],p112=e1.getCoordinates()[segIndex1+1];this._li.computeIntersection(p002,p012,p102,p112),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e0,segIndex0,e1,segIndex1)||(this._hasIntersection=!0,e0.addIntersections(this._li,segIndex0,0),e1.addIntersections(this._li,segIndex1,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection};IntersectionAdder.prototype.isDone=function(){return!1};IntersectionAdder.prototype.hasInteriorIntersection=function(){return this._hasInterior};IntersectionAdder.prototype.interfaces_=function(){return[SegmentIntersector]};IntersectionAdder.prototype.getClass=function(){return IntersectionAdder};IntersectionAdder.isAdjacentSegments=function(i1,i2){return Math.abs(i1-i2)===1};var EdgeIntersection=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var coord=arguments[0],segmentIndex=arguments[1],dist=arguments[2];this.coord=new Coordinate(coord),this.segmentIndex=segmentIndex,this.dist=dist};EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex};EdgeIntersection.prototype.getCoordinate=function(){return this.coord};EdgeIntersection.prototype.print=function(out){out.print(this.coord),out.print(" seg # = "+this.segmentIndex),out.println(" dist = "+this.dist)};EdgeIntersection.prototype.compareTo=function(obj){var other=obj;return this.compare(other.segmentIndex,other.dist)};EdgeIntersection.prototype.isEndPoint=function(maxSegmentIndex){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===maxSegmentIndex};EdgeIntersection.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};EdgeIntersection.prototype.getDistance=function(){return this.dist};EdgeIntersection.prototype.compare=function(segmentIndex,dist){return this.segmentIndex<segmentIndex?-1:this.segmentIndex>segmentIndex?1:this.dist<dist?-1:this.dist>dist?1:0};EdgeIntersection.prototype.interfaces_=function(){return[Comparable]};EdgeIntersection.prototype.getClass=function(){return EdgeIntersection};var EdgeIntersectionList=function(){this._nodeMap=new TreeMap,this.edge=null;var edge=arguments[0];this.edge=edge};EdgeIntersectionList.prototype.print=function(out){out.println("Intersections:");for(var it=this.iterator();it.hasNext();){var ei=it.next();ei.print(out)}};EdgeIntersectionList.prototype.iterator=function(){return this._nodeMap.values().iterator()};EdgeIntersectionList.prototype.addSplitEdges=function(edgeList){var this$1=this;this.addEndpoints();for(var it=this.iterator(),eiPrev=it.next();it.hasNext();){var ei=it.next(),newEdge=this$1.createSplitEdge(eiPrev,ei);edgeList.add(newEdge),eiPrev=ei}};EdgeIntersectionList.prototype.addEndpoints=function(){var maxSegIndex=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[maxSegIndex],maxSegIndex,0)};EdgeIntersectionList.prototype.createSplitEdge=function(ei0,ei1){var this$1=this,npts=ei1.segmentIndex-ei0.segmentIndex+2,lastSegStartPt=this.edge.pts[ei1.segmentIndex],useIntPt1=ei1.dist>0||!ei1.coord.equals2D(lastSegStartPt);useIntPt1||npts--;var pts=new Array(npts).fill(null),ipt=0;pts[ipt++]=new Coordinate(ei0.coord);for(var i=ei0.segmentIndex+1;i<=ei1.segmentIndex;i++)pts[ipt++]=this$1.edge.pts[i];return useIntPt1&&(pts[ipt]=ei1.coord),new Edge2(pts,new Label(this.edge._label))};EdgeIntersectionList.prototype.add=function(intPt,segmentIndex,dist){var eiNew=new EdgeIntersection(intPt,segmentIndex,dist),ei=this._nodeMap.get(eiNew);return ei!==null?ei:(this._nodeMap.put(eiNew,eiNew),eiNew)};EdgeIntersectionList.prototype.isIntersection=function(pt){for(var it=this.iterator();it.hasNext();){var ei=it.next();if(ei.coord.equals(pt))return!0}return!1};EdgeIntersectionList.prototype.interfaces_=function(){return[]};EdgeIntersectionList.prototype.getClass=function(){return EdgeIntersectionList};var MonotoneChainIndexer=function(){};MonotoneChainIndexer.prototype.getChainStartIndices=function(pts){var this$1=this,start=0,startIndexList=new ArrayList;startIndexList.add(new Integer(start));do{var last=this$1.findChainEnd(pts,start);startIndexList.add(new Integer(last)),start=last}while(start<pts.length-1);var startIndex=MonotoneChainIndexer.toIntArray(startIndexList);return startIndex};MonotoneChainIndexer.prototype.findChainEnd=function(pts,start){for(var chainQuad=Quadrant.quadrant(pts[start],pts[start+1]),last=start+1;last<pts.length;){var quad=Quadrant.quadrant(pts[last-1],pts[last]);if(quad!==chainQuad)break;last++}return last-1};MonotoneChainIndexer.prototype.interfaces_=function(){return[]};MonotoneChainIndexer.prototype.getClass=function(){return MonotoneChainIndexer};MonotoneChainIndexer.toIntArray=function(list){for(var array2=new Array(list.size()).fill(null),i=0;i<array2.length;i++)array2[i]=list.get(i).intValue();return array2};var MonotoneChainEdge=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Envelope,this.env2=new Envelope;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var mcb=new MonotoneChainIndexer;this.startIndex=mcb.getChainStartIndices(this.pts)};MonotoneChainEdge.prototype.getCoordinates=function(){return this.pts};MonotoneChainEdge.prototype.getMaxX=function(chainIndex){var x12=this.pts[this.startIndex[chainIndex]].x,x2=this.pts[this.startIndex[chainIndex+1]].x;return x12>x2?x12:x2};MonotoneChainEdge.prototype.getMinX=function(chainIndex){var x12=this.pts[this.startIndex[chainIndex]].x,x2=this.pts[this.startIndex[chainIndex+1]].x;return x12<x2?x12:x2};MonotoneChainEdge.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var chainIndex0=arguments[0],mce=arguments[1],chainIndex1=arguments[2],si=arguments[3];this.computeIntersectsForChain(this.startIndex[chainIndex0],this.startIndex[chainIndex0+1],mce,mce.startIndex[chainIndex1],mce.startIndex[chainIndex1+1],si)}else if(arguments.length===6){var start0=arguments[0],end0=arguments[1],mce$1=arguments[2],start1=arguments[3],end1=arguments[4],ei=arguments[5],p002=this.pts[start0],p012=this.pts[end0],p102=mce$1.pts[start1],p112=mce$1.pts[end1];if(end0-start0===1&&end1-start1===1)return ei.addIntersections(this.e,start0,mce$1.e,start1),null;if(this.env1.init(p002,p012),this.env2.init(p102,p112),!this.env1.intersects(this.env2))return null;var mid0=Math.trunc((start0+end0)/2),mid1=Math.trunc((start1+end1)/2);start0<mid0&&(start1<mid1&&this.computeIntersectsForChain(start0,mid0,mce$1,start1,mid1,ei),mid1<end1&&this.computeIntersectsForChain(start0,mid0,mce$1,mid1,end1,ei)),mid0<end0&&(start1<mid1&&this.computeIntersectsForChain(mid0,end0,mce$1,start1,mid1,ei),mid1<end1&&this.computeIntersectsForChain(mid0,end0,mce$1,mid1,end1,ei))}};MonotoneChainEdge.prototype.getStartIndexes=function(){return this.startIndex};MonotoneChainEdge.prototype.computeIntersects=function(mce,si){for(var this$1=this,i=0;i<this.startIndex.length-1;i++)for(var j=0;j<mce.startIndex.length-1;j++)this$1.computeIntersectsForChain(i,mce,j,si)};MonotoneChainEdge.prototype.interfaces_=function(){return[]};MonotoneChainEdge.prototype.getClass=function(){return MonotoneChainEdge};var Depth=function Depth2(){var this$1=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var i=0;i<2;i++)for(var j=0;j<3;j++)this$1._depth[i][j]=Depth2.NULL_VALUE},staticAccessors$31={NULL_VALUE:{configurable:!0}};Depth.prototype.getDepth=function(geomIndex,posIndex){return this._depth[geomIndex][posIndex]};Depth.prototype.setDepth=function(geomIndex,posIndex,depthValue){this._depth[geomIndex][posIndex]=depthValue};Depth.prototype.isNull=function(){var this$1=this;if(arguments.length===0){for(var i=0;i<2;i++)for(var j=0;j<3;j++)if(this$1._depth[i][j]!==Depth.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var geomIndex=arguments[0];return this._depth[geomIndex][1]===Depth.NULL_VALUE}else if(arguments.length===2){var geomIndex$1=arguments[0],posIndex=arguments[1];return this._depth[geomIndex$1][posIndex]===Depth.NULL_VALUE}};Depth.prototype.normalize=function(){for(var this$1=this,i=0;i<2;i++)if(!this$1.isNull(i)){var minDepth=this$1._depth[i][1];this$1._depth[i][2]<minDepth&&(minDepth=this$1._depth[i][2]),minDepth<0&&(minDepth=0);for(var j=1;j<3;j++){var newValue=0;this$1._depth[i][j]>minDepth&&(newValue=1),this$1._depth[i][j]=newValue}}};Depth.prototype.getDelta=function(geomIndex){return this._depth[geomIndex][Position.RIGHT]-this._depth[geomIndex][Position.LEFT]};Depth.prototype.getLocation=function(geomIndex,posIndex){return this._depth[geomIndex][posIndex]<=0?Location.EXTERIOR:Location.INTERIOR};Depth.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Depth.prototype.add=function(){var this$1=this;if(arguments.length===1)for(var lbl=arguments[0],i=0;i<2;i++)for(var j=1;j<3;j++){var loc=lbl.getLocation(i,j);(loc===Location.EXTERIOR||loc===Location.INTERIOR)&&(this$1.isNull(i,j)?this$1._depth[i][j]=Depth.depthAtLocation(loc):this$1._depth[i][j]+=Depth.depthAtLocation(loc))}else if(arguments.length===3){var geomIndex=arguments[0],posIndex=arguments[1],location=arguments[2];location===Location.INTERIOR&&this._depth[geomIndex][posIndex]++}};Depth.prototype.interfaces_=function(){return[]};Depth.prototype.getClass=function(){return Depth};Depth.depthAtLocation=function(location){return location===Location.EXTERIOR?0:location===Location.INTERIOR?1:Depth.NULL_VALUE};staticAccessors$31.NULL_VALUE.get=function(){return-1};Object.defineProperties(Depth,staticAccessors$31);var Edge2=function(GraphComponent$$1){function Edge3(){if(GraphComponent$$1.call(this),this.pts=null,this._env=null,this.eiList=new EdgeIntersectionList(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Depth,this._depthDelta=0,arguments.length===1){var pts=arguments[0];Edge3.call(this,pts,null)}else if(arguments.length===2){var pts$1=arguments[0],label=arguments[1];this.pts=pts$1,this._label=label}}return GraphComponent$$1&&(Edge3.__proto__=GraphComponent$$1),Edge3.prototype=Object.create(GraphComponent$$1&&GraphComponent$$1.prototype),Edge3.prototype.constructor=Edge3,Edge3.prototype.getDepth=function(){return this._depth},Edge3.prototype.getCollapsedEdge=function(){var newPts=new Array(2).fill(null);newPts[0]=this.pts[0],newPts[1]=this.pts[1];var newe=new Edge3(newPts,Label.toLineLabel(this._label));return newe},Edge3.prototype.isIsolated=function(){return this._isIsolated},Edge3.prototype.getCoordinates=function(){return this.pts},Edge3.prototype.setIsolated=function(isIsolated2){this._isIsolated=isIsolated2},Edge3.prototype.setName=function(name){this._name=name},Edge3.prototype.equals=function(o){var this$1=this;if(!(o instanceof Edge3))return!1;var e=o;if(this.pts.length!==e.pts.length)return!1;for(var isEqualForward=!0,isEqualReverse=!0,iRev=this.pts.length,i=0;i<this.pts.length;i++)if(this$1.pts[i].equals2D(e.pts[i])||(isEqualForward=!1),this$1.pts[i].equals2D(e.pts[--iRev])||(isEqualReverse=!1),!isEqualForward&&!isEqualReverse)return!1;return!0},Edge3.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var i=arguments[0];return this.pts[i]}},Edge3.prototype.print=function(out){var this$1=this;out.print("edge "+this._name+": "),out.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&out.print(","),out.print(this$1.pts[i].x+" "+this$1.pts[i].y);out.print(")  "+this._label+" "+this._depthDelta)},Edge3.prototype.computeIM=function(im){Edge3.updateIM(this._label,im)},Edge3.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},Edge3.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},Edge3.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},Edge3.prototype.getDepthDelta=function(){return this._depthDelta},Edge3.prototype.getNumPoints=function(){return this.pts.length},Edge3.prototype.printReverse=function(out){var this$1=this;out.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)out.print(this$1.pts[i]+" ");out.println("")},Edge3.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new MonotoneChainEdge(this)),this._mce},Edge3.prototype.getEnvelope=function(){var this$1=this;if(this._env===null){this._env=new Envelope;for(var i=0;i<this.pts.length;i++)this$1._env.expandToInclude(this$1.pts[i])}return this._env},Edge3.prototype.addIntersection=function(li,segmentIndex,geomIndex,intIndex){var intPt=new Coordinate(li.getIntersection(intIndex)),normalizedSegmentIndex=segmentIndex,dist=li.getEdgeDistance(geomIndex,intIndex),nextSegIndex=normalizedSegmentIndex+1;if(nextSegIndex<this.pts.length){var nextPt=this.pts[nextSegIndex];intPt.equals2D(nextPt)&&(normalizedSegmentIndex=nextSegIndex,dist=0)}this.eiList.add(intPt,normalizedSegmentIndex,dist)},Edge3.prototype.toString=function(){var this$1=this,buf=new StringBuffer;buf.append("edge "+this._name+": "),buf.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&buf.append(","),buf.append(this$1.pts[i].x+" "+this$1.pts[i].y);return buf.append(")  "+this._label+" "+this._depthDelta),buf.toString()},Edge3.prototype.isPointwiseEqual=function(e){var this$1=this;if(this.pts.length!==e.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!this$1.pts[i].equals2D(e.pts[i]))return!1;return!0},Edge3.prototype.setDepthDelta=function(depthDelta2){this._depthDelta=depthDelta2},Edge3.prototype.getEdgeIntersectionList=function(){return this.eiList},Edge3.prototype.addIntersections=function(li,segmentIndex,geomIndex){for(var this$1=this,i=0;i<li.getIntersectionNum();i++)this$1.addIntersection(li,segmentIndex,geomIndex,i)},Edge3.prototype.interfaces_=function(){return[]},Edge3.prototype.getClass=function(){return Edge3},Edge3.updateIM=function(){if(arguments.length===2){var label=arguments[0],im=arguments[1];im.setAtLeastIfValid(label.getLocation(0,Position.ON),label.getLocation(1,Position.ON),1),label.isArea()&&(im.setAtLeastIfValid(label.getLocation(0,Position.LEFT),label.getLocation(1,Position.LEFT),2),im.setAtLeastIfValid(label.getLocation(0,Position.RIGHT),label.getLocation(1,Position.RIGHT),2))}else return GraphComponent$$1.prototype.updateIM.apply(this,arguments)},Edge3}(GraphComponent),BufferBuilder=function(bufParams){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new EdgeList,this._bufParams=bufParams||null};BufferBuilder.prototype.setWorkingPrecisionModel=function(pm){this._workingPrecisionModel=pm};BufferBuilder.prototype.insertUniqueEdge=function(e){var existingEdge=this._edgeList.findEqualEdge(e);if(existingEdge!==null){var existingLabel=existingEdge.getLabel(),labelToMerge=e.getLabel();existingEdge.isPointwiseEqual(e)||(labelToMerge=new Label(e.getLabel()),labelToMerge.flip()),existingLabel.merge(labelToMerge);var mergeDelta=BufferBuilder.depthDelta(labelToMerge),existingDelta=existingEdge.getDepthDelta(),newDelta=existingDelta+mergeDelta;existingEdge.setDepthDelta(newDelta)}else this._edgeList.add(e),e.setDepthDelta(BufferBuilder.depthDelta(e.getLabel()))};BufferBuilder.prototype.buildSubgraphs=function(subgraphList,polyBuilder){for(var processedGraphs=new ArrayList,i=subgraphList.iterator();i.hasNext();){var subgraph=i.next(),p=subgraph.getRightmostCoordinate(),locater=new SubgraphDepthLocater(processedGraphs),outsideDepth=locater.getDepth(p);subgraph.computeDepth(outsideDepth),subgraph.findResultEdges(),processedGraphs.add(subgraph),polyBuilder.add(subgraph.getDirectedEdges(),subgraph.getNodes())}};BufferBuilder.prototype.createSubgraphs=function(graph){for(var subgraphList=new ArrayList,i=graph.getNodes().iterator();i.hasNext();){var node=i.next();if(!node.isVisited()){var subgraph=new BufferSubgraph;subgraph.create(node),subgraphList.add(subgraph)}}return Collections.sort(subgraphList,Collections.reverseOrder()),subgraphList};BufferBuilder.prototype.createEmptyResultGeometry=function(){var emptyGeom=this._geomFact.createPolygon();return emptyGeom};BufferBuilder.prototype.getNoder=function(precisionModel){if(this._workingNoder!==null)return this._workingNoder;var noder=new MCIndexNoder,li=new RobustLineIntersector;return li.setPrecisionModel(precisionModel),noder.setSegmentIntersector(new IntersectionAdder(li)),noder};BufferBuilder.prototype.buffer=function(g,distance10){var precisionModel=this._workingPrecisionModel;precisionModel===null&&(precisionModel=g.getPrecisionModel()),this._geomFact=g.getFactory();var curveBuilder=new OffsetCurveBuilder(precisionModel,this._bufParams),curveSetBuilder=new OffsetCurveSetBuilder(g,distance10,curveBuilder),bufferSegStrList=curveSetBuilder.getCurves();if(bufferSegStrList.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(bufferSegStrList,precisionModel),this._graph=new PlanarGraph(new OverlayNodeFactory),this._graph.addEdges(this._edgeList.getEdges());var subgraphList=this.createSubgraphs(this._graph),polyBuilder=new PolygonBuilder(this._geomFact);this.buildSubgraphs(subgraphList,polyBuilder);var resultPolyList=polyBuilder.getPolygons();if(resultPolyList.size()<=0)return this.createEmptyResultGeometry();var resultGeom=this._geomFact.buildGeometry(resultPolyList);return resultGeom};BufferBuilder.prototype.computeNodedEdges=function(bufferSegStrList,precisionModel){var this$1=this,noder=this.getNoder(precisionModel);noder.computeNodes(bufferSegStrList);for(var nodedSegStrings=noder.getNodedSubstrings(),i=nodedSegStrings.iterator();i.hasNext();){var segStr=i.next(),pts=segStr.getCoordinates();if(!(pts.length===2&&pts[0].equals2D(pts[1]))){var oldLabel=segStr.getData(),edge=new Edge2(segStr.getCoordinates(),new Label(oldLabel));this$1.insertUniqueEdge(edge)}}};BufferBuilder.prototype.setNoder=function(noder){this._workingNoder=noder};BufferBuilder.prototype.interfaces_=function(){return[]};BufferBuilder.prototype.getClass=function(){return BufferBuilder};BufferBuilder.depthDelta=function(label){var lLoc=label.getLocation(0,Position.LEFT),rLoc=label.getLocation(0,Position.RIGHT);return lLoc===Location.INTERIOR&&rLoc===Location.EXTERIOR?1:lLoc===Location.EXTERIOR&&rLoc===Location.INTERIOR?-1:0};BufferBuilder.convertSegStrings=function(it){for(var fact=new GeometryFactory,lines=new ArrayList;it.hasNext();){var ss=it.next(),line=fact.createLineString(ss.getCoordinates());lines.add(line)}return fact.buildGeometry(lines)};var ScaledNoder=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var noder=arguments[0],scaleFactor=arguments[1];this._noder=noder,this._scaleFactor=scaleFactor,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var noder$1=arguments[0],scaleFactor$1=arguments[1],offsetX=arguments[2],offsetY=arguments[3];this._noder=noder$1,this._scaleFactor=scaleFactor$1,this._offsetX=offsetX,this._offsetY=offsetY,this._isScaled=!this.isIntegerPrecision()}};ScaledNoder.prototype.rescale=function(){var this$1=this;if(hasInterface(arguments[0],Collection))for(var segStrings=arguments[0],i=segStrings.iterator();i.hasNext();){var ss=i.next();this$1.rescale(ss.getCoordinates())}else if(arguments[0]instanceof Array){for(var pts=arguments[0],i$1=0;i$1<pts.length;i$1++)pts[i$1].x=pts[i$1].x/this$1._scaleFactor+this$1._offsetX,pts[i$1].y=pts[i$1].y/this$1._scaleFactor+this$1._offsetY;pts.length===2&&pts[0].equals2D(pts[1])&&System.out.println(pts)}};ScaledNoder.prototype.scale=function(){var this$1=this;if(hasInterface(arguments[0],Collection)){for(var segStrings=arguments[0],nodedSegmentStrings=new ArrayList,i=segStrings.iterator();i.hasNext();){var ss=i.next();nodedSegmentStrings.add(new NodedSegmentString(this$1.scale(ss.getCoordinates()),ss.getData()))}return nodedSegmentStrings}else if(arguments[0]instanceof Array){for(var pts=arguments[0],roundPts=new Array(pts.length).fill(null),i$1=0;i$1<pts.length;i$1++)roundPts[i$1]=new Coordinate(Math.round((pts[i$1].x-this$1._offsetX)*this$1._scaleFactor),Math.round((pts[i$1].y-this$1._offsetY)*this$1._scaleFactor),pts[i$1].z);var roundPtsNoDup=CoordinateArrays.removeRepeatedPoints(roundPts);return roundPtsNoDup}};ScaledNoder.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};ScaledNoder.prototype.getNodedSubstrings=function(){var splitSS=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(splitSS),splitSS};ScaledNoder.prototype.computeNodes=function(inputSegStrings){var intSegStrings=inputSegStrings;this._isScaled&&(intSegStrings=this.scale(inputSegStrings)),this._noder.computeNodes(intSegStrings)};ScaledNoder.prototype.interfaces_=function(){return[Noder]};ScaledNoder.prototype.getClass=function(){return ScaledNoder};var NodingValidator=function(){this._li=new RobustLineIntersector,this._segStrings=null;var segStrings=arguments[0];this._segStrings=segStrings},staticAccessors$33={fact:{configurable:!0}};NodingValidator.prototype.checkEndPtVertexIntersections=function(){var this$1=this;if(arguments.length===0)for(var i=this._segStrings.iterator();i.hasNext();){var ss=i.next(),pts=ss.getCoordinates();this$1.checkEndPtVertexIntersections(pts[0],this$1._segStrings),this$1.checkEndPtVertexIntersections(pts[pts.length-1],this$1._segStrings)}else if(arguments.length===2){for(var testPt=arguments[0],segStrings=arguments[1],i$1=segStrings.iterator();i$1.hasNext();)for(var ss$1=i$1.next(),pts$1=ss$1.getCoordinates(),j=1;j<pts$1.length-1;j++)if(pts$1[j].equals(testPt))throw new RuntimeException("found endpt/interior pt intersection at index "+j+" :pt "+testPt)}};NodingValidator.prototype.checkInteriorIntersections=function(){var this$1=this;if(arguments.length===0)for(var i=this._segStrings.iterator();i.hasNext();)for(var ss0=i.next(),j=this._segStrings.iterator();j.hasNext();){var ss1=j.next();this$1.checkInteriorIntersections(ss0,ss1)}else if(arguments.length===2)for(var ss0$1=arguments[0],ss1$1=arguments[1],pts0=ss0$1.getCoordinates(),pts1=ss1$1.getCoordinates(),i0=0;i0<pts0.length-1;i0++)for(var i1=0;i1<pts1.length-1;i1++)this$1.checkInteriorIntersections(ss0$1,i0,ss1$1,i1);else if(arguments.length===4){var e0=arguments[0],segIndex0=arguments[1],e1=arguments[2],segIndex1=arguments[3];if(e0===e1&&segIndex0===segIndex1)return null;var p002=e0.getCoordinates()[segIndex0],p012=e0.getCoordinates()[segIndex0+1],p102=e1.getCoordinates()[segIndex1],p112=e1.getCoordinates()[segIndex1+1];if(this._li.computeIntersection(p002,p012,p102,p112),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p002,p012)||this.hasInteriorIntersection(this._li,p102,p112)))throw new RuntimeException("found non-noded intersection at "+p002+"-"+p012+" and "+p102+"-"+p112)}};NodingValidator.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};NodingValidator.prototype.checkCollapses=function(){var this$1=this;if(arguments.length===0)for(var i=this._segStrings.iterator();i.hasNext();){var ss=i.next();this$1.checkCollapses(ss)}else if(arguments.length===1)for(var ss$1=arguments[0],pts=ss$1.getCoordinates(),i$1=0;i$1<pts.length-2;i$1++)this$1.checkCollapse(pts[i$1],pts[i$1+1],pts[i$1+2])};NodingValidator.prototype.hasInteriorIntersection=function(li,p0,p1){for(var i=0;i<li.getIntersectionNum();i++){var intPt=li.getIntersection(i);if(!(intPt.equals(p0)||intPt.equals(p1)))return!0}return!1};NodingValidator.prototype.checkCollapse=function(p0,p1,p2){if(p0.equals(p2))throw new RuntimeException("found non-noded collapse at "+NodingValidator.fact.createLineString([p0,p1,p2]))};NodingValidator.prototype.interfaces_=function(){return[]};NodingValidator.prototype.getClass=function(){return NodingValidator};staticAccessors$33.fact.get=function(){return new GeometryFactory};Object.defineProperties(NodingValidator,staticAccessors$33);var HotPixel=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var pt=arguments[0],scaleFactor=arguments[1],li=arguments[2];if(this._originalPt=pt,this._pt=pt,this._scaleFactor=scaleFactor,this._li=li,scaleFactor<=0)throw new IllegalArgumentException("Scale factor must be non-zero");scaleFactor!==1&&(this._pt=new Coordinate(this.scale(pt.x),this.scale(pt.y)),this._p0Scaled=new Coordinate,this._p1Scaled=new Coordinate),this.initCorners(this._pt)},staticAccessors$34={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};HotPixel.prototype.intersectsScaled=function(p0,p1){var segMinx=Math.min(p0.x,p1.x),segMaxx=Math.max(p0.x,p1.x),segMiny=Math.min(p0.y,p1.y),segMaxy=Math.max(p0.y,p1.y),isOutsidePixelEnv=this._maxx<segMinx||this._minx>segMaxx||this._maxy<segMiny||this._miny>segMaxy;if(isOutsidePixelEnv)return!1;var intersects8=this.intersectsToleranceSquare(p0,p1);return Assert.isTrue(!(isOutsidePixelEnv&&intersects8),"Found bad envelope test"),intersects8};HotPixel.prototype.initCorners=function(pt){var tolerance=.5;this._minx=pt.x-tolerance,this._maxx=pt.x+tolerance,this._miny=pt.y-tolerance,this._maxy=pt.y+tolerance,this._corner[0]=new Coordinate(this._maxx,this._maxy),this._corner[1]=new Coordinate(this._minx,this._maxy),this._corner[2]=new Coordinate(this._minx,this._miny),this._corner[3]=new Coordinate(this._maxx,this._miny)};HotPixel.prototype.intersects=function(p0,p1){return this._scaleFactor===1?this.intersectsScaled(p0,p1):(this.copyScaled(p0,this._p0Scaled),this.copyScaled(p1,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};HotPixel.prototype.scale=function(val){return Math.round(val*this._scaleFactor)};HotPixel.prototype.getCoordinate=function(){return this._originalPt};HotPixel.prototype.copyScaled=function(p,pScaled){pScaled.x=this.scale(p.x),pScaled.y=this.scale(p.y)};HotPixel.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var safeTolerance=HotPixel.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Envelope(this._originalPt.x-safeTolerance,this._originalPt.x+safeTolerance,this._originalPt.y-safeTolerance,this._originalPt.y+safeTolerance)}return this._safeEnv};HotPixel.prototype.intersectsPixelClosure=function(p0,p1){return this._li.computeIntersection(p0,p1,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(p0,p1,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(p0,p1,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(p0,p1,this._corner[3],this._corner[0]),this._li.hasIntersection()))};HotPixel.prototype.intersectsToleranceSquare=function(p0,p1){var intersectsLeft=!1,intersectsBottom=!1;return this._li.computeIntersection(p0,p1,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(p0,p1,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(intersectsLeft=!0),this._li.computeIntersection(p0,p1,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(intersectsBottom=!0),this._li.computeIntersection(p0,p1,this._corner[3],this._corner[0]),this._li.isProper())||intersectsLeft&&intersectsBottom||p0.equals(this._pt)||p1.equals(this._pt))};HotPixel.prototype.addSnappedNode=function(segStr,segIndex){var p0=segStr.getCoordinate(segIndex),p1=segStr.getCoordinate(segIndex+1);return this.intersects(p0,p1)?(segStr.addIntersection(this.getCoordinate(),segIndex),!0):!1};HotPixel.prototype.interfaces_=function(){return[]};HotPixel.prototype.getClass=function(){return HotPixel};staticAccessors$34.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(HotPixel,staticAccessors$34);var MonotoneChainSelectAction=function(){this.tempEnv1=new Envelope,this.selectedSegment=new LineSegment};MonotoneChainSelectAction.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var mc=arguments[0],startIndex=arguments[1];mc.getLineSegment(startIndex,this.selectedSegment),this.select(this.selectedSegment)}}};MonotoneChainSelectAction.prototype.interfaces_=function(){return[]};MonotoneChainSelectAction.prototype.getClass=function(){return MonotoneChainSelectAction};var MCIndexPointSnapper=function(){this._index=null;var index=arguments[0];this._index=index},staticAccessors$35={HotPixelSnapAction:{configurable:!0}};MCIndexPointSnapper.prototype.snap=function(){if(arguments.length===1){var hotPixel=arguments[0];return this.snap(hotPixel,null,-1)}else if(arguments.length===3){var hotPixel$1=arguments[0],parentEdge=arguments[1],hotPixelVertexIndex=arguments[2],pixelEnv=hotPixel$1.getSafeEnvelope(),hotPixelSnapAction=new HotPixelSnapAction(hotPixel$1,parentEdge,hotPixelVertexIndex);return this._index.query(pixelEnv,{interfaces_:function(){return[ItemVisitor]},visitItem:function(item){var testChain=item;testChain.select(pixelEnv,hotPixelSnapAction)}}),hotPixelSnapAction.isNodeAdded()}};MCIndexPointSnapper.prototype.interfaces_=function(){return[]};MCIndexPointSnapper.prototype.getClass=function(){return MCIndexPointSnapper};staticAccessors$35.HotPixelSnapAction.get=function(){return HotPixelSnapAction};Object.defineProperties(MCIndexPointSnapper,staticAccessors$35);var HotPixelSnapAction=function(MonotoneChainSelectAction$$1){function HotPixelSnapAction2(){MonotoneChainSelectAction$$1.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var hotPixel=arguments[0],parentEdge=arguments[1],hotPixelVertexIndex=arguments[2];this._hotPixel=hotPixel,this._parentEdge=parentEdge,this._hotPixelVertexIndex=hotPixelVertexIndex}return MonotoneChainSelectAction$$1&&(HotPixelSnapAction2.__proto__=MonotoneChainSelectAction$$1),HotPixelSnapAction2.prototype=Object.create(MonotoneChainSelectAction$$1&&MonotoneChainSelectAction$$1.prototype),HotPixelSnapAction2.prototype.constructor=HotPixelSnapAction2,HotPixelSnapAction2.prototype.isNodeAdded=function(){return this._isNodeAdded},HotPixelSnapAction2.prototype.select=function(){if(arguments.length===2){var mc=arguments[0],startIndex=arguments[1],ss=mc.getContext();if(this._parentEdge!==null&&ss===this._parentEdge&&startIndex===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(ss,startIndex)}else return MonotoneChainSelectAction$$1.prototype.select.apply(this,arguments)},HotPixelSnapAction2.prototype.interfaces_=function(){return[]},HotPixelSnapAction2.prototype.getClass=function(){return HotPixelSnapAction2},HotPixelSnapAction2}(MonotoneChainSelectAction),InteriorIntersectionFinderAdder=function(){this._li=null,this._interiorIntersections=null;var li=arguments[0];this._li=li,this._interiorIntersections=new ArrayList};InteriorIntersectionFinderAdder.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){var this$1=this;if(e0===e1&&segIndex0===segIndex1)return null;var p002=e0.getCoordinates()[segIndex0],p012=e0.getCoordinates()[segIndex0+1],p102=e1.getCoordinates()[segIndex1],p112=e1.getCoordinates()[segIndex1+1];if(this._li.computeIntersection(p002,p012,p102,p112),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var intIndex=0;intIndex<this._li.getIntersectionNum();intIndex++)this$1._interiorIntersections.add(this$1._li.getIntersection(intIndex));e0.addIntersections(this._li,segIndex0,0),e1.addIntersections(this._li,segIndex1,1)}};InteriorIntersectionFinderAdder.prototype.isDone=function(){return!1};InteriorIntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this._interiorIntersections};InteriorIntersectionFinderAdder.prototype.interfaces_=function(){return[SegmentIntersector]};InteriorIntersectionFinderAdder.prototype.getClass=function(){return InteriorIntersectionFinderAdder};var MCIndexSnapRounder=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var pm=arguments[0];this._pm=pm,this._li=new RobustLineIntersector,this._li.setPrecisionModel(pm),this._scaleFactor=pm.getScale()};MCIndexSnapRounder.prototype.checkCorrectness=function(inputSegmentStrings){var resultSegStrings=NodedSegmentString.getNodedSubstrings(inputSegmentStrings),nv=new NodingValidator(resultSegStrings);try{nv.checkValid()}catch(ex){if(ex instanceof Exception)ex.printStackTrace();else throw ex}finally{}};MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return NodedSegmentString.getNodedSubstrings(this._nodedSegStrings)};MCIndexSnapRounder.prototype.snapRound=function(segStrings,li){var intersections=this.findInteriorIntersections(segStrings,li);this.computeIntersectionSnaps(intersections),this.computeVertexSnaps(segStrings)};MCIndexSnapRounder.prototype.findInteriorIntersections=function(segStrings,li){var intFinderAdder=new InteriorIntersectionFinderAdder(li);return this._noder.setSegmentIntersector(intFinderAdder),this._noder.computeNodes(segStrings),intFinderAdder.getInteriorIntersections()};MCIndexSnapRounder.prototype.computeVertexSnaps=function(){var this$1=this;if(hasInterface(arguments[0],Collection))for(var edges2=arguments[0],i0=edges2.iterator();i0.hasNext();){var edge0=i0.next();this$1.computeVertexSnaps(edge0)}else if(arguments[0]instanceof NodedSegmentString)for(var e=arguments[0],pts0=e.getCoordinates(),i=0;i<pts0.length;i++){var hotPixel=new HotPixel(pts0[i],this$1._scaleFactor,this$1._li),isNodeAdded=this$1._pointSnapper.snap(hotPixel,e,i);isNodeAdded&&e.addIntersection(pts0[i],i)}};MCIndexSnapRounder.prototype.computeNodes=function(inputSegmentStrings){this._nodedSegStrings=inputSegmentStrings,this._noder=new MCIndexNoder,this._pointSnapper=new MCIndexPointSnapper(this._noder.getIndex()),this.snapRound(inputSegmentStrings,this._li)};MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(snapPts){for(var this$1=this,it=snapPts.iterator();it.hasNext();){var snapPt=it.next(),hotPixel=new HotPixel(snapPt,this$1._scaleFactor,this$1._li);this$1._pointSnapper.snap(hotPixel)}};MCIndexSnapRounder.prototype.interfaces_=function(){return[Noder]};MCIndexSnapRounder.prototype.getClass=function(){return MCIndexSnapRounder};var BufferOp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new BufferParameters,this._resultGeometry=null,this._saveException=null,arguments.length===1){var g=arguments[0];this._argGeom=g}else if(arguments.length===2){var g$1=arguments[0],bufParams=arguments[1];this._argGeom=g$1,this._bufParams=bufParams}},staticAccessors$32={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};BufferOp.prototype.bufferFixedPrecision=function(fixedPM){var noder=new ScaledNoder(new MCIndexSnapRounder(new PrecisionModel(1)),fixedPM.getScale()),bufBuilder=new BufferBuilder(this._bufParams);bufBuilder.setWorkingPrecisionModel(fixedPM),bufBuilder.setNoder(noder),this._resultGeometry=bufBuilder.buffer(this._argGeom,this._distance)};BufferOp.prototype.bufferReducedPrecision=function(){var this$1=this;if(arguments.length===0){for(var precDigits=BufferOp.MAX_PRECISION_DIGITS;precDigits>=0;precDigits--){try{this$1.bufferReducedPrecision(precDigits)}catch(ex){if(ex instanceof TopologyException)this$1._saveException=ex;else throw ex}finally{}if(this$1._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var precisionDigits=arguments[0],sizeBasedScaleFactor=BufferOp.precisionScaleFactor(this._argGeom,this._distance,precisionDigits),fixedPM=new PrecisionModel(sizeBasedScaleFactor);this.bufferFixedPrecision(fixedPM)}};BufferOp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var argPM=this._argGeom.getFactory().getPrecisionModel();argPM.getType()===PrecisionModel.FIXED?this.bufferFixedPrecision(argPM):this.bufferReducedPrecision()};BufferOp.prototype.setQuadrantSegments=function(quadrantSegments){this._bufParams.setQuadrantSegments(quadrantSegments)};BufferOp.prototype.bufferOriginalPrecision=function(){try{var bufBuilder=new BufferBuilder(this._bufParams);this._resultGeometry=bufBuilder.buffer(this._argGeom,this._distance)}catch(ex){if(ex instanceof RuntimeException)this._saveException=ex;else throw ex}finally{}};BufferOp.prototype.getResultGeometry=function(distance10){return this._distance=distance10,this.computeGeometry(),this._resultGeometry};BufferOp.prototype.setEndCapStyle=function(endCapStyle){this._bufParams.setEndCapStyle(endCapStyle)};BufferOp.prototype.interfaces_=function(){return[]};BufferOp.prototype.getClass=function(){return BufferOp};BufferOp.bufferOp=function(){if(arguments.length===2){var g=arguments[0],distance10=arguments[1],gBuf=new BufferOp(g),geomBuf=gBuf.getResultGeometry(distance10);return geomBuf}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var g$1=arguments[0],distance$1=arguments[1],quadrantSegments=arguments[2],bufOp=new BufferOp(g$1);bufOp.setQuadrantSegments(quadrantSegments);var geomBuf$1=bufOp.getResultGeometry(distance$1);return geomBuf$1}else if(arguments[2]instanceof BufferParameters&&arguments[0]instanceof Geometry&&typeof arguments[1]=="number"){var g$2=arguments[0],distance$2=arguments[1],params=arguments[2],bufOp$1=new BufferOp(g$2,params),geomBuf$2=bufOp$1.getResultGeometry(distance$2);return geomBuf$2}}else if(arguments.length===4){var g$3=arguments[0],distance$3=arguments[1],quadrantSegments$1=arguments[2],endCapStyle=arguments[3],bufOp$2=new BufferOp(g$3);bufOp$2.setQuadrantSegments(quadrantSegments$1),bufOp$2.setEndCapStyle(endCapStyle);var geomBuf$3=bufOp$2.getResultGeometry(distance$3);return geomBuf$3}};BufferOp.precisionScaleFactor=function(g,distance10,maxPrecisionDigits){var env=g.getEnvelopeInternal(),envMax=MathUtil.max(Math.abs(env.getMaxX()),Math.abs(env.getMaxY()),Math.abs(env.getMinX()),Math.abs(env.getMinY())),expandByDistance=distance10>0?distance10:0,bufEnvMax=envMax+2*expandByDistance,bufEnvPrecisionDigits=Math.trunc(Math.log(bufEnvMax)/Math.log(10)+1),minUnitLog10=maxPrecisionDigits-bufEnvPrecisionDigits,scaleFactor=Math.pow(10,minUnitLog10);return scaleFactor};staticAccessors$32.CAP_ROUND.get=function(){return BufferParameters.CAP_ROUND};staticAccessors$32.CAP_BUTT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_FLAT.get=function(){return BufferParameters.CAP_FLAT};staticAccessors$32.CAP_SQUARE.get=function(){return BufferParameters.CAP_SQUARE};staticAccessors$32.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(BufferOp,staticAccessors$32);var PointPairDistance=function(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance.prototype.getCoordinates=function(){return this._pt};PointPairDistance.prototype.getCoordinate=function(i){return this._pt[i]};PointPairDistance.prototype.setMinimum=function(){if(arguments.length===1){var ptDist=arguments[0];this.setMinimum(ptDist._pt[0],ptDist._pt[1])}else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];if(this._isNull)return this.initialize(p0,p1),null;var dist=p0.distance(p1);dist<this._distance&&this.initialize(p0,p1,dist)}};PointPairDistance.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];this._pt[0].setCoordinate(p0),this._pt[1].setCoordinate(p1),this._distance=p0.distance(p1),this._isNull=!1}else if(arguments.length===3){var p0$1=arguments[0],p1$1=arguments[1],distance10=arguments[2];this._pt[0].setCoordinate(p0$1),this._pt[1].setCoordinate(p1$1),this._distance=distance10,this._isNull=!1}};PointPairDistance.prototype.getDistance=function(){return this._distance};PointPairDistance.prototype.setMaximum=function(){if(arguments.length===1){var ptDist=arguments[0];this.setMaximum(ptDist._pt[0],ptDist._pt[1])}else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];if(this._isNull)return this.initialize(p0,p1),null;var dist=p0.distance(p1);dist>this._distance&&this.initialize(p0,p1,dist)}};PointPairDistance.prototype.interfaces_=function(){return[]};PointPairDistance.prototype.getClass=function(){return PointPairDistance};var DistanceToPointFinder=function(){};DistanceToPointFinder.prototype.interfaces_=function(){return[]};DistanceToPointFinder.prototype.getClass=function(){return DistanceToPointFinder};DistanceToPointFinder.computeDistance=function(){if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineString2&&arguments[1]instanceof Coordinate)for(var line=arguments[0],pt=arguments[1],ptDist=arguments[2],coords=line.getCoordinates(),tempSegment=new LineSegment,i=0;i<coords.length-1;i++){tempSegment.setCoordinates(coords[i],coords[i+1]);var closestPt=tempSegment.closestPoint(pt);ptDist.setMinimum(closestPt,pt)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var poly=arguments[0],pt$1=arguments[1],ptDist$1=arguments[2];DistanceToPointFinder.computeDistance(poly.getExteriorRing(),pt$1,ptDist$1);for(var i$1=0;i$1<poly.getNumInteriorRing();i$1++)DistanceToPointFinder.computeDistance(poly.getInteriorRingN(i$1),pt$1,ptDist$1)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var geom=arguments[0],pt$2=arguments[1],ptDist$2=arguments[2];if(geom instanceof LineString2)DistanceToPointFinder.computeDistance(geom,pt$2,ptDist$2);else if(geom instanceof Polygon)DistanceToPointFinder.computeDistance(geom,pt$2,ptDist$2);else if(geom instanceof GeometryCollection)for(var gc=geom,i$2=0;i$2<gc.getNumGeometries();i$2++){var g=gc.getGeometryN(i$2);DistanceToPointFinder.computeDistance(g,pt$2,ptDist$2)}else ptDist$2.setMinimum(geom.getCoordinate(),pt$2)}else if(arguments[2]instanceof PointPairDistance&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var segment=arguments[0],pt$3=arguments[1],ptDist$3=arguments[2],closestPt$1=segment.closestPoint(pt$3);ptDist$3.setMinimum(closestPt$1,pt$3)}};var BufferCurveMaximumDistanceFinder=function(inputGeom){this._maxPtDist=new PointPairDistance,this._inputGeom=inputGeom||null},staticAccessors$36={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};BufferCurveMaximumDistanceFinder.prototype.computeMaxMidpointDistance=function(curve){var distFilter=new MaxMidpointDistanceFilter(this._inputGeom);curve.apply(distFilter),this._maxPtDist.setMaximum(distFilter.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.computeMaxVertexDistance=function(curve){var distFilter=new MaxPointDistanceFilter(this._inputGeom);curve.apply(distFilter),this._maxPtDist.setMaximum(distFilter.getMaxPointDistance())};BufferCurveMaximumDistanceFinder.prototype.findDistance=function(bufferCurve){return this.computeMaxVertexDistance(bufferCurve),this.computeMaxMidpointDistance(bufferCurve),this._maxPtDist.getDistance()};BufferCurveMaximumDistanceFinder.prototype.getDistancePoints=function(){return this._maxPtDist};BufferCurveMaximumDistanceFinder.prototype.interfaces_=function(){return[]};BufferCurveMaximumDistanceFinder.prototype.getClass=function(){return BufferCurveMaximumDistanceFinder};staticAccessors$36.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter};staticAccessors$36.MaxMidpointDistanceFilter.get=function(){return MaxMidpointDistanceFilter};Object.defineProperties(BufferCurveMaximumDistanceFinder,staticAccessors$36);var MaxPointDistanceFilter=function(geom){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=geom||null};MaxPointDistanceFilter.prototype.filter=function(pt){this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,pt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxPointDistanceFilter.prototype.interfaces_=function(){return[CoordinateFilter]};MaxPointDistanceFilter.prototype.getClass=function(){return MaxPointDistanceFilter};var MaxMidpointDistanceFilter=function(geom){this._maxPtDist=new PointPairDistance,this._minPtDist=new PointPairDistance,this._geom=geom||null};MaxMidpointDistanceFilter.prototype.filter=function(seq,index){if(index===0)return null;var p0=seq.getCoordinate(index-1),p1=seq.getCoordinate(index),midPt=new Coordinate((p0.x+p1.x)/2,(p0.y+p1.y)/2);this._minPtDist.initialize(),DistanceToPointFinder.computeDistance(this._geom,midPt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxMidpointDistanceFilter.prototype.isDone=function(){return!1};MaxMidpointDistanceFilter.prototype.isGeometryChanged=function(){return!1};MaxMidpointDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxMidpointDistanceFilter.prototype.interfaces_=function(){return[CoordinateSequenceFilter]};MaxMidpointDistanceFilter.prototype.getClass=function(){return MaxMidpointDistanceFilter};var PolygonExtracter=function(comps){this._comps=comps||null};PolygonExtracter.prototype.filter=function(geom){geom instanceof Polygon&&this._comps.add(geom)};PolygonExtracter.prototype.interfaces_=function(){return[GeometryFilter]};PolygonExtracter.prototype.getClass=function(){return PolygonExtracter};PolygonExtracter.getPolygons=function(){if(arguments.length===1){var geom=arguments[0];return PolygonExtracter.getPolygons(geom,new ArrayList)}else if(arguments.length===2){var geom$1=arguments[0],list=arguments[1];return geom$1 instanceof Polygon?list.add(geom$1):geom$1 instanceof GeometryCollection&&geom$1.apply(new PolygonExtracter(list)),list}};var LinearComponentExtracter=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var lines=arguments[0];this._lines=lines}else if(arguments.length===2){var lines$1=arguments[0],isForcedToLineString=arguments[1];this._lines=lines$1,this._isForcedToLineString=isForcedToLineString}};LinearComponentExtracter.prototype.filter=function(geom){if(this._isForcedToLineString&&geom instanceof LinearRing){var line=geom.getFactory().createLineString(geom.getCoordinateSequence());return this._lines.add(line),null}geom instanceof LineString2&&this._lines.add(geom)};LinearComponentExtracter.prototype.setForceToLineString=function(isForcedToLineString){this._isForcedToLineString=isForcedToLineString};LinearComponentExtracter.prototype.interfaces_=function(){return[GeometryComponentFilter]};LinearComponentExtracter.prototype.getClass=function(){return LinearComponentExtracter};LinearComponentExtracter.getGeometry=function(){if(arguments.length===1){var geom=arguments[0];return geom.getFactory().buildGeometry(LinearComponentExtracter.getLines(geom))}else if(arguments.length===2){var geom$1=arguments[0],forceToLineString=arguments[1];return geom$1.getFactory().buildGeometry(LinearComponentExtracter.getLines(geom$1,forceToLineString))}};LinearComponentExtracter.getLines=function(){if(arguments.length===1){var geom=arguments[0];return LinearComponentExtracter.getLines(geom,!1)}else if(arguments.length===2){if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var geoms=arguments[0],lines$1=arguments[1],i=geoms.iterator();i.hasNext();){var g=i.next();LinearComponentExtracter.getLines(g,lines$1)}return lines$1}else if(arguments[0]instanceof Geometry&&typeof arguments[1]=="boolean"){var geom$1=arguments[0],forceToLineString=arguments[1],lines=new ArrayList;return geom$1.apply(new LinearComponentExtracter(lines,forceToLineString)),lines}else if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var geom$2=arguments[0],lines$2=arguments[1];return geom$2 instanceof LineString2?lines$2.add(geom$2):geom$2.apply(new LinearComponentExtracter(lines$2)),lines$2}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],Collection)){for(var geoms$1=arguments[0],lines$3=arguments[1],forceToLineString$1=arguments[2],i$1=geoms$1.iterator();i$1.hasNext();){var g$1=i$1.next();LinearComponentExtracter.getLines(g$1,lines$3,forceToLineString$1)}return lines$3}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Geometry&&hasInterface(arguments[1],Collection)){var geom$3=arguments[0],lines$4=arguments[1],forceToLineString$2=arguments[2];return geom$3.apply(new LinearComponentExtracter(lines$4,forceToLineString$2)),lines$4}}};var PointLocator=function(){if(this._boundaryRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var boundaryRule=arguments[0];if(boundaryRule===null)throw new IllegalArgumentException("Rule must be non-null");this._boundaryRule=boundaryRule}}};PointLocator.prototype.locateInternal=function(){var this$1=this;if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Polygon){var p=arguments[0],poly=arguments[1];if(poly.isEmpty())return Location.EXTERIOR;var shell=poly.getExteriorRing(),shellLoc=this.locateInPolygonRing(p,shell);if(shellLoc===Location.EXTERIOR)return Location.EXTERIOR;if(shellLoc===Location.BOUNDARY)return Location.BOUNDARY;for(var i=0;i<poly.getNumInteriorRing();i++){var hole=poly.getInteriorRingN(i),holeLoc=this$1.locateInPolygonRing(p,hole);if(holeLoc===Location.INTERIOR)return Location.EXTERIOR;if(holeLoc===Location.BOUNDARY)return Location.BOUNDARY}return Location.INTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof LineString2){var p$1=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(p$1))return Location.EXTERIOR;var pt=l.getCoordinates();return!l.isClosed()&&(p$1.equals(pt[0])||p$1.equals(pt[pt.length-1]))?Location.BOUNDARY:CGAlgorithms.isOnLine(p$1,pt)?Location.INTERIOR:Location.EXTERIOR}else if(arguments[0]instanceof Coordinate&&arguments[1]instanceof Point){var p$2=arguments[0],pt$1=arguments[1],ptCoord=pt$1.getCoordinate();return ptCoord.equals2D(p$2)?Location.INTERIOR:Location.EXTERIOR}};PointLocator.prototype.locateInPolygonRing=function(p,ring){return ring.getEnvelopeInternal().intersects(p)?CGAlgorithms.locatePointInRing(p,ring.getCoordinates()):Location.EXTERIOR};PointLocator.prototype.intersects=function(p,geom){return this.locate(p,geom)!==Location.EXTERIOR};PointLocator.prototype.updateLocationInfo=function(loc){loc===Location.INTERIOR&&(this._isIn=!0),loc===Location.BOUNDARY&&this._numBoundaries++};PointLocator.prototype.computeLocation=function(p,geom){var this$1=this;if(geom instanceof Point&&this.updateLocationInfo(this.locateInternal(p,geom)),geom instanceof LineString2)this.updateLocationInfo(this.locateInternal(p,geom));else if(geom instanceof Polygon)this.updateLocationInfo(this.locateInternal(p,geom));else if(geom instanceof MultiLineString)for(var ml=geom,i=0;i<ml.getNumGeometries();i++){var l=ml.getGeometryN(i);this$1.updateLocationInfo(this$1.locateInternal(p,l))}else if(geom instanceof MultiPolygon)for(var mpoly=geom,i$1=0;i$1<mpoly.getNumGeometries();i$1++){var poly=mpoly.getGeometryN(i$1);this$1.updateLocationInfo(this$1.locateInternal(p,poly))}else if(geom instanceof GeometryCollection)for(var geomi=new GeometryCollectionIterator(geom);geomi.hasNext();){var g2=geomi.next();g2!==geom&&this$1.computeLocation(p,g2)}};PointLocator.prototype.locate=function(p,geom){return geom.isEmpty()?Location.EXTERIOR:geom instanceof LineString2?this.locateInternal(p,geom):geom instanceof Polygon?this.locateInternal(p,geom):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(p,geom),this._boundaryRule.isInBoundary(this._numBoundaries)?Location.BOUNDARY:this._numBoundaries>0||this._isIn?Location.INTERIOR:Location.EXTERIOR)};PointLocator.prototype.interfaces_=function(){return[]};PointLocator.prototype.getClass=function(){return PointLocator};var GeometryLocation=function GeometryLocation2(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var component=arguments[0],pt=arguments[1];GeometryLocation2.call(this,component,GeometryLocation2.INSIDE_AREA,pt)}else if(arguments.length===3){var component$1=arguments[0],segIndex=arguments[1],pt$1=arguments[2];this._component=component$1,this._segIndex=segIndex,this._pt=pt$1}},staticAccessors$38={INSIDE_AREA:{configurable:!0}};GeometryLocation.prototype.isInsideArea=function(){return this._segIndex===GeometryLocation.INSIDE_AREA};GeometryLocation.prototype.getCoordinate=function(){return this._pt};GeometryLocation.prototype.getGeometryComponent=function(){return this._component};GeometryLocation.prototype.getSegmentIndex=function(){return this._segIndex};GeometryLocation.prototype.interfaces_=function(){return[]};GeometryLocation.prototype.getClass=function(){return GeometryLocation};staticAccessors$38.INSIDE_AREA.get=function(){return-1};Object.defineProperties(GeometryLocation,staticAccessors$38);var PointExtracter=function(pts){this._pts=pts||null};PointExtracter.prototype.filter=function(geom){geom instanceof Point&&this._pts.add(geom)};PointExtracter.prototype.interfaces_=function(){return[GeometryFilter]};PointExtracter.prototype.getClass=function(){return PointExtracter};PointExtracter.getPoints=function(){if(arguments.length===1){var geom=arguments[0];return geom instanceof Point?Collections.singletonList(geom):PointExtracter.getPoints(geom,new ArrayList)}else if(arguments.length===2){var geom$1=arguments[0],list=arguments[1];return geom$1 instanceof Point?list.add(geom$1):geom$1 instanceof GeometryCollection&&geom$1.apply(new PointExtracter(list)),list}};var ConnectedElementLocationFilter=function(){this._locations=null;var locations=arguments[0];this._locations=locations};ConnectedElementLocationFilter.prototype.filter=function(geom){(geom instanceof Point||geom instanceof LineString2||geom instanceof Polygon)&&this._locations.add(new GeometryLocation(geom,0,geom.getCoordinate()))};ConnectedElementLocationFilter.prototype.interfaces_=function(){return[GeometryFilter]};ConnectedElementLocationFilter.prototype.getClass=function(){return ConnectedElementLocationFilter};ConnectedElementLocationFilter.getLocations=function(geom){var locations=new ArrayList;return geom.apply(new ConnectedElementLocationFilter(locations)),locations};var DistanceOp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new PointLocator,this._minDistanceLocation=null,this._minDistance=Double.MAX_VALUE,arguments.length===2){var g0=arguments[0],g1=arguments[1];this._geom=[g0,g1],this._terminateDistance=0}else if(arguments.length===3){var g0$1=arguments[0],g1$1=arguments[1],terminateDistance=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=g0$1,this._geom[1]=g1$1,this._terminateDistance=terminateDistance}};DistanceOp.prototype.computeContainmentDistance=function(){var this$1=this;if(arguments.length===0){var locPtPoly=new Array(2).fill(null);if(this.computeContainmentDistance(0,locPtPoly),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,locPtPoly)}else if(arguments.length===2){var polyGeomIndex=arguments[0],locPtPoly$1=arguments[1],locationsIndex=1-polyGeomIndex,polys=PolygonExtracter.getPolygons(this._geom[polyGeomIndex]);if(polys.size()>0){var insideLocs=ConnectedElementLocationFilter.getLocations(this._geom[locationsIndex]);if(this.computeContainmentDistance(insideLocs,polys,locPtPoly$1),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[locationsIndex]=locPtPoly$1[0],this._minDistanceLocation[polyGeomIndex]=locPtPoly$1[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){for(var locs=arguments[0],polys$1=arguments[1],locPtPoly$2=arguments[2],i=0;i<locs.size();i++)for(var loc=locs.get(i),j=0;j<polys$1.size();j++)if(this$1.computeContainmentDistance(loc,polys$1.get(j),locPtPoly$2),this$1._minDistance<=this$1._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof GeometryLocation&&arguments[1]instanceof Polygon){var ptLoc=arguments[0],poly=arguments[1],locPtPoly$3=arguments[2],pt=ptLoc.getCoordinate();if(Location.EXTERIOR!==this._ptLocator.locate(pt,poly))return this._minDistance=0,locPtPoly$3[0]=ptLoc,locPtPoly$3[1]=new GeometryLocation(poly,pt),null}}};DistanceOp.prototype.computeMinDistanceLinesPoints=function(lines,points,locGeom){for(var this$1=this,i=0;i<lines.size();i++)for(var line=lines.get(i),j=0;j<points.size();j++){var pt=points.get(j);if(this$1.computeMinDistance(line,pt,locGeom),this$1._minDistance<=this$1._terminateDistance)return null}};DistanceOp.prototype.computeFacetDistance=function(){var locGeom=new Array(2).fill(null),lines0=LinearComponentExtracter.getLines(this._geom[0]),lines1=LinearComponentExtracter.getLines(this._geom[1]),pts0=PointExtracter.getPoints(this._geom[0]),pts1=PointExtracter.getPoints(this._geom[1]);if(this.computeMinDistanceLines(lines0,lines1,locGeom),this.updateMinDistance(locGeom,!1),this._minDistance<=this._terminateDistance||(locGeom[0]=null,locGeom[1]=null,this.computeMinDistanceLinesPoints(lines0,pts1,locGeom),this.updateMinDistance(locGeom,!1),this._minDistance<=this._terminateDistance)||(locGeom[0]=null,locGeom[1]=null,this.computeMinDistanceLinesPoints(lines1,pts0,locGeom),this.updateMinDistance(locGeom,!0),this._minDistance<=this._terminateDistance))return null;locGeom[0]=null,locGeom[1]=null,this.computeMinDistancePoints(pts0,pts1,locGeom),this.updateMinDistance(locGeom,!1)};DistanceOp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};DistanceOp.prototype.updateMinDistance=function(locGeom,flip3){if(locGeom[0]===null)return null;flip3?(this._minDistanceLocation[0]=locGeom[1],this._minDistanceLocation[1]=locGeom[0]):(this._minDistanceLocation[0]=locGeom[0],this._minDistanceLocation[1]=locGeom[1])};DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var nearestPts=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return nearestPts};DistanceOp.prototype.computeMinDistance=function(){var this$1=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof LineString2&&arguments[1]instanceof Point){var line=arguments[0],pt=arguments[1],locGeom=arguments[2];if(line.getEnvelopeInternal().distance(pt.getEnvelopeInternal())>this._minDistance)return null;for(var coord0=line.getCoordinates(),coord=pt.getCoordinate(),i=0;i<coord0.length-1;i++){var dist=CGAlgorithms.distancePointLine(coord,coord0[i],coord0[i+1]);if(dist<this$1._minDistance){this$1._minDistance=dist;var seg=new LineSegment(coord0[i],coord0[i+1]),segClosestPoint=seg.closestPoint(coord);locGeom[0]=new GeometryLocation(line,i,segClosestPoint),locGeom[1]=new GeometryLocation(pt,0,coord)}if(this$1._minDistance<=this$1._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof LineString2&&arguments[1]instanceof LineString2){var line0=arguments[0],line1=arguments[1],locGeom$1=arguments[2];if(line0.getEnvelopeInternal().distance(line1.getEnvelopeInternal())>this._minDistance)return null;for(var coord0$1=line0.getCoordinates(),coord1=line1.getCoordinates(),i$1=0;i$1<coord0$1.length-1;i$1++)for(var j=0;j<coord1.length-1;j++){var dist$1=CGAlgorithms.distanceLineLine(coord0$1[i$1],coord0$1[i$1+1],coord1[j],coord1[j+1]);if(dist$1<this$1._minDistance){this$1._minDistance=dist$1;var seg0=new LineSegment(coord0$1[i$1],coord0$1[i$1+1]),seg1=new LineSegment(coord1[j],coord1[j+1]),closestPt=seg0.closestPoints(seg1);locGeom$1[0]=new GeometryLocation(line0,i$1,closestPt[0]),locGeom$1[1]=new GeometryLocation(line1,j,closestPt[1])}if(this$1._minDistance<=this$1._terminateDistance)return null}}}};DistanceOp.prototype.computeMinDistancePoints=function(points0,points1,locGeom){for(var this$1=this,i=0;i<points0.size();i++)for(var pt0=points0.get(i),j=0;j<points1.size();j++){var pt1=points1.get(j),dist=pt0.getCoordinate().distance(pt1.getCoordinate());if(dist<this$1._minDistance&&(this$1._minDistance=dist,locGeom[0]=new GeometryLocation(pt0,0,pt0.getCoordinate()),locGeom[1]=new GeometryLocation(pt1,0,pt1.getCoordinate())),this$1._minDistance<=this$1._terminateDistance)return null}};DistanceOp.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new IllegalArgumentException("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};DistanceOp.prototype.computeMinDistanceLines=function(lines0,lines1,locGeom){for(var this$1=this,i=0;i<lines0.size();i++)for(var line0=lines0.get(i),j=0;j<lines1.size();j++){var line1=lines1.get(j);if(this$1.computeMinDistance(line0,line1,locGeom),this$1._minDistance<=this$1._terminateDistance)return null}};DistanceOp.prototype.interfaces_=function(){return[]};DistanceOp.prototype.getClass=function(){return DistanceOp};DistanceOp.distance=function(g0,g1){var distOp=new DistanceOp(g0,g1);return distOp.distance()};DistanceOp.isWithinDistance=function(g0,g1,distance10){var distOp=new DistanceOp(g0,g1,distance10);return distOp.distance()<=distance10};DistanceOp.nearestPoints=function(g0,g1){var distOp=new DistanceOp(g0,g1);return distOp.nearestPoints()};var PointPairDistance$2=function(){this._pt=[new Coordinate,new Coordinate],this._distance=Double.NaN,this._isNull=!0};PointPairDistance$2.prototype.getCoordinates=function(){return this._pt};PointPairDistance$2.prototype.getCoordinate=function(i){return this._pt[i]};PointPairDistance$2.prototype.setMinimum=function(){if(arguments.length===1){var ptDist=arguments[0];this.setMinimum(ptDist._pt[0],ptDist._pt[1])}else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];if(this._isNull)return this.initialize(p0,p1),null;var dist=p0.distance(p1);dist<this._distance&&this.initialize(p0,p1,dist)}};PointPairDistance$2.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];this._pt[0].setCoordinate(p0),this._pt[1].setCoordinate(p1),this._distance=p0.distance(p1),this._isNull=!1}else if(arguments.length===3){var p0$1=arguments[0],p1$1=arguments[1],distance10=arguments[2];this._pt[0].setCoordinate(p0$1),this._pt[1].setCoordinate(p1$1),this._distance=distance10,this._isNull=!1}};PointPairDistance$2.prototype.toString=function(){return WKTWriter.toLineString(this._pt[0],this._pt[1])};PointPairDistance$2.prototype.getDistance=function(){return this._distance};PointPairDistance$2.prototype.setMaximum=function(){if(arguments.length===1){var ptDist=arguments[0];this.setMaximum(ptDist._pt[0],ptDist._pt[1])}else if(arguments.length===2){var p0=arguments[0],p1=arguments[1];if(this._isNull)return this.initialize(p0,p1),null;var dist=p0.distance(p1);dist>this._distance&&this.initialize(p0,p1,dist)}};PointPairDistance$2.prototype.interfaces_=function(){return[]};PointPairDistance$2.prototype.getClass=function(){return PointPairDistance$2};var DistanceToPoint=function(){};DistanceToPoint.prototype.interfaces_=function(){return[]};DistanceToPoint.prototype.getClass=function(){return DistanceToPoint};DistanceToPoint.computeDistance=function(){if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineString2&&arguments[1]instanceof Coordinate)for(var line=arguments[0],pt=arguments[1],ptDist=arguments[2],tempSegment=new LineSegment,coords=line.getCoordinates(),i=0;i<coords.length-1;i++){tempSegment.setCoordinates(coords[i],coords[i+1]);var closestPt=tempSegment.closestPoint(pt);ptDist.setMinimum(closestPt,pt)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Polygon&&arguments[1]instanceof Coordinate){var poly=arguments[0],pt$1=arguments[1],ptDist$1=arguments[2];DistanceToPoint.computeDistance(poly.getExteriorRing(),pt$1,ptDist$1);for(var i$1=0;i$1<poly.getNumInteriorRing();i$1++)DistanceToPoint.computeDistance(poly.getInteriorRingN(i$1),pt$1,ptDist$1)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof Geometry&&arguments[1]instanceof Coordinate){var geom=arguments[0],pt$2=arguments[1],ptDist$2=arguments[2];if(geom instanceof LineString2)DistanceToPoint.computeDistance(geom,pt$2,ptDist$2);else if(geom instanceof Polygon)DistanceToPoint.computeDistance(geom,pt$2,ptDist$2);else if(geom instanceof GeometryCollection)for(var gc=geom,i$2=0;i$2<gc.getNumGeometries();i$2++){var g=gc.getGeometryN(i$2);DistanceToPoint.computeDistance(g,pt$2,ptDist$2)}else ptDist$2.setMinimum(geom.getCoordinate(),pt$2)}else if(arguments[2]instanceof PointPairDistance$2&&arguments[0]instanceof LineSegment&&arguments[1]instanceof Coordinate){var segment=arguments[0],pt$3=arguments[1],ptDist$3=arguments[2],closestPt$1=segment.closestPoint(pt$3);ptDist$3.setMinimum(closestPt$1,pt$3)}};var DiscreteHausdorffDistance=function(){this._g0=null,this._g1=null,this._ptDist=new PointPairDistance$2,this._densifyFrac=0;var g0=arguments[0],g1=arguments[1];this._g0=g0,this._g1=g1},staticAccessors$39={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};DiscreteHausdorffDistance.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};DiscreteHausdorffDistance.prototype.setDensifyFraction=function(densifyFrac){if(densifyFrac>1||densifyFrac<=0)throw new IllegalArgumentException("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=densifyFrac};DiscreteHausdorffDistance.prototype.compute=function(g0,g1){this.computeOrientedDistance(g0,g1,this._ptDist),this.computeOrientedDistance(g1,g0,this._ptDist)};DiscreteHausdorffDistance.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(discreteGeom,geom,ptDist){var distFilter=new MaxPointDistanceFilter$1(geom);if(discreteGeom.apply(distFilter),ptDist.setMaximum(distFilter.getMaxPointDistance()),this._densifyFrac>0){var fracFilter=new MaxDensifiedByFractionDistanceFilter(geom,this._densifyFrac);discreteGeom.apply(fracFilter),ptDist.setMaximum(fracFilter.getMaxPointDistance())}};DiscreteHausdorffDistance.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};DiscreteHausdorffDistance.prototype.interfaces_=function(){return[]};DiscreteHausdorffDistance.prototype.getClass=function(){return DiscreteHausdorffDistance};DiscreteHausdorffDistance.distance=function(){if(arguments.length===2){var g0=arguments[0],g1=arguments[1],dist=new DiscreteHausdorffDistance(g0,g1);return dist.distance()}else if(arguments.length===3){var g0$1=arguments[0],g1$1=arguments[1],densifyFrac=arguments[2],dist$1=new DiscreteHausdorffDistance(g0$1,g1$1);return dist$1.setDensifyFraction(densifyFrac),dist$1.distance()}};staticAccessors$39.MaxPointDistanceFilter.get=function(){return MaxPointDistanceFilter$1};staticAccessors$39.MaxDensifiedByFractionDistanceFilter.get=function(){return MaxDensifiedByFractionDistanceFilter};Object.defineProperties(DiscreteHausdorffDistance,staticAccessors$39);var MaxPointDistanceFilter$1=function(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._euclideanDist=new DistanceToPoint,this._geom=null;var geom=arguments[0];this._geom=geom};MaxPointDistanceFilter$1.prototype.filter=function(pt){this._minPtDist.initialize(),DistanceToPoint.computeDistance(this._geom,pt,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};MaxPointDistanceFilter$1.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxPointDistanceFilter$1.prototype.interfaces_=function(){return[CoordinateFilter]};MaxPointDistanceFilter$1.prototype.getClass=function(){return MaxPointDistanceFilter$1};var MaxDensifiedByFractionDistanceFilter=function(){this._maxPtDist=new PointPairDistance$2,this._minPtDist=new PointPairDistance$2,this._geom=null,this._numSubSegs=0;var geom=arguments[0],fraction=arguments[1];this._geom=geom,this._numSubSegs=Math.trunc(Math.round(1/fraction))};MaxDensifiedByFractionDistanceFilter.prototype.filter=function(seq,index){var this$1=this;if(index===0)return null;for(var p0=seq.getCoordinate(index-1),p1=seq.getCoordinate(index),delx=(p1.x-p0.x)/this._numSubSegs,dely=(p1.y-p0.y)/this._numSubSegs,i=0;i<this._numSubSegs;i++){var x2=p0.x+i*delx,y2=p0.y+i*dely,pt=new Coordinate(x2,y2);this$1._minPtDist.initialize(),DistanceToPoint.computeDistance(this$1._geom,pt,this$1._minPtDist),this$1._maxPtDist.setMaximum(this$1._minPtDist)}};MaxDensifiedByFractionDistanceFilter.prototype.isDone=function(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.isGeometryChanged=function(){return!1};MaxDensifiedByFractionDistanceFilter.prototype.getMaxPointDistance=function(){return this._maxPtDist};MaxDensifiedByFractionDistanceFilter.prototype.interfaces_=function(){return[CoordinateSequenceFilter]};MaxDensifiedByFractionDistanceFilter.prototype.getClass=function(){return MaxDensifiedByFractionDistanceFilter};var BufferDistanceValidator=function(input,bufDistance,result){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=input||null,this._bufDistance=bufDistance||null,this._result=result||null},staticAccessors$37={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};BufferDistanceValidator.prototype.checkMaximumDistance=function(input,bufCurve,maxDist){var haus=new DiscreteHausdorffDistance(bufCurve,input);if(haus.setDensifyFraction(.25),this._maxDistanceFound=haus.orientedDistance(),this._maxDistanceFound>maxDist){this._isValid=!1;var pts=haus.getCoordinates();this._errorLocation=pts[1],this._errorIndicator=input.getFactory().createLineString(pts),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+WKTWriter.toLineString(pts[0],pts[1])+")"}};BufferDistanceValidator.prototype.isValid=function(){var posDistance=Math.abs(this._bufDistance),distDelta=BufferDistanceValidator.MAX_DISTANCE_DIFF_FRAC*posDistance;return this._minValidDistance=posDistance-distDelta,this._maxValidDistance=posDistance+distDelta,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),BufferDistanceValidator.VERBOSE&&System.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};BufferDistanceValidator.prototype.checkNegativeValid=function(){if(!(this._input instanceof Polygon||this._input instanceof MultiPolygon||this._input instanceof GeometryCollection))return null;var inputCurve=this.getPolygonLines(this._input);if(this.checkMinimumDistance(inputCurve,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(inputCurve,this._result,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorIndicator=function(){return this._errorIndicator};BufferDistanceValidator.prototype.checkMinimumDistance=function(g1,g2,minDist){var distOp=new DistanceOp(g1,g2,minDist);if(this._minDistanceFound=distOp.distance(),this._minDistanceFound<minDist){this._isValid=!1;var pts=distOp.nearestPoints();this._errorLocation=distOp.nearestPoints()[1],this._errorIndicator=g1.getFactory().createLineString(pts),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+WKTWriter.toLineString(pts[0],pts[1])+" )"}};BufferDistanceValidator.prototype.checkPositiveValid=function(){var bufCurve=this._result.getBoundary();if(this.checkMinimumDistance(this._input,bufCurve,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,bufCurve,this._maxValidDistance)};BufferDistanceValidator.prototype.getErrorLocation=function(){return this._errorLocation};BufferDistanceValidator.prototype.getPolygonLines=function(g){for(var lines=new ArrayList,lineExtracter=new LinearComponentExtracter(lines),polys=PolygonExtracter.getPolygons(g),i=polys.iterator();i.hasNext();){var poly=i.next();poly.apply(lineExtracter)}return g.getFactory().buildGeometry(lines)};BufferDistanceValidator.prototype.getErrorMessage=function(){return this._errMsg};BufferDistanceValidator.prototype.interfaces_=function(){return[]};BufferDistanceValidator.prototype.getClass=function(){return BufferDistanceValidator};staticAccessors$37.VERBOSE.get=function(){return!1};staticAccessors$37.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferDistanceValidator,staticAccessors$37);var BufferResultValidator=function(input,distance10,result){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=input||null,this._distance=distance10||null,this._result=result||null},staticAccessors$40={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};BufferResultValidator.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};BufferResultValidator.prototype.checkEnvelope=function(){if(this._distance<0)return null;var padding=this._distance*BufferResultValidator.MAX_ENV_DIFF_FRAC;padding===0&&(padding=.001);var expectedEnv=new Envelope(this._input.getEnvelopeInternal());expectedEnv.expandBy(this._distance);var bufEnv=new Envelope(this._result.getEnvelopeInternal());bufEnv.expandBy(padding),bufEnv.contains(expectedEnv)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(bufEnv)),this.report("Envelope")};BufferResultValidator.prototype.checkDistance=function(){var distValid=new BufferDistanceValidator(this._input,this._distance,this._result);distValid.isValid()||(this._isValid=!1,this._errorMsg=distValid.getErrorMessage(),this._errorLocation=distValid.getErrorLocation(),this._errorIndicator=distValid.getErrorIndicator()),this.report("Distance")};BufferResultValidator.prototype.checkArea=function(){var inputArea=this._input.getArea(),resultArea=this._result.getArea();this._distance>0&&inputArea>resultArea&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&inputArea<resultArea&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};BufferResultValidator.prototype.checkPolygonal=function(){this._result instanceof Polygon||this._result instanceof MultiPolygon||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};BufferResultValidator.prototype.getErrorIndicator=function(){return this._errorIndicator};BufferResultValidator.prototype.getErrorLocation=function(){return this._errorLocation};BufferResultValidator.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};BufferResultValidator.prototype.report=function(checkName){if(!BufferResultValidator.VERBOSE)return null;System.out.println("Check "+checkName+": "+(this._isValid?"passed":"FAILED"))};BufferResultValidator.prototype.getErrorMessage=function(){return this._errorMsg};BufferResultValidator.prototype.interfaces_=function(){return[]};BufferResultValidator.prototype.getClass=function(){return BufferResultValidator};BufferResultValidator.isValidMsg=function(g,distance10,result){var validator=new BufferResultValidator(g,distance10,result);return validator.isValid()?null:validator.getErrorMessage()};BufferResultValidator.isValid=function(g,distance10,result){var validator=new BufferResultValidator(g,distance10,result);return!!validator.isValid()};staticAccessors$40.VERBOSE.get=function(){return!1};staticAccessors$40.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(BufferResultValidator,staticAccessors$40);var BasicSegmentString=function(){this._pts=null,this._data=null;var pts=arguments[0],data=arguments[1];this._pts=pts,this._data=data};BasicSegmentString.prototype.getCoordinates=function(){return this._pts};BasicSegmentString.prototype.size=function(){return this._pts.length};BasicSegmentString.prototype.getCoordinate=function(i){return this._pts[i]};BasicSegmentString.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};BasicSegmentString.prototype.getSegmentOctant=function(index){return index===this._pts.length-1?-1:Octant.octant(this.getCoordinate(index),this.getCoordinate(index+1))};BasicSegmentString.prototype.setData=function(data){this._data=data};BasicSegmentString.prototype.getData=function(){return this._data};BasicSegmentString.prototype.toString=function(){return WKTWriter.toLineString(new CoordinateArraySequence(this._pts))};BasicSegmentString.prototype.interfaces_=function(){return[SegmentString]};BasicSegmentString.prototype.getClass=function(){return BasicSegmentString};var InteriorIntersectionFinder=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new ArrayList,this._intersectionCount=0,this._keepIntersections=!0;var li=arguments[0];this._li=li,this._interiorIntersection=null};InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this._interiorIntersection};InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(isCheckEndSegmentsOnly){this._isCheckEndSegmentsOnly=isCheckEndSegmentsOnly};InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this._intSegments};InteriorIntersectionFinder.prototype.count=function(){return this._intersectionCount};InteriorIntersectionFinder.prototype.getIntersections=function(){return this._intersections};InteriorIntersectionFinder.prototype.setFindAllIntersections=function(findAllIntersections){this._findAllIntersections=findAllIntersections};InteriorIntersectionFinder.prototype.setKeepIntersections=function(keepIntersections){this._keepIntersections=keepIntersections};InteriorIntersectionFinder.prototype.processIntersections=function(e0,segIndex0,e1,segIndex1){if(!this._findAllIntersections&&this.hasIntersection()||e0===e1&&segIndex0===segIndex1)return null;if(this._isCheckEndSegmentsOnly){var isEndSegPresent=this.isEndSegment(e0,segIndex0)||this.isEndSegment(e1,segIndex1);if(!isEndSegPresent)return null}var p002=e0.getCoordinates()[segIndex0],p012=e0.getCoordinates()[segIndex0+1],p102=e1.getCoordinates()[segIndex1],p112=e1.getCoordinates()[segIndex1+1];this._li.computeIntersection(p002,p012,p102,p112),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=p002,this._intSegments[1]=p012,this._intSegments[2]=p102,this._intSegments[3]=p112,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};InteriorIntersectionFinder.prototype.isEndSegment=function(segStr,index){return index===0||index>=segStr.size()-2};InteriorIntersectionFinder.prototype.hasIntersection=function(){return this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};InteriorIntersectionFinder.prototype.interfaces_=function(){return[SegmentIntersector]};InteriorIntersectionFinder.prototype.getClass=function(){return InteriorIntersectionFinder};InteriorIntersectionFinder.createAllIntersectionsFinder=function(li){var finder=new InteriorIntersectionFinder(li);return finder.setFindAllIntersections(!0),finder};InteriorIntersectionFinder.createAnyIntersectionFinder=function(li){return new InteriorIntersectionFinder(li)};InteriorIntersectionFinder.createIntersectionCounter=function(li){var finder=new InteriorIntersectionFinder(li);return finder.setFindAllIntersections(!0),finder.setKeepIntersections(!1),finder};var FastNodingValidator=function(){this._li=new RobustLineIntersector,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var segStrings=arguments[0];this._segStrings=segStrings};FastNodingValidator.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};FastNodingValidator.prototype.getIntersections=function(){return this._segInt.getIntersections()};FastNodingValidator.prototype.isValid=function(){return this.execute(),this._isValid};FastNodingValidator.prototype.setFindAllIntersections=function(findAllIntersections){this._findAllIntersections=findAllIntersections};FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new InteriorIntersectionFinder(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var noder=new MCIndexNoder;if(noder.setSegmentIntersector(this._segInt),noder.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};FastNodingValidator.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new TopologyException(this.getErrorMessage(),this._segInt.getInteriorIntersection())};FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var intSegs=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+WKTWriter.toLineString(intSegs[0],intSegs[1])+" and "+WKTWriter.toLineString(intSegs[2],intSegs[3])};FastNodingValidator.prototype.interfaces_=function(){return[]};FastNodingValidator.prototype.getClass=function(){return FastNodingValidator};FastNodingValidator.computeIntersections=function(segStrings){var nv=new FastNodingValidator(segStrings);return nv.setFindAllIntersections(!0),nv.isValid(),nv.getIntersections()};var EdgeNodingValidator=function EdgeNodingValidator2(){this._nv=null;var edges2=arguments[0];this._nv=new FastNodingValidator(EdgeNodingValidator2.toSegmentStrings(edges2))};EdgeNodingValidator.prototype.checkValid=function(){this._nv.checkValid()};EdgeNodingValidator.prototype.interfaces_=function(){return[]};EdgeNodingValidator.prototype.getClass=function(){return EdgeNodingValidator};EdgeNodingValidator.toSegmentStrings=function(edges2){for(var segStrings=new ArrayList,i=edges2.iterator();i.hasNext();){var e=i.next();segStrings.add(new BasicSegmentString(e.getCoordinates(),e))}return segStrings};EdgeNodingValidator.checkValid=function(edges2){var validator=new EdgeNodingValidator(edges2);validator.checkValid()};var GeometryCollectionMapper=function(mapOp){this._mapOp=mapOp};GeometryCollectionMapper.prototype.map=function(gc){for(var this$1=this,mapped=new ArrayList,i=0;i<gc.getNumGeometries();i++){var g=this$1._mapOp.map(gc.getGeometryN(i));g.isEmpty()||mapped.add(g)}return gc.getFactory().createGeometryCollection(GeometryFactory.toGeometryArray(mapped))};GeometryCollectionMapper.prototype.interfaces_=function(){return[]};GeometryCollectionMapper.prototype.getClass=function(){return GeometryCollectionMapper};GeometryCollectionMapper.map=function(gc,op){var mapper=new GeometryCollectionMapper(op);return mapper.map(gc)};var LineBuilder=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new ArrayList,this._resultLineList=new ArrayList;var op=arguments[0],geometryFactory=arguments[1],ptLocator=arguments[2];this._op=op,this._geometryFactory=geometryFactory,this._ptLocator=ptLocator};LineBuilder.prototype.collectLines=function(opCode){for(var this$1=this,it=this._op.getGraph().getEdgeEnds().iterator();it.hasNext();){var de=it.next();this$1.collectLineEdge(de,opCode,this$1._lineEdgesList),this$1.collectBoundaryTouchEdge(de,opCode,this$1._lineEdgesList)}};LineBuilder.prototype.labelIsolatedLine=function(e,targetIndex){var loc=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(targetIndex));e.getLabel().setLocation(targetIndex,loc)};LineBuilder.prototype.build=function(opCode){return this.findCoveredLineEdges(),this.collectLines(opCode),this.buildLines(opCode),this._resultLineList};LineBuilder.prototype.collectLineEdge=function(de,opCode,edges2){var label=de.getLabel(),e=de.getEdge();de.isLineEdge()&&!de.isVisited()&&OverlayOp.isResultOfOp(label,opCode)&&!e.isCovered()&&(edges2.add(e),de.setVisitedEdge(!0))};LineBuilder.prototype.findCoveredLineEdges=function(){for(var this$1=this,nodeit=this._op.getGraph().getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().findCoveredLineEdges()}for(var it=this._op.getGraph().getEdgeEnds().iterator();it.hasNext();){var de=it.next(),e=de.getEdge();if(de.isLineEdge()&&!e.isCoveredSet()){var isCovered2=this$1._op.isCoveredByA(de.getCoordinate());e.setCovered(isCovered2)}}};LineBuilder.prototype.labelIsolatedLines=function(edgesList){for(var this$1=this,it=edgesList.iterator();it.hasNext();){var e=it.next(),label=e.getLabel();e.isIsolated()&&(label.isNull(0)?this$1.labelIsolatedLine(e,0):this$1.labelIsolatedLine(e,1))}};LineBuilder.prototype.buildLines=function(opCode){for(var this$1=this,it=this._lineEdgesList.iterator();it.hasNext();){var e=it.next(),line=this$1._geometryFactory.createLineString(e.getCoordinates());this$1._resultLineList.add(line),e.setInResult(!0)}};LineBuilder.prototype.collectBoundaryTouchEdge=function(de,opCode,edges2){var label=de.getLabel();if(de.isLineEdge()||de.isVisited()||de.isInteriorAreaEdge()||de.getEdge().isInResult())return null;Assert.isTrue(!(de.isInResult()||de.getSym().isInResult())||!de.getEdge().isInResult()),OverlayOp.isResultOfOp(label,opCode)&&opCode===OverlayOp.INTERSECTION&&(edges2.add(de.getEdge()),de.setVisitedEdge(!0))};LineBuilder.prototype.interfaces_=function(){return[]};LineBuilder.prototype.getClass=function(){return LineBuilder};var PointBuilder=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new ArrayList;var op=arguments[0],geometryFactory=arguments[1];this._op=op,this._geometryFactory=geometryFactory};PointBuilder.prototype.filterCoveredNodeToPoint=function(n){var coord=n.getCoordinate();if(!this._op.isCoveredByLA(coord)){var pt=this._geometryFactory.createPoint(coord);this._resultPointList.add(pt)}};PointBuilder.prototype.extractNonCoveredResultNodes=function(opCode){for(var this$1=this,nodeit=this._op.getGraph().getNodes().iterator();nodeit.hasNext();){var n=nodeit.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(n.getEdges().getDegree()===0||opCode===OverlayOp.INTERSECTION)){var label=n.getLabel();OverlayOp.isResultOfOp(label,opCode)&&this$1.filterCoveredNodeToPoint(n)}}};PointBuilder.prototype.build=function(opCode){return this.extractNonCoveredResultNodes(opCode),this._resultPointList};PointBuilder.prototype.interfaces_=function(){return[]};PointBuilder.prototype.getClass=function(){return PointBuilder};var GeometryTransformer=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};GeometryTransformer.prototype.transformPoint=function(geom,parent){return this._factory.createPoint(this.transformCoordinates(geom.getCoordinateSequence(),geom))};GeometryTransformer.prototype.transformPolygon=function(geom,parent){var this$1=this,isAllValidLinearRings=!0,shell=this.transformLinearRing(geom.getExteriorRing(),geom);(shell===null||!(shell instanceof LinearRing)||shell.isEmpty())&&(isAllValidLinearRings=!1);for(var holes=new ArrayList,i=0;i<geom.getNumInteriorRing();i++){var hole=this$1.transformLinearRing(geom.getInteriorRingN(i),geom);hole===null||hole.isEmpty()||(hole instanceof LinearRing||(isAllValidLinearRings=!1),holes.add(hole))}if(isAllValidLinearRings)return this._factory.createPolygon(shell,holes.toArray([]));var components=new ArrayList;return shell!==null&&components.add(shell),components.addAll(holes),this._factory.buildGeometry(components)};GeometryTransformer.prototype.createCoordinateSequence=function(coords){return this._factory.getCoordinateSequenceFactory().create(coords)};GeometryTransformer.prototype.getInputGeometry=function(){return this._inputGeom};GeometryTransformer.prototype.transformMultiLineString=function(geom,parent){for(var this$1=this,transGeomList=new ArrayList,i=0;i<geom.getNumGeometries();i++){var transformGeom=this$1.transformLineString(geom.getGeometryN(i),geom);transformGeom!==null&&(transformGeom.isEmpty()||transGeomList.add(transformGeom))}return this._factory.buildGeometry(transGeomList)};GeometryTransformer.prototype.transformCoordinates=function(coords,parent){return this.copy(coords)};GeometryTransformer.prototype.transformLineString=function(geom,parent){return this._factory.createLineString(this.transformCoordinates(geom.getCoordinateSequence(),geom))};GeometryTransformer.prototype.transformMultiPoint=function(geom,parent){for(var this$1=this,transGeomList=new ArrayList,i=0;i<geom.getNumGeometries();i++){var transformGeom=this$1.transformPoint(geom.getGeometryN(i),geom);transformGeom!==null&&(transformGeom.isEmpty()||transGeomList.add(transformGeom))}return this._factory.buildGeometry(transGeomList)};GeometryTransformer.prototype.transformMultiPolygon=function(geom,parent){for(var this$1=this,transGeomList=new ArrayList,i=0;i<geom.getNumGeometries();i++){var transformGeom=this$1.transformPolygon(geom.getGeometryN(i),geom);transformGeom!==null&&(transformGeom.isEmpty()||transGeomList.add(transformGeom))}return this._factory.buildGeometry(transGeomList)};GeometryTransformer.prototype.copy=function(seq){return seq.copy()};GeometryTransformer.prototype.transformGeometryCollection=function(geom,parent){for(var this$1=this,transGeomList=new ArrayList,i=0;i<geom.getNumGeometries();i++){var transformGeom=this$1.transform(geom.getGeometryN(i));transformGeom!==null&&(this$1._pruneEmptyGeometry&&transformGeom.isEmpty()||transGeomList.add(transformGeom))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(GeometryFactory.toGeometryArray(transGeomList)):this._factory.buildGeometry(transGeomList)};GeometryTransformer.prototype.transform=function(inputGeom){if(this._inputGeom=inputGeom,this._factory=inputGeom.getFactory(),inputGeom instanceof Point)return this.transformPoint(inputGeom,null);if(inputGeom instanceof MultiPoint)return this.transformMultiPoint(inputGeom,null);if(inputGeom instanceof LinearRing)return this.transformLinearRing(inputGeom,null);if(inputGeom instanceof LineString2)return this.transformLineString(inputGeom,null);if(inputGeom instanceof MultiLineString)return this.transformMultiLineString(inputGeom,null);if(inputGeom instanceof Polygon)return this.transformPolygon(inputGeom,null);if(inputGeom instanceof MultiPolygon)return this.transformMultiPolygon(inputGeom,null);if(inputGeom instanceof GeometryCollection)return this.transformGeometryCollection(inputGeom,null);throw new IllegalArgumentException("Unknown Geometry subtype: "+inputGeom.getClass().getName())};GeometryTransformer.prototype.transformLinearRing=function(geom,parent){var seq=this.transformCoordinates(geom.getCoordinateSequence(),geom);if(seq===null)return this._factory.createLinearRing(null);var seqSize=seq.size();return seqSize>0&&seqSize<4&&!this._preserveType?this._factory.createLineString(seq):this._factory.createLinearRing(seq)};GeometryTransformer.prototype.interfaces_=function(){return[]};GeometryTransformer.prototype.getClass=function(){return GeometryTransformer};var LineStringSnapper=function LineStringSnapper2(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new LineSegment,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof LineString2&&typeof arguments[1]=="number"){var srcLine=arguments[0],snapTolerance=arguments[1];LineStringSnapper2.call(this,srcLine.getCoordinates(),snapTolerance)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var srcPts=arguments[0],snapTolerance$1=arguments[1];this._srcPts=srcPts,this._isClosed=LineStringSnapper2.isClosed(srcPts),this._snapTolerance=snapTolerance$1}};LineStringSnapper.prototype.snapVertices=function(srcCoords,snapPts){for(var this$1=this,end=this._isClosed?srcCoords.size()-1:srcCoords.size(),i=0;i<end;i++){var srcPt=srcCoords.get(i),snapVert=this$1.findSnapForVertex(srcPt,snapPts);snapVert!==null&&(srcCoords.set(i,new Coordinate(snapVert)),i===0&&this$1._isClosed&&srcCoords.set(srcCoords.size()-1,new Coordinate(snapVert)))}};LineStringSnapper.prototype.findSnapForVertex=function(pt,snapPts){for(var this$1=this,i=0;i<snapPts.length;i++){if(pt.equals2D(snapPts[i]))return null;if(pt.distance(snapPts[i])<this$1._snapTolerance)return snapPts[i]}return null};LineStringSnapper.prototype.snapTo=function(snapPts){var coordList=new CoordinateList(this._srcPts);this.snapVertices(coordList,snapPts),this.snapSegments(coordList,snapPts);var newPts=coordList.toCoordinateArray();return newPts};LineStringSnapper.prototype.snapSegments=function(srcCoords,snapPts){var this$1=this;if(snapPts.length===0)return null;var distinctPtCount=snapPts.length;snapPts[0].equals2D(snapPts[snapPts.length-1])&&(distinctPtCount=snapPts.length-1);for(var i=0;i<distinctPtCount;i++){var snapPt=snapPts[i],index=this$1.findSegmentIndexToSnap(snapPt,srcCoords);index>=0&&srcCoords.add(index+1,new Coordinate(snapPt),!1)}};LineStringSnapper.prototype.findSegmentIndexToSnap=function(snapPt,srcCoords){for(var this$1=this,minDist=Double.MAX_VALUE,snapIndex=-1,i=0;i<srcCoords.size()-1;i++){if(this$1._seg.p0=srcCoords.get(i),this$1._seg.p1=srcCoords.get(i+1),this$1._seg.p0.equals2D(snapPt)||this$1._seg.p1.equals2D(snapPt)){if(this$1._allowSnappingToSourceVertices)continue;return-1}var dist=this$1._seg.distance(snapPt);dist<this$1._snapTolerance&&dist<minDist&&(minDist=dist,snapIndex=i)}return snapIndex};LineStringSnapper.prototype.setAllowSnappingToSourceVertices=function(allowSnappingToSourceVertices){this._allowSnappingToSourceVertices=allowSnappingToSourceVertices};LineStringSnapper.prototype.interfaces_=function(){return[]};LineStringSnapper.prototype.getClass=function(){return LineStringSnapper};LineStringSnapper.isClosed=function(pts){return pts.length<=1?!1:pts[0].equals2D(pts[pts.length-1])};var GeometrySnapper=function(srcGeom){this._srcGeom=srcGeom||null},staticAccessors$41={SNAP_PRECISION_FACTOR:{configurable:!0}};GeometrySnapper.prototype.snapTo=function(snapGeom,snapTolerance){var snapPts=this.extractTargetCoordinates(snapGeom),snapTrans=new SnapTransformer(snapTolerance,snapPts);return snapTrans.transform(this._srcGeom)};GeometrySnapper.prototype.snapToSelf=function(snapTolerance,cleanResult){var snapPts=this.extractTargetCoordinates(this._srcGeom),snapTrans=new SnapTransformer(snapTolerance,snapPts,!0),snappedGeom=snapTrans.transform(this._srcGeom),result=snappedGeom;return cleanResult&&hasInterface(result,Polygonal)&&(result=snappedGeom.buffer(0)),result};GeometrySnapper.prototype.computeSnapTolerance=function(ringPts){var minSegLen=this.computeMinimumSegmentLength(ringPts),snapTol=minSegLen/10;return snapTol};GeometrySnapper.prototype.extractTargetCoordinates=function(g){for(var ptSet=new TreeSet,pts=g.getCoordinates(),i=0;i<pts.length;i++)ptSet.add(pts[i]);return ptSet.toArray(new Array(0).fill(null))};GeometrySnapper.prototype.computeMinimumSegmentLength=function(pts){for(var minSegLen=Double.MAX_VALUE,i=0;i<pts.length-1;i++){var segLen=pts[i].distance(pts[i+1]);segLen<minSegLen&&(minSegLen=segLen)}return minSegLen};GeometrySnapper.prototype.interfaces_=function(){return[]};GeometrySnapper.prototype.getClass=function(){return GeometrySnapper};GeometrySnapper.snap=function(g0,g1,snapTolerance){var snapGeom=new Array(2).fill(null),snapper0=new GeometrySnapper(g0);snapGeom[0]=snapper0.snapTo(g1,snapTolerance);var snapper1=new GeometrySnapper(g1);return snapGeom[1]=snapper1.snapTo(snapGeom[0],snapTolerance),snapGeom};GeometrySnapper.computeOverlaySnapTolerance=function(){if(arguments.length===1){var g=arguments[0],snapTolerance=GeometrySnapper.computeSizeBasedSnapTolerance(g),pm=g.getPrecisionModel();if(pm.getType()===PrecisionModel.FIXED){var fixedSnapTol=1/pm.getScale()*2/1.415;fixedSnapTol>snapTolerance&&(snapTolerance=fixedSnapTol)}return snapTolerance}else if(arguments.length===2){var g0=arguments[0],g1=arguments[1];return Math.min(GeometrySnapper.computeOverlaySnapTolerance(g0),GeometrySnapper.computeOverlaySnapTolerance(g1))}};GeometrySnapper.computeSizeBasedSnapTolerance=function(g){var env=g.getEnvelopeInternal(),minDimension=Math.min(env.getHeight(),env.getWidth()),snapTol=minDimension*GeometrySnapper.SNAP_PRECISION_FACTOR;return snapTol};GeometrySnapper.snapToSelf=function(geom,snapTolerance,cleanResult){var snapper0=new GeometrySnapper(geom);return snapper0.snapToSelf(snapTolerance,cleanResult)};staticAccessors$41.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(GeometrySnapper,staticAccessors$41);var SnapTransformer=function(GeometryTransformer$$1){function SnapTransformer2(snapTolerance,snapPts,isSelfSnap){GeometryTransformer$$1.call(this),this._snapTolerance=snapTolerance||null,this._snapPts=snapPts||null,this._isSelfSnap=isSelfSnap!==void 0?isSelfSnap:!1}return GeometryTransformer$$1&&(SnapTransformer2.__proto__=GeometryTransformer$$1),SnapTransformer2.prototype=Object.create(GeometryTransformer$$1&&GeometryTransformer$$1.prototype),SnapTransformer2.prototype.constructor=SnapTransformer2,SnapTransformer2.prototype.snapLine=function(srcPts,snapPts){var snapper=new LineStringSnapper(srcPts,this._snapTolerance);return snapper.setAllowSnappingToSourceVertices(this._isSelfSnap),snapper.snapTo(snapPts)},SnapTransformer2.prototype.transformCoordinates=function(coords,parent){var srcPts=coords.toCoordinateArray(),newPts=this.snapLine(srcPts,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(newPts)},SnapTransformer2.prototype.interfaces_=function(){return[]},SnapTransformer2.prototype.getClass=function(){return SnapTransformer2},SnapTransformer2}(GeometryTransformer),CommonBits=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};CommonBits.prototype.getCommon=function(){return Double.longBitsToDouble(this._commonBits)};CommonBits.prototype.add=function(num){var numBits=Double.doubleToLongBits(num);if(this._isFirst)return this._commonBits=numBits,this._commonSignExp=CommonBits.signExpBits(this._commonBits),this._isFirst=!1,null;var numSignExp=CommonBits.signExpBits(numBits);if(numSignExp!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=CommonBits.numCommonMostSigMantissaBits(this._commonBits,numBits),this._commonBits=CommonBits.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};CommonBits.prototype.toString=function(){if(arguments.length===1){var bits=arguments[0],x2=Double.longBitsToDouble(bits),numStr=Double.toBinaryString(bits),padStr="0000000000000000000000000000000000000000000000000000000000000000"+numStr,bitStr=padStr.substring(padStr.length-64),str=bitStr.substring(0,1)+"  "+bitStr.substring(1,12)+"(exp) "+bitStr.substring(12)+" [ "+x2+" ]";return str}};CommonBits.prototype.interfaces_=function(){return[]};CommonBits.prototype.getClass=function(){return CommonBits};CommonBits.getBit=function(bits,i){var mask=1<<i;return bits&mask?1:0};CommonBits.signExpBits=function(num){return num>>52};CommonBits.zeroLowerBits=function(bits,nBits){var invMask=(1<<nBits)-1,mask=~invMask,zeroed=bits&mask;return zeroed};CommonBits.numCommonMostSigMantissaBits=function(num1,num2){for(var count2=0,i=52;i>=0;i--){if(CommonBits.getBit(num1,i)!==CommonBits.getBit(num2,i))return count2;count2++}return 52};var CommonBitsRemover=function(){this._commonCoord=null,this._ccFilter=new CommonCoordinateFilter},staticAccessors$42={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};CommonBitsRemover.prototype.addCommonBits=function(geom){var trans=new Translater(this._commonCoord);geom.apply(trans),geom.geometryChanged()};CommonBitsRemover.prototype.removeCommonBits=function(geom){if(this._commonCoord.x===0&&this._commonCoord.y===0)return geom;var invCoord=new Coordinate(this._commonCoord);invCoord.x=-invCoord.x,invCoord.y=-invCoord.y;var trans=new Translater(invCoord);return geom.apply(trans),geom.geometryChanged(),geom};CommonBitsRemover.prototype.getCommonCoordinate=function(){return this._commonCoord};CommonBitsRemover.prototype.add=function(geom){geom.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};CommonBitsRemover.prototype.interfaces_=function(){return[]};CommonBitsRemover.prototype.getClass=function(){return CommonBitsRemover};staticAccessors$42.CommonCoordinateFilter.get=function(){return CommonCoordinateFilter};staticAccessors$42.Translater.get=function(){return Translater};Object.defineProperties(CommonBitsRemover,staticAccessors$42);var CommonCoordinateFilter=function(){this._commonBitsX=new CommonBits,this._commonBitsY=new CommonBits};CommonCoordinateFilter.prototype.filter=function(coord){this._commonBitsX.add(coord.x),this._commonBitsY.add(coord.y)};CommonCoordinateFilter.prototype.getCommonCoordinate=function(){return new Coordinate(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};CommonCoordinateFilter.prototype.interfaces_=function(){return[CoordinateFilter]};CommonCoordinateFilter.prototype.getClass=function(){return CommonCoordinateFilter};var Translater=function(){this.trans=null;var trans=arguments[0];this.trans=trans};Translater.prototype.filter=function(seq,i){var xp=seq.getOrdinate(i,0)+this.trans.x,yp=seq.getOrdinate(i,1)+this.trans.y;seq.setOrdinate(i,0,xp),seq.setOrdinate(i,1,yp)};Translater.prototype.isDone=function(){return!1};Translater.prototype.isGeometryChanged=function(){return!0};Translater.prototype.interfaces_=function(){return[CoordinateSequenceFilter]};Translater.prototype.getClass=function(){return Translater};var SnapOverlayOp=function(g1,g2){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=g1,this._geom[1]=g2,this.computeSnapTolerance()};SnapOverlayOp.prototype.selfSnap=function(geom){var snapper0=new GeometrySnapper(geom),snapGeom=snapper0.snapTo(geom,this._snapTolerance);return snapGeom};SnapOverlayOp.prototype.removeCommonBits=function(geom){this._cbr=new CommonBitsRemover,this._cbr.add(geom[0]),this._cbr.add(geom[1]);var remGeom=new Array(2).fill(null);return remGeom[0]=this._cbr.removeCommonBits(geom[0].copy()),remGeom[1]=this._cbr.removeCommonBits(geom[1].copy()),remGeom};SnapOverlayOp.prototype.prepareResult=function(geom){return this._cbr.addCommonBits(geom),geom};SnapOverlayOp.prototype.getResultGeometry=function(opCode){var prepGeom=this.snap(this._geom),result=OverlayOp.overlayOp(prepGeom[0],prepGeom[1],opCode);return this.prepareResult(result)};SnapOverlayOp.prototype.checkValid=function(g){g.isValid()||System.out.println("Snapped geometry is invalid")};SnapOverlayOp.prototype.computeSnapTolerance=function(){this._snapTolerance=GeometrySnapper.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};SnapOverlayOp.prototype.snap=function(geom){var remGeom=this.removeCommonBits(geom),snapGeom=GeometrySnapper.snap(remGeom[0],remGeom[1],this._snapTolerance);return snapGeom};SnapOverlayOp.prototype.interfaces_=function(){return[]};SnapOverlayOp.prototype.getClass=function(){return SnapOverlayOp};SnapOverlayOp.overlayOp=function(g0,g1,opCode){var op=new SnapOverlayOp(g0,g1);return op.getResultGeometry(opCode)};SnapOverlayOp.union=function(g0,g1){return SnapOverlayOp.overlayOp(g0,g1,OverlayOp.UNION)};SnapOverlayOp.intersection=function(g0,g1){return SnapOverlayOp.overlayOp(g0,g1,OverlayOp.INTERSECTION)};SnapOverlayOp.symDifference=function(g0,g1){return SnapOverlayOp.overlayOp(g0,g1,OverlayOp.SYMDIFFERENCE)};SnapOverlayOp.difference=function(g0,g1){return SnapOverlayOp.overlayOp(g0,g1,OverlayOp.DIFFERENCE)};var SnapIfNeededOverlayOp=function(g1,g2){this._geom=new Array(2).fill(null),this._geom[0]=g1,this._geom[1]=g2};SnapIfNeededOverlayOp.prototype.getResultGeometry=function(opCode){var result=null,isSuccess=!1,savedException=null;try{result=OverlayOp.overlayOp(this._geom[0],this._geom[1],opCode);var isValid7=!0;isValid7&&(isSuccess=!0)}catch(ex){if(ex instanceof RuntimeException)savedException=ex;else throw ex}finally{}if(!isSuccess)try{result=SnapOverlayOp.overlayOp(this._geom[0],this._geom[1],opCode)}catch(ex){throw ex instanceof RuntimeException?savedException:ex}finally{}return result};SnapIfNeededOverlayOp.prototype.interfaces_=function(){return[]};SnapIfNeededOverlayOp.prototype.getClass=function(){return SnapIfNeededOverlayOp};SnapIfNeededOverlayOp.overlayOp=function(g0,g1,opCode){var op=new SnapIfNeededOverlayOp(g0,g1);return op.getResultGeometry(opCode)};SnapIfNeededOverlayOp.union=function(g0,g1){return SnapIfNeededOverlayOp.overlayOp(g0,g1,OverlayOp.UNION)};SnapIfNeededOverlayOp.intersection=function(g0,g1){return SnapIfNeededOverlayOp.overlayOp(g0,g1,OverlayOp.INTERSECTION)};SnapIfNeededOverlayOp.symDifference=function(g0,g1){return SnapIfNeededOverlayOp.overlayOp(g0,g1,OverlayOp.SYMDIFFERENCE)};SnapIfNeededOverlayOp.difference=function(g0,g1){return SnapIfNeededOverlayOp.overlayOp(g0,g1,OverlayOp.DIFFERENCE)};var MonotoneChain$2=function(){this.mce=null,this.chainIndex=null;var mce=arguments[0],chainIndex=arguments[1];this.mce=mce,this.chainIndex=chainIndex};MonotoneChain$2.prototype.computeIntersections=function(mc,si){this.mce.computeIntersectsForChain(this.chainIndex,mc.mce,mc.chainIndex,si)};MonotoneChain$2.prototype.interfaces_=function(){return[]};MonotoneChain$2.prototype.getClass=function(){return MonotoneChain$2};var SweepLineEvent=function SweepLineEvent2(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var x2=arguments[0],insertEvent=arguments[1];this._eventType=SweepLineEvent2.DELETE,this._xValue=x2,this._insertEvent=insertEvent}else if(arguments.length===3){var label=arguments[0],x$1=arguments[1],obj=arguments[2];this._eventType=SweepLineEvent2.INSERT,this._label=label,this._xValue=x$1,this._obj=obj}},staticAccessors$43={INSERT:{configurable:!0},DELETE:{configurable:!0}};SweepLineEvent.prototype.isDelete=function(){return this._eventType===SweepLineEvent.DELETE};SweepLineEvent.prototype.setDeleteEventIndex=function(deleteEventIndex){this._deleteEventIndex=deleteEventIndex};SweepLineEvent.prototype.getObject=function(){return this._obj};SweepLineEvent.prototype.compareTo=function(o){var pe=o;return this._xValue<pe._xValue?-1:this._xValue>pe._xValue?1:this._eventType<pe._eventType?-1:this._eventType>pe._eventType?1:0};SweepLineEvent.prototype.getInsertEvent=function(){return this._insertEvent};SweepLineEvent.prototype.isInsert=function(){return this._eventType===SweepLineEvent.INSERT};SweepLineEvent.prototype.isSameLabel=function(ev){return this._label===null?!1:this._label===ev._label};SweepLineEvent.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};SweepLineEvent.prototype.interfaces_=function(){return[Comparable]};SweepLineEvent.prototype.getClass=function(){return SweepLineEvent};staticAccessors$43.INSERT.get=function(){return 1};staticAccessors$43.DELETE.get=function(){return 2};Object.defineProperties(SweepLineEvent,staticAccessors$43);var EdgeSetIntersector=function(){};EdgeSetIntersector.prototype.interfaces_=function(){return[]};EdgeSetIntersector.prototype.getClass=function(){return EdgeSetIntersector};var SegmentIntersector$2=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var li=arguments[0],includeProper=arguments[1],recordIsolated=arguments[2];this._li=li,this._includeProper=includeProper,this._recordIsolated=recordIsolated};SegmentIntersector$2.prototype.isTrivialIntersection=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&this._li.getIntersectionNum()===1){if(SegmentIntersector$2.isAdjacentSegments(segIndex0,segIndex1))return!0;if(e0.isClosed()){var maxSegIndex=e0.getNumPoints()-1;if(segIndex0===0&&segIndex1===maxSegIndex||segIndex1===0&&segIndex0===maxSegIndex)return!0}}return!1};SegmentIntersector$2.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};SegmentIntersector$2.prototype.setIsDoneIfProperInt=function(isDoneWhenProperInt){this._isDoneWhenProperInt=isDoneWhenProperInt};SegmentIntersector$2.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};SegmentIntersector$2.prototype.isBoundaryPointInternal=function(li,bdyNodes){for(var i=bdyNodes.iterator();i.hasNext();){var node=i.next(),pt=node.getCoordinate();if(li.isIntersection(pt))return!0}return!1};SegmentIntersector$2.prototype.hasProperIntersection=function(){return this._hasProper};SegmentIntersector$2.prototype.hasIntersection=function(){return this._hasIntersection};SegmentIntersector$2.prototype.isDone=function(){return this._isDone};SegmentIntersector$2.prototype.isBoundaryPoint=function(li,bdyNodes){return bdyNodes===null?!1:!!(this.isBoundaryPointInternal(li,bdyNodes[0])||this.isBoundaryPointInternal(li,bdyNodes[1]))};SegmentIntersector$2.prototype.setBoundaryNodes=function(bdyNodes0,bdyNodes1){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=bdyNodes0,this._bdyNodes[1]=bdyNodes1};SegmentIntersector$2.prototype.addIntersections=function(e0,segIndex0,e1,segIndex1){if(e0===e1&&segIndex0===segIndex1)return null;this.numTests++;var p002=e0.getCoordinates()[segIndex0],p012=e0.getCoordinates()[segIndex0+1],p102=e1.getCoordinates()[segIndex1],p112=e1.getCoordinates()[segIndex1+1];this._li.computeIntersection(p002,p012,p102,p112),this._li.hasIntersection()&&(this._recordIsolated&&(e0.setIsolated(!1),e1.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e0,segIndex0,e1,segIndex1)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(e0.addIntersections(this._li,segIndex0,0),e1.addIntersections(this._li,segIndex1,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};SegmentIntersector$2.prototype.interfaces_=function(){return[]};SegmentIntersector$2.prototype.getClass=function(){return SegmentIntersector$2};SegmentIntersector$2.isAdjacentSegments=function(i1,i2){return Math.abs(i1-i2)===1};var SimpleMCSweepLineIntersector=function(EdgeSetIntersector$$1){function SimpleMCSweepLineIntersector2(){EdgeSetIntersector$$1.call(this),this.events=new ArrayList,this.nOverlaps=null}return EdgeSetIntersector$$1&&(SimpleMCSweepLineIntersector2.__proto__=EdgeSetIntersector$$1),SimpleMCSweepLineIntersector2.prototype=Object.create(EdgeSetIntersector$$1&&EdgeSetIntersector$$1.prototype),SimpleMCSweepLineIntersector2.prototype.constructor=SimpleMCSweepLineIntersector2,SimpleMCSweepLineIntersector2.prototype.prepareEvents=function(){var this$1=this;Collections.sort(this.events);for(var i=0;i<this.events.size();i++){var ev=this$1.events.get(i);ev.isDelete()&&ev.getInsertEvent().setDeleteEventIndex(i)}},SimpleMCSweepLineIntersector2.prototype.computeIntersections=function(){var this$1=this;if(arguments.length===1){var si=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var ev=this$1.events.get(i);if(ev.isInsert()&&this$1.processOverlaps(i,ev.getDeleteEventIndex(),ev,si),si.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof SegmentIntersector$2&&hasInterface(arguments[0],List)&&hasInterface(arguments[1],List)){var edges0=arguments[0],edges1=arguments[1],si$1=arguments[2];this.addEdges(edges0,edges0),this.addEdges(edges1,edges1),this.computeIntersections(si$1)}else if(typeof arguments[2]=="boolean"&&hasInterface(arguments[0],List)&&arguments[1]instanceof SegmentIntersector$2){var edges2=arguments[0],si$2=arguments[1],testAllSegments=arguments[2];testAllSegments?this.addEdges(edges2,null):this.addEdges(edges2),this.computeIntersections(si$2)}}},SimpleMCSweepLineIntersector2.prototype.addEdge=function(edge,edgeSet){for(var this$1=this,mce=edge.getMonotoneChainEdge(),startIndex=mce.getStartIndexes(),i=0;i<startIndex.length-1;i++){var mc=new MonotoneChain$2(mce,i),insertEvent=new SweepLineEvent(edgeSet,mce.getMinX(i),mc);this$1.events.add(insertEvent),this$1.events.add(new SweepLineEvent(mce.getMaxX(i),insertEvent))}},SimpleMCSweepLineIntersector2.prototype.processOverlaps=function(start,end,ev0,si){for(var this$1=this,mc0=ev0.getObject(),i=start;i<end;i++){var ev1=this$1.events.get(i);if(ev1.isInsert()){var mc1=ev1.getObject();ev0.isSameLabel(ev1)||(mc0.computeIntersections(mc1,si),this$1.nOverlaps++)}}},SimpleMCSweepLineIntersector2.prototype.addEdges=function(){var this$1=this;if(arguments.length===1)for(var edges2=arguments[0],i=edges2.iterator();i.hasNext();){var edge=i.next();this$1.addEdge(edge,edge)}else if(arguments.length===2)for(var edges$1=arguments[0],edgeSet=arguments[1],i$1=edges$1.iterator();i$1.hasNext();){var edge$1=i$1.next();this$1.addEdge(edge$1,edgeSet)}},SimpleMCSweepLineIntersector2.prototype.interfaces_=function(){return[]},SimpleMCSweepLineIntersector2.prototype.getClass=function(){return SimpleMCSweepLineIntersector2},SimpleMCSweepLineIntersector2}(EdgeSetIntersector),IntervalRTreeNode=function(){this._min=Double.POSITIVE_INFINITY,this._max=Double.NEGATIVE_INFINITY},staticAccessors$45={NodeComparator:{configurable:!0}};IntervalRTreeNode.prototype.getMin=function(){return this._min};IntervalRTreeNode.prototype.intersects=function(queryMin,queryMax){return!(this._min>queryMax||this._max<queryMin)};IntervalRTreeNode.prototype.getMax=function(){return this._max};IntervalRTreeNode.prototype.toString=function(){return WKTWriter.toLineString(new Coordinate(this._min,0),new Coordinate(this._max,0))};IntervalRTreeNode.prototype.interfaces_=function(){return[]};IntervalRTreeNode.prototype.getClass=function(){return IntervalRTreeNode};staticAccessors$45.NodeComparator.get=function(){return NodeComparator};Object.defineProperties(IntervalRTreeNode,staticAccessors$45);var NodeComparator=function(){};NodeComparator.prototype.compare=function(o1,o2){var n1=o1,n2=o2,mid1=(n1._min+n1._max)/2,mid2=(n2._min+n2._max)/2;return mid1<mid2?-1:mid1>mid2?1:0};NodeComparator.prototype.interfaces_=function(){return[Comparator]};NodeComparator.prototype.getClass=function(){return NodeComparator};var IntervalRTreeLeafNode=function(IntervalRTreeNode$$1){function IntervalRTreeLeafNode2(){IntervalRTreeNode$$1.call(this),this._item=null;var min4=arguments[0],max3=arguments[1],item=arguments[2];this._min=min4,this._max=max3,this._item=item}return IntervalRTreeNode$$1&&(IntervalRTreeLeafNode2.__proto__=IntervalRTreeNode$$1),IntervalRTreeLeafNode2.prototype=Object.create(IntervalRTreeNode$$1&&IntervalRTreeNode$$1.prototype),IntervalRTreeLeafNode2.prototype.constructor=IntervalRTreeLeafNode2,IntervalRTreeLeafNode2.prototype.query=function(queryMin,queryMax,visitor){if(!this.intersects(queryMin,queryMax))return null;visitor.visitItem(this._item)},IntervalRTreeLeafNode2.prototype.interfaces_=function(){return[]},IntervalRTreeLeafNode2.prototype.getClass=function(){return IntervalRTreeLeafNode2},IntervalRTreeLeafNode2}(IntervalRTreeNode),IntervalRTreeBranchNode=function(IntervalRTreeNode$$1){function IntervalRTreeBranchNode2(){IntervalRTreeNode$$1.call(this),this._node1=null,this._node2=null;var n1=arguments[0],n2=arguments[1];this._node1=n1,this._node2=n2,this.buildExtent(this._node1,this._node2)}return IntervalRTreeNode$$1&&(IntervalRTreeBranchNode2.__proto__=IntervalRTreeNode$$1),IntervalRTreeBranchNode2.prototype=Object.create(IntervalRTreeNode$$1&&IntervalRTreeNode$$1.prototype),IntervalRTreeBranchNode2.prototype.constructor=IntervalRTreeBranchNode2,IntervalRTreeBranchNode2.prototype.buildExtent=function(n1,n2){this._min=Math.min(n1._min,n2._min),this._max=Math.max(n1._max,n2._max)},IntervalRTreeBranchNode2.prototype.query=function(queryMin,queryMax,visitor){if(!this.intersects(queryMin,queryMax))return null;this._node1!==null&&this._node1.query(queryMin,queryMax,visitor),this._node2!==null&&this._node2.query(queryMin,queryMax,visitor)},IntervalRTreeBranchNode2.prototype.interfaces_=function(){return[]},IntervalRTreeBranchNode2.prototype.getClass=function(){return IntervalRTreeBranchNode2},IntervalRTreeBranchNode2}(IntervalRTreeNode),SortedPackedIntervalRTree=function(){this._leaves=new ArrayList,this._root=null,this._level=0};SortedPackedIntervalRTree.prototype.buildTree=function(){var this$1=this;Collections.sort(this._leaves,new IntervalRTreeNode.NodeComparator);for(var src=this._leaves,temp2=null,dest=new ArrayList;;){if(this$1.buildLevel(src,dest),dest.size()===1)return dest.get(0);temp2=src,src=dest,dest=temp2}};SortedPackedIntervalRTree.prototype.insert=function(min4,max3,item){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new IntervalRTreeLeafNode(min4,max3,item))};SortedPackedIntervalRTree.prototype.query=function(min4,max3,visitor){this.init(),this._root.query(min4,max3,visitor)};SortedPackedIntervalRTree.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};SortedPackedIntervalRTree.prototype.printNode=function(node){System.out.println(WKTWriter.toLineString(new Coordinate(node._min,this._level),new Coordinate(node._max,this._level)))};SortedPackedIntervalRTree.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};SortedPackedIntervalRTree.prototype.buildLevel=function(src,dest){this._level++,dest.clear();for(var i=0;i<src.size();i+=2){var n1=src.get(i),n2=i+1<src.size()?src.get(i):null;if(n2===null)dest.add(n1);else{var node=new IntervalRTreeBranchNode(src.get(i),src.get(i+1));dest.add(node)}}};SortedPackedIntervalRTree.prototype.interfaces_=function(){return[]};SortedPackedIntervalRTree.prototype.getClass=function(){return SortedPackedIntervalRTree};var ArrayListVisitor=function(){this._items=new ArrayList};ArrayListVisitor.prototype.visitItem=function(item){this._items.add(item)};ArrayListVisitor.prototype.getItems=function(){return this._items};ArrayListVisitor.prototype.interfaces_=function(){return[ItemVisitor]};ArrayListVisitor.prototype.getClass=function(){return ArrayListVisitor};var IndexedPointInAreaLocator=function(){this._index=null;var g=arguments[0];if(!hasInterface(g,Polygonal))throw new IllegalArgumentException("Argument must be Polygonal");this._index=new IntervalIndexedGeometry(g)},staticAccessors$44={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};IndexedPointInAreaLocator.prototype.locate=function(p){var rcc=new RayCrossingCounter(p),visitor=new SegmentVisitor(rcc);return this._index.query(p.y,p.y,visitor),rcc.getLocation()};IndexedPointInAreaLocator.prototype.interfaces_=function(){return[PointOnGeometryLocator]};IndexedPointInAreaLocator.prototype.getClass=function(){return IndexedPointInAreaLocator};staticAccessors$44.SegmentVisitor.get=function(){return SegmentVisitor};staticAccessors$44.IntervalIndexedGeometry.get=function(){return IntervalIndexedGeometry};Object.defineProperties(IndexedPointInAreaLocator,staticAccessors$44);var SegmentVisitor=function(){this._counter=null;var counter=arguments[0];this._counter=counter};SegmentVisitor.prototype.visitItem=function(item){var seg=item;this._counter.countSegment(seg.getCoordinate(0),seg.getCoordinate(1))};SegmentVisitor.prototype.interfaces_=function(){return[ItemVisitor]};SegmentVisitor.prototype.getClass=function(){return SegmentVisitor};var IntervalIndexedGeometry=function(){this._index=new SortedPackedIntervalRTree;var geom=arguments[0];this.init(geom)};IntervalIndexedGeometry.prototype.init=function(geom){for(var this$1=this,lines=LinearComponentExtracter.getLines(geom),i=lines.iterator();i.hasNext();){var line=i.next(),pts=line.getCoordinates();this$1.addLine(pts)}};IntervalIndexedGeometry.prototype.addLine=function(pts){for(var this$1=this,i=1;i<pts.length;i++){var seg=new LineSegment(pts[i-1],pts[i]),min4=Math.min(seg.p0.y,seg.p1.y),max3=Math.max(seg.p0.y,seg.p1.y);this$1._index.insert(min4,max3,seg)}};IntervalIndexedGeometry.prototype.query=function(){if(arguments.length===2){var min4=arguments[0],max3=arguments[1],visitor=new ArrayListVisitor;return this._index.query(min4,max3,visitor),visitor.getItems()}else if(arguments.length===3){var min$1=arguments[0],max$1=arguments[1],visitor$1=arguments[2];this._index.query(min$1,max$1,visitor$1)}};IntervalIndexedGeometry.prototype.interfaces_=function(){return[]};IntervalIndexedGeometry.prototype.getClass=function(){return IntervalIndexedGeometry};var GeometryGraph=function(PlanarGraph$$1){function GeometryGraph2(){if(PlanarGraph$$1.call(this),this._parentGeom=null,this._lineEdgeMap=new HashMap,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new PointLocator,arguments.length===2){var argIndex=arguments[0],parentGeom=arguments[1],boundaryNodeRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;this._argIndex=argIndex,this._parentGeom=parentGeom,this._boundaryNodeRule=boundaryNodeRule,parentGeom!==null&&this.add(parentGeom)}else if(arguments.length===3){var argIndex$1=arguments[0],parentGeom$1=arguments[1],boundaryNodeRule$1=arguments[2];this._argIndex=argIndex$1,this._parentGeom=parentGeom$1,this._boundaryNodeRule=boundaryNodeRule$1,parentGeom$1!==null&&this.add(parentGeom$1)}}return PlanarGraph$$1&&(GeometryGraph2.__proto__=PlanarGraph$$1),GeometryGraph2.prototype=Object.create(PlanarGraph$$1&&PlanarGraph$$1.prototype),GeometryGraph2.prototype.constructor=GeometryGraph2,GeometryGraph2.prototype.insertBoundaryPoint=function(argIndex,coord){var n=this._nodes.addNode(coord),lbl=n.getLabel(),boundaryCount=1,loc=Location.NONE;loc=lbl.getLocation(argIndex,Position.ON),loc===Location.BOUNDARY&&boundaryCount++;var newLoc=GeometryGraph2.determineBoundary(this._boundaryNodeRule,boundaryCount);lbl.setLocation(argIndex,newLoc)},GeometryGraph2.prototype.computeSelfNodes=function(){if(arguments.length===2){var li=arguments[0],computeRingSelfNodes=arguments[1];return this.computeSelfNodes(li,computeRingSelfNodes,!1)}else if(arguments.length===3){var li$1=arguments[0],computeRingSelfNodes$1=arguments[1],isDoneIfProperInt=arguments[2],si=new SegmentIntersector$2(li$1,!0,!1);si.setIsDoneIfProperInt(isDoneIfProperInt);var esi=this.createEdgeSetIntersector(),isRings=this._parentGeom instanceof LinearRing||this._parentGeom instanceof Polygon||this._parentGeom instanceof MultiPolygon,computeAllSegments=computeRingSelfNodes$1||!isRings;return esi.computeIntersections(this._edges,si,computeAllSegments),this.addSelfIntersectionNodes(this._argIndex),si}},GeometryGraph2.prototype.computeSplitEdges=function(edgelist){for(var i=this._edges.iterator();i.hasNext();){var e=i.next();e.eiList.addSplitEdges(edgelist)}},GeometryGraph2.prototype.computeEdgeIntersections=function(g,li,includeProper){var si=new SegmentIntersector$2(li,includeProper,!0);si.setBoundaryNodes(this.getBoundaryNodes(),g.getBoundaryNodes());var esi=this.createEdgeSetIntersector();return esi.computeIntersections(this._edges,g._edges,si),si},GeometryGraph2.prototype.getGeometry=function(){return this._parentGeom},GeometryGraph2.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},GeometryGraph2.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},GeometryGraph2.prototype.addPoint=function(){if(arguments[0]instanceof Point){var p=arguments[0],coord=p.getCoordinate();this.insertPoint(this._argIndex,coord,Location.INTERIOR)}else if(arguments[0]instanceof Coordinate){var pt=arguments[0];this.insertPoint(this._argIndex,pt,Location.INTERIOR)}},GeometryGraph2.prototype.addPolygon=function(p){var this$1=this;this.addPolygonRing(p.getExteriorRing(),Location.EXTERIOR,Location.INTERIOR);for(var i=0;i<p.getNumInteriorRing();i++){var hole=p.getInteriorRingN(i);this$1.addPolygonRing(hole,Location.INTERIOR,Location.EXTERIOR)}},GeometryGraph2.prototype.addEdge=function(e){this.insertEdge(e);var coord=e.getCoordinates();this.insertPoint(this._argIndex,coord[0],Location.BOUNDARY),this.insertPoint(this._argIndex,coord[coord.length-1],Location.BOUNDARY)},GeometryGraph2.prototype.addLineString=function(line){var coord=CoordinateArrays.removeRepeatedPoints(line.getCoordinates());if(coord.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=coord[0],null;var e=new Edge2(coord,new Label(this._argIndex,Location.INTERIOR));this._lineEdgeMap.put(line,e),this.insertEdge(e),Assert.isTrue(coord.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,coord[0]),this.insertBoundaryPoint(this._argIndex,coord[coord.length-1])},GeometryGraph2.prototype.getInvalidPoint=function(){return this._invalidPoint},GeometryGraph2.prototype.getBoundaryPoints=function(){for(var coll=this.getBoundaryNodes(),pts=new Array(coll.size()).fill(null),i=0,it=coll.iterator();it.hasNext();){var node=it.next();pts[i++]=node.getCoordinate().copy()}return pts},GeometryGraph2.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},GeometryGraph2.prototype.addSelfIntersectionNode=function(argIndex,coord,loc){if(this.isBoundaryNode(argIndex,coord))return null;loc===Location.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(argIndex,coord):this.insertPoint(argIndex,coord,loc)},GeometryGraph2.prototype.addPolygonRing=function(lr,cwLeft,cwRight){if(lr.isEmpty())return null;var coord=CoordinateArrays.removeRepeatedPoints(lr.getCoordinates());if(coord.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=coord[0],null;var left=cwLeft,right=cwRight;CGAlgorithms.isCCW(coord)&&(left=cwRight,right=cwLeft);var e=new Edge2(coord,new Label(this._argIndex,Location.BOUNDARY,left,right));this._lineEdgeMap.put(lr,e),this.insertEdge(e),this.insertPoint(this._argIndex,coord[0],Location.BOUNDARY)},GeometryGraph2.prototype.insertPoint=function(argIndex,coord,onLocation){var n=this._nodes.addNode(coord),lbl=n.getLabel();lbl===null?n._label=new Label(argIndex,onLocation):lbl.setLocation(argIndex,onLocation)},GeometryGraph2.prototype.createEdgeSetIntersector=function(){return new SimpleMCSweepLineIntersector},GeometryGraph2.prototype.addSelfIntersectionNodes=function(argIndex){for(var this$1=this,i=this._edges.iterator();i.hasNext();)for(var e=i.next(),eLoc=e.getLabel().getLocation(argIndex),eiIt=e.eiList.iterator();eiIt.hasNext();){var ei=eiIt.next();this$1.addSelfIntersectionNode(argIndex,ei.coord,eLoc)}},GeometryGraph2.prototype.add=function(){if(arguments.length===1){var g=arguments[0];if(g.isEmpty())return null;if(g instanceof MultiPolygon&&(this._useBoundaryDeterminationRule=!1),g instanceof Polygon)this.addPolygon(g);else if(g instanceof LineString2)this.addLineString(g);else if(g instanceof Point)this.addPoint(g);else if(g instanceof MultiPoint)this.addCollection(g);else if(g instanceof MultiLineString)this.addCollection(g);else if(g instanceof MultiPolygon)this.addCollection(g);else if(g instanceof GeometryCollection)this.addCollection(g);else throw new Error(g.getClass().getName())}else return PlanarGraph$$1.prototype.add.apply(this,arguments)},GeometryGraph2.prototype.addCollection=function(gc){for(var this$1=this,i=0;i<gc.getNumGeometries();i++){var g=gc.getGeometryN(i);this$1.add(g)}},GeometryGraph2.prototype.locate=function(pt){return hasInterface(this._parentGeom,Polygonal)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new IndexedPointInAreaLocator(this._parentGeom)),this._areaPtLocator.locate(pt)):this._ptLocator.locate(pt,this._parentGeom)},GeometryGraph2.prototype.findEdge=function(){if(arguments.length===1){var line=arguments[0];return this._lineEdgeMap.get(line)}else return PlanarGraph$$1.prototype.findEdge.apply(this,arguments)},GeometryGraph2.prototype.interfaces_=function(){return[]},GeometryGraph2.prototype.getClass=function(){return GeometryGraph2},GeometryGraph2.determineBoundary=function(boundaryNodeRule,boundaryCount){return boundaryNodeRule.isInBoundary(boundaryCount)?Location.BOUNDARY:Location.INTERIOR},GeometryGraph2}(PlanarGraph),GeometryGraphOp=function(){if(this._li=new RobustLineIntersector,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var g0=arguments[0];this.setComputationPrecision(g0.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new GeometryGraph(0,g0)}else if(arguments.length===2){var g0$1=arguments[0],g1=arguments[1],boundaryNodeRule=BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;g0$1.getPrecisionModel().compareTo(g1.getPrecisionModel())>=0?this.setComputationPrecision(g0$1.getPrecisionModel()):this.setComputationPrecision(g1.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,g0$1,boundaryNodeRule),this._arg[1]=new GeometryGraph(1,g1,boundaryNodeRule)}else if(arguments.length===3){var g0$2=arguments[0],g1$1=arguments[1],boundaryNodeRule$1=arguments[2];g0$2.getPrecisionModel().compareTo(g1$1.getPrecisionModel())>=0?this.setComputationPrecision(g0$2.getPrecisionModel()):this.setComputationPrecision(g1$1.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new GeometryGraph(0,g0$2,boundaryNodeRule$1),this._arg[1]=new GeometryGraph(1,g1$1,boundaryNodeRule$1)}};GeometryGraphOp.prototype.getArgGeometry=function(i){return this._arg[i].getGeometry()};GeometryGraphOp.prototype.setComputationPrecision=function(pm){this._resultPrecisionModel=pm,this._li.setPrecisionModel(this._resultPrecisionModel)};GeometryGraphOp.prototype.interfaces_=function(){return[]};GeometryGraphOp.prototype.getClass=function(){return GeometryGraphOp};var GeometryMapper=function(){};GeometryMapper.prototype.interfaces_=function(){return[]};GeometryMapper.prototype.getClass=function(){return GeometryMapper};GeometryMapper.map=function(){if(arguments[0]instanceof Geometry&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var geom=arguments[0],op=arguments[1],mapped=new ArrayList,i=0;i<geom.getNumGeometries();i++){var g=op.map(geom.getGeometryN(i));g!==null&&mapped.add(g)}return geom.getFactory().buildGeometry(mapped)}else if(hasInterface(arguments[0],Collection)&&hasInterface(arguments[1],GeometryMapper.MapOp)){for(var geoms=arguments[0],op$1=arguments[1],mapped$1=new ArrayList,i$1=geoms.iterator();i$1.hasNext();){var g$1=i$1.next(),gr=op$1.map(g$1);gr!==null&&mapped$1.add(gr)}return mapped$1}};GeometryMapper.MapOp=function(){};var OverlayOp=function(GeometryGraphOp3){function OverlayOp2(){var g0=arguments[0],g1=arguments[1];GeometryGraphOp3.call(this,g0,g1),this._ptLocator=new PointLocator,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new EdgeList,this._resultPolyList=new ArrayList,this._resultLineList=new ArrayList,this._resultPointList=new ArrayList,this._graph=new PlanarGraph(new OverlayNodeFactory),this._geomFact=g0.getFactory()}return GeometryGraphOp3&&(OverlayOp2.__proto__=GeometryGraphOp3),OverlayOp2.prototype=Object.create(GeometryGraphOp3&&GeometryGraphOp3.prototype),OverlayOp2.prototype.constructor=OverlayOp2,OverlayOp2.prototype.insertUniqueEdge=function(e){var existingEdge=this._edgeList.findEqualEdge(e);if(existingEdge!==null){var existingLabel=existingEdge.getLabel(),labelToMerge=e.getLabel();existingEdge.isPointwiseEqual(e)||(labelToMerge=new Label(e.getLabel()),labelToMerge.flip());var depth2=existingEdge.getDepth();depth2.isNull()&&depth2.add(existingLabel),depth2.add(labelToMerge),existingLabel.merge(labelToMerge)}else this._edgeList.add(e)},OverlayOp2.prototype.getGraph=function(){return this._graph},OverlayOp2.prototype.cancelDuplicateResultEdges=function(){for(var it=this._graph.getEdgeEnds().iterator();it.hasNext();){var de=it.next(),sym=de.getSym();de.isInResult()&&sym.isInResult()&&(de.setInResult(!1),sym.setInResult(!1))}},OverlayOp2.prototype.isCoveredByLA=function(coord){return!!(this.isCovered(coord,this._resultLineList)||this.isCovered(coord,this._resultPolyList))},OverlayOp2.prototype.computeGeometry=function(resultPointList,resultLineList,resultPolyList,opcode){var geomList=new ArrayList;return geomList.addAll(resultPointList),geomList.addAll(resultLineList),geomList.addAll(resultPolyList),geomList.isEmpty()?OverlayOp2.createEmptyResult(opcode,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(geomList)},OverlayOp2.prototype.mergeSymLabels=function(){for(var nodeit=this._graph.getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().mergeSymLabels()}},OverlayOp2.prototype.isCovered=function(coord,geomList){for(var this$1=this,it=geomList.iterator();it.hasNext();){var geom=it.next(),loc=this$1._ptLocator.locate(coord,geom);if(loc!==Location.EXTERIOR)return!0}return!1},OverlayOp2.prototype.replaceCollapsedEdges=function(){for(var newEdges=new ArrayList,it=this._edgeList.iterator();it.hasNext();){var e=it.next();e.isCollapsed()&&(it.remove(),newEdges.add(e.getCollapsedEdge()))}this._edgeList.addAll(newEdges)},OverlayOp2.prototype.updateNodeLabelling=function(){for(var nodeit=this._graph.getNodes().iterator();nodeit.hasNext();){var node=nodeit.next(),lbl=node.getEdges().getLabel();node.getLabel().merge(lbl)}},OverlayOp2.prototype.getResultGeometry=function(overlayOpCode){return this.computeOverlay(overlayOpCode),this._resultGeom},OverlayOp2.prototype.insertUniqueEdges=function(edges2){for(var this$1=this,i=edges2.iterator();i.hasNext();){var e=i.next();this$1.insertUniqueEdge(e)}},OverlayOp2.prototype.computeOverlay=function(opCode){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var baseSplitEdges=new ArrayList;this._arg[0].computeSplitEdges(baseSplitEdges),this._arg[1].computeSplitEdges(baseSplitEdges),this.insertUniqueEdges(baseSplitEdges),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),EdgeNodingValidator.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(opCode),this.cancelDuplicateResultEdges();var polyBuilder=new PolygonBuilder(this._geomFact);polyBuilder.add(this._graph),this._resultPolyList=polyBuilder.getPolygons();var lineBuilder=new LineBuilder(this,this._geomFact,this._ptLocator);this._resultLineList=lineBuilder.build(opCode);var pointBuilder=new PointBuilder(this,this._geomFact,this._ptLocator);this._resultPointList=pointBuilder.build(opCode),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,opCode)},OverlayOp2.prototype.labelIncompleteNode=function(n,targetIndex){var loc=this._ptLocator.locate(n.getCoordinate(),this._arg[targetIndex].getGeometry());n.getLabel().setLocation(targetIndex,loc)},OverlayOp2.prototype.copyPoints=function(argIndex){for(var this$1=this,i=this._arg[argIndex].getNodeIterator();i.hasNext();){var graphNode=i.next(),newNode=this$1._graph.addNode(graphNode.getCoordinate());newNode.setLabel(argIndex,graphNode.getLabel().getLocation(argIndex))}},OverlayOp2.prototype.findResultAreaEdges=function(opCode){for(var it=this._graph.getEdgeEnds().iterator();it.hasNext();){var de=it.next(),label=de.getLabel();label.isArea()&&!de.isInteriorAreaEdge()&&OverlayOp2.isResultOfOp(label.getLocation(0,Position.RIGHT),label.getLocation(1,Position.RIGHT),opCode)&&de.setInResult(!0)}},OverlayOp2.prototype.computeLabelsFromDepths=function(){for(var it=this._edgeList.iterator();it.hasNext();){var e=it.next(),lbl=e.getLabel(),depth2=e.getDepth();if(!depth2.isNull()){depth2.normalize();for(var i=0;i<2;i++)!lbl.isNull(i)&&lbl.isArea()&&!depth2.isNull(i)&&(depth2.getDelta(i)===0?lbl.toLine(i):(Assert.isTrue(!depth2.isNull(i,Position.LEFT),"depth of LEFT side has not been initialized"),lbl.setLocation(i,Position.LEFT,depth2.getLocation(i,Position.LEFT)),Assert.isTrue(!depth2.isNull(i,Position.RIGHT),"depth of RIGHT side has not been initialized"),lbl.setLocation(i,Position.RIGHT,depth2.getLocation(i,Position.RIGHT))))}}},OverlayOp2.prototype.computeLabelling=function(){for(var this$1=this,nodeit=this._graph.getNodes().iterator();nodeit.hasNext();){var node=nodeit.next();node.getEdges().computeLabelling(this$1._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},OverlayOp2.prototype.labelIncompleteNodes=function(){for(var this$1=this,ni=this._graph.getNodes().iterator();ni.hasNext();){var n=ni.next(),label=n.getLabel();n.isIsolated()&&(label.isNull(0)?this$1.labelIncompleteNode(n,0):this$1.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(label)}},OverlayOp2.prototype.isCoveredByA=function(coord){return!!this.isCovered(coord,this._resultPolyList)},OverlayOp2.prototype.interfaces_=function(){return[]},OverlayOp2.prototype.getClass=function(){return OverlayOp2},OverlayOp2}(GeometryGraphOp);OverlayOp.overlayOp=function(geom0,geom1,opCode){var gov=new OverlayOp(geom0,geom1),geomOv=gov.getResultGeometry(opCode);return geomOv};OverlayOp.intersection=function(g,other){if(g.isEmpty()||other.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.INTERSECTION,g,other,g.getFactory());if(g.isGeometryCollection()){var g2=other;return GeometryCollectionMapper.map(g,{interfaces_:function(){return[GeometryMapper.MapOp]},map:function(g3){return g3.intersection(g2)}})}return g.checkNotGeometryCollection(g),g.checkNotGeometryCollection(other),SnapIfNeededOverlayOp.overlayOp(g,other,OverlayOp.INTERSECTION)};OverlayOp.symDifference=function(g,other){if(g.isEmpty()||other.isEmpty()){if(g.isEmpty()&&other.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.SYMDIFFERENCE,g,other,g.getFactory());if(g.isEmpty())return other.copy();if(other.isEmpty())return g.copy()}return g.checkNotGeometryCollection(g),g.checkNotGeometryCollection(other),SnapIfNeededOverlayOp.overlayOp(g,other,OverlayOp.SYMDIFFERENCE)};OverlayOp.resultDimension=function(opCode,g0,g1){var dim0=g0.getDimension(),dim1=g1.getDimension(),resultDimension=-1;switch(opCode){case OverlayOp.INTERSECTION:resultDimension=Math.min(dim0,dim1);break;case OverlayOp.UNION:resultDimension=Math.max(dim0,dim1);break;case OverlayOp.DIFFERENCE:resultDimension=dim0;break;case OverlayOp.SYMDIFFERENCE:resultDimension=Math.max(dim0,dim1);break;default:}return resultDimension};OverlayOp.createEmptyResult=function(overlayOpCode,a,b,geomFact){var result=null;switch(OverlayOp.resultDimension(overlayOpCode,a,b)){case-1:result=geomFact.createGeometryCollection(new Array(0).fill(null));break;case 0:result=geomFact.createPoint();break;case 1:result=geomFact.createLineString();break;case 2:result=geomFact.createPolygon();break;default:}return result};OverlayOp.difference=function(g,other){return g.isEmpty()?OverlayOp.createEmptyResult(OverlayOp.DIFFERENCE,g,other,g.getFactory()):other.isEmpty()?g.copy():(g.checkNotGeometryCollection(g),g.checkNotGeometryCollection(other),SnapIfNeededOverlayOp.overlayOp(g,other,OverlayOp.DIFFERENCE))};OverlayOp.isResultOfOp=function(){if(arguments.length===2){var label=arguments[0],opCode=arguments[1],loc0=label.getLocation(0),loc1=label.getLocation(1);return OverlayOp.isResultOfOp(loc0,loc1,opCode)}else if(arguments.length===3){var loc0$1=arguments[0],loc1$1=arguments[1],overlayOpCode=arguments[2];switch(loc0$1===Location.BOUNDARY&&(loc0$1=Location.INTERIOR),loc1$1===Location.BOUNDARY&&(loc1$1=Location.INTERIOR),overlayOpCode){case OverlayOp.INTERSECTION:return loc0$1===Location.INTERIOR&&loc1$1===Location.INTERIOR;case OverlayOp.UNION:return loc0$1===Location.INTERIOR||loc1$1===Location.INTERIOR;case OverlayOp.DIFFERENCE:return loc0$1===Location.INTERIOR&&loc1$1!==Location.INTERIOR;case OverlayOp.SYMDIFFERENCE:return loc0$1===Location.INTERIOR&&loc1$1!==Location.INTERIOR||loc0$1!==Location.INTERIOR&&loc1$1===Location.INTERIOR;default:}return!1}};OverlayOp.INTERSECTION=1;OverlayOp.UNION=2;OverlayOp.DIFFERENCE=3;OverlayOp.SYMDIFFERENCE=4;var FuzzyPointLocator=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new PointLocator,this._seg=new LineSegment;var g=arguments[0],boundaryDistanceTolerance=arguments[1];this._g=g,this._boundaryDistanceTolerance=boundaryDistanceTolerance,this._linework=this.extractLinework(g)};FuzzyPointLocator.prototype.isWithinToleranceOfBoundary=function(pt){for(var this$1=this,i=0;i<this._linework.getNumGeometries();i++)for(var line=this$1._linework.getGeometryN(i),seq=line.getCoordinateSequence(),j=0;j<seq.size()-1;j++){seq.getCoordinate(j,this$1._seg.p0),seq.getCoordinate(j+1,this$1._seg.p1);var dist=this$1._seg.distance(pt);if(dist<=this$1._boundaryDistanceTolerance)return!0}return!1};FuzzyPointLocator.prototype.getLocation=function(pt){return this.isWithinToleranceOfBoundary(pt)?Location.BOUNDARY:this._ptLocator.locate(pt,this._g)};FuzzyPointLocator.prototype.extractLinework=function(g){var extracter=new PolygonalLineworkExtracter;g.apply(extracter);var linework=extracter.getLinework(),lines=GeometryFactory.toLineStringArray(linework);return g.getFactory().createMultiLineString(lines)};FuzzyPointLocator.prototype.interfaces_=function(){return[]};FuzzyPointLocator.prototype.getClass=function(){return FuzzyPointLocator};var PolygonalLineworkExtracter=function(){this._linework=null,this._linework=new ArrayList};PolygonalLineworkExtracter.prototype.getLinework=function(){return this._linework};PolygonalLineworkExtracter.prototype.filter=function(g){var this$1=this;if(g instanceof Polygon){var poly=g;this._linework.add(poly.getExteriorRing());for(var i=0;i<poly.getNumInteriorRing();i++)this$1._linework.add(poly.getInteriorRingN(i))}};PolygonalLineworkExtracter.prototype.interfaces_=function(){return[GeometryFilter]};PolygonalLineworkExtracter.prototype.getClass=function(){return PolygonalLineworkExtracter};var OffsetPointGenerator=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var g=arguments[0];this._g=g};OffsetPointGenerator.prototype.extractPoints=function(line,offsetDistance,offsetPts){for(var this$1=this,pts=line.getCoordinates(),i=0;i<pts.length-1;i++)this$1.computeOffsetPoints(pts[i],pts[i+1],offsetDistance,offsetPts)};OffsetPointGenerator.prototype.setSidesToGenerate=function(doLeft,doRight){this._doLeft=doLeft,this._doRight=doRight};OffsetPointGenerator.prototype.getPoints=function(offsetDistance){for(var this$1=this,offsetPts=new ArrayList,lines=LinearComponentExtracter.getLines(this._g),i=lines.iterator();i.hasNext();){var line=i.next();this$1.extractPoints(line,offsetDistance,offsetPts)}return offsetPts};OffsetPointGenerator.prototype.computeOffsetPoints=function(p0,p1,offsetDistance,offsetPts){var dx=p1.x-p0.x,dy=p1.y-p0.y,len=Math.sqrt(dx*dx+dy*dy),ux=offsetDistance*dx/len,uy=offsetDistance*dy/len,midX=(p1.x+p0.x)/2,midY=(p1.y+p0.y)/2;if(this._doLeft){var offsetLeft=new Coordinate(midX-uy,midY+ux);offsetPts.add(offsetLeft)}if(this._doRight){var offsetRight=new Coordinate(midX+uy,midY-ux);offsetPts.add(offsetRight)}};OffsetPointGenerator.prototype.interfaces_=function(){return[]};OffsetPointGenerator.prototype.getClass=function(){return OffsetPointGenerator};var OverlayResultValidator=function OverlayResultValidator2(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=OverlayResultValidator2.TOLERANCE,this._testCoords=new ArrayList;var a=arguments[0],b=arguments[1],result=arguments[2];this._boundaryDistanceTolerance=OverlayResultValidator2.computeBoundaryDistanceTolerance(a,b),this._geom=[a,b,result],this._locFinder=[new FuzzyPointLocator(this._geom[0],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[1],this._boundaryDistanceTolerance),new FuzzyPointLocator(this._geom[2],this._boundaryDistanceTolerance)]},staticAccessors$46={TOLERANCE:{configurable:!0}};OverlayResultValidator.prototype.reportResult=function(overlayOp3,location,expectedInterior){System.out.println("Overlay result invalid - A:"+Location.toLocationSymbol(location[0])+" B:"+Location.toLocationSymbol(location[1])+" expected:"+(expectedInterior?"i":"e")+" actual:"+Location.toLocationSymbol(location[2]))};OverlayResultValidator.prototype.isValid=function(overlayOp3){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var isValid7=this.checkValid(overlayOp3);return isValid7};OverlayResultValidator.prototype.checkValid=function(){var this$1=this;if(arguments.length===1){for(var overlayOp3=arguments[0],i=0;i<this._testCoords.size();i++){var pt=this$1._testCoords.get(i);if(!this$1.checkValid(overlayOp3,pt))return this$1._invalidLocation=pt,!1}return!0}else if(arguments.length===2){var overlayOp$1=arguments[0],pt$1=arguments[1];return this._location[0]=this._locFinder[0].getLocation(pt$1),this._location[1]=this._locFinder[1].getLocation(pt$1),this._location[2]=this._locFinder[2].getLocation(pt$1),OverlayResultValidator.hasLocation(this._location,Location.BOUNDARY)?!0:this.isValidResult(overlayOp$1,this._location)}};OverlayResultValidator.prototype.addTestPts=function(g){var ptGen=new OffsetPointGenerator(g);this._testCoords.addAll(ptGen.getPoints(5*this._boundaryDistanceTolerance))};OverlayResultValidator.prototype.isValidResult=function(overlayOp3,location){var expectedInterior=OverlayOp.isResultOfOp(location[0],location[1],overlayOp3),resultInInterior=location[2]===Location.INTERIOR,isValid7=!(expectedInterior^resultInInterior);return isValid7||this.reportResult(overlayOp3,location,expectedInterior),isValid7};OverlayResultValidator.prototype.getInvalidLocation=function(){return this._invalidLocation};OverlayResultValidator.prototype.interfaces_=function(){return[]};OverlayResultValidator.prototype.getClass=function(){return OverlayResultValidator};OverlayResultValidator.hasLocation=function(location,loc){for(var i=0;i<3;i++)if(location[i]===loc)return!0;return!1};OverlayResultValidator.computeBoundaryDistanceTolerance=function(g0,g1){return Math.min(GeometrySnapper.computeSizeBasedSnapTolerance(g0),GeometrySnapper.computeSizeBasedSnapTolerance(g1))};OverlayResultValidator.isValid=function(a,b,overlayOp3,result){var validator=new OverlayResultValidator(a,b,result);return validator.isValid(overlayOp3)};staticAccessors$46.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(OverlayResultValidator,staticAccessors$46);var GeometryCombiner=function GeometryCombiner2(geoms){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=GeometryCombiner2.extractFactory(geoms),this._inputGeoms=geoms};GeometryCombiner.prototype.extractElements=function(geom,elems){var this$1=this;if(geom===null)return null;for(var i=0;i<geom.getNumGeometries();i++){var elemGeom=geom.getGeometryN(i);this$1._skipEmpty&&elemGeom.isEmpty()||elems.add(elemGeom)}};GeometryCombiner.prototype.combine=function(){for(var this$1=this,elems=new ArrayList,i=this._inputGeoms.iterator();i.hasNext();){var g=i.next();this$1.extractElements(g,elems)}return elems.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(elems)};GeometryCombiner.prototype.interfaces_=function(){return[]};GeometryCombiner.prototype.getClass=function(){return GeometryCombiner};GeometryCombiner.combine=function(){if(arguments.length===1){var geoms=arguments[0],combiner=new GeometryCombiner(geoms);return combiner.combine()}else if(arguments.length===2){var g0=arguments[0],g1=arguments[1],combiner$1=new GeometryCombiner(GeometryCombiner.createList(g0,g1));return combiner$1.combine()}else if(arguments.length===3){var g0$1=arguments[0],g1$1=arguments[1],g2=arguments[2],combiner$2=new GeometryCombiner(GeometryCombiner.createList(g0$1,g1$1,g2));return combiner$2.combine()}};GeometryCombiner.extractFactory=function(geoms){return geoms.isEmpty()?null:geoms.iterator().next().getFactory()};GeometryCombiner.createList=function(){if(arguments.length===2){var obj0=arguments[0],obj1=arguments[1],list=new ArrayList;return list.add(obj0),list.add(obj1),list}else if(arguments.length===3){var obj0$1=arguments[0],obj1$1=arguments[1],obj2=arguments[2],list$1=new ArrayList;return list$1.add(obj0$1),list$1.add(obj1$1),list$1.add(obj2),list$1}};var CascadedPolygonUnion=function(){this._inputPolys=null,this._geomFactory=null;var polys=arguments[0];this._inputPolys=polys,this._inputPolys===null&&(this._inputPolys=new ArrayList)},staticAccessors$47={STRTREE_NODE_CAPACITY:{configurable:!0}};CascadedPolygonUnion.prototype.reduceToGeometries=function(geomTree){for(var this$1=this,geoms=new ArrayList,i=geomTree.iterator();i.hasNext();){var o=i.next(),geom=null;hasInterface(o,List)?geom=this$1.unionTree(o):o instanceof Geometry&&(geom=o),geoms.add(geom)}return geoms};CascadedPolygonUnion.prototype.extractByEnvelope=function(env,geom,disjointGeoms){for(var intersectingGeoms=new ArrayList,i=0;i<geom.getNumGeometries();i++){var elem=geom.getGeometryN(i);elem.getEnvelopeInternal().intersects(env)?intersectingGeoms.add(elem):disjointGeoms.add(elem)}return this._geomFactory.buildGeometry(intersectingGeoms)};CascadedPolygonUnion.prototype.unionOptimized=function(g0,g1){var g0Env=g0.getEnvelopeInternal(),g1Env=g1.getEnvelopeInternal();if(!g0Env.intersects(g1Env)){var combo=GeometryCombiner.combine(g0,g1);return combo}if(g0.getNumGeometries()<=1&&g1.getNumGeometries()<=1)return this.unionActual(g0,g1);var commonEnv=g0Env.intersection(g1Env);return this.unionUsingEnvelopeIntersection(g0,g1,commonEnv)};CascadedPolygonUnion.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var index=new STRtree(CascadedPolygonUnion.STRTREE_NODE_CAPACITY),i=this._inputPolys.iterator();i.hasNext();){var item=i.next();index.insert(item.getEnvelopeInternal(),item)}this._inputPolys=null;var itemTree=index.itemsTree(),unionAll=this.unionTree(itemTree);return unionAll};CascadedPolygonUnion.prototype.binaryUnion=function(){if(arguments.length===1){var geoms=arguments[0];return this.binaryUnion(geoms,0,geoms.size())}else if(arguments.length===3){var geoms$1=arguments[0],start=arguments[1],end=arguments[2];if(end-start<=1){var g0=CascadedPolygonUnion.getGeometry(geoms$1,start);return this.unionSafe(g0,null)}else{if(end-start===2)return this.unionSafe(CascadedPolygonUnion.getGeometry(geoms$1,start),CascadedPolygonUnion.getGeometry(geoms$1,start+1));var mid=Math.trunc((end+start)/2),g0$1=this.binaryUnion(geoms$1,start,mid),g1=this.binaryUnion(geoms$1,mid,end);return this.unionSafe(g0$1,g1)}}};CascadedPolygonUnion.prototype.repeatedUnion=function(geoms){for(var union6=null,i=geoms.iterator();i.hasNext();){var g=i.next();union6===null?union6=g.copy():union6=union6.union(g)}return union6};CascadedPolygonUnion.prototype.unionSafe=function(g0,g1){return g0===null&&g1===null?null:g0===null?g1.copy():g1===null?g0.copy():this.unionOptimized(g0,g1)};CascadedPolygonUnion.prototype.unionActual=function(g0,g1){return CascadedPolygonUnion.restrictToPolygons(g0.union(g1))};CascadedPolygonUnion.prototype.unionTree=function(geomTree){var geoms=this.reduceToGeometries(geomTree),union6=this.binaryUnion(geoms);return union6};CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(g0,g1,common){var disjointPolys=new ArrayList,g0Int=this.extractByEnvelope(common,g0,disjointPolys),g1Int=this.extractByEnvelope(common,g1,disjointPolys),union6=this.unionActual(g0Int,g1Int);disjointPolys.add(union6);var overallUnion=GeometryCombiner.combine(disjointPolys);return overallUnion};CascadedPolygonUnion.prototype.bufferUnion=function(){if(arguments.length===1){var geoms=arguments[0],factory=geoms.get(0).getFactory(),gColl=factory.buildGeometry(geoms),unionAll=gColl.buffer(0);return unionAll}else if(arguments.length===2){var g0=arguments[0],g1=arguments[1],factory$1=g0.getFactory(),gColl$1=factory$1.createGeometryCollection([g0,g1]),unionAll$1=gColl$1.buffer(0);return unionAll$1}};CascadedPolygonUnion.prototype.interfaces_=function(){return[]};CascadedPolygonUnion.prototype.getClass=function(){return CascadedPolygonUnion};CascadedPolygonUnion.restrictToPolygons=function(g){if(hasInterface(g,Polygonal))return g;var polygons=PolygonExtracter.getPolygons(g);return polygons.size()===1?polygons.get(0):g.getFactory().createMultiPolygon(GeometryFactory.toPolygonArray(polygons))};CascadedPolygonUnion.getGeometry=function(list,index){return index>=list.size()?null:list.get(index)};CascadedPolygonUnion.union=function(polys){var op=new CascadedPolygonUnion(polys);return op.union()};staticAccessors$47.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(CascadedPolygonUnion,staticAccessors$47);var UnionOp=function(){};UnionOp.prototype.interfaces_=function(){return[]};UnionOp.prototype.getClass=function(){return UnionOp};UnionOp.union=function(g,other){if(g.isEmpty()||other.isEmpty()){if(g.isEmpty()&&other.isEmpty())return OverlayOp.createEmptyResult(OverlayOp.UNION,g,other,g.getFactory());if(g.isEmpty())return other.copy();if(other.isEmpty())return g.copy()}return g.checkNotGeometryCollection(g),g.checkNotGeometryCollection(other),SnapIfNeededOverlayOp.overlayOp(g,other,OverlayOp.UNION)};function adder_default(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(y2){add15(temp,y2,this.t),add15(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add15(adder,a,b){var x2=adder.s=a+b,bv=x2-a,av=x2-bv;adder.t=a-av+(b-bv)}var epsilon4=1e-6;var pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=pi*2,degrees=180/pi,radians=pi/180,abs2=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos;var exp=Math.exp;var log=Math.log;var sin=Math.sin;var sqrt3=Math.sqrt,tan=Math.tan;function acos(x2){return x2>1?0:x2<-1?pi:Math.acos(x2)}function asin(x2){return x2>1?halfPi:x2<-1?-halfPi:Math.asin(x2)}function noop(){}var areaRingSum=adder_default(),areaSum=adder_default();function cartesian(spherical2){var lambda=spherical2[0],phi=spherical2[1],cosPhi=cos(phi);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi)]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianNormalizeInPlace(d){var l=sqrt3(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}var deltaSum=adder_default();function rotationIdentity(lambda,phi){return[lambda>pi?lambda-tau:lambda<-pi?lambda+tau:lambda,phi]}rotationIdentity.invert=rotationIdentity;function buffer_default(){var lines=[],line;return{point:function(x2,y2){line.push([x2,y2])},lineStart:function(){lines.push(line=[])},lineEnd:noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}function pointEqual_default(a,b){return abs2(a[0]-b[0])<epsilon4&&abs2(a[1]-b[1])<epsilon4}function Intersection(point4,points,other,entry){this.x=point4,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function polygon_default(segments,compareIntersection2,startInside,interpolate,stream){var subject=[],clip=[],i,n;if(segments.forEach(function(segment){if(!((n2=segment.length-1)<=0)){var n2,p0=segment[0],p1=segment[n2],x2;if(pointEqual_default(p0,p1)){for(stream.lineStart(),i=0;i<n2;++i)stream.point((p0=segment[i])[0],p0[1]);stream.lineEnd();return}subject.push(x2=new Intersection(p0,segment,null,!0)),clip.push(x2.o=new Intersection(p0,null,x2,!1)),subject.push(x2=new Intersection(p1,segment,null,!1)),clip.push(x2.o=new Intersection(p1,null,x2,!0))}}),!!subject.length){for(clip.sort(compareIntersection2),link(subject),link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var start=subject[0],points,point4;;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point4=points[i])[0],point4[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point4=points[i])[0],point4[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}current=current.o,points=current.z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function link(array2){if(n=array2.length){for(var n,i=0,a=array2[0],b;++i<n;)a.n=b=array2[i],b.p=a,a=b;a.n=b=array2[0],b.p=a}}function ascending_default(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function bisector_default(compare10){return compare10.length===1&&(compare10=ascendingComparator(compare10)),{left:function(a,x2,lo,hi){for(lo==null&&(lo=0),hi==null&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare10(a[mid],x2)<0?lo=mid+1:hi=mid}return lo},right:function(a,x2,lo,hi){for(lo==null&&(lo=0),hi==null&&(hi=a.length);lo<hi;){var mid=lo+hi>>>1;compare10(a[mid],x2)>0?hi=mid:lo=mid+1}return lo}}}function ascendingComparator(f){return function(d,x2){return ascending_default(f(d),x2)}}var ascendingBisect=bisector_default(ascending_default),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;var array=Array.prototype,slice=array.slice,map4=array.map;var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function merge_default2(arrays){for(var n=arrays.length,m,i=-1,j=0,merged,array2;++i<n;)j+=arrays[i].length;for(merged=new Array(j);--n>=0;)for(array2=arrays[n],m=array2.length;--m>=0;)merged[--j]=array2[m];return merged}var clipMax=1e9,clipMin=-clipMax;var sum=adder_default();function polygonContains_default(polygon4,point4){var lambda=point4[0],phi=point4[1],normal=[sin(lambda),-cos(lambda),0],angle3=0,winding=0;sum.reset();for(var i=0,n=polygon4.length;i<n;++i)if(m=(ring=polygon4[i]).length)for(var ring,m,point0=ring[m-1],lambda0=point0[0],phi0=point0[1]/2+quarterPi,sinPhi0=sin(phi0),cosPhi0=cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=point1[0],phi1=point1[1]/2+quarterPi,sinPhi1=sin(phi1),cosPhi1=cos(phi1),delta=lambda1-lambda0,sign2=delta>=0?1:-1,absDelta=sign2*delta,antimeridian=absDelta>pi,k=sinPhi0*sinPhi1;if(sum.add(atan2(k*sign2*sin(absDelta),cosPhi0*cosPhi1+k*cos(absDelta))),angle3+=antimeridian?delta+sign2*tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection10=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection10);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection10[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle3<-epsilon4||angle3<epsilon4&&sum<-epsilon4)^winding&1}var lengthSum=adder_default();var areaSum2=adder_default(),areaRingSum2=adder_default();var x0=1/0;var x1=-x0;function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(x2,y2){switch(this._point){case 0:{this._context.moveTo(x2,y2),this._point=1;break}case 1:{this._context.lineTo(x2,y2);break}default:{this._context.moveTo(x2+this._radius,y2),this._context.arc(x2,y2,this._radius,0,tau);break}}},result:noop};var lengthSum2=adder_default();function PathString(){this._string=[]}PathString.prototype={_radius:4.5,_circle:circle(4.5),pointRadius:function(_){return(_=+_)!==this._radius&&(this._radius=_,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(x2,y2){switch(this._point){case 0:{this._string.push("M",x2,",",y2),this._point=1;break}case 1:{this._string.push("L",x2,",",y2);break}default:{this._circle==null&&(this._circle=circle(this._radius)),this._string.push("M",x2,",",y2,this._circle);break}}},result:function(){if(this._string.length){var result=this._string.join("");return this._string=[],result}else return null}};function circle(radius2){return"m0,"+radius2+"a"+radius2+","+radius2+" 0 1,1 0,"+-2*radius2+"a"+radius2+","+radius2+" 0 1,1 0,"+2*radius2+"z"}function clip_default(pointVisible,clipLine,interpolate,start){return function(rotate,sink){var line=clipLine(sink),rotatedStart=rotate.invert(start[0],start[1]),ringBuffer=buffer_default(),ringSink=clipLine(ringBuffer),polygonStarted=!1,polygon4,segments,ring,clip={point:point4,lineStart,lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon4=[]},polygonEnd:function(){clip.point=point4,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge_default2(segments);var startInside=polygonContains_default(polygon4,rotatedStart);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),polygon_default(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon4=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point4(lambda,phi){var point5=rotate(lambda,phi);pointVisible(lambda=point5[0],phi=point5[1])&&sink.point(lambda,phi)}function pointLine(lambda,phi){var point5=rotate(lambda,phi);line.point(point5[0],point5[1])}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point4,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]);var point5=rotate(lambda,phi);ringSink.point(point5[0],point5[1])}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var clean=ringSink.clean(),ringSegments=ringBuffer.result(),i,n=ringSegments.length,m,segment,point5;if(ring.pop(),polygon4.push(ring),ring=null,!!n){if(clean&1){if(segment=ringSegments[0],(m=segment.length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point5=segment[i])[0],point5[1]);sink.lineEnd()}return}n>1&&clean&2&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi-epsilon4:halfPi-a[1])-((b=b.x)[0]<0?b[1]-halfPi-epsilon4:halfPi-b[1])}var antimeridian_default=clip_default(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi,-halfPi]);function clipAntimeridianLine(stream){var lambda0=NaN,phi0=NaN,sign0=NaN,clean;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi:-pi,delta=abs2(lambda1-lambda0);abs2(delta-pi)<epsilon4?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi:-halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi&&(abs2(lambda0-sign0)<epsilon4&&(lambda0-=sign0*epsilon4),abs2(lambda1-sign1)<epsilon4&&(lambda1-=sign1*epsilon4),phi0=clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin(lambda0-lambda1);return abs2(sinLambda0Lambda1)>epsilon4?atan((sin(phi0)*(cosPhi1=cos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0=cos(phi0))*sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(from==null)phi=direction*halfPi,stream.point(-pi,phi),stream.point(0,phi),stream.point(pi,phi),stream.point(pi,0),stream.point(pi,-phi),stream.point(0,-phi),stream.point(-pi,-phi),stream.point(-pi,0),stream.point(-pi,phi);else if(abs2(from[0]-to[0])>epsilon4){var lambda=from[0]<to[0]?pi:-pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(x2,y2){this.stream.point(x2,y2)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cosMinDistance=cos(30*radians);var transformRadians=transformer({point:function(x2,y2){this.stream.point(x2*radians,y2*radians)}});function azimuthalRaw(scale3){return function(x2,y2){var cx=cos(x2),cy=cos(y2),k=scale3(cx*cy);return[k*cy*sin(x2),k*sin(y2)]}}function azimuthalInvert(angle3){return function(x2,y2){var z=sqrt3(x2*x2+y2*y2),c=angle3(z),sc=sin(c),cc=cos(c);return[atan2(x2*sc,z*cc),asin(z&&y2*sc/z)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(cxcy){return sqrt3(2/(1+cxcy))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(z){return 2*asin(z/2)});var azimuthalEquidistantRaw=azimuthalRaw(function(c){return(c=acos(c))&&c/sin(c)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(z){return z});function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi+phi)/2))]}mercatorRaw.invert=function(x2,y2){return[x2,2*atan(exp(y2))-halfPi]};function equirectangularRaw(lambda,phi){return[lambda,phi]}equirectangularRaw.invert=equirectangularRaw;function gnomonicRaw(x2,y2){var cy=cos(y2),k=cos(x2)*cy;return[cy*sin(x2)/k,sin(y2)/k]}gnomonicRaw.invert=azimuthalInvert(atan);function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(-.013791+phi4*(.003971*phi2-.001529*phi4))),phi*(1.007226+phi2*(.015085+phi4*(-.044475+.028874*phi2-.005916*phi4)))]}naturalEarth1Raw.invert=function(x2,y2){var phi=y2,i=25,delta;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(-.044475+.028874*phi2-.005916*phi4)))-y2)/(1.007226+phi2*(.015085*3+phi4*(-.044475*7+.028874*9*phi2-.005916*11*phi4)))}while(abs2(delta)>epsilon4&&--i>0);return[x2/(.8707+(phi2=phi*phi)*(-.131979+phi2*(-.013791+phi2*phi2*phi2*(.003971-.001529*phi2)))),phi]};function orthographicRaw(x2,y2){return[cos(y2)*sin(x2),sin(y2)]}orthographicRaw.invert=azimuthalInvert(asin);function stereographicRaw(x2,y2){var cy=cos(y2),k=1+cos(x2)*cy;return[cy*sin(x2)/k,sin(y2)/k]}stereographicRaw.invert=azimuthalInvert(function(z){return 2*atan(z)});function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi+phi)/2)),-lambda]}transverseMercatorRaw.invert=function(x2,y2){return[-y2,2*atan(exp(x2))-halfPi]};var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var byteToHex=[];for(let i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(arr,offset=0){return byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+"-"+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+"-"+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+"-"+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+"-"+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native_default={randomUUID};function v4(options,buf,offset){if(native_default.randomUUID&&!buf&&!options)return native_default.randomUUID();options=options||{};let rnds=options.random||(options.rng||rng)();if(rnds[6]=rnds[6]&15|64,rnds[8]=rnds[8]&63|128,buf){offset=offset||0;for(let i=0;i<16;++i)buf[offset+i]=rnds[i];return buf}return unsafeStringify(rnds)}var v4_default=v4;window.type=!0;function filamentMapsField({state,statePath,setStateUsing,getStateUsing,mapEl,allowFullscreen,tileLayerUrl,maxZoom,subDomains,markerIcon,markerShadowIcon,maxMarkers,canDrawMarker,canDrawPolygon,canDrawPolygonLine,canDrawRectangle,canDrawCircle,canDrawCircleMarker,boundary}){return{state,map:null,tileLayer:null,drawControl:null,drawnItems:null,boundaryControl:null,boundaryItems:null,cachedLayers:{},init:function(){this.addLayerProperties(),this.initMap(),this.initTileLayer(),this.initBoundary(),this.initDrawLayers(),this.initDrawToolbar(),this.initMapEvents(),this.updateState()},initMap(){let state2=getStateUsing(statePath);this.map=new import_leaflet.default.Map(mapEl,{center:[state2?.latitude??24.462512,state2?.longitude??54.3696599],zoom:16,markerZoomAnimation:!1,zoomControl:!1,attributionControl:!1,fullscreenControl:allowFullscreen}),import_leaflet.default.Marker.prototype.options.icon=import_leaflet.default.icon({iconUrl:markerIcon,shadowUrl:markerShadowIcon,iconSize:[24,40],iconAnchor:[12,20]})},initTileLayer(){this.tileLayer=import_leaflet.default.tileLayer(tileLayerUrl,{maxZoom,subdomains:subDomains,type:"map"}),this.map.addLayer(this.tileLayer)},initMapEvents(){this.map.on("draw:created",e=>this.drawCreated(e)),this.map.on("draw:editstart",e=>this.drawEditStart(e)),this.map.on("draw:editstop",e=>this.drawEditStop(e)),this.map.on("draw:edited",e=>this.drawEdited(e)),this.map.on("draw:deleted",e=>this.drawDeleted(e))},initDrawLayers(){this.drawnItems=new import_leaflet.default.FeatureGroup,this.map.addLayer(this.drawnItems);let state2=getStateUsing(statePath);state2!=null&&import_leaflet.default.geoJSON(state2?.geo_json??{}).getLayers().forEach(layer=>{this.drawnItems.addLayer(layer)})},isWithinBoundary(layer){return!0},initDrawToolbar(){this.drawControl&&this.map.removeControl(this.drawControl),this.drawControl=new import_leaflet.default.Control.Draw({edit:{featureGroup:this.drawnItems},draw:{marker:this.canDrawMarker(),polyline:this.canDrawPolygonLine(),polygon:this.canDrawPolygon(),rectangle:this.canDrawRectangle(),circle:this.canDrawCircle(),circlemarker:this.canDrawCircleMarker()}}),this.map.addControl(this.drawControl)},drawCreated(e){boundary&&!this.isWithinBoundary(e.layer)||(e.layer.setGeoJSONProperties({uuid:this.getUUID(),area:area(e.layer.toGeoJSON(11))}),this.drawnItems.addLayer(e.layer),this.updateState(),this.initDrawToolbar())},drawEditStart(e){this.cachedLayers=this.drawControl.options.edit.featureGroup.toGeoJSON(11)},drawEditStop(e){this.cachedLayers=null},drawEdited(e){this.updateState(),this.initDrawToolbar()},drawDeleted(e){this.updateState(),this.initDrawToolbar()},canDrawMarker(){if(!canDrawMarker||maxMarkers>0&&this.getMarkersCount()>=maxMarkers)return!1;let customMarker=import_leaflet.default.Icon.extend({options:{iconUrl:markerIcon,shadowUrl:markerShadowIcon,iconAnchor:new import_leaflet.default.Point(12,20),iconSize:new import_leaflet.default.Point(24,40)}});return{icon:new customMarker}},canDrawPolygon(){return canDrawPolygon?{shapeOptions:{color:"yellow"}}:!1},canDrawPolygonLine(){return canDrawPolygonLine},canDrawRectangle(){return canDrawRectangle},canDrawCircle(){return canDrawCircle},canDrawCircleMarker(){return canDrawCircleMarker},updateState(){if(this.getLayersCount()===0){setStateUsing(statePath,null);return}let data={latitude:0,longitude:0,geoJson:{}};if(this.getMarkersCount()>0){let marker=this.getMarkers();data.latitude=marker.getLatLng().lat,data.longitude=marker.getLatLng().lng}else{let coordinates=es_default6(this.drawnItems.toGeoJSON(11)).geometry.coordinates;data.latitude=coordinates[1],data.longitude=coordinates[0]}data.geoJson=this.drawnItems.toGeoJSON(),console.log(data),setStateUsing(statePath,data)},getMarkers(){return this.drawnItems.getLayers().find(function(layer){return layer instanceof import_leaflet.default.Marker})},getMarkersCount(){return this.drawnItems.getLayers().filter(function(layer){return layer instanceof import_leaflet.default.Marker}).length},getLayersCount(){return this.drawnItems.getLayers().length},initBoundary(){boundary&&(this.boundaryItems=new import_leaflet.default.FeatureGroup,console.log(boundary),this.boundaryItems=import_leaflet.default.geoJSON(boundary),this.map.addLayer(this.boundaryItems),this.boundaryControl=new import_leaflet.default.Control.Draw({edit:{edit:!1,remove:!1,featureGroup:this.boundaryItems},draw:{marker:!1,polyline:!1,polygon:!1,rectangle:!1,circle:!1,circlemarker:!1}}),this.map.addControl(this.boundaryControl))},addLayerProperties(){import_leaflet.default.Layer.include({setGeoJSONProperties:function(properties){var feature2=this.feature=this.feature||{};feature2.type="Feature",feature2.properties=properties},getGeoJSONProperties:function(properties){return this.feature&&this.feature.properties||{}}})},getUUID(){return v4_default()},getLayerUUID(layer){return layer.toGeoJSON(11).properties.uuid},setCachedLayer(uuid,layer){this.cachedLayers.forEach(l=>{l.uuid===uuid&&(l.layer=layer)})},getCachedLayer(uuid){return this.cachedLayers.find(layer=>layer.uuid===uuid).layer}}}export{filamentMapsField as default};
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

@turf/isolines/dist/es/index.js:
  (**
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)

@turf/isobands/dist/es/index.js:
  (*!
   * @license GNU Affero General Public License.
   * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
   * v. 1.2.0
   * https://github.com/RaumZeit/MarchingSquares.js
   *
   * MarchingSquaresJS is free software: you can redistribute it and/or modify
   * it under the terms of the GNU Affero General Public License as published by
   * the Free Software Foundation, either version 3 of the License, or
   * (at your option) any later version.
   *
   * MarchingSquaresJS is distributed in the hope that it will be useful,
   * but WITHOUT ANY WARRANTY; without even the implied warranty of
   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   * GNU Affero General Public License for more details.
   *
   * As additional permission under GNU Affero General Public License version 3
   * section 7, third-party projects (personal or commercial) may distribute,
   * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
   * requirement that said third-party project for that reason alone becomes
   * subject to any requirement of the GNU Affero General Public License version 3.
   * Any modifications to MarchingSquaresJS, however, must be shared with the public
   * and made available.
   *
   * In summary this:
   * - allows you to use MarchingSquaresJS at no cost
   * - allows you to use MarchingSquaresJS for both personal and commercial purposes
   * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
   *   license as long as this license notice is included
   * - enables you to keep the source code of your program that uses MarchingSquaresJS
   *   undisclosed
   * - forces you to share any modifications you have made to MarchingSquaresJS,
   *   e.g. bug-fixes
   *
   * You should have received a copy of the GNU Affero General Public License
   * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
   *)

splaytree/dist/splay.esm.js:
  (**
   * splaytree v3.1.2
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   *)
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
